define("home/config",[],function(){"use strict";return{appRoot:"/"}}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"!==n&&!oe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(pe.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return Z.call(t,e)>-1!==n})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return oe.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function r(){J.removeEventListener("DOMContentLoaded",r),e.removeEventListener("load",r),oe.ready()}function s(){this.expando=oe.expando+s.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Pe.test(n)?oe.parseJSON(n):n)}catch(e){}_e.set(e,t,n)}else n=void 0;return n}function c(e,t,n,i){var o,a=1,r=20,s=i?function(){return i.cur()}:function(){return oe.css(e,t,"")},l=s(),c=n&&n[3]||(oe.cssNumber[t]?"":"px"),u=(oe.cssNumber[t]||"px"!==c&&+l)&&Se.exec(oe.css(e,t));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{a=a||".5",u/=a,oe.style(e,t,u+c)}while(a!==(a=s()/l)&&1!==a&&--r)}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}function u(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function d(e,t){for(var n=0,i=e.length;n<i;n++)Ce.set(e[n],"globalEval",!t||Ce.get(t[n],"globalEval"))}function h(e,t,n,i,o){for(var a,r,s,l,c,h,m=t.createDocumentFragment(),p=[],f=0,g=e.length;f<g;f++)if((a=e[f])||0===a)if("object"===oe.type(a))oe.merge(p,a.nodeType?[a]:a);else if(Re.test(a)){for(r=r||m.appendChild(t.createElement("div")),s=(Ae.exec(a)||["",""])[1].toLowerCase(),l=Ne[s]||Ne._default,r.innerHTML=l[1]+oe.htmlPrefilter(a)+l[2],h=l[0];h--;)r=r.lastChild;oe.merge(p,r.childNodes),r=m.firstChild,r.textContent=""}else p.push(t.createTextNode(a));for(m.textContent="",f=0;a=p[f++];)if(i&&oe.inArray(a,i)>-1)o&&o.push(a);else if(c=oe.contains(a.ownerDocument,a),r=u(m.appendChild(a),"script"),c&&d(r),n)for(h=0;a=r[h++];)De.test(a.type||"")&&n.push(a);return m}function m(){return!0}function p(){return!1}function f(){try{return J.activeElement}catch(e){}}function g(e,t,n,i,o,a){var r,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)g(e,s,n,i,t[s],a);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=p;else if(!o)return e;return 1===a&&(r=o,o=function(e){return oe().off(e),r.apply(this,arguments)},o.guid=r.guid||(r.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,o,i,n)})}function v(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function y(e){var t=qe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){var n,i,o,a,r,s,l,c;if(1===t.nodeType){if(Ce.hasData(e)&&(a=Ce.access(e),r=Ce.set(t,a),c=a.events)){delete r.handle,r.events={};for(o in c)for(n=0,i=c[o].length;n<i;n++)oe.event.add(t,o,c[o][n])}_e.hasData(e)&&(s=_e.access(e),l=oe.extend({},s),_e.set(t,l))}}function x(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function k(e,t,n,i){t=X.apply([],t);var o,a,r,s,l,c,d=0,m=e.length,p=m-1,f=t[0],g=oe.isFunction(f);if(g||m>1&&"string"==typeof f&&!ie.checkClone&&He.test(f))return e.each(function(o){var a=e.eq(o);g&&(t[0]=f.call(this,o,a.html())),k(a,t,n,i)});if(m&&(o=h(t,e[0].ownerDocument,!1,e,i),a=o.firstChild,1===o.childNodes.length&&(o=a),a||i)){for(r=oe.map(u(o,"script"),b),s=r.length;d<m;d++)l=o,d!==p&&(l=oe.clone(l,!0,!0),s&&oe.merge(r,u(l,"script"))),n.call(e[d],l,d);if(s)for(c=r[r.length-1].ownerDocument,oe.map(r,y),d=0;d<s;d++)l=r[d],De.test(l.type||"")&&!Ce.access(l,"globalEval")&&oe.contains(c,l)&&(l.src?oe._evalUrl&&oe._evalUrl(l.src):oe.globalEval(l.textContent.replace(ze,"")))}return e}function C(e,t,n){for(var i,o=t?oe.filter(t,e):e,a=0;null!=(i=o[a]);a++)n||1!==i.nodeType||oe.cleanData(u(i)),i.parentNode&&(n&&oe.contains(i.ownerDocument,i)&&d(u(i,"script")),i.parentNode.removeChild(i));return e}function _(e,t){var n=oe(t.createElement(e)).appendTo(t.body),i=oe.css(n[0],"display");return n.detach(),i}function P(e){var t=J,n=Be[e];return n||(n=_(e,t),"none"!==n&&n||($e=($e||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=$e[0].contentDocument,t.write(),t.close(),n=_(e,t),$e.detach()),Be[e]=n),n}function T(e,t,n){var i,o,a,r,s=e.style;return n=n||Ye(e),r=n?n.getPropertyValue(t)||n[t]:void 0,""!==r&&void 0!==r||oe.contains(e.ownerDocument,e)||(r=oe.style(e,t)),n&&!ie.pixelMarginRight()&&Ge.test(r)&&We.test(t)&&(i=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=i,s.minWidth=o,s.maxWidth=a),void 0!==r?r+"":r}function O(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e){if(e in tt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=et.length;n--;)if((e=et[n]+t)in tt)return e}function E(e,t,n){var i=Se.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function F(e,t,n,i,o){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,r=0;a<4;a+=2)"margin"===n&&(r+=oe.css(e,n+Ee[a],!0,o)),i?("content"===n&&(r-=oe.css(e,"padding"+Ee[a],!0,o)),"margin"!==n&&(r-=oe.css(e,"border"+Ee[a]+"Width",!0,o))):(r+=oe.css(e,"padding"+Ee[a],!0,o),"padding"!==n&&(r+=oe.css(e,"border"+Ee[a]+"Width",!0,o)));return r}function M(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=Ye(e),r="border-box"===oe.css(e,"boxSizing",!1,a);if(o<=0||null==o){if(o=T(e,t,a),(o<0||null==o)&&(o=e.style[t]),Ge.test(o))return o;i=r&&(ie.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+F(e,t,n||(r?"border":"content"),i,a)+"px"}function A(e,t){for(var n,i,o,a=[],r=0,s=e.length;r<s;r++)i=e[r],i.style&&(a[r]=Ce.get(i,"olddisplay"),n=i.style.display,t?(a[r]||"none"!==n||(i.style.display=""),""===i.style.display&&Fe(i)&&(a[r]=Ce.access(i,"olddisplay",P(i.nodeName)))):(o=Fe(i),"none"===n&&o||Ce.set(i,"olddisplay",o?n:oe.css(i,"display"))));for(r=0;r<s;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[r]||"":"none"));return e}function D(e,t,n,i,o){return new D.prototype.init(e,t,n,i,o)}function N(){return e.setTimeout(function(){nt=void 0}),nt=oe.now()}function R(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)n=Ee[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function V(e,t,n){for(var i,o=(L.tweeners[t]||[]).concat(L.tweeners["*"]),a=0,r=o.length;a<r;a++)if(i=o[a].call(n,t,e))return i}function j(e,t,n){var i,o,a,r,s,l,c,u=this,d={},h=e.style,m=e.nodeType&&Fe(e),p=Ce.get(e,"fxshow");n.queue||(s=oe._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,oe.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=oe.css(e,"display"),"inline"===("none"===c?Ce.get(e,"olddisplay")||P(e.nodeName):c)&&"none"===oe.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],ot.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!p||void 0===p[i])continue;m=!0}d[i]=p&&p[i]||oe.style(e,i)}else c=void 0;if(oe.isEmptyObject(d))"inline"===("none"===c?P(e.nodeName):c)&&(h.display=c);else{p?"hidden"in p&&(m=p.hidden):p=Ce.access(e,"fxshow",{}),a&&(p.hidden=!m),m?oe(e).show():u.done(function(){oe(e).hide()}),u.done(function(){var t;Ce.remove(e,"fxshow");for(t in d)oe.style(e,t,d[t])});for(i in d)r=V(m?p[i]:0,i,u),i in p||(p[i]=r.start,m&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}}function I(e,t){var n,i,o,a,r;for(n in e)if(i=oe.camelCase(n),o=t[i],a=e[n],oe.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(r=oe.cssHooks[i])&&"expand"in r){a=r.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=o)}else t[i]=o}function L(e,t,n){var i,o,a=0,r=L.prefilters.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=nt||N(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,a=1-i,r=0,l=c.tweens.length;r<l;r++)c.tweens[r].run(a);return s.notifyWith(e,[c,a,n]),a<1&&l?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||N(),duration:n.duration,tweens:[],createTween:function(t,n){var i=oe.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(I(u,c.opts.specialEasing);a<r;a++)if(i=L.prefilters[a].call(c,e,u,c.opts))return oe.isFunction(i.stop)&&(oe._queueHooks(c.elem,c.opts.queue).stop=oe.proxy(i.stop,i)),i;return oe.map(u,V,c),oe.isFunction(c.opts.start)&&c.opts.start.call(e,c),oe.fx.timer(oe.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function U(e){return e.getAttribute&&e.getAttribute("class")||""}function H(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,a=t.toLowerCase().match(ye)||[];if(oe.isFunction(n))for(;i=a[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function q(e,t,n,i){function o(s){var l;return a[s]=!0,oe.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||r||a[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var a={},r=e===_t;return o(t.dataTypes[0])||!a["*"]&&o("*")}function z(e,t){var n,i,o=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&oe.extend(!0,e,i),e}function $(e,t,n){for(var i,o,a,r,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)a=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}r||(r=o)}a=a||r}if(a)return a!==l[0]&&l.unshift(a),n[a]}function B(e,t,n,i){var o,a,r,s,l,c={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=c[l+" "+a]||c["* "+a]))for(o in c)if(s=o.split(" "),s[1]===a&&(r=c[l+" "+s[0]]||c["* "+s[0]])){!0===r?r=c[o]:!0!==c[o]&&(a=s[0],u.unshift(s[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function W(e,t,n,i){var o;if(oe.isArray(t))oe.each(t,function(t,o){n||St.test(e)?i(e,o):W(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==oe.type(t))i(e,t);else for(o in t)W(e+"["+o+"]",t[o],n,i)}function G(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],J=e.document,K=Y.slice,X=Y.concat,Q=Y.push,Z=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},oe=function(e,t){return new oe.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,re=/^-ms-/,se=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:"2.2.4",constructor:oe,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:Y.sort,splice:Y.splice},oe.extend=oe.fn.extend=function(){var e,t,n,i,o,a,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"==typeof r||oe.isFunction(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=r[t],i=e[t],r!==i&&(c&&i&&(oe.isPlainObject(i)||(o=oe.isArray(i)))?(o?(o=!1,a=n&&oe.isArray(n)?n:[]):a=n&&oe.isPlainObject(n)?n:{},r[t]=oe.extend(c,a,i)):void 0!==i&&(r[t]=i));return r},oe.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&""+e;return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=oe.trim(e))&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(re,"ms-").replace(se,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;o<i&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?oe.merge(i,"string"==typeof e?[e]:e):Q.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,a=e.length,r=!n;o<a;o++)!t(e[o],o)!==r&&i.push(e[o]);return i},map:function(e,t,i){var o,a,r=0,s=[];if(n(e))for(o=e.length;r<o;r++)null!=(a=t(e[r],r,i))&&s.push(a);else for(r in e)null!=(a=t(e[r],r,i))&&s.push(a);return X.apply([],s)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e))return i=K.call(arguments,2),o=function(){return e.apply(t||this,i.concat(K.call(arguments)))},o.guid=e.guid=e.guid||oe.guid++,o},now:Date.now,support:ie}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=Y[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var o,a,r,s,c,d,h,m,p=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:I)!==F&&E(t),t=t||F,A)){if(11!==f&&(d=fe.exec(e)))if(o=d[1]){if(9===f){if(!(r=t.getElementById(o)))return n;if(r.id===o)return n.push(r),n}else if(p&&(r=p.getElementById(o))&&V(t,r)&&r.id===o)return n.push(r),n}else{if(d[2])return K.apply(n,t.getElementsByTagName(e)),n;if((o=d[3])&&y.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(o)),n}if(y.qsa&&!z[e+" "]&&(!D||!D.test(e))){if(1!==f)p=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ve,"\\$&"):t.setAttribute("id",s=j),h=C(e),a=h.length,c=ue.test(s)?"#"+s:"[id='"+s+"']";a--;)h[a]=c+" "+u(h[a]);m=h.join(","),p=ge.test(e)&&l(t.parentNode)||t}if(m)try{return K.apply(n,p.querySelectorAll(m)),n}catch(e){}finally{s===j&&t.removeAttribute("id")}}}return P(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[j]=!0,e}function o(e){var t=F.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=n.length;i--;)w.attrHandle[n[i]]=t}function r(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||B)-(~e.sourceIndex||B);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return i(function(t){return t=+t,i(function(n,i){for(var o,a=e([],n.length,t),r=a.length;r--;)n[o=a[r]]&&(n[o]=!(i[o]=n[o]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function u(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=U++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,a)}:function(t,n,r){var s,l,c,u=[L,a];if(r){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,r))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(c=t[j]||(t[j]={}),l=c[t.uniqueID]||(c[t.uniqueID]={}),(s=l[i])&&s[0]===L&&s[1]===a)return u[2]=s[2];if(l[i]=u,u[2]=e(t,n,r))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var o=0,a=n.length;o<a;o++)t(e,n[o],i);return i}function p(e,t,n,i,o){for(var a,r=[],s=0,l=e.length,c=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,i,o)||(r.push(a),c&&t.push(s)));return r}function f(e,t,n,o,a,r){return o&&!o[j]&&(o=f(o)),a&&!a[j]&&(a=f(a,r)),i(function(i,r,s,l){var c,u,d,h=[],f=[],g=r.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),b=!e||!i&&t?v:p(v,h,e,s,l),y=n?a||(i?e:g||o)?[]:r:b;if(n&&n(b,y,s,l),o)for(c=p(y,f),o(c,[],s,l),u=c.length;u--;)(d=c[u])&&(y[f[u]]=!(b[f[u]]=d));if(i){if(a||e){if(a){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(b[u]=d);a(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=a?Q(i,d):h[u])>-1&&(i[c]=!(r[c]=d))}}else y=p(y===r?y.splice(g,y.length):y),a?a(null,r,y,l):K.apply(r,y)})}function g(e){for(var t,n,i,o=e.length,a=w.relative[e[0].type],r=a||w.relative[" "],s=a?1:0,l=d(function(e){return e===t},r,!0),c=d(function(e){return Q(t,e)>-1},r,!0),m=[function(e,n,i){var o=!a&&(i||n!==T)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,o}];s<o;s++)if(n=w.relative[e[s].type])m=[d(h(m),n)];else{if(n=w.filter[e[s].type].apply(null,e[s].matches),n[j]){for(i=++s;i<o&&!w.relative[e[i].type];i++);return f(s>1&&h(m),s>1&&u(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ae,"$1"),n,s<i&&g(e.slice(s,i)),i<o&&g(e=e.slice(i)),i<o&&u(e))}m.push(n)}return h(m)}function v(e,n){var o=n.length>0,a=e.length>0,r=function(i,r,s,l,c){var u,d,h,m=0,f="0",g=i&&[],v=[],b=T,y=i||a&&w.find.TAG("*",c),x=L+=null==b?1:Math.random()||.1,k=y.length;for(c&&(T=r===F||r||c);f!==k&&null!=(u=y[f]);f++){if(a&&u){for(d=0,r||u.ownerDocument===F||(E(u),s=!A);h=e[d++];)if(h(u,r||F,s)){l.push(u);break}c&&(L=x)}o&&((u=!h&&u)&&m--,i&&g.push(u))}if(m+=f,o&&f!==m){for(d=0;h=n[d++];)h(g,v,r,s);if(i){if(m>0)for(;f--;)g[f]||v[f]||(v[f]=Y.call(l));v=p(v)}K.apply(l,v),c&&!i&&v.length>0&&m+n.length>1&&t.uniqueSort(l)}return c&&(L=x,T=b),g};return o?i(r):r}var b,y,w,x,k,C,_,P,T,O,S,E,F,M,A,D,N,R,V,j="sizzle"+1*new Date,I=e.document,L=0,U=0,H=n(),q=n(),z=n(),$=function(e,t){return e===t&&(S=!0),0},B=1<<31,W={}.hasOwnProperty,G=[],Y=G.pop,J=G.push,K=G.push,X=G.slice,Q=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ie=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",oe=RegExp(ee+"+","g"),ae=RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),re=RegExp("^"+ee+"*,"+ee+"*"),se=RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=RegExp(ie),ue=RegExp("^"+te+"$"),de={ID:RegExp("^#("+te+")"),CLASS:RegExp("^\\.("+te+")"),TAG:RegExp("^("+te+"|[*])"),ATTR:RegExp("^"+ne),PSEUDO:RegExp("^"+ie),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:RegExp("^(?:"+Z+")$","i"),needsContext:RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,pe=/^[^{]+\{\s*\[native \w/,fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=/'|\\/g,be=RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},we=function(){E()};try{K.apply(G=X.call(I.childNodes),I.childNodes)}catch(e){K={apply:G.length?function(e,t){J.apply(e,X.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}y=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},E=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:I;return i!==F&&9===i.nodeType&&i.documentElement?(F=i,M=F.documentElement,A=!k(F),(n=F.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),y.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=o(function(e){return e.appendChild(F.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=pe.test(F.getElementsByClassName),y.getById=o(function(e){return M.appendChild(e).id=j,!F.getElementsByName||!F.getElementsByName(j).length}),y.getById?(w.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var n=t.getElementById(e);return n?[n]:[]}},w.filter.ID=function(e){var t=e.replace(be,ye);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(be,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),w.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&i.push(n);return i}return a},w.find.CLASS=y.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&A)return t.getElementsByClassName(e)},N=[],D=[],(y.qsa=pe.test(F.querySelectorAll))&&(o(function(e){M.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+j+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||D.push(".#.+[+~]")}),o(function(e){var t=F.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(y.matchesSelector=pe.test(R=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(e){y.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),N.push("!=",ie)}),D=D.length&&RegExp(D.join("|")),N=N.length&&RegExp(N.join("|")),t=pe.test(M.compareDocumentPosition),V=t||pe.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return S=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===F||e.ownerDocument===I&&V(I,e)?-1:t===F||t.ownerDocument===I&&V(I,t)?1:O?Q(O,e)-Q(O,t):0:4&n?-1:1)}:function(e,t){if(e===t)return S=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!o||!a)return e===F?-1:t===F?1:o?-1:a?1:O?Q(O,e)-Q(O,t):0;if(o===a)return r(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?r(s[i],l[i]):s[i]===I?-1:l[i]===I?1:0},F):F},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==F&&E(e),n=n.replace(le,"='$1']"),y.matchesSelector&&A&&!z[n+" "]&&(!N||!N.test(n))&&(!D||!D.test(n)))try{var i=R.call(e,n);if(i||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,F,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==F&&E(e),V(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==F&&E(e);var n=w.attrHandle[t.toLowerCase()],i=n&&W.call(w.attrHandle,t.toLowerCase())?n(e,t,!A):void 0;return void 0!==i?i:y.attributes||!A?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!y.detectDuplicates,O=!y.sortStable&&e.slice(0),e.sort($),S){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return O=null,e},x=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},w=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(be,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var a=t.attr(o,e);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a.replace(oe," ")+" ").indexOf(i)>-1:"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,o){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,m,p,f=a!==r?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(g){if(a){for(;f;){for(h=t;h=h[f];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[r?g.firstChild:g.lastChild],r&&b){for(h=g,d=h[j]||(h[j]={}),u=d[h.uniqueID]||(d[h.uniqueID]={}),c=u[e]||[],m=c[0]===L&&c[1],y=m&&c[2],h=m&&g.childNodes[m];h=++m&&h&&h[f]||(y=m=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){u[e]=[L,m,y];break}}else if(b&&(h=t,d=h[j]||(h[j]={}),u=d[h.uniqueID]||(d[h.uniqueID]={}),c=u[e]||[],m=c[0]===L&&c[1],y=m),!1===y)for(;(h=++m&&h&&h[f]||(y=m=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(b&&(d=h[j]||(h[j]={}),u=d[h.uniqueID]||(d[h.uniqueID]={}),u[e]=[L,y]),h!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,n){var o,a=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[j]?a(n):a.length>1?(o=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=a(e,n),r=o.length;r--;)i=Q(e,o[r]),e[i]=!(t[i]=o[r])}):function(e){return a(e,0,o)}):a}},pseudos:{not:i(function(e){var t=[],n=[],o=_(e.replace(ae,"$1"));return o[j]?i(function(e,t,n,i){for(var a,r=o(e,null,i,[]),s=e.length;s--;)(a=r[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,o(t,null,a,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,ye),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return ue.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,ye).toLowerCase(),function(t){var n;do{if(n=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:s(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(e){
return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(b);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,C=t.tokenize=function(e,n){var i,o,a,r,s,l,c,u=q[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=w.preFilter;s;){i&&!(o=re.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(a=[])),i=!1,(o=se.exec(s))&&(i=o.shift(),a.push({value:i,type:o[0].replace(ae," ")}),s=s.slice(i.length));for(r in w.filter)!(o=de[r].exec(s))||c[r]&&!(o=c[r](o))||(i=o.shift(),a.push({value:i,type:r,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):q(e,l).slice(0)},_=t.compile=function(e,t){var n,i=[],o=[],a=z[e+" "];if(!a){for(t||(t=C(e)),n=t.length;n--;)a=g(t[n]),a[j]?i.push(a):o.push(a);a=z(e,v(o,i)),a.selector=e}return a},P=t.select=function(e,t,n,i){var o,a,r,s,c,d="function"==typeof e&&e,h=!i&&C(e=d.selector||e);if(n=n||[],1===h.length){if(a=h[0]=h[0].slice(0),a.length>2&&"ID"===(r=a[0]).type&&y.getById&&9===t.nodeType&&A&&w.relative[a[1].type]){if(!(t=(w.find.ID(r.matches[0].replace(be,ye),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=de.needsContext.test(e)?0:a.length;o--&&(r=a[o],!w.relative[s=r.type]);)if((c=w.find[s])&&(i=c(r.matches[0].replace(be,ye),ge.test(a[0].type)&&l(t.parentNode)||t))){if(a.splice(o,1),!(e=i.length&&u(a)))return K.apply(n,i),n;break}}return(d||_(e,h))(i,t,!A,n,!t||ge.test(e)&&l(t.parentNode)||t),n},y.sortStable=j.split("").sort($).join("")===j,y.detectDuplicates=!!S,E(),y.sortDetached=o(function(e){return 1&e.compareDocumentPosition(F.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(Z,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var ue=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&oe(e).is(n))break;i.push(e)}return i},de=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},he=oe.expr.match.needsContext,me=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?oe.find.matchesSelector(i,e)?[i]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;t<n;t++)if(oe.contains(o[t],this))return!0}));for(t=0;t<n;t++)oe.find(e,o[t],i);return i=this.pushStack(n>1?oe.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&he.test(e)?oe(e):e||[],!1).length}});var fe,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(oe.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||fe,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ge.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),me.test(i[1])&&oe.isPlainObject(t))for(i in t)oe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return o=J.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))}).prototype=oe.fn,fe=oe(J);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,a=[],r=he.test(e)||"string"!=typeof e?oe(e,t||this.context):0;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?oe.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?Z.call(oe(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue(e,"parentNode")},parentsUntil:function(e,t,n){return ue(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return ue(e,"nextSibling")},prevAll:function(e){return ue(e,"previousSibling")},nextUntil:function(e,t,n){return ue(e,"nextSibling",n)},prevUntil:function(e,t,n){return ue(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,i){var o=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(be[e]||oe.uniqueSort(o),ve.test(e)&&o.reverse()),this.pushStack(o)}});var ye=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?a(e):oe.extend({},e);var t,n,i,o,r=[],s=[],l=-1,c=function(){for(o=e.once,i=t=!0;s.length;l=-1)for(n=s.shift();++l<r.length;)!1===r[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},u={add:function(){return r&&(n&&!t&&(l=r.length-1,s.push(n)),function t(n){oe.each(n,function(n,i){oe.isFunction(i)?e.unique&&u.has(i)||r.push(i):i&&i.length&&"string"!==oe.type(i)&&t(i)})}(arguments),n&&!t&&c()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,r,n))>-1;)r.splice(n,1),n<=l&&l--}),this},has:function(e){return e?oe.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,a){var r=oe.isFunction(e[t])&&e[t];o[a[1]](function(){var e=r&&r.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,i):i}},o={};return i.pipe=i.then,oe.each(t,function(e,a){var r=a[2],s=a[3];i[a[1]]=r.add,s&&r.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?i:this,arguments),this},o[a[0]+"With"]=r.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,a=K.call(arguments),r=a.length,s=1!==r||e&&oe.isFunction(e.promise)?r:0,l=1===s?e:oe.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?K.call(arguments):o,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(r>1)for(t=Array(r),n=Array(r),i=Array(r);o<r;o++)a[o]&&oe.isFunction(a[o].promise)?a[o].promise().progress(c(o,n,t)).done(c(o,i,a)).fail(l.reject):--s;return s||l.resolveWith(i,a),l.promise()}});var we;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(!0===e?--oe.readyWait:oe.isReady)||(oe.isReady=!0,!0!==e&&--oe.readyWait>0||(we.resolveWith(J,[oe]),oe.fn.triggerHandler&&(oe(J).triggerHandler("ready"),oe(J).off("ready"))))}}),(oe.ready.promise=function(t){return we||(we=oe.Deferred(),"complete"===J.readyState||"loading"!==J.readyState&&!J.documentElement.doScroll?e.setTimeout(oe.ready):(J.addEventListener("DOMContentLoaded",r),e.addEventListener("load",r))),we.promise(t)})();var xe=function(e,t,n,i,o,a,r){var s=0,l=e.length,c=null==n;if("object"===oe.type(n)){o=!0;for(s in n)xe(e,t,s,n[s],!0,a,r)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(r=!0),c&&(r?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(oe(e),n)})),t))for(;s<l;s++)t(e[s],n,r?i:i.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):a},ke=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!ke(e))return{};var t=e[this.expando];return t||(t={},ke(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,a=e[this.expando];if(void 0!==a){if(void 0===t)this.register(e);else{oe.isArray(t)?i=t.concat(t.map(oe.camelCase)):(o=oe.camelCase(t),t in a?i=[t,o]:(i=o,i=i in a?[i]:i.match(ye)||[])),n=i.length;for(;n--;)delete a[i[n]]}(void 0===t||oe.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var Ce=new s,_e=new s,Pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/[A-Z]/g;oe.extend({hasData:function(e){return _e.hasData(e)||Ce.hasData(e)},data:function(e,t,n){return _e.access(e,t,n)},removeData:function(e,t){_e.remove(e,t)},_data:function(e,t,n){return Ce.access(e,t,n)},_removeData:function(e,t){Ce.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,i,o,a=this[0],r=a&&a.attributes;if(void 0===e){if(this.length&&(o=_e.get(a),1===a.nodeType&&!Ce.get(a,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&(i=r[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(a,i,o[i])));Ce.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){_e.set(this,e)}):xe(this,function(t){var n,i;if(a&&void 0===t){if(void 0!==(n=_e.get(a,e)||_e.get(a,e.replace(Te,"-$&").toLowerCase())))return n;if(i=oe.camelCase(e),void 0!==(n=_e.get(a,i)))return n;if(void 0!==(n=l(a,i,void 0)))return n}else i=oe.camelCase(e),this.each(function(){var n=_e.get(this,i);_e.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&_e.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){_e.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Ce.get(e,t),n&&(!i||oe.isArray(n)?i=Ce.access(e,t,oe.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),i=n.length,o=n.shift(),a=oe._queueHooks(e,t),r=function(){oe.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,r,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ce.get(e,n)||Ce.access(e,n,{empty:oe.Callbacks("once memory").add(function(){Ce.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=oe.Deferred(),a=this,r=this.length,s=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(n=Ce.get(a[r],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),Ee=["Top","Right","Bottom","Left"],Fe=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Me=/^(?:checkbox|radio)$/i,Ae=/<([\w:-]+)/,De=/^$|\/(?:java|ecma)script/i,Ne={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ne.optgroup=Ne.option,Ne.tbody=Ne.tfoot=Ne.colgroup=Ne.caption=Ne.thead,Ne.th=Ne.td;var Re=/<|&#?\w+;/;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ve=/^key/,je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ie=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,i,o){var a,r,s,l,c,u,d,h,m,p,f,g=Ce.get(e);if(g)for(n.handler&&(a=n,n=a.handler,o=a.selector),n.guid||(n.guid=oe.guid++),(l=g.events)||(l=g.events={}),(r=g.handle)||(r=g.handle=function(t){return void 0!==oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ye)||[""],c=t.length;c--;)s=Ie.exec(t[c])||[],m=f=s[1],p=(s[2]||"").split(".").sort(),m&&(d=oe.event.special[m]||{},m=(o?d.delegateType:d.bindType)||m,d=oe.event.special[m]||{},u=oe.extend({type:m,origType:f,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:p.join(".")},a),(h=l[m])||(h=l[m]=[],h.delegateCount=0,d.setup&&!1!==d.setup.call(e,i,p,r)||e.addEventListener&&e.addEventListener(m,r)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),oe.event.global[m]=!0)},remove:function(e,t,n,i,o){var a,r,s,l,c,u,d,h,m,p,f,g=Ce.hasData(e)&&Ce.get(e);if(g&&(l=g.events)){for(t=(t||"").match(ye)||[""],c=t.length;c--;)if(s=Ie.exec(t[c])||[],m=f=s[1],p=(s[2]||"").split(".").sort(),m){for(d=oe.event.special[m]||{},m=(i?d.delegateType:d.bindType)||m,h=l[m]||[],s=s[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=a=h.length;a--;)u=h[a],!o&&f!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(a,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));r&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||oe.removeEvent(e,m,g.handle),delete l[m])}else for(m in l)oe.event.remove(e,m+t[c],n,i,!0);oe.isEmptyObject(l)&&Ce.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,i,o,a,r=[],s=K.call(arguments),l=(Ce.get(this,"events")||{})[e.type]||[],c=oe.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(r=oe.event.handlers.call(this,e,l),t=0;(o=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,void 0!==(i=((oe.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,a,r=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<s;n++)a=t[n],o=a.selector+" ",void 0===i[o]&&(i[o]=a.needsContext?oe(o,this).index(l)>-1:oe.find(o,this,null,[l]).length),i[o]&&i.push(a);i.length&&r.push({elem:l,handlers:i})}return s<t.length&&r.push({elem:this,handlers:t.slice(s)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,i=n.documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,i,o=e.type,a=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=je.test(o)?this.mouseHooks:Ve.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new oe.Event(a),t=i.length;t--;)n=i[t],e[n]=a[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&oe.nodeName(this,"input"))return this.click(),!1},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){if(!(this instanceof oe.Event))return new oe.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?m:p):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),this[oe.expando]=!0},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=m,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=m,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=m,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===i||oe.contains(i,o))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,i){return g(this,e,t,n,i)},one:function(e,t,n,i){return g(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,oe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=p),this.each(function(){oe.event.remove(this,e,n,t)})}});var Le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ue=/<script|<style|<link/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^true\/(.*)/,ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(Le,"<$1></$2>")},clone:function(e,t,n){var i,o,a,r,s=e.cloneNode(!0),l=oe.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(r=u(s),a=u(e),i=0,o=a.length;i<o;i++)x(a[i],r[i]);if(t)if(n)for(a=a||u(e),r=r||u(s),i=0,o=a.length;i<o;i++)w(a[i],r[i]);else w(e,s);return r=u(s,"script"),r.length>0&&d(r,!l&&u(e,"script")),s},cleanData:function(e){for(var t,n,i,o=oe.event.special,a=0;void 0!==(n=e[a]);a++)if(ke(n)){if(t=n[Ce.expando]){if(t.events)for(i in t.events)o[i]?oe.event.remove(n,i):oe.removeEvent(n,i,t.handle);n[Ce.expando]=void 0}n[_e.expando]&&(n[_e.expando]=void 0)}}}),oe.fn.extend({domManip:k,detach:function(e){return C(this,e,!0)},remove:function(e){return C(this,e)},text:function(e){return xe(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){v(this,e).appendChild(e)}})},prepend:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(u(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return xe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ue.test(e)&&!Ne[(Ae.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(u(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return k(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(u(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,i=[],o=oe(e),a=o.length-1,r=0;r<=a;r++)n=r===a?this:this.clone(!0),oe(o[r])[t](n),Q.apply(i,n.get());return this.pushStack(i)}});var $e,Be={HTML:"block",BODY:"block"},We=/^margin/,Ge=RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),Ye=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Je=function(e,t,n,i){var o,a,r={};for(a in t)r[a]=e.style[a],e.style[a]=t[a];o=n.apply(e,i||[]);for(a in t)e.style[a]=r[a];return o},Ke=J.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ke.appendChild(r);var t=e.getComputedStyle(s);n="1%"!==t.top,a="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",o="4px"===t.marginRight,Ke.removeChild(r)}var n,i,o,a,r=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(s),oe.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),o},reliableMarginLeft:function(){return null==i&&t(),a},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Ke.appendChild(r),t=!parseFloat(e.getComputedStyle(n).marginRight),Ke.removeChild(r),s.removeChild(n),t}}))}();var Xe=/^(none|table(?!-c[ea]).+)/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"},et=["Webkit","O","Moz","ms"],tt=J.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=T(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,r,s=oe.camelCase(t),l=e.style;if(t=oe.cssProps[s]||(oe.cssProps[s]=S(s)||s),r=oe.cssHooks[t]||oe.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(o=r.get(e,!1,i))?o:l[t];a=typeof n,"string"===a&&(o=Se.exec(n))&&o[1]&&(n=c(e,t,o),a="number"),null!=n&&n===n&&("number"===a&&(n+=o&&o[3]||(oe.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(n=r.set(e,n,i))||(l[t]=n))}},css:function(e,t,n,i){var o,a,r,s=oe.camelCase(t);return t=oe.cssProps[s]||(oe.cssProps[s]=S(s)||s),r=oe.cssHooks[t]||oe.cssHooks[s],r&&"get"in r&&(o=r.get(e,!0,n)),void 0===o&&(o=T(e,t,i)),"normal"===o&&t in Ze&&(o=Ze[t]),""===n||n?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,i){if(n)return Xe.test(oe.css(e,"display"))&&0===e.offsetWidth?Je(e,Qe,function(){return M(e,t,i)}):M(e,t,i)},set:function(e,n,i){var o,a=i&&Ye(e),r=i&&F(e,t,i,"border-box"===oe.css(e,"boxSizing",!1,a),a);return r&&(o=Se.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),E(e,n,r)}}}),oe.cssHooks.marginLeft=O(ie.reliableMarginLeft,function(e,t){if(t)return(parseFloat(T(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),oe.cssHooks.marginRight=O(ie.reliableMarginRight,function(e,t){if(t)return Je(e,{display:"inline-block"},T,[e,"marginRight"])}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+Ee[i]+t]=a[i]||a[i-2]||a[0];return o}},We.test(e)||(oe.cssHooks[e+t].set=E)}),oe.fn.extend({css:function(e,t){return xe(this,function(e,t,n){var i,o,a={},r=0;if(oe.isArray(t)){for(i=Ye(e),o=t.length;r<o;r++)a[t[r]]=oe.css(e,t[r],!1,i);return a}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Fe(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=D,D.prototype={constructor:D,init:function(e,t,n,i,o,a){this.elem=e,this.prop=n,this.easing=o||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(oe.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.pos=t=this.options.duration?oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=D.prototype.init,oe.fx.step={};var nt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;oe.Animation=oe.extend(L,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return c(n.elem,e,Se.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(ye);for(var n,i=0,o=e.length;i<o;i++)n=e[i],L.tweeners[n]=L.tweeners[n]||[],L.tweeners[n].unshift(t)},prefilters:[j],prefilter:function(e,t){t?L.prefilters.unshift(e):L.prefilters.push(e)}}),oe.speed=function(e,t,n){var i=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Fe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=oe.isEmptyObject(e),a=oe.speed(t,n,i),r=function(){var t=L(this,oe.extend({},e),a);(o||Ce.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=oe.timers,r=Ce.get(this);if(o)r[o]&&r[o].stop&&i(r[o]);else for(o in r)r[o]&&r[o].stop&&at.test(o)&&i(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Ce.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],a=oe.timers,r=i?i.length:0;for(n.finish=!0,oe.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(R(t,!0),e,i,o)}}),oe.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(nt=oe.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),nt=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){it||(it=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(it),it=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){
return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var rt,st=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return xe(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?oe.prop(e,t,n):(1===a&&oe.isXMLDoc(e)||(t=t.toLowerCase(),o=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?rt:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=oe.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,a=t&&t.match(ye);if(a&&1===e.nodeType)for(;n=a[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),rt={set:function(e,t,n){return!1===t?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=st[t]||oe.find.attr;st[t]=function(e,t,i){var o,a;return i||(a=st[t],st[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,st[t]=a),o}});var lt=/^(?:input|select|textarea|button)$/i,ct=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return xe(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,o=oe.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):lt.test(e.nodeName)||ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(oe.propHooks.selected={get:function(e){return null},set:function(e){}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var ut=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,i,o,a,r,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,U(this)))});if("string"==typeof e&&e)for(t=e.match(ye)||[];n=this[l++];)if(o=U(n),i=1===n.nodeType&&(" "+o+" ").replace(ut," ")){for(r=0;a=t[r++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");s=oe.trim(i),o!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,o,a,r,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ye)||[];n=this[l++];)if(o=U(n),i=1===n.nodeType&&(" "+o+" ").replace(ut," ")){for(r=0;a=t[r++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");s=oe.trim(i),o!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(oe.isFunction(e)?function(n){oe(this).toggleClass(e.call(this,n,U(this),t),t)}:function(){var t,i,o,a;if("string"===n)for(i=0,o=oe(this),a=e.match(ye)||[];t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=U(this),t&&Ce.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ce.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+U(n)+" ").replace(ut," ").indexOf(t)>-1)return!0;return!1}});var dt=/\r/g,ht=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,i,o=this[0];{if(arguments.length)return i=oe.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,oe(this).val()):e,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(e){return null==e?"":e+""})),(t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return(t=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(dt,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,a="select-one"===e.type||o<0,r=a?null:[],s=a?o+1:i.length,l=o<0?s:a?o:0;l<s;l++)if(n=i[l],(n.selected||l===o)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),a)return t;r.push(t)}return r},set:function(e,t){for(var n,i,o=e.options,a=oe.makeArray(t),r=o.length;r--;)i=o[r],(i.selected=oe.inArray(oe.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){if(oe.isArray(t))return e.checked=oe.inArray(oe(e).val(),t)>-1}},ie.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,i,o){var a,r,s,l,c,u,d,h=[i||J],m=ne.call(t,"type")?t.type:t,p=ne.call(t,"namespace")?t.namespace.split("."):[];if(r=s=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!mt.test(m+oe.event.triggered)&&(m.indexOf(".")>-1&&(p=m.split("."),m=p.shift(),p.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[oe.expando]?t:new oe.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:oe.makeArray(n,[t]),d=oe.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!oe.isWindow(i)){for(l=d.delegateType||m,mt.test(l+m)||(r=r.parentNode);r;r=r.parentNode)h.push(r),s=r;s===(i.ownerDocument||J)&&h.push(s.defaultView||s.parentWindow||e)}for(a=0;(r=h[a++])&&!t.isPropagationStopped();)t.type=a>1?l:d.bindType||m,u=(Ce.get(r,"events")||{})[t.type]&&Ce.get(r,"handle"),u&&u.apply(r,n),(u=c&&r[c])&&u.apply&&ke(r)&&!1===(t.result=u.apply(r,n))&&t.preventDefault();return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),n)||!ke(i)||c&&oe.isFunction(i[m])&&!oe.isWindow(i)&&(s=i[c],s&&(i[c]=null),oe.event.triggered=m,i[m](),oe.event.triggered=void 0,s&&(i[c]=s)),t.result}},simulate:function(e,t,n){var i=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(i,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return oe.event.trigger(e,t,n,!0)}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),(ie.focusin="onfocusin"in e)||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=Ce.access(i,t);o||i.addEventListener(e,n,!0),Ce.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=Ce.access(i,t)-1;o?Ce.access(i,t,o):(i.removeEventListener(e,n,!0),Ce.remove(i,t))}}});var pt=e.location,ft=oe.now(),gt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var vt=/#.*$/,bt=/([?&])_=[^&]*/,yt=/^(.*?):[ \t]*([^\r\n]*)$/gm,wt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xt=/^(?:GET|HEAD)$/,kt=/^\/\//,Ct={},_t={},Pt="*/".concat("*"),Tt=J.createElement("a");Tt.href=pt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt.href,type:"GET",isLocal:wt.test(pt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Pt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,oe.ajaxSettings),t):z(oe.ajaxSettings,e)},ajaxPrefilter:H(Ct),ajaxTransport:H(_t),ajax:function(t,n){function i(t,n,i,s){var c,d,b,y,x,C=n;2!==w&&(w=2,l&&e.clearTimeout(l),o=void 0,r=s||"",k.readyState=t>0?4:0,c=t>=200&&t<300||304===t,i&&(y=$(h,k,i)),y=B(h,y,k,c),c?(h.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(oe.lastModified[a]=x),(x=k.getResponseHeader("etag"))&&(oe.etag[a]=x)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=y.state,d=y.data,b=y.error,c=!b)):(b=C,!t&&C||(C="error",t<0&&(t=0))),k.status=t,k.statusText=(n||C)+"",c?f.resolveWith(m,[d,C,k]):f.rejectWith(m,[k,C,b]),k.statusCode(v),v=void 0,u&&p.trigger(c?"ajaxSuccess":"ajaxError",[k,h,c?d:b]),g.fireWith(m,[k,C]),u&&(p.trigger("ajaxComplete",[k,h]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,a,r,s,l,c,u,d,h=oe.ajaxSetup({},n),m=h.context||h,p=h.context&&(m.nodeType||m.jquery)?oe(m):oe.event,f=oe.Deferred(),g=oe.Callbacks("once memory"),v=h.statusCode||{},b={},y={},w=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!s)for(s={};t=yt.exec(r);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?r:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,b[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||x;return o&&o.abort(t),i(0,t),this}};if(f.promise(k).complete=g.add,k.success=k.done,k.error=k.fail,h.url=((t||h.url||pt.href)+"").replace(vt,"").replace(kt,pt.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=oe.trim(h.dataType||"*").toLowerCase().match(ye)||[""],null==h.crossDomain){c=J.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Tt.protocol+"//"+Tt.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=oe.param(h.data,h.traditional)),q(Ct,h,n,k),2===w)return k;u=oe.event&&h.global,u&&0==oe.active++&&oe.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!xt.test(h.type),a=h.url,h.hasContent||(h.data&&(a=h.url+=(gt.test(a)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=bt.test(a)?a.replace(bt,"$1_="+ft++):a+(gt.test(a)?"&":"?")+"_="+ft++)),h.ifModified&&(oe.lastModified[a]&&k.setRequestHeader("If-Modified-Since",oe.lastModified[a]),oe.etag[a]&&k.setRequestHeader("If-None-Match",oe.etag[a])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Pt+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)k.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(m,k,h)||2===w))return k.abort();x="abort";for(d in{success:1,error:1,complete:1})k[d](h[d]);if(o=q(_t,h,n,k)){if(k.readyState=1,u&&p.trigger("ajaxSend",[k,h]),2===w)return k;h.async&&h.timeout>0&&(l=e.setTimeout(function(){k.abort("timeout")},h.timeout));try{w=1,o.send(b,i)}catch(e){if(!(w<2))throw e;i(-1,e)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:o,data:n,success:i},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(oe.isFunction(e)?function(t){oe(this).wrapInner(e.call(this,t))}:function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Ot=/%20/g,St=/\[\]$/,Et=/\r?\n/g,Ft=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,i=[],o=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){o(this.name,this.value)});else for(n in e)W(n,e[n],t,o);return i.join("&").replace(Ot,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Mt.test(this.nodeName)&&!Ft.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var At={0:200,1223:204},Dt=oe.ajaxSettings.xhr();ie.cors=!!Dt&&"withCredentials"in Dt,ie.ajax=Dt=!!Dt,oe.ajaxTransport(function(t){var n,i;if(ie.cors||Dt&&!t.crossDomain)return{send:function(o,a){var r,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(r in o)s.setRequestHeader(r,o[r]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(At[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Nt=[],Rt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||oe.expando+"_"+ft++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,i){var o,a,r,s=!1!==t.jsonp&&(Rt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Rt,"$1"+o):!1!==t.jsonp&&(t.url+=(gt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||oe.error(o+" was not called"),r[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){r=arguments},i.always(function(){void 0===a?oe(e).removeProp(o):e[o]=a,t[o]&&(t.jsonpCallback=n.jsonpCallback,Nt.push(o)),r&&oe.isFunction(a)&&a(r[0]),r=a=void 0}),"script"}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=me.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=h([e],t,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var Vt=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Vt)return Vt.apply(this,arguments);var i,o,a,r=this,s=e.indexOf(" ");return s>-1&&(i=oe.trim(e.slice(s)),e=e.slice(0,s)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&oe.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){a=arguments,r.html(i?oe("<div>").append(oe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){r.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var i,o,a,r,s,l,c,u=oe.css(e,"position"),d=oe(e),h={};"static"===u&&(e.style.position="relative"),s=d.offset(),a=oe.css(e,"top"),l=oe.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1,c?(i=d.position(),r=i.top,o=i.left):(r=parseFloat(a)||0,o=parseFloat(l)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},s))),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):d.css(h)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},a=i&&i.ownerDocument;if(a)return t=a.documentElement,oe.contains(t,i)?(o=i.getBoundingClientRect(),n=G(a),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(i=e.offset()),i.top+=oe.css(e[0],"borderTopWidth",!0),i.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-oe.css(n,"marginTop",!0),left:t.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ke})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(i){return xe(this,function(e,i,o){var a=G(e);if(void 0===o)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[i]=o},e,i,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=O(ie.pixelPosition,function(e,n){if(n)return n=T(e,t),Ge.test(n)?oe(e).position()[t]+"px":n})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){oe.fn[i]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),r=n||(!0===i||!0===o?"margin":"border");return xe(this,function(t,n,i){var o;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?oe.css(t,n,r):oe.style(t,n,i,r)},t,a?i:void 0,a,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var jt=e.jQuery,It=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=It),t&&e.jQuery===oe&&(e.jQuery=jt),oe},t||(e.jQuery=e.$=oe),oe}),function(){function e(e){function t(t,n,i,o,a,r){for(;a>=0&&a<r;a+=e){var s=o?o[a]:a;i=n(i,t[s],s,t)}return i}return function(n,i,o,a){i=y(i,a,4);var r=!T(n)&&b.keys(n),s=(r||n).length,l=e>0?0:s-1;return arguments.length<3&&(o=n[r?r[l]:l],l+=e),t(n,i,o,r,l,s)}}function t(e){return function(t,n,i){n=w(n,i);for(var o=P(t),a=e>0?0:o-1;a>=0&&a<o;a+=e)if(n(t[a],a,t))return a;return-1}}function n(e,t,n){return function(i,o,a){var r=0,s=P(i);if("number"==typeof a)e>0?r=a>=0?a:Math.max(a+s,r):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return a=n(i,o),i[a]===o?a:-1;if(o!==o)return a=t(u.call(i,r,s),b.isNaN),a>=0?a+r:-1;for(a=e>0?r:s-1;a>=0&&a<s;a+=e)if(i[a]===o)return a;return-1}}function i(e,t){var n=M.length,i=e.constructor,o=b.isFunction(i)&&i.prototype||s,a="constructor";for(b.has(e,a)&&!b.contains(t,a)&&t.push(a);n--;)(a=M[n])in e&&e[a]!==o[a]&&!b.contains(t,a)&&t.push(a)}var o=this,a=o._,r=Array.prototype,s=Object.prototype,l=Function.prototype,c=r.push,u=r.slice,d=s.toString,h=s.hasOwnProperty,m=Array.isArray,p=Object.keys,f=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):o._=b,b.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,a){return e.call(t,n,i,o,a)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?y(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var x=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var o=1;o<i;o++)for(var a=arguments[o],r=e(a),s=r.length,l=0;l<s;l++){var c=r[l];t&&void 0!==n[c]||(n[c]=a[c])}return n}},k=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},_=Math.pow(2,53)-1,P=C("length"),T=function(e){var t=P(e);return"number"==typeof t&&t>=0&&t<=_};b.each=b.forEach=function(e,t,n){t=y(t,n);var i,o;if(T(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var a=b.keys(e);for(i=0,o=a.length;i<o;i++)t(e[a[i]],a[i],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var i=!T(e)&&b.keys(e),o=(i||e).length,a=Array(o),r=0;r<o;r++){var s=i?i[r]:r;a[r]=t(e[s],s,e)}return a},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var i;if(void 0!==(i=T(e)?b.findIndex(e,t,n):b.findKey(e,t,n))&&-1!==i)return e[i]},b.filter=b.select=function(e,t,n){var i=[];return t=w(t,n),b.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var i=!T(e)&&b.keys(e),o=(i||e).length,a=0;a<o;a++){var r=i?i[a]:a;if(!t(e[r],r,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var i=!T(e)&&b.keys(e),o=(i||e).length,a=0;a<o;a++){var r=i?i[a]:a;if(t(e[r],r,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,i){return T(e)||(e=b.values(e)),("number"!=typeof n||i)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=u.call(arguments,2),i=b.isFunction(t);return b.map(e,function(e){var o=i?t:e[t];return null==o?o:o.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var i,o,a=-1/0,r=-1/0;if(null==t&&null!=e){e=T(e)?e:b.values(e);for(var s=0,l=e.length;s<l;s++)(i=e[s])>a&&(a=i)}else t=w(t,n),b.each(e,function(e,n,i){((o=t(e,n,i))>r||o===-1/0&&a===-1/0)&&(a=e,r=o)});return a},b.min=function(e,t,n){var i,o,a=1/0,r=1/0;if(null==t&&null!=e){e=T(e)?e:b.values(e);for(var s=0,l=e.length;s<l;s++)(i=e[s])<a&&(a=i)}else t=w(t,n),b.each(e,function(e,n,i){((o=t(e,n,i))<r||o===1/0&&a===1/0)&&(a=e,r=o)});return a},b.shuffle=function(e){for(var t,n=T(e)?e:b.values(e),i=n.length,o=Array(i),a=0;a<i;a++)t=b.random(0,a),t!==a&&(o[a]=o[t]),o[t]=n[a];return o},b.sample=function(e,t,n){return null==t||n?(T(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var O=function(e){return function(t,n,i){var o={};return n=w(n,i),b.each(t,function(i,a){var r=n(i,a,t);e(o,i,r)}),o}};b.groupBy=O(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=O(function(e,t,n){e[n]=t}),b.countBy=O(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?u.call(e):T(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:T(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var i=[],o=[];return b.each(e,function(e,n,a){(t(e,n,a)?i:o).push(e)}),[i,o]},b.first=b.head=b.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var S=function(e,t,n,i){for(var o=[],a=0,r=i||0,s=P(e);r<s;r++){var l=e[r];if(T(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=S(l,t,n));var c=0,u=l.length;for(o.length+=u;c<u;)o[a++]=l[c++]}else n||(o[a++]=l)}return o};b.flatten=function(e,t){return S(e,t,!1)},b.without=function(e){return b.difference(e,u.call(arguments,1))},b.uniq=b.unique=function(e,t,n,i){b.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var o=[],a=[],r=0,s=P(e);r<s;r++){var l=e[r],c=n?n(l,r,e):l;t?(r&&a===c||o.push(l),a=c):n?b.contains(a,c)||(a.push(c),o.push(l)):b.contains(o,l)||o.push(l)}return o},b.union=function(){return b.uniq(S(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=P(e);i<o;i++){var a=e[i];if(!b.contains(t,a)){for(var r=1;r<n&&b.contains(arguments[r],a);r++);r===n&&t.push(a)}}return t},b.difference=function(e){var t=S(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,P).length||0,n=Array(t),i=0;i<t;i++)n[i]=b.pluck(e,i);return n},b.object=function(e,t){for(var n={},i=0,o=P(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,i){n=w(n,i,1);for(var o=n(t),a=0,r=P(e);a<r;){var s=Math.floor((a+r)/2);n(e[s])<o?a=s+1:r=s}return a},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),a=0;a<i;a++,e+=n)o[a]=e;return o};var E=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var a=k(e.prototype),r=e.apply(a,o);return b.isObject(r)?r:a};b.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,u.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return E(e,i,t,this,n.concat(u.call(arguments)))};return i},b.partial=function(e){var t=u.call(arguments,1),n=function(){for(var i=0,o=t.length,a=Array(o),r=0;r<o;r++)a[r]=t[r]===b?arguments[i++]:t[r];for(;i<arguments.length;)a.push(arguments[i++]);return E(e,n,this,this,a)};return n},b.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw Error("bindAll must be passed function names");for(t=1;t<i;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(i){var o=n.cache,a=""+(t?t.apply(this,arguments):i);return b.has(o,a)||(o[a]=e.apply(this,arguments)),o[a]};return n.cache={},n},b.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var i,o,a,r=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:b.now(),r=null,a=e.apply(i,o),r||(i=o=null)};return function(){var c=b.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,u)),a}},b.debounce=function(e,t,n){var i,o,a,r,s,l=function(){var c=b.now()-r;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,r=b.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(a,o),a=o=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},b.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},b.once=b.partial(b.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return F&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return F&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i},b.mapObject=function(e,t,n){t=w(t,n);for(var i,o=b.keys(e),a=o.length,r={},s=0;s<a;s++)i=o[s],r[i]=t(e[i],i,e);return r},b.pairs=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i},b.invert=function(e){for(var t={},n=b.keys(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=x(b.allKeys),b.extendOwn=b.assign=x(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var i,o=b.keys(e),a=0,r=o.length;a<r;a++)if(i=o[a],t(e[i],i,e))return i},b.pick=function(e,t,n){var i,o,a={},r=e;if(null==r)return a
;b.isFunction(t)?(o=b.allKeys(r),i=y(t,n)):(o=S(arguments,!1,!1,1),i=function(e,t,n){return t in n},r=Object(r));for(var s=0,l=o.length;s<l;s++){var c=o[s],u=r[c];i(u,c,r)&&(a[c]=u)}return a},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var i=b.map(S(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(i,t)}}return b.pick(e,t,n)},b.defaults=x(b.allKeys,!0),b.create=function(e,t){var n=k(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),a=0;a<i;a++){var r=n[a];if(t[r]!==o[r]||!(r in o))return!1}return!0};var A=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,s=t.constructor;if(r!==s&&!(b.isFunction(r)&&r instanceof r&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!A(e[l],t[l],n,i))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!A(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};b.isEqual=function(e,t){return A(e,t)},b.isEmpty=function(e){return null==e||(T(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=m||function(e){return"[object Array]"===d.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return o._=a,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=C,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=b.invert(D),R=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};b.escape=R(D),b.unescape=R(N),b.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),b.isFunction(i)?i.call(e):i};var V=0;b.uniqueId=function(e){var t=++V+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+I[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var i=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,i,r,s){return a+=e.slice(o,s).replace(L,U),o=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var r=Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return r.call(this,e,b)};return s.source="function("+(t.variable||"obj")+"){\n"+a+"}",s},b.chain=function(e){var t=b(e);return t._chain=!0,t};var H=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),H(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],H(this,n)}}),b.each(["concat","join","slice"],function(e){var t=r[e];b.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),define("home/utils/layoutUtils",["jquery","underscore"],function(e,t){"use strict";var n=t.memoize(function(){return e("[data-role=nav-view]").outerHeight()}),i={};return i.isElementInViewport=function(e){var t=n(),i=e[0].getBoundingClientRect(),o=i.top>0?i.top:0,a=i.left>0?i.left:0;return i.bottom>=t&&i.right>=0&&window.matchMedia("(min-height: "+o+"px) and (min-width: "+a+"px)").matches},i.isNarrowLayout=function(){return!window.matchMedia("(min-width: 480px)").matches},i}),window.Modernizr=function(e,t,n){function i(e){f.cssText=e}function o(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function r(e,t){for(var i in e){var o=e[i];if(!a(o,"-")&&f[o]!==n)return"pfx"!=t||o}return!1}function s(e,t,i){for(var a in e){var r=t[e[a]];if(r!==n)return!1===i?e[a]:o(r,"function")?r.bind(i||t):r}return!1}function l(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+b.join(i+" ")+i).split(" ");return o(t,"string")||o(t,"undefined")?r(a,t):(a=(e+" "+y.join(i+" ")+i).split(" "),s(a,t,n))}var c,u,d={},h=t.documentElement,m="modernizr",p=t.createElement(m),f=p.style,g=" -webkit- -moz- -o- -ms- ".split(" "),v="Webkit Moz O ms",b=v.split(" "),y=v.toLowerCase().split(" "),w={},x=[],k=x.slice,C=function(e,n,i,o){var a,r,s,l,c=t.createElement("div"),u=t.body,d=u||t.createElement("body");if(parseInt(i,10))for(;i--;)s=t.createElement("div"),s.id=o?o[i]:m+(i+1),c.appendChild(s);return a='&#173;<style id="smodernizr">'+e+"</style>",c.id=m,(u?c:d).innerHTML+=a,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=h.style.overflow,h.style.overflow="hidden",h.appendChild(d)),r=n(c,e),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),h.style.overflow=l),!!r},_={}.hasOwnProperty;u=o(_,"undefined")||o(_.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return _.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=k.call(arguments,1),i=function(){if(this instanceof i){var o=function(){};o.prototype=t.prototype;var a=new o,r=t.apply(a,n.concat(k.call(arguments)));return Object(r)===r?r:a}return t.apply(e,n.concat(k.call(arguments)))};return i}),w.flexbox=function(){return l("flexWrap")},w.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:C("@media ("+g.join("touch-enabled),(")+"modernizr){#modernizr{top:9px;position:absolute}}",function(e){n=9===e.offsetTop}),n},w.history=function(){return!(!e.history||!history.pushState)},w.localstorage=function(){try{return localStorage.setItem(m,m),localStorage.removeItem(m),!0}catch(e){return!1}};for(var P in w)u(w,P)&&(c=P.toLowerCase(),d[c]=w[P](),x.push((d[c]?"":"no-")+c));return d.addTest=function(e,t){if("object"==typeof e)for(var i in e)u(e,i)&&d.addTest(i,e[i]);else{if(e=e.toLowerCase(),d[e]!==n)return d;t="function"==typeof t?t():t,n!==!0&&(h.className+=" "+(t?"":"no-")+e),d[e]=t}return d},i(""),p=null,function(e,t){function i(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function o(){var e=b.elements;return"string"==typeof e?e.split(" "):e}function a(e){var t=v[e[f]];return t||(t={},g++,e[f]=g,v[g]=t),t}function r(e,n,i){if(n||(n=t),d)return n.createElement(e);i||(i=a(n));var o;return o=i.cache[e]?i.cache[e].cloneNode():p.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!o.canHaveChildren||m.test(e)||o.tagUrn?o:i.frag.appendChild(o)}function s(e,n){if(e||(e=t),d)return e.createDocumentFragment();n=n||a(e);for(var i=n.frag.cloneNode(),r=0,s=o(),l=s.length;r<l;r++)i.createElement(s[r]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return b.shivMethods?r(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+o().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(b,t.frag)}function c(e){e||(e=t);var n=a(e);return!b.shivCSS||u||n.hasCSS||(n.hasCSS=!!i(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||l(e,n),e}var u,d,h=e.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",g=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",u="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return n===e.cloneNode||n===e.createDocumentFragment||n===e.createElement}()}catch(e){u=!0,d=!0}}();var b={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==h.shivCSS,supportsUnknownElements:d,shivMethods:!1!==h.shivMethods,type:"default",shivDocument:c,createElement:r,createDocumentFragment:s};e.html5=b,c(t)}(this,t),d._version="2.8.3",d._prefixes=g,d._domPrefixes=y,d._cssomPrefixes=b,d.testProp=function(e){return r([e])},d.testAllProps=l,d.testStyles=C,h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+x.join(" "),d}(this,this.document),function(e,t,n){function i(e){return"[object Function]"==g.call(e)}function o(e){return"string"==typeof e}function a(){}function r(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();b=1,e?e.t?p(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):b=0}function l(e,n,i,o,a,l,c){function u(t){if(!m&&r(d.readyState)&&(y.r=m=1,!b&&s(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&p(function(){x.removeChild(d)},50);for(var i in T[n])T[n].hasOwnProperty(i)&&T[n][i].onload()}}var c=c||h.errorTimeout,d=t.createElement(e),m=0,g=0,y={t:i,s:n,e:a,a:l,x:c};1===T[n]&&(g=1,T[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,g)},v.splice(o,0,y),"img"!=e&&(g||2===T[n]?(x.insertBefore(d,w?null:f),p(u,c)):T[n].push(d))}function c(e,t,n,i,a){return b=0,t=t||"j",o(e)?l("c"==t?C:k,e,t,this.i++,n,i,a):(v.splice(this.i++,0,e),1==v.length&&s()),this}function u(){var e=h;return e.loader={load:c,i:0},e}var d,h,m=t.documentElement,p=e.setTimeout,f=t.getElementsByTagName("script")[0],g={}.toString,v=[],b=0,y="MozAppearance"in m.style,w=y&&!!t.createRange().compareNode,x=w?m:f.parentNode,m=e.opera&&"[object Opera]"==g.call(e.opera),m=!!t.attachEvent&&!m,k=y?"object":m?"script":"img",C=m?"script":k,_=Array.isArray||function(e){return"[object Array]"==g.call(e)},P=[],T={},O={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,n,i,e=e.split("!"),o=P.length,a=e.pop(),r=e.length,a={url:a,origUrl:a,prefixes:e};for(n=0;n<r;n++)i=e[n].split("="),(t=O[i.shift()])&&(a=t(a,i));for(n=0;n<o;n++)a=P[n](a);return a}function r(e,o,a,r,s){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=i(o)?o:o[e]||o[r]||o[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,o,a,r,s):(T[l.url]?l.noexec=!0:T[l.url]=1,a.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(o)||i(c))&&a.load(function(){u(),o&&o(l.origUrl,s,r),c&&c(l.origUrl,s,r),T[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(o(e))n||(d=function(){var e=[].slice.call(arguments);h.apply(this,e),m()}),r(e,d,t,0,c);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(i(d)?d=function(){var e=[].slice.call(arguments);h.apply(this,e),m()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),m()}}(h[l])),r(e[l],d,t,l,c))}else!n&&m()}var s,l,c=!!e.test,u=e.load||e.both,d=e.callback||a,h=d,m=e.complete||a;n(c?e.yep:e.nope,!!u),u&&n(u)}var l,c,d=this.yepnope.loader;if(o(e))r(e,0,d,0);else if(_(e))for(l=0;l<e.length;l++)c=e[l],o(c)?r(c,0,d,0):_(c)?h(c):Object(c)===c&&s(c,d);else Object(e)===e&&s(e,d)},h.addPrefix=function(e,t){O[e]=t},h.addFilter=function(e){P.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,i,o,l,c){var u,d,m=t.createElement("script"),o=o||h.errorTimeout;m.src=e;for(d in i)m.setAttribute(d,i[d]);n=c?s:n||a,m.onreadystatechange=m.onload=function(){!u&&r(m.readyState)&&(u=1,n(),m.onload=m.onreadystatechange=null)},p(function(){u||(u=1,n(1))},o),l?m.onload():f.parentNode.insertBefore(m,f)},e.yepnope.injectCss=function(e,n,i,o,r,l){var c,o=t.createElement("link"),n=l?s:n||a;o.href=e,o.rel="stylesheet",o.type="text/css";for(c in i)o.setAttribute(c,i[c]);r||(f.parentNode.insertBefore(o,f),p(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("contenteditable","contentEditable"in document.documentElement),define("modernizr",function(e){return function(){return e.Modernizr}}(this)),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,o){e.Backbone=t(e,o,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var o=e.Backbone,a=[],r=a.slice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){return c(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var o=this,a=n.once(function(){o.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,i)},off:function(e,t,i){var o,a,r,s,l,u,d,h;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(s=e?[e]:n.keys(this._events),l=0,u=s.length;l<u;l++)if(e=s[l],r=this._events[e]){if(this._events[e]=o=[],t||i)for(d=0,h=r.length;d<h;d++)a=r[d],(t&&t!==a.callback&&t!==a.callback._callback||i&&i!==a.context)&&o.push(a);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(n,t),i&&u(i,arguments),this},stopListening:function(e,t,i){var o=this._listeningTo;if(!o)return this;var a=!t&&!i;i||"object"!=typeof t||(i=this),e&&((o={})[e._listenId]=e);for(var r in o)e=o[r],e.off(t,i,this),(a||n.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),r=0,s=a.length;r<s;r++)e[t].apply(e,[a[r]].concat(i));return!1}return!0},u=function(e,t){var n,i=-1,o=e.length,a=t[0],r=t[1],s=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,a,r,s);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t);return}};n.each({listenTo:"on",listenToOnce:"once"},function(e,t){s[t]=function(t,i,o){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=n.uniqueId("l"))]=t,o||"object"!=typeof i||(o=this),t[e](i,o,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var d=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var o,a,r,s,l,c,u,d;if(null==e)return this;if("object"==typeof e?(a=e,i=t):(a={})[e]=t,i||(i={}),!this._validate(a,i))return!1;r=i.unset,l=i.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);for(o in a)t=a[o],n.isEqual(d[o],t)||s.push(o),n.isEqual(u[o],t)?delete this.changed[o]:this.changed[o]=t,r?delete d[o]:d[o]=t;if(!l){s.length&&(this._pending=i);for(var h=0,m=s.length;h<m;h++)this.trigger("change:"+s[h],this,d[s[h]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(var a in e)n.isEqual(o[a],t=e[a])||((i||(i={}))[a]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;i&&i(t,n,e),t.trigger("sync",t,n,e)},A(this,e),this.sync("read",this,e)},save:function(e,t,i){var o,a,r,s=this.attributes;if(null==e||"object"==typeof e?(o=e,i=t):(o={})[e]=t,i=n.extend({validate:!0},i),o&&!i.wait){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;o&&i.wait&&(this.attributes=n.extend({},s,o)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=s;var t=l.parse(e,i);if(i.wait&&(t=n.extend(o||{},t)),n.isObject(t)&&!l.set(t,i))return!1;c&&c(l,e,i),l.trigger("sync",l,e,i)},A(this,i),a=this.isNew()?"create":i.patch?"patch":"update","patch"===a&&(i.attrs=o),r=this.sync(a,this,i),o&&i.wait&&(this.attributes=s),r},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&o(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;A(this,e);var a=this.sync("delete",this,e);return e.wait||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||M();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}}),n.each(["keys","values","pairs","invert","pick","omit"],function(e){d.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var h=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},p={add:!0,remove:!1};n.extend(h.prototype,s,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,p))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var o,a,r,s;for(o=0,a=e.length;o<a;o++)(s=e[o]=this.get(e[o]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,t.silent||(t.index=r,s.trigger("remove",s,this,t)),this._removeReference(s,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var o,a,r,s,l,c,u,h=t.at,p=this.model,f=this.comparator&&null==h&&!1!==t.sort,g=n.isString(this.comparator)?this.comparator:null,v=[],b=[],y={},w=t.add,x=t.merge,k=t.remove,C=!(f||!w||!k)&&[];for(o=0,a=e.length;o<a;o++){if(l=e[o]||{},r=l instanceof d?s=l:l[p.prototype.idAttribute||"id"],c=this.get(r))k&&(y[c.cid]=!0),x&&(l=l===s?s.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!u&&c.hasChanged(g)&&(u=!0)),e[o]=c;else if(w){if(!(s=e[o]=this._prepareModel(l,t)))continue;v.push(s),this._addReference(s,t)}s=c||s,!C||!s.isNew()&&y[s.id]||C.push(s),y[s.id]=!0}if(k){for(o=0,a=this.length;o<a;++o)y[(s=this.models[o]).cid]||b.push(s);b.length&&this.remove(b,t)}if(v.length||C&&C.length)if(f&&(u=!0),this.length+=v.length,null!=h)for(o=0,a=v.length;o<a;o++)this.models.splice(h+o,0,v[o]);else{C&&(this.models.length=0);var _=C||v;for(o=0,a=_.length;o<a;o++)this.models.push(_[o])}if(u&&this.sort({silent:!0}),!t.silent){for(o=0,a=v.length;o<a;o++)(s=v[o]).trigger("add",s,this,t);(u||C&&C.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,o=this.models.length;i<o;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){i[e.reset?"reset":"set"](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},A(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,o=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),o&&o(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}}),n.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}}),n.each(["groupBy","countBy","sortBy","indexBy"],function(e){h.prototype[e]=function(t,i){var o=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,o,i)}});var f=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},g=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];n.extend(f.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var o=t.match(g),a=o[1],r=o[2];i=n.bind(i,this),a+=".delegateEvents"+this.cid,""===r?this.$el.on(a,i):this.$el.on(a,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));this.setElement(t.$("<"+n.result(this,"tagName")+">").attr(e),!1)}}}),t.sync=function(e,i,o){var a=y[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:a,dataType:"json"};if(o.url||(r.url=n.result(i,"url")||M()),null!=o.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){r.type="POST",o.emulateJSON&&(r.data._method=a);var s=o.beforeSend;o.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),s)return s.apply(this,arguments)}}"GET"===r.type||o.emulateJSON||(r.processData=!1),"PATCH"===r.type&&b&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(n.extend(r,o));return i.trigger("request",i,l,o),l};var b=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),y={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var w=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,C=/\*\w+/g,_=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(w.prototype,s,{initialize:function(){},route:function(e,i,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var a=this;return t.history.route(e,function(n){var r=a._extractParameters(e,n);a.execute(o,r),a.trigger.apply(a,["route:"+i].concat(r)),a.trigger("route",i,r),t.history.trigger("route",a,i,r)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(_,"\\$&").replace(x,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/?]+)"}).replace(C,"([^?]*?)"),RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var P=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,S=/msie [\w.]+/,E=/\/$/,F=/#.*$/;P.started=!1,n.extend(P.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(E,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(T,"")},start:function(e){if(P.started)throw Error("Backbone.history has already been started");P.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),o=document.documentMode,a=S.exec(navigator.userAgent.toLowerCase())&&(!o||o<=7);if(this.root=("/"+this.root+"/").replace(O,"/"),a&&this._wantsHashChange){this.iframe=t.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,this.navigate(i)}
this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!P.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(F,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){e.replace(e.href.replace(/(javascript:|#).*$/,"")+"#"+t)}else e.hash="#"+t}}),t.history=new P,d.extend=h.extend=w.extend=f.extend=P.extend=function(e,t){var i,o=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,t);var a=function(){this.constructor=i};return a.prototype=o.prototype,i.prototype=new a,e&&n.extend(i.prototype,e),i.__super__=o.prototype,i};var M=function(){throw Error('A "url" property or function must be specified')},A=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(e,n){return t(e,n)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(n,i)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var n=e.Wreqr,i=e.Wreqr={};return e.Wreqr.VERSION="1.4.0",e.Wreqr.noConflict=function(){return e.Wreqr=n,this},i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,t.bind(function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this))},setHandler:function(e,t,n){this._wreqrHandlers[e]={callback:t,context:n},this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){return t.callback.apply(t.context,arguments)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,t),i.CommandStorage=function(){var n=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){this.getCommands(e).instances.push(t)},clearCommands:function(e){this.getCommands(e).instances=[]}}),n}(),i.Commands=function(e,t){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),e.Handlers.prototype.constructor.apply(this,arguments)},execute:function(e){e=arguments[0];var n=t.rest(arguments);this.hasHandler(e)?this.getHandler(e).apply(this,n):this.storage.addCommand(e,n)},_executeCommands:function(e,n,i){var o=this.storage.getCommands(e);t.each(o.instances,function(e){n.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var n,i=e.storageType||this.storageType;n=t.isFunction(i)?new i:i,this.storage=n}})}(i,t),i.RequestResponse=function(e,t){return e.Handlers.extend({request:function(e){if(this.hasHandler(e))return this.getHandler(e).apply(this,t.rest(arguments))}})}(i,t),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,t),i.Channel=function(n){var i=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,n,i){if(n){i=i||this;var o="vent"===e?"on":"setHandler";t.each(n,t.bind(function(n,a){this[e][o](a,t.bind(n,i))},this))}}}),i}(),i.radio=function(e,t){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e)throw Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];return n||(n=new e.Channel(t),this._channels[t]=n),n},_proxyMethods:function(){t.each(["vent","commands","reqres"],t.bind(function(e){t.each(i[e],t.bind(function(t){this[e][t]=o(this,e,t)},this))},this))}});var i={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(e,n,i){return function(o){var a=e._getChannel(o)[n];return a[i].apply(a,t.rest(arguments))}};return new n}(i,t),e.Wreqr}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(e,n){return t(e,n)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(n,i)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};return t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){return this.findByCid(this._indexByModel[e])},findByCustom:function(e){return this.findByCid(this._indexByCustom[e])},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===n)return delete this._indexByCustom[t],!0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}}),t.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"],function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(0,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone");require("backbone.wreqr"),require("backbone.babysitter");module.exports=t(n,i)}else"function"==typeof define&&define.amd&&define("backbone-marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(0,function(e,t){!function(e,t,n){"use strict";function i(e,t){var n=Error(e);throw n.name=t||"Error",n}var o={};t.Marionette=o,o.$=t.$;var a=Array.prototype.slice;o.extend=t.Model.extend,o.getOption=function(e,t){if(e&&t){return e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},o.normalizeMethods=function(e){var t,i={};return n.each(e,function(e,o){t=e,n.isFunction(t)||(t=this[t]),t&&(i[o]=t)},this),i},o.normalizeUIKeys=function(e,t){if(void 0!==e)return n.each(n.keys(e),function(n){var i=/@ui.[a-zA-Z_$0-9]*/g;n.match(i)&&(e[n.replace(i,function(e){return t[e.slice(4)]})]=e[n],delete e[n])}),e},o.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi;return function(i){var o="on"+i.replace(t,e),a=this[o];if(n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(a))return a.apply(this,n.tail(arguments))}}(),o.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,o(e)}function i(e){e._isRendered=!0,o(e)}function o(e){e._isShown&&e._isRendered&&a(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function a(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,o,a){var r=a.split(/\s+/);n.each(r,function(n){var a=e[n];a||i("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,o,a)})}function o(e,t,n,i){e.listenTo(t,n,i)}function a(e,t,i,o){var a=o.split(/\s+/);n.each(a,function(n){e.stopListening(t,i,e[n])})}function r(e,t,n,i){e.stopListening(t,n,i)}function s(e,t,i,o,a){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,r){n.isFunction(i)?o(e,t,r,i):a(e,t,r,i)}))}e.bindEntityEvents=function(e,n,i){s(e,n,i,o,t)},e.unbindEntityEvents=function(e,t,n){s(e,t,n,r,a)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},n.extend(o.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.triggerMethod=o.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,n.extend(o.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod.apply(this,["close"].concat(Array.prototype.slice.call(arguments))),this.unbind()}}),o.Region=function(e){if(this.options=e||{},this.el=o.getOption(this,"el"),this.el||i("An 'el' must be specified for a region.","NoElError"),this.initialize){this.initialize.apply(this,Array.prototype.slice.apply(arguments))}},n.extend(o.Region,{buildRegion:function(e,t){var o=n.isString(e),a=n.isString(e.selector),r=n.isUndefined(e.regionType),s=n.isFunction(e);s||o||a||i("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;o&&(l=e),e.selector&&(l=e.selector,delete e.selector),s&&(c=e),!s&&r&&(c=t),e.regionType&&(c=e.regionType,delete e.regionType),(o||s)&&(e={}),e.el=l;var u=new c(e);return e.parentEl&&(u.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),u}}),n.extend(o.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),o.triggerMethod.call(this,"before:show",e),o.triggerMethod.call(e,"before:show"),(i||t)&&this.open(e),this.currentView=e,o.triggerMethod.call(this,"show",e),o.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return o.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),o.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return n.each(e,function(e,o){n.isString(e)&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var a=this.addRegion(o,e);i[o]=a},this),i},addRegion:function(t,i){var o,a=n.isObject(i),r=n.isString(i),s=!!i.selector;return o=r||a&&s?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,o),this.triggerMethod("region:add",t,o),o},get:function(e){return this._regions[e]},removeRegion:function(e){this._remove(e,this._regions[e])},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}});return n.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(o),o.TemplateCache=function(e){this.templateId=e},n.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=a.call(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(o.TemplateCache.prototype,{load:function(){return this.compiledTemplate?this.compiledTemplate:this.compiledTemplate=this.compileTemplate(this.loadTemplate(this.templateId))},loadTemplate:function(e){var t=o.$(e).html();return t&&0!==t.length||i("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),o.Renderer={render:function(e,t){e||i("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");return("function"==typeof e?e:o.TemplateCache.get(e))(t)}},o.View=t.View.extend({constructor:function(e){n.bindAll(this,"render"),n.isObject(this.behaviors)&&new o.Behaviors(this),this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(n.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:o.triggerMethod,normalizeMethods:o.normalizeMethods,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=o.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"ui");return o.normalizeUIKeys(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,i){var o=n.isObject(t),a=o?t.event:t;e[i]=function(e){if(e){var n=e.preventDefault,i=e.stopPropagation,r=o?t.preventDefault:n,s=o?t.stopPropagation:i;r&&n&&n.apply(e),s&&i&&i.apply(e)}this.triggerMethod(a,{view:this,model:this.model,collection:this.collection})}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},o=n.result(this,"behaviorEvents")||{},a=this.configureTriggers();n.extend(i,o,e,a),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=Array.prototype.slice.call(arguments);!1!==this.triggerMethod.apply(this,["before:close"].concat(e))&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(e)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){this.ui[t]=this.$(e[t])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return this.$el.html(o.Renderer.render(t,e)),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,function(e){o.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e,t,n){this.closeEmptyView(),this.addItemView(e,this.getItemView(e),this.collection.indexOf(e))},onShowCalled:function(){this.children.each(function(e){o.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;this.addItemView(new t.Model,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return o.getOption(this,"emptyView")},getItemView:function(e){var t=o.getOption(this,"itemView");return t||i("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,i){var a=o.getOption(this,"itemViewOptions");n.isFunction(a)&&(a=a.call(this,e,i));var r=this.buildItemView(e,t,a);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,i),this._isShown&&!this.isBuffering&&o.triggerMethod.call(r,"show"),this.triggerMethod("after:item:added",r),r},addChildViewEventForwarding:function(e){var t=o.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var i=a.call(arguments),r=i[0],s=this.normalizeMethods(this.getItemEvents());i[0]=t+":"+r,i.splice(1,0,e),void 0!==s&&n.isFunction(s[r])&&s[r].apply(this,i),o.triggerMethod.apply(this,i)},this)},getItemEvents:function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){return new t(n.extend({model:e},i))},removeItemView:function(e){this.removeChildView(this.children.findByModel(e)),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(e){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,n){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(e){var t=o.getOption(this,"itemView")||this.constructor;return t||i("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){return this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender(),this.$el.html(this.renderModel()),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return o.Renderer.render(t,e)},appendBuffer:function(e,t){this.getItemViewContainer(e).append(t)},appendHtml:function(e,t,n){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{this.getItemViewContainer(e).append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,a=o.getOption(e,"itemViewContainer");if(a){t=e.$(n.isFunction(a)?a.call(this):a),t.length<=0&&i("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.prototype.constructor.call(this,e)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),o.ItemView.prototype.close.apply(this,arguments))},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this;return this.regionManager.addRegions(e,{regionType:o.getOption(this,"regionType"),parentEl:function(){return t.$el}})},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),o.Behavior=function(e,t){function n(t,n){this.view=n,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(n.prototype,{initialize:function(){},triggerMethod:o.triggerMethod}),e.extend(n,{extend:t.View.extend}),n}(n,t),o.Behaviors=function(e,t){function n(e){this.behaviors=n.parseBehaviors(e,e.behaviors),n.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement"])}var i={setElement:function(e,n){e.apply(this,t.tail(arguments,2)),t.each(n,function(e){e.$el=this.$el},this)},onShow:function(n,i){var o=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["show"].concat(o))}),t.isFunction(n)&&n.apply(this,o)},onClose:function(n,i){var o=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["close"].concat(o))}),t.isFunction(n)&&n.apply(this,o)},bindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},unbindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},triggerMethod:function(e,n){var i=t.tail(arguments,2);e.apply(this,i),t.each(n,function(t){e.apply(t,i)})},delegateEvents:function(n,i){n.apply(this,t.tail(arguments,2)),t.each(i,function(t){e.bindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.bindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(n,i){n.apply(this,t.tail(arguments,2)),t.each(i,function(t){e.unbindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.unbindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(n,i){var o={},a=t.result(this,"ui");return t.each(i,function(n,i){var r={},s=t.result(n,"events")||{},l=t.result(n,"ui"),c=t.extend({},a,l);s=e.normalizeUIKeys(s,c),t.each(t.keys(s),function(e){var o=Array(i+2).join(" "),a=e+o,l=t.isFunction(s[e])?s[e]:n[s[e]];r[a]=t.bind(l,n)}),o=t.extend(o,r)}),o}};return t.extend(n,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,i){return e.behaviorClass?e.behaviorClass:t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[i]:n.behaviorsLookup[i]},parseBehaviors:function(e,i){return t.map(i,function(t,i){return new(n.getBehaviorClass(t,i))(t,e)})},wrap:function(e,n,o){t.each(o,function(o){e[o]=t.partial(i[o],e[o],n)})}}),n}(o,n),o.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var n=o.getOption(this,"appRoutes");this.processAppRoutes(this._getController(),n)},appRoute:function(e,t){this._addAppRoute(this._getController(),e,t)},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return o.getOption(this,"controller")},_addAppRoute:function(e,t,o){var a=e[o];a||i("Method '"+o+"' was not found on the controller"),this.route(t,o,n.bind(a,e))}}),o.Application=function(e){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=o.triggerMethod},n.extend(o.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var n=o.Module.getClass(t),i=a.call(arguments);return i.unshift(this),n.create.apply(n,i)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}}),o.Application.extend=o.extend,o.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=o.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,e,t)},o.Module.extend=o.extend,n.extend(o.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){e.apply(this,n.flatten([this,this.app,t,o,o.$,n,i]))}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),n.extend(o.Module,{create:function(e,t,i){var o=e,r=a.call(arguments);r.splice(0,3),t=t.split(".");var s=t.length,l=[];return l[s-1]=i,
n.each(t,function(t,n){var a=o;o=this._getModule(a,t,e,i),this._addModuleDefinition(a,o,l[n],r)},this),o},_getModule:function(e,t,i,o,a){var r=n.extend({},o),s=this.getClass(o),l=e[t];return l||(l=new s(t,i,r),e[t]=l,e.submodules[t]=l),l},getClass:function(e){var t=o.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,i){var o=this._getDefine(n),a=this._getStartWithParent(n,t);o&&t.addDefinition(o,i),this._addStartWithParent(e,t,a)},_getStartWithParent:function(e,t){var i;return n.isFunction(e)&&e.prototype instanceof o.Module?(i=t.constructor.prototype.startWithParent,!!n.isUndefined(i)||i):!n.isObject(e)||(i=e.startWithParent,!!n.isUndefined(i)||i)},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof o.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){(t.startWithParent=t.startWithParent&&n)&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}})}(0,t,e);return t.Marionette}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("handlebars",[],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(){var e=new s.HandlebarsEnvironment;return m.extend(e,s),e.SafeString=c.default,e.Exception=d.default,e.Utils=m,e.escapeExpression=m.escapeExpression,e.VM=f,e.template=function(t){return f.template(t,e)},e}var o=n(1).default,a=n(2).default;t.__esModule=!0;var r=n(3),s=o(r),l=n(36),c=a(l),u=n(5),d=a(u),h=n(4),m=o(h),p=n(37),f=o(p),g=n(43),v=a(g),b=i();b.create=i,v.default(b),b.default=b,t.default=b,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__esModule=!0},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,n){"use strict";function i(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var o=n(2).default;t.__esModule=!0,t.HandlebarsEnvironment=i;var a=n(4),r=n(5),s=o(r),l=n(9),c=n(29),u=n(31),d=o(u),h=n(32);t.VERSION="4.7.6";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};i.prototype={constructor:i,logger:d.default,log:d.default.log,registerHelper:function(e,t){if("[object Object]"===a.toString.call(e)){if(t)throw new s.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===a.toString.call(e))a.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===a.toString.call(e)){if(t)throw new s.default("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){h.resetLoggedProperties()}},t.log=d.default.log,t.createFrame=a.createFrame,t.logger=d.default},function(e,t){"use strict";function n(e){return u[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function o(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function a(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(d,n):e}function r(e){return!e&&0!==e||!(!f(e)||0!==e.length)}function s(e){var t=i({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=i,t.indexOf=o,t.escapeExpression=a,t.isEmpty=r,t.createFrame=s,t.blockParams=l,t.appendContextPath=c;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,h=/[&<>"'`=]/,m=Object.prototype.toString;t.toString=m;var p=function(e){return"function"==typeof e};p(/x/)&&(t.isFunction=p=function(e){return"function"==typeof e&&"[object Function]"===m.call(e)}),t.isFunction=p;var f=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===m.call(e)};t.isArray=f},function(e,t,n){"use strict";function i(e,t){var n=t&&t.loc,r=void 0,s=void 0,l=void 0,c=void 0;n&&(r=n.start.line,s=n.end.line,l=n.start.column,c=n.end.column,e+=" - "+r+":"+l);for(var u=Error.prototype.constructor.call(this,e),d=0;d<a.length;d++)this[a[d]]=u[a[d]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{n&&(this.lineNumber=r,this.endLineNumber=s,o?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=l,this.endColumn=c))}catch(e){}}var o=n(6).default;t.__esModule=!0;var a=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];i.prototype=Error(),t.default=i,e.exports=t.default},function(e,t,n){e.exports={default:n(7),__esModule:!0}},function(e,t,n){var i=n(8);e.exports=function(e,t,n){return i.setDesc(e,t,n)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict";function i(e){s.default(e),c.default(e),d.default(e),m.default(e),f.default(e),v.default(e),y.default(e)}function o(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])}var a=n(2).default;t.__esModule=!0,t.registerDefaultHelpers=i,t.moveHelperToHooks=o;var r=n(10),s=a(r),l=n(11),c=a(l),u=n(24),d=a(u),h=n(25),m=a(h),p=n(26),f=a(p),g=n(27),v=a(g),b=n(28),y=a(b)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var o=n.inverse,a=n.fn;if(!0===t)return a(this);if(!1===t||null==t)return o(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):o(this);if(n.data&&n.ids){var r=i.createFrame(n.data);r.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:r}}return a(t,n)})},e.exports=t.default},function(e,t,n){(function(i){"use strict";var o=n(12).default,a=n(2).default;t.__esModule=!0;var r=n(4),s=n(5),l=a(s);t.default=function(e){e.registerHelper("each",function(e,t){function n(t,n,i){d&&(d.key=t,d.index=n,d.first=0===n,d.last=!!i,h&&(d.contextPath=h+t)),u+=a(e[t],{data:d,blockParams:r.blockParams([e[t],t],[h+t,null])})}if(!t)throw new l.default("Must pass iterator to #each");var a=t.fn,s=t.inverse,c=0,u="",d=void 0,h=void 0;if(t.data&&t.ids&&(h=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(d=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var m=e.length;c<m;c++)c in e&&n(c,c,c===e.length-1);else if(i.Symbol&&e[i.Symbol.iterator]){for(var p=[],f=e[i.Symbol.iterator](),g=f.next();!g.done;g=f.next())p.push(g.value);e=p;for(var m=e.length;c<m;c++)n(c,c,c===e.length-1)}else!function(){var t=void 0;o(e).forEach(function(e){void 0!==t&&n(t,c-1),t=e,c++}),void 0!==t&&n(t,c-1,!0)}();return 0===c&&(u=s(this)),u})},e.exports=t.default}).call(t,function(){return this}())},function(e,t,n){e.exports={default:n(13),__esModule:!0}},function(e,t,n){n(14),e.exports=n(20).Object.keys},function(e,t,n){var i=n(15);n(17)("keys",function(e){return function(t){return e(i(t))}})},function(e,t,n){var i=n(16);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(18),o=n(20),a=n(23);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",r)}},function(e,t,n){var i=n(19),o=n(20),a=n(21),r=function(e,t,n){var s,l,c,u=e&r.F,d=e&r.G,h=e&r.S,m=e&r.P,p=e&r.B,f=e&r.W,g=d?o:o[t]||(o[t]={}),v=d?i:h?i[t]:(i[t]||{}).prototype;d&&(n=t);for(s in n)(l=!u&&v&&s in v)&&s in g||(c=l?v[s]:n[s],g[s]=d&&"function"!=typeof v[s]?n[s]:p&&l?a(c,i):f&&v[s]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(c):m&&"function"==typeof c?a(Function.call,c):c,m&&((g.prototype||(g.prototype={}))[s]=c))};r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,e.exports=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(22);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var i=n(2).default;t.__esModule=!0;var o=n(5),a=i(o);t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,n){"use strict";var i=n(2).default;t.__esModule=!0;var o=n(4),a=n(5),r=i(a);t.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),t[0]=o,e.log.apply(e,t)})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,n){return e?n.lookupProperty(e,t):e})},e.exports=t.default},function(e,t,n){"use strict";var i=n(2).default;t.__esModule=!0;var o=n(4),a=n(5),r=i(a);t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new r.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&(i=o.createFrame(t.data),i.contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:o.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default},function(e,t,n){"use strict";function i(e){r.default(e)}var o=n(2).default;t.__esModule=!0,t.registerDefaultDecorators=i;var a=n(30),r=o(a)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t.default=function(e){e.registerDecorator("inline",function(e,t,n,o){var a=e;return t.partials||(t.partials={},a=function(o,a){var r=n.partials;n.partials=i.extend({},r,t.partials);var s=e(o,a);return n.partials=r,s}),t.partials[o.args[0]]=o.fn,a})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];console[t].apply(console,i)}}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t=l(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=l(null);return n.__proto__=!1,{properties:{whitelist:d.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:d.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}}function o(e,t,n){return"function"==typeof e?a(t.methods,n):a(t.properties,n)}function a(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(r(t),!1)}function r(e){!0!==p[e]&&(p[e]=!0,m.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}function s(){c(p).forEach(function(e){delete p[e]})}var l=n(33).default,c=n(12).default,u=n(1).default;t.__esModule=!0,t.createProtoAccessControl=i,t.resultIsAllowed=o,t.resetLoggedProperties=s;var d=n(35),h=n(31),m=u(h),p=l(null)},function(e,t,n){e.exports={default:n(34),__esModule:!0}},function(e,t,n){var i=n(8);e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.extend.apply(void 0,[o(null)].concat(t))}var o=n(33).default;t.__esModule=!0,t.createNewLookupObject=i;var a=n(4)},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=x.COMPILER_REVISION;if(!(t>=x.LAST_COMPATIBLE_COMPILER_REVISION&&t<=x.COMPILER_REVISION)){if(t<x.LAST_COMPATIBLE_COMPILER_REVISION){throw new w.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+x.REVISION_CHANGES[n]+") or downgrade your runtime to an older version ("+x.REVISION_CHANGES[t]+").")}throw new w.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){function n(n,i,o){o.hash&&(i=b.extend({},i,o.hash),o.ids&&(o.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,o);var a=b.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),r=t.VM.invokePartial.call(this,n,i,a);if(null==r&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),r=o.partials[o.name](i,a)),null!=r){if(o.indent){for(var s=r.split("\n"),l=0,c=s.length;l<c&&(s[l]||l+1!==c);l++)s[l]=o.indent+s[l];r=s.join("\n")}return r}throw new w.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")}function i(t){function n(t){return""+e.main(r,t,r.helpers,r.partials,a,l,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;i._setup(o),!o.partial&&e.useData&&(a=c(t,a));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=o.depths?t!=o.depths[0]?[t].concat(o.depths):o.depths:[t]),(n=u(e.main,n,r,o.depths||[],a,l))(t,o)}if(!t)throw new w.default("No environment passed to template");if(!e||!e.main)throw new w.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var o=e.compiler&&7===e.compiler[0],r={strict:function(e,t,n){if(!(e&&t in e))throw new w.default('"'+t+'" not defined in '+e,{loc:n});return e[t]},lookupProperty:function(e,t){var n=e[t];return null==n?n:Object.prototype.hasOwnProperty.call(e,t)?n:_.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){if(null!=(e[i]&&r.lookupProperty(e[i],t)))return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:b.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,o){var r=this.programs[e],s=this.fn(e);return t||o||i||n?r=a(this,e,s,t,n,i,o):r||(r=this.programs[e]=a(this,e,s)),r},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=b.extend({},t,e)),n},nullContext:m({}),noop:t.VM.noop,compilerInfo:e.compiler};return i.isTop=!0,i._setup=function(n){if(n.partial)r.protoAccessControl=n.protoAccessControl,r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators,r.hooks=n.hooks;else{var i=b.extend({},t.helpers,n.helpers);d(i,r),r.helpers=i,e.usePartial&&(r.partials=r.mergeIfNeeded(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=b.extend({},t.decorators,n.decorators)),r.hooks={},r.protoAccessControl=_.createProtoAccessControl(n);var a=n.allowCallsToHelperMissing||o;k.moveHelperToHooks(r,"helperMissing",a),k.moveHelperToHooks(r,"blockHelperMissing",a)}},i._child=function(t,n,i,o){if(e.useBlockParams&&!i)throw new w.default("must pass block params");if(e.useDepths&&!o)throw new w.default("must pass parent depths");return a(r,t,e[t],n,0,i,o)},i}function a(e,t,n,i,o,a,r){function s(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r;return!r||t==r[0]||t===e.nullContext&&null===r[0]||(s=[t].concat(r)),n(e,t,e.helpers,e.partials,o.data||i,a&&[o.blockParams].concat(a),s)}return s=u(n,s,e,r,i,a),s.program=t,s.depth=r?r.length:0,s.blockParams=o||0,s}function r(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function s(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;if(n.fn&&n.fn!==l&&function(){n.data=x.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=x.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=b.extend({},n.partials,e.partials))}(),void 0===e&&o&&(e=o),void 0===e)throw new w.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function l(){return""}function c(e,t){return t&&"root"in t||(t=t?x.createFrame(t):{},t.root=e),t}function u(e,t,n,i,o,a){if(e.decorator){var r={};t=e.decorator(t,r,n,i&&i[0],o,a,i),b.extend(t,r)}return t}function d(e,t){p(e).forEach(function(n){e[n]=h(e[n],t)})}function h(e,t){var n=t.lookupProperty;return C.wrapHelper(e,function(e){return b.extend({lookupProperty:n},e)})}var m=n(38).default,p=n(12).default,f=n(1).default,g=n(2).default;t.__esModule=!0,t.checkRevision=i,t.template=o,t.wrapProgram=a,t.resolvePartial=r,t.invokePartial=s,t.noop=l;var v=n(4),b=f(v),y=n(5),w=g(y),x=n(3),k=n(9),C=n(42),_=n(32)},function(e,t,n){e.exports={default:n(39),__esModule:!0}},function(e,t,n){n(40),e.exports=n(20).Object.seal},function(e,t,n){var i=n(41);n(17)("seal",function(e){return function(t){return e&&i(t)?e(t):t}})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";function n(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}t.__esModule=!0,t.wrapHelper=n},function(e,t){(function(n){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},e.exports=t.default}).call(t,function(){return this}())}])}),define("handlebars.partials",["handlebars"],function(e){e.registerPartial("activityFooterDefaultActions",e.template({1:function(e,t,n,i,o){return'<span class="icon-lock icon-tiny spacing-right-small"></span>\n'},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 Comment",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:0},end:{line:11,column:23}}}))+"\n"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"%(countOf)s Comments",{name:"gettext",hash:{countOf:null!=(a=null!=t?r(t,"thread"):t)?r(a,"posts"):a},data:o,loc:{start:{line:13,column:0},end:{line:13,column:55}}}))+"\n"},7:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="action">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"favorited"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.program(10,o,0),data:o,loc:{start:{line:20,column:0},end:{line:24,column:7}}}))?a:"")+"</li>\n"},8:function(e,t,n,i,o){return'<a class="action-favorite active" href="#" data-action="favorite">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Recommended",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:66},end:{line:21,column:91}}}))+' <span class="icon icon-heart"></span></a>\n'},10:function(e,t,n,i,o){return'<a class="action-favorite" href="#" data-action="favorite">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Recommend",{name:"gettext",hash:{},data:o,loc:{start:{line:23,column:59},end:{line:23,column:82}}}))+' <span class="icon icon-heart"></span></a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="action">\n<a class="action-comments"\nhref="'+s(r(null!=t?c(t,"discussionRoute"):t,t))+'"\ndata-link-name="comment_count"\ndata-thread-id="'+s(r(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isClosed"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?a:"")+"\n"+(null!=(a=c(n,"if").call(l,c(n,"eq").call(l,null!=(a=null!=t?c(t,"thread"):t)?c(a,"posts"):a,1,{name:"eq",hash:{},data:o,loc:{start:{line:10,column:6},end:{line:10,column:25}}}),{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:10,column:0},end:{line:14,column:7}}}))?a:"")+'<span class="icon icon-comment"></span>\n</a>\n</li>\n'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"authenticated"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:0},end:{line:26,column:7}}}))?a:"")},useData:!0})),e.registerPartial("badges",e.template({1:function(e,t,n,i,o){return'<span class="badge -warning -inline">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Marked as Spam",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:0},end:{line:4,column:28}}}))+"\n</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span data-role="badges">\n'+(null!=(a=r(n,"if_all").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSpam"):t,null!=t?r(t,"isAuthor"):t,{name:"if_all",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:6,column:11}}}))?a:"")+"</span>\n"},useData:!0})),e.registerPartial("boostTimeRemaining",e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"Boost ends in %(relativeTime)s",{name:"gettext",hash:{relativeTime:r(n,"getPartial").call(a,"timeSelector",{name:"getPartial",hash:{},data:o,loc:{start:{line:3,column:58},end:{line:3,column:85}}})},data:o,loc:{start:{line:3,column:0},end:{line:3,column:87}}}))+"\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span data-action="choose-boost-time" class="link">\n'+e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"Boost ends %(relativeTime)s",{name:"gettext",hash:{relativeTime:null!=t?a(t,"boostTimeRemaining"):t},data:o,loc:{start:{line:6,column:0},end:{line:6,column:75}}}))+"\n</span>\n"},5:function(e,t,n,i,o){return'<span title="Remove Boost" class="link pull-right" data-action="unboost">\n<span class="icon icon-arrow"></span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Remove Boost",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:0},end:{line:12,column:26}}}))+"\n</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="icon icon-megaphone"></span>\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"showBoostTimeSelector"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:0},end:{line:8,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"showUnboost"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:14,column:7}}}))?a:"")},useData:!0})),e.registerPartial("cardContentImage",e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="card-content__media"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n<div style="background-image: url('+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+')" class="img-cards"></div>\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"image"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:9,column:7}}}))?a:""},useData:!0})),e.registerPartial("cardReasonDisqusPicks",e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason link-inner-gray-dark">\n<span class="icon-heart icon__position -inline text-smaller text-gray-light"></span>\n'+r(s(n,"gettext").call(a,"%(disqusTeamLink)s recommended",{name:"gettext",hash:{disqusTeamLink:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"%(disqus)s Team",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:10,column:5},end:{line:10,column:50}}}),class:"text-semibold","data-channel-slug":"disquspicks","data-link-name":"forum_name",href:"/home/channel/disquspicks/"},data:o,loc:{start:{line:5,column:17},end:{line:10,column:51}}})},data:o,loc:{start:{line:4,column:0},end:{line:10,column:53}}}))+'\n\n<time class="bullet text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+"</time>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isBestOfDisqus"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:14,column:7}}}))?a:""},useData:!0})),e.registerPartial("cardReasonForum",e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="spacing-right align__item"\nhref="/home/channel/'+s(r(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"channelAvatar"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:7,column:0},end:{line:13,column:7}}}))?a:"")+"</a>\n"},2:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="img-round-sm block__item" src="'+e.escapeExpression(e.lambda(null!=t?r(t,"channelAvatar"):t,t))+'" alt="'+(null!=(a=e.invokePartial(r(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'">\n'},4:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channel-avatar '+r(a(null!=t?s(t,"bannerColorClass"):t,t))+'">\n<p class="channel-avatar__name">'+r(a(null!=t?s(t,"channelInitial"):t,t))+"</p>\n</div>\n"},6:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"with").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"thread"):t)?r(a,"forum"):a,{name:"with",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:0},end:{line:23,column:9}}}))?a:""},7:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="spacing-right align__item"\nhref="/home/forum/'+s(r(null!=t?l(t,"id"):t,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n<img src="'+s(r(null!=t?l(t,"faviconImage"):t,t))+'" alt="'+(null!=(a=e.invokePartial(l(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'" class="img-round-sm block__item" />\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason align align--middle">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"channel"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:2,column:0},end:{line:24,column:7}}}))?a:"")+'<div class="align__item">\n<strong>'+(null!=(a=e.invokePartial(r(i,"forumLink"),null!=(a=null!=t?r(t,"thread"):t)?r(a,"forum"):a,{name:"forumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</strong>\n</div>\n"+(null!=(a=e.invokePartial(r(i,"badges"),t,{name:"badges",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("cards",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return"cards here\n"},useData:!0})),e.registerPartial("cardTitle",e.template({
compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-title">\n<h2 class="discussion-title">\n<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="link-gray-darker"\ndata-role="thread-link"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-link-name="title"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"clean_title"):a,t))+'\n</a>\n</h2>\non\n<a href="/home/'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"forumRoute"):a,t))+'"\nclass="link-gray-darker discussion-community"\ndata-link-name="forum_name"\ndata-forum-pk="'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"pk"):a,t))+'">\n\n'+(null!=(a=e.invokePartial(l(i,"forumName"),null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("cardTitleInlineName",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="card-title-inline-name">\n<a href="/home/'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"forumRoute"):a,t))+'"\nclass="discussion-community"\ndata-link-name="forum_name"\ndata-forum-pk="'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"pk"):a,t))+'">\n'+(null!=(a=e.invokePartial(l(i,"forumName"),null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("channelAvatar",e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="favicon" src="'+s(r(null!=(a=null!=t?l(t,"options"):t)?l(a,"favicon"):a,t))+'" alt="'+s(r(null!=t?l(t,"name"):t,t))+'"/>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="discussion-origin-name" href="/home/channel/'+e.escapeExpression(e.lambda(null!=t?r(t,"slug"):t,t))+'/">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"options"):t)?r(a,"favicon"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:4,column:7}}}))?a:"")+"</a>\n"},useData:!0})),e.registerPartial("channelAvatarWithDefault",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="forum-favicon" src="'+e.escapeExpression(e.lambda(null!=t?r(t,"channelAvatar"):t,t))+'" alt="'+(null!=(a=e.invokePartial(r(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'">\n'},3:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"defaultChannelAvatar"),t,{name:"defaultChannelAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"channelAvatar"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?a:""},usePartial:!0,useData:!0})),e.registerPartial("channelAwareForumLink",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=e.invokePartial(r(i,"channelLink"),null!=t?r(t,"channelInfo"):t,{name:"channelLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},3:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"forumLink"),t,{name:"forumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"channelInfo"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?a:""},usePartial:!0,useData:!0})),e.registerPartial("channelAwareForumName",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"channelInfo"):t)?r(a,"name"):a,t))+"\n"},3:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"channelInfo"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?a:""},usePartial:!0,useData:!0})),e.registerPartial("channelCardContent",e.template({1:function(e,t,n,i,o){return" has-image"},3:function(e,t,n,i,o){return" hidden-md"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"forumFriendlyUrl"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:26,column:7}}}))?a:""},6:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="spacing-narrow text-smaller">\n<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\nclass="link-gray"\ndata-link-name="external_thread"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<span class="icon icon-communities icon__position -inline icon-tiny"></span>\n'+s(r(null!=t?l(t,"forumFriendlyUrl"):t,t))+"\n</a>\n</p>\n"},8:function(e,t,n,i,o){return'<div class="card__additional">\n<div class="card-comment-band" data-role="posts"></div>\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__content -default'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"image"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:34},end:{line:1,column:64}}}))?a:"")+'">\n'+(null!=(a=e.invokePartial(s(i,"cardContentImage"),t,{name:"cardContentImage",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-content__body">\n<div class="card-content__topics">\n<div data-role="topics"></div>\n</div>\n'+(null!=(a=e.invokePartial(s(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-content__summary'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"recentPostCount"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:33},end:{line:8,column:73}}}))?a:"")+'">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+e.escapeExpression(e.lambda(null!=t?s(t,"threadDescription"):t,t))+"\n</div>\n</div>\n"+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"channel"):t,{name:"unless",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:0},end:{line:27,column:11}}}))?a:"")+'</div>\n</div>\n<div class="card__footer text-small" data-role="footer"></div>\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"recentPostCount"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:0},end:{line:35,column:7}}}))?a:"")},usePartial:!0,useData:!0})),e.registerPartial("channelCardMenu",e.template({1:function(e,t,n,i,o){return" open"},3:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n<a href="#" class="dropdown--follow-lnk'+(null!=(a=l(n,"if").call(r,null!=(a=null!=t?l(t,"thread"):t)?l(a,"userSubscription"):a,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:39},end:{line:13,column:84}}}))?a:"")+'"\ndata-action="menuitem-click" data-menu-item="toggle-subscription">\n<span class="text-default">'+s(l(n,"gettext").call(r,"Subscribe to discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:27},end:{line:15,column:64}}}))+'</span>\n<span class="text-following">'+s(l(n,"gettext").call(r,"Unsubscribe from discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:29},end:{line:16,column:70}}}))+"</span>\n</a>\n</li>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isBestOfDisqus"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:0},end:{line:26,column:7}}}))?a:"")+(null!=(a=l(n,"if").call(r,null!=t?l(t,"canModerate"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:0},end:{line:38,column:7}}}))?a:"")+(null!=(a=l(n,"if").call(r,null!=t?l(t,"canEdit"):t,{name:"if",hash:{},fn:e.program(13,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:0},end:{line:45,column:7}}}))?a:"")+(null!=(a=l(n,"if").call(r,null!=t?l(t,"canDelete"):t,{name:"if",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o,loc:{start:{line:46,column:0},end:{line:53,column:7}}}))?a:"")},4:function(e,t,n,i,o){return" active"},6:function(e,t,n,i,o){return'<li>\n<a href="#" class="dropdown--follow-lnk" data-action="menuitem-click"\ndata-menu-item="toggle-follow-targetchannel">\n<span class="text-default">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Unfollow %(disqus)s Team Picks",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:23,column:27},end:{line:23,column:89}}}))+"</span>\n</a>\n</li>\n"},8:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n<a href="#" class="dropdown--follow-lnk"\ndata-action="menuitem-click" data-menu-item="mark-spam">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSpam"):t,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.program(11,o,0),data:o,loc:{start:{line:31,column:0},end:{line:35,column:7}}}))?a:"")+"</a>\n</li>\n"},9:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Discussion isn't spam",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:0},end:{line:32,column:35}}}))+"\n"},11:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Mark discussion as spam",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:0},end:{line:34,column:37}}}))+"\n"},13:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n<a href="/home/edit/'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"id"):a,t))+"/"+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"slug"):a,t))+'/" class="dropdown--follow-lnk">\n'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Edit discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:0},end:{line:42,column:29}}}))+"\n</a>\n</li>\n"},15:function(e,t,n,i,o){return'<li>\n<a href="#" class="dropdown--follow-lnk text-error" data-action="menuitem-click"\ndata-menu-item="delete-thread">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Delete discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:50,column:0},end:{line:50,column:31}}}))+"\n</a>\n</li>\n"},17:function(e,t,n,i,o){return'<li>\n<a href="#" class="dropdown--follow-lnk" data-action="menuitem-click"\ndata-menu-item="restore-thread">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Undo delete",{name:"gettext",hash:{},data:o,loc:{start:{line:58,column:0},end:{line:58,column:25}}}))+"\n</a>\n</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__subnav pull-right dropdown'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"menuOpen"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:44},end:{line:6,column:72}}}))?a:"")+'" data-role="menu">\n<a href="#" class="dropdown-toggle link-gray-light" data-toggle="dropdown">\n<span class="icon icon-show-more text-small"></span>\n</a>\n<ul class="dropdown-menu dropdown--card-actions" role="menu" aria-labeledby="drop-discover">\n'+(null!=(a=s(n,"unless").call(r,null!=(a=null!=t?s(t,"thread"):t)?s(a,"isDeleted"):a,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.program(17,o,0),data:o,loc:{start:{line:11,column:0},end:{line:61,column:11}}}))?a:"")+"</ul>\n</div>\n"},useData:!0})),e.registerPartial("channelCoverLogo",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channel-cover__logo">\n<img src="'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"options"):t)?r(a,"titleLogo"):a)?r(a,"cache"):a,t))+'" class="img-responsive block__item" />\n</div>\n'},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="channel-cover__heading">'+e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))+"</h1>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"options"):t)?r(a,"titleLogo"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:7,column:7}}}))?a:""},useData:!0})),e.registerPartial("channelLink",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/channel/'+s(r(null!=t?l(t,"slug"):t,t))+'/"\nclass="link-community"\ndata-link-name="channel_name"\ndata-channel-slug="'+s(r(null!=t?l(t,"slug"):t,t))+'">\n\n'+(null!=(a=e.invokePartial(l(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("channelMetadataStats",e.template({1:function(e,t,n,i,o){var a;return'<div class="channel-stat__item -following">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channel-stat__item">\n<span class="text-semibold" data-role="discussion-count">'+s(r(null!=t?c(t,"numThreads"):t,t))+'</span>\n<small class="channel-stat__subtext">\n'+s(c(n,"gettext").call(l,"Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:0},end:{line:4,column:25}}}))+'\n</small>\n</div>\n<div class="channel-stat__item">\n<span class="text-semibold" data-role="followers-count">'+s(r(null!=t?c(t,"numFollowers"):t,t))+'</span>\n<small class="channel-stat__subtext">\n'+s(c(n,"gettext").call(l,"Followers",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:0},end:{line:10,column:23}}}))+"\n</small>\n</div>\n"+(null!=(a=c(n,"unless").call(l,null!=(a=null!=t?c(t,"channel"):t)?c(a,"isAggregation"):a,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:0},end:{line:17,column:11}}}))?a:"")},usePartial:!0,useData:!0})),e.registerPartial("channelRules",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<strong>tl;dr</strong>\n<ol class="list-num spacing-bottom">\n<li>'+r(s(n,"gettext").call(a,"Follow the %(basicRules)s",{name:"gettext",hash:{basicRules:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"Basic Rules",href:"https://help.disqus.com/customer/en/portal/articles/1753105"},data:o,loc:{start:{line:4,column:13},end:{line:4,column:108}}})},data:o,loc:{start:{line:3,column:4},end:{line:4,column:110}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"Make It Specific",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:4},end:{line:5,column:34}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"No Spam",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:4},end:{line:6,column:25}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"No Hateful Topics",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:4},end:{line:7,column:35}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"Keep It Clean (And Legal)",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:4},end:{line:8,column:43}}}))+"</li>\n</ol>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Follow the Basic Rules",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:11},end:{line:11,column:47}}}))+"</strong></p>\n<p>"+r(s(n,"gettext").call(a,"As a channel moderator, you are expected to enforce the %(basicRules)s in your community. If not followed, this can result in your channel being banned.",{name:"gettext",hash:{basicRules:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"Basic Rules",href:"https://help.disqus.com/customer/en/portal/articles/1753105"},data:o,loc:{start:{line:13,column:13},end:{line:13,column:108}}})},data:o,loc:{start:{line:12,column:3},end:{line:13,column:110}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Make It Specific",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:11},end:{line:15,column:41}}}))+"</strong></p>\n<p>"+r(s(n,"gettext").call(a,"Choosing a specific topic will make it easier for others to join, and for you to keep people on topic once they start creating their own discussions on your channel.",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:3},end:{line:16,column:182}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"No Spam",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:11},end:{line:18,column:32}}}))+"</strong></p>\n<p>"+r(s(n,"gettext").call(a,"Channels are a place for discussion, not for selling or promoting websites, products, events or petitions.",{name:"gettext",hash:{},data:o,loc:{start:{line:19,column:3},end:{line:19,column:123}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"No Hateful Topics",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:11},end:{line:21,column:42}}}))+"</strong></p>\n<p>"+r(s(n,"gettext").call(a,"Channels created with the sole purpose of promoting sexist, racist, misogynist, homophobic, or generally offensive content are simply not allowed.",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:3},end:{line:22,column:163}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Keep It Clean (And Legal)",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:11},end:{line:24,column:50}}}))+"</strong></p>\n<p>"+r(s(n,"gettext").call(a,"Explicit material and illegal content are not permitted. Channels supporting this type of content will be banned.",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:3},end:{line:25,column:130}}}))+"</p>"},useData:!0})),e.registerPartial("channelsModuleHeader",e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"moduleTitle"):t,t))+"\n"},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Channels on %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:10,column:0},end:{line:10,column:54}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/explore/" class="link-gray-darker">\n<div class="module-header__icon icon-colorful">\n<svg class="icon-discover" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" width="26" height="26"><rect x="14" width="4" height="4" class="dot"/><rect x="14" y="7" width="4" height="4" class="dot"/><rect x="14" y="14" width="4" height="4" class="dot"/><rect x="7" width="4" height="4" class="dot"/><rect x="7" y="7" width="4" height="4" class="dot"/><rect x="7" y="14" width="4" height="4" class="dot"/><rect width="4" height="4" class="dot"/><rect y="7" width="4" height="4" class="dot"/><rect y="14" width="4" height="4" class="dot"/></g></svg>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"moduleTitle"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:7,column:0},end:{line:11,column:7}}}))?a:"")+"</h2>\n</div>\n</a>\n"},useData:!0})),e.registerPartial("channelsModuleMoreFooter",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<footer class="module-footer">\n<a href="/home/explore/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Explore More Channels",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:26},end:{line:3,column:61}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})),e.registerPartial("defaultChannelAvatar",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channel-avatar '+r(a(null!=t?s(t,"bannerColorClass"):t,t))+'">\n<p class="channel-avatar__name">'+r(a(null!=t?s(t,"channelInitial"):t,t))+"</p>\n</div>\n"},useData:!0})),e.registerPartial("defaultForumAvatar",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/forum/'+r(a(null!=t?s(t,"id"):t,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(a(null!=t?s(t,"pk"):t,t))+'">\n\n<svg class="art-forum-blank" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path d="M22.9 38c5.9 0 10.6-4.9 10.6-11s-4.8-11-10.6-11 s-10.6 4.9-10.6 11c0 1.6 0.3 3.2 1 4.6L11.5 36l4.5-0.6C17.9 37 20.3 38 22.9 38z" class="style0"/><path d="M31.2 29c-4.8 0-8.7-4-8.7-9s3.9-9 8.7-9s8.7 4 8.7 9 c0 1.3-0.3 2.6-0.8 3.7l1.4 3.7l-3.7-0.5C35.3 28.2 33.3 29 31.2 29z" class="style1"/></svg>\n</a>\n'},useData:!0})),e.registerPartial("discussionModerationActions",e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="align module__wrapper--moderation">\n<div class="link--moderation dropdown" data-role="menu">\n<button class="link-gray-dark text-medium" data-toggle="dropdown">\n<span class="block__item icon-cog"></span>\n<strong>'+s(c(n,"gettext").call(r,"Moderate",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:8},end:{line:6,column:30}}}))+'</strong>\n</button>\n<ul class="dropdown-menu dropdown--cards dropdown--moderation-action" role="menu" aria-labeledby="drop-blacklist">\n<li>\n<a href="#" class="link text-semibold" data-action="blacklist-forum">\n'+s(c(n,"gettext").call(r,"Ban %(author)s on %(forum)s",{name:"gettext",hash:{forum:null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a)?c(a,"name"):a,author:null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"name"):a},data:o,loc:{start:{line:11,column:0},end:{line:11,column:95}}}))+"\n</a>\n</li>\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"isGlobalAdmin"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:24,column:7}}}))?a:"")+'<li>\n<a href="#" class="link text-semibold '+(null!=(a=c(n,"if").call(r,null!=t?c(t,"isSpam"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:38},end:{line:26,column:66}}}))?a:"")+'" data-action="mark-spam" data-role="spam-alert">\n<span class="spam-hidden">'+s(c(n,"gettext").call(r,"Discussion isn't spam",{name:"gettext",hash:{},data:o,loc:{start:{line:27,column:26},end:{line:27,column:61}}}))+'</span>\n<span class="spam-visible">'+s(c(n,"gettext").call(r,"Mark discussion as spam",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:27},end:{line:28,column:64}}}))+'</span>\n</a>\n</li>\n<li>\n<a href="https://'+s(l(null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"primaryForum"):a)?c(a,"id"):a,t))+".disqus.com/admin/moderate/approved/search/thread:"+s(l(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'" data-action="moderate-thread" class="link text-semibold">'+s(c(n,"gettext").call(r,"Moderate comments",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:166},end:{line:32,column:197}}}))+"</a>\n</li>\n</ul>\n</div>\n"+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isClosed"):a,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.program(11,o,0),data:o,loc:{start:{line:36,column:0},end:{line:46,column:7}}}))?a:"")+'<a href="#" data-action="delete-thread" class="link--moderation link-gray-dark text-medium">\n<span class="icon icon-trash"></span>\n'+s(c(n,"gettext").call(r,"Delete",{name:"gettext",hash:{},data:o,loc:{start:{line:49,column:0},end:{line:49,column:20}}}))+"\n</a>\n</div>\n"},2:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n<a href="#" class="link text-semibold" data-action="blacklist-global">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"author"):a)?r(a,"isOnGlobalBlacklist"):a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:17,column:0},end:{line:21,column:7}}}))?a:"")+"</a>\n</li>\n"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Remove ban on %(author)s across %(Disqus)s",{name:"gettext",hash:{Disqus:"Disqus",author:null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"author"):a)?r(a,"name"):a},data:o,loc:{start:{line:18,column:0},end:{line:18,column:102}}}))+"\n"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Ban %(author)s across %(Disqus)s",{name:"gettext",hash:{Disqus:"Disqus",author:null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"author"):a)?r(a,"name"):a},data:o,loc:{start:{line:20,column:0},end:{line:20,column:92}}}))+"\n"},7:function(e,t,n,i,o){return"is-spam"},9:function(e,t,n,i,o){return'<a href="#" data-action="open-thread" class="link--moderation link-gray-dark text-medium">\n<span class="icon icon-open"></span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Open Thread",{name:"gettext",hash:{},data:o,loc:{start:{line:39,column:0},end:{line:39,column:25}}}))+"\n</a>\n"},11:function(e,t,n,i,o){return'<a href="#" data-action="close-thread" class="link--moderation link-gray-dark text-medium">\n<span class="icon icon-close"></span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Close Thread",{name:"gettext",hash:{},data:o,loc:{start:{line:44,column:0},end:{line:44,column:26}}}))+"\n</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canModerate"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:52,column:7}}}))?a:""},useData:!0})),e.registerPartial("forumAvatar",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="forum-favicon" src="'+e.escapeExpression(e.lambda(null!=t?r(t,"faviconImage"):t,t))+'" alt="'+(null!=(a=e.invokePartial(r(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'">\n'},usePartial:!0,useData:!0})),e.registerPartial("forumAvatarLink",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/forum/'+s(r(null!=t?l(t,"id"):t,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n\n'+(null!=(a=e.invokePartial(l(i,"forumAvatar"),t,{name:"forumAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("forumLink",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/forum/'+s(r(null!=t?l(t,"id"):t,t))+'/"\nclass="link-community"\ndata-link-name="forum_name"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n\n'+(null!=(a=e.invokePartial(l(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("forumName",e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){
if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"id"):t,t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"name"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:1,column:42}}}))?a:""},useData:!0})),e.registerPartial("homeFooter",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<strong>The web’s community of communities</strong>\n<span class="bullet">Disqus &copy; '+r(s(n,"now").call(a,"YYYY",{name:"now",hash:{},data:o,loc:{start:{line:2,column:35},end:{line:2,column:49}}}))+'</span>\n<br />\n<a href="/company/" class="link-gray">'+r(s(n,"gettext").call(a,"Company",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:38},end:{line:4,column:59}}}))+'</a>\n<span class="bullet"></span>\n<a href="/jobs/" class="link-gray">'+r(s(n,"gettext").call(a,"Jobs",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:35},end:{line:6,column:53}}}))+'</a>\n<span class="bullet"></span>\n<a href="//help.disqus.com/" class="link-gray">'+r(s(n,"gettext").call(a,"Help",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:47},end:{line:8,column:65}}}))+'</a>\n<span class="bullet"></span>\n<a href="//help.disqus.com/customer/portal/articles/466260-terms-of-service" class="link-gray">'+r(s(n,"gettext").call(a,"Terms",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:95},end:{line:10,column:114}}}))+'</a>\n<span class="bullet"></span>\n<a href="//help.disqus.com/customer/portal/articles/466259-privacy-policy" class="link-gray">'+r(s(n,"gettext").call(a,"Privacy",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:93},end:{line:12,column:114}}}))+'</a>\n<br />\n<a href="https://disqus.com/admin/create" class="link-gray">'+r(s(n,"gettext").call(a,"Add Disqus to your site",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:60},end:{line:14,column:97}}}))+"</a>\n"},useData:!0})),e.registerPartial("homeRules",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="spacing-bottom">The following are not allowed on Disqus:</p>\n\n<ol class="list-num spacing-bottom">\n<li>'+r(s(n,"gettext").call(a,"Targeted harassment or encouraging others to do so",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:68}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"Spam",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:4},end:{line:5,column:22}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"Impersonation",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:4},end:{line:6,column:31}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"Direct threat of harm",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:4},end:{line:7,column:39}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"Posting personally identifiable information",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:4},end:{line:8,column:61}}}))+"</li>\n<li>"+r(s(n,"gettext").call(a,"Inappropriate profile content",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:4},end:{line:9,column:47}}}))+"</li>\n</ol>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Targeted harassment or encouraging others to do so",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:11},end:{line:12,column:75}}}))+'</strong></p>\n<p class="spacing-bottom">'+r(s(n,"gettext").call(a,"The targeted and systematic harassment of people has no place on Disqus, nor do we tolerate communities dedicated to fostering harassing behavior.",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:26},end:{line:13,column:186}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Spam",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:11},end:{line:15,column:29}}}))+'</strong></p>\n<p class="spacing-bottom">'+r(s(n,"gettext").call(a,"Examples include 1) comments posted in large quantities to promote a product or service, 2) the exact same comment posted repeatedly to disrupt a thread. 3) following users multiple times",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:26},end:{line:16,column:227}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Impersonation",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:11},end:{line:18,column:38}}}))+'</strong></p>\n<p class="spacing-bottom">'+r(s(n,"gettext").call(a,"You may not impersonate others in a manner that does or is intended to mislead, confuse, or deceive others.",{name:"gettext",hash:{},data:o,loc:{start:{line:19,column:26},end:{line:19,column:147}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Direct threat of harm",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:11},end:{line:21,column:46}}}))+'</strong></p>\n<p class="spacing-bottom">'+r(s(n,"gettext").call(a,"This covers active threats of harm directed towards a specific person or defined group of individuals. Contact local authorities if you feel a crime has been committed or is imminent.",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:26},end:{line:22,column:223}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Posting personally identifiable information",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:11},end:{line:24,column:68}}}))+'</strong></p>\n<p class="spacing-bottom">'+r(s(n,"gettext").call(a,"Examples of protected information: credit card number, home/work address, phone number, email address, social security number. Real name isn't currently covered.",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:26},end:{line:25,column:201}}}))+"</p>\n\n<p><strong>"+r(s(n,"gettext").call(a,"Inappropriate profile content",{name:"gettext",hash:{},data:o,loc:{start:{line:27,column:11},end:{line:27,column:54}}}))+'</strong></p>\n<p class="spacing-bottom">'+r(s(n,"gettext").call(a,"Graphic media containing violence and pornographic content are not allowed. Profile content allowed by Disqus may not be allowed on all communitie, so report such profiles to the site moderator.",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:26},end:{line:28,column:234}}}))+'</p>\n\n<p class="spacing-bottom">'+r(s(n,"gettext").call(a,"Read the %(basicRules)s.",{name:"gettext",hash:{basicRules:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"Basic Rules",href:"https://help.disqus.com/customer/en/portal/articles/1753105"},data:o,loc:{start:{line:31,column:13},end:{line:31,column:108}}})},data:o,loc:{start:{line:30,column:26},end:{line:31,column:110}}}))+"</p>\n"},useData:!0})),e.registerPartial("navLogo",e.template({1:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="site-nav__logo"\nsrc="'+a(r(n,"urlfor").call(null!=t?t:e.nullContext||{},"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:4,column:5},end:{line:4,column:21}}}))+'/img/disqus-logo-dev.svg"\nalt="Disqus" />\n<div class="site-nav__logo__debug">'+a(e.lambda(null!=t?r(t,"customBase"):t,t))+"</div>\n"},3:function(e,t,n,i,o){return'<img class="site-nav__logo"\nsrc="'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"urlfor").call(null!=t?t:e.nullContext||{},"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:9,column:5},end:{line:9,column:21}}}))+'/img/disqus-logo-blue-white.svg"\nalt="Disqus" />\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"customBase"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:0},end:{line:11,column:7}}}))?a:"")+"</a>\n"},useData:!0})),e.registerPartial("navUserIcon",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/by/'+s(r(null!=t?l(t,"username"):t,t))+'/" class="nav__lnk" data-page-icon="/by/'+s(r(null!=t?l(t,"username"):t,t))+'/">\n<img src="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'" alt="'+s(r(null!=t?l(t,"username"):t,t))+'" class="site-nav__avatar">\n</a>\n'},useData:!0})),e.registerPartial("onboardingBanner",e.template({1:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Email verified!",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:29}}}))+"\n"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="onboard-banner__text-follow">\n<div class="text-larger text-bold">\n'+(null!=(a=e.invokePartial(r(i,"onboardingBannerInstructions"),t,{name:"onboardingBannerInstructions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="spacing-top-narrow">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canSkip"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:15,column:0},end:{line:19,column:7}}}))?a:"")+"</div>\n</div>\n"},4:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"There's a channel for anything you're into. Or you can %(skip)s.",{name:"gettext",hash:{skip:r(n,"tag").call(a,"a",{name:"tag",hash:{text:r(n,"gettext").call(a,"skip",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:178},end:{line:16,column:194}}}),class:"link-inverted text-semibold","data-action":"skip-onboarding",href:"/home/"},data:o,loc:{start:{line:16,column:84},end:{line:16,column:195}}})},data:o,loc:{start:{line:16,column:0},end:{line:16,column:197}}}))+"\n"},6:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"There's a channel for anything you're into.",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:0},end:{line:18,column:57}}}))+"\n"},8:function(e,t,n,i,o){return'<div class="text-larger text-bold">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"You're set!",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:0},end:{line:24,column:25}}}))+"\n</div>\n"},10:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="hidden-md">\n<div class="onboard-banner__bubble text-large text-semibold">\n'+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"numTotalSteps"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:32,column:6},end:{line:32,column:26}}}),{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.program(13,o,0),data:o,loc:{start:{line:32,column:0},end:{line:36,column:7}}}))?a:"")+'</div>\n<img class="onboard-banner__pam" src="'+e.escapeExpression(s(n,"urlfor").call(r,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:38,column:38},end:{line:38,column:54}}}))+'/img/pam.png" />\n</div>\n'},11:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 more!",{name:"gettext",hash:{},data:o,loc:{start:{line:33,column:0},end:{line:33,column:21}}}))+"\n"},13:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"%(numRemaining)s more!",{name:"gettext",hash:{numRemaining:null!=t?a(t,"numRemainingSteps"):t},data:o,loc:{start:{line:35,column:0},end:{line:35,column:69}}}))+"\n"},15:function(e,t,n,i,o){return'<button data-action="finish" class="button button-outline button-large button-padding-wider -border-light">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Continue",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:0},end:{line:42,column:22}}}))+" &raquo;\n</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section-contained-narrow align align--between align--stretch">\n<div class="onboard-banner__body align align--column align--center">\n<div class="onboard-banner__text-welcome text-larger text-bold">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"emailVerified"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:7}}}))?a:"")+e.escapeExpression(s(n,"gettext").call(r,"Welcome to %(Disqus)s, %(name)s!",{name:"gettext",hash:{name:null!=(a=null!=t?s(t,"sessionUser"):t)?s(a,"name"):a,Disqus:"Disqus"},data:o,loc:{start:{line:7,column:0},end:{line:7,column:88}}}))+"\n</div>\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"numRemainingSteps"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(8,o,0),data:o,loc:{start:{line:9,column:0},end:{line:26,column:7}}}))?a:"")+'</div>\n<div class="onboard-banner__media align align--column align--center relative__wrapper">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"numRemainingSteps"):t,{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.program(15,o,0),data:o,loc:{start:{line:29,column:0},end:{line:44,column:7}}}))?a:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("onboardingBannerInstructions",e.template({1:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Follow 1 channel to get started",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:45}}}))+"\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"Follow %(numTotal)s channels to get started",{name:"gettext",hash:{numTotal:null!=t?a(t,"numTotalSteps"):t},data:o,loc:{start:{line:4,column:0},end:{line:4,column:82}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"numTotalSteps"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:1,column:6},end:{line:1,column:26}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?a:""},useData:!0})),e.registerPartial("profileCardReason",e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(s(n,"gettext").call(r,"Discussion on %(forum)s",{name:"gettext",hash:{forum:s(n,"getPartial").call(r,"channelLink",null!=(a=null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a)?s(a,"channelInfo"):a,{name:"getPartial",hash:{},data:o,loc:{start:{line:3,column:44},end:{line:3,column:95}}})},data:o,loc:{start:{line:3,column:0},end:{line:3,column:97}}}))+"\n"},3:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(s(n,"gettext").call(r,"Discussion on %(forum)s",{name:"gettext",hash:{forum:s(n,"getPartial").call(r,"forumLink",null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:44},end:{line:5,column:81}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:83}}}))+"\n"},5:function(e,t,n,i,o){return'<span class="icon-lock icon-tiny spacing-right-small text-gray"></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-reason">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a)?c(a,"channelInfo"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:0},end:{line:6,column:7}}}))?a:"")+'<a href="'+l(s(null!=t?c(t,"discussionRoute"):t,t))+'"\nclass="bullet link-discussion"\ndata-link-name="comment_count"\ndata-thread-id="'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isClosed"):a,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:0},end:{line:13,column:7}}}))?a:"")+"\n"+(null!=(a=s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"posts"):a,t))?a:"")+" comments\n</a>\n"+(null!=(a=e.invokePartial(c(i,"badges"),t,{name:"badges",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("profileCoverAttributes",e.template({1:function(e,t,n,i,o){return'<a href="#" class="profile-cover-allstar" data-action="show-allstar-modal">\n<span class="allstar__label">\n<span class="icon-star allstar__icon -inverted icon__position -inline icon-small"></span>'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"All-Star",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:89},end:{line:7,column:111}}}))+"\n</span>\n</a>\n"},3:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="profile-user-info">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"about"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:0},end:{line:19,column:7}}}))?a:"")+'<ul class="profile-cover-list">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"numLikesReceived"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:0},end:{line:26,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"location"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:0},end:{line:32,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"url"):t,{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:33,column:0},end:{line:38,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"joinDate"):t,{name:"if",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:0},end:{line:44,column:7}}}))?a:"")+"</ul>\n</div>\n"},4:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="text-medium profile-cover-about">\n<div class="truncate" data-truncate-lines="'+r(a(null!=t?s(t,"numLines"):t,t))+'">\n'+r(a(null!=t?s(t,"about"):t,t))+"\n</div>\n</div>\n"},6:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="truncate-line text-small">\n<span class="icon-arrow-up text-smaller icon__position -inline"></span>\n'+e.escapeExpression(r(n,"gettext").call(a,"%(upvoteCount)s Upvotes",{name:"gettext",hash:{upvoteCount:r(n,"tag").call(a,"strong",{name:"tag",hash:{text:null!=t?r(t,"numLikesReceived"):t},data:o,loc:{start:{line:24,column:50},end:{line:24,column:86}}})},data:o,loc:{start:{line:24,column:0},end:{line:24,column:88}}}))+"\n</li>\n"},8:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="truncate-line text-small hidden-cover">\n<span class="icon-location text-smaller icon__position -inline"></span>\n'+e.escapeExpression(e.lambda(null!=t?a(t,"location"):t,t))+"\n</li>\n"},10:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="truncate-line text-small">\n<span class="icon-link text-smaller icon__position -inline"></span>\n<a href="'+r(a(null!=t?s(t,"url"):t,t))+'" data-link-out="'+r(a(null!=t?s(t,"signedUrl"):t,t))+'" target="_blank" rel="noreferrer nofollow noopener">'+r(a(null!=t?s(t,"url"):t,t))+"</a>\n</li>\n"},12:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="truncate-line text-small">\n<span class="icon-clock text-smaller icon__position -inline"></span>\n'+e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"Joined %(joinedAt)s",{name:"gettext",hash:{joinedAt:null!=t?a(t,"joinDate"):t},data:o,loc:{start:{line:42,column:0},end:{line:42,column:53}}}))+"\n</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="text-large text-gray profile-cover-username">\n@'+e.escapeExpression(e.lambda(null!=t?s(t,"username"):t,t))+"\n</p>\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"isPowerContributor"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:10,column:7}}}))?a:"")+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"isBlocked"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:0},end:{line:47,column:11}}}))?a:"")},useData:!0})),e.registerPartial("profileCoverDropdown",e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n<a href="#" class="dropdown__link" disabled>\n<div class="dropdown-cover-profile__title">\n<span class="text-medium icon-flag media-middle"></span>\n<strong>'+r(s(n,"gettext").call(a,"Report User",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:8},end:{line:22,column:33}}}))+'</strong>\n</div>\n<p class="spacing-narrow">\n'+r(s(n,"gettext").call(a,"You have reported this person to Disqus. We will take action against their account if they have violated our policies. Furthermore, you can block this person to stop seeing their comments.",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:0},end:{line:25,column:202}}}))+"\n</p>\n</a>\n</li>\n"},3:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n<a href="#" data-action="prompt-report-user" class="dropdown__link">\n<div class="dropdown-cover-profile__title">\n<span class="text-medium icon-flag media-middle"></span>\n<strong>'+r(s(n,"gettext").call(a,"Report User",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:8},end:{line:34,column:33}}}))+'</strong>\n</div>\n<p class="spacing-narrow">\n'+r(s(n,"gettext").call(a,"Report this user to Disqus for review. If they've been found to violate our policies their account will be removed.",{name:"gettext",hash:{},data:o,loc:{start:{line:37,column:0},end:{line:37,column:129}}}))+"\n</p>\n</a>\n</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="dropdown">\n<button class="button dropdown-toggle text-medium icon__rotate--right" data-toggle="dropdown">\n<span class="icon icon-show-more"></span>\n</button>\n<ul class="dropdown-menu dropdown-cover-profile">\n<li>\n<a href="#" data-action="block-user" class="dropdown__link border-bottom">\n<div class="dropdown-cover-profile__title">\n<span class="icon-small icon-cancel media-middle spacing-right-small"></span>\n<strong>'+s(l(n,"gettext").call(r,"Block User",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:8},end:{line:10,column:32}}}))+'</strong>\n</div>\n<p class="spacing-narrow">\n'+s(l(n,"gettext").call(r,"Never see this user again. None of their activity and comments will appear in any of your Disqus content, feeds, or notifications.",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:0},end:{line:13,column:144}}}))+"\n</p>\n</a>\n</li>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isFlagged"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:17,column:0},end:{line:41,column:7}}}))?a:"")+"</ul>\n</span>\n"},useData:!0})),e.registerPartial("replyOrEditLink",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isWithinEditPeriod"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:11,column:7}}}))?a:""},2:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=t?l(t,"discussionRoute"):t,t))+"#edit-"+s(r(null!=t?l(t,"id"):t,t))+'"\nclass="edit link-gray"\ndata-link-name="edit"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'"\ndata-action="edit">\n\n'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Edit",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:18}}}))+"\n</a>\n"},4:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isLoggedIn"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:0},end:{line:29,column:7}}}))?a:""},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"thread"):t)?r(a,"isClosed"):a,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.program(8,o,0),data:o,loc:{start:{line:14,column:0},end:{line:28,column:7}}}))?a:""},6:function(e,t,n,i,o){return'<a class="reply-disabled link-gray">\n<span class="icon icon-lock icon-tiny spacing-right-small text-gray"></span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Reply",{name:"gettext",hash:{},data:o,loc:{start:{line:17,column:0},end:{line:17,column:19}}}))+"\n</a>\n"},8:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=t?l(t,"discussionRoute"):t,t))+"#reply-"+s(r(null!=t?l(t,"id"):t,t))+'"\ndata-action="reply"\nclass="reply link-gray"\ndata-link-name="reply"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Reply",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:0},end:{line:26,column:19}}}))+"\n</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"wasAuthoredBySessionUser"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:1,column:0},end:{line:30,column:7}}}))?a:""},useData:!0})),e.registerPartial("settingsAccountSocialLink",e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"Connected as %(displayName)s",{name:"gettext",hash:{displayName:r(n,"tag").call(a,"a",{name:"tag",hash:{text:null!=t?r(t,"display_name"):t,target:"_blank",href:null!=t?r(t,"url"):t},data:o,loc:{start:{line:3,column:14},end:{line:3,column:71}}})},data:o,loc:{start:{line:2,column:0},end:{line:4,column:2}}}))+"\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"Connected as %(displayName)s",{name:"gettext",hash:{displayName:null!=t?a(t,"display_name"):t},data:o,loc:{start:{line:6,column:0},end:{line:8,column:2}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"url"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:9,column:7}}}))?a:""},useData:!0})),e.registerPartial("spamActions",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"authorPendingSpamReview"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:3,column:0},end:{line:9,column:7}}}))?a:""},2:function(e,t,n,i,o){return'<span class="text-small text-semibold">Thanks, we\'ll work on getting this corrected.</span>\n'},4:function(e,t,n,i,o){return'<a href="#" class="text-small text-semibold spacing-left-small" data-action="request-spam-review">This isn\'t spam &raquo;</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<spam data-role="spam-actions">\n'+(null!=(a=r(n,"if_all").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isAuthor"):t,null!=t?r(t,"isSpam"):t,{name:"if_all",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:10,column:11}}}))?a:"")+"</spam>\n"},useData:!0})),e.registerPartial("strongTag",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return"<strong>"+e.escapeExpression(e.lambda(t,t))+"</strong>"},useData:!0})),e.registerPartial("threadImage",e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'">\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"image"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:10,column:7}}}))?a:""},useData:!0})),e.registerPartial("threadLink",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\nclass="name-thread"\ndata-role="article-link"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-link-name="title"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"clean_title"):a,t))+"\n</a>\n"},useData:!0})),e.registerPartial("threadPostActivity",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lambda,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="discussion-activity align align--between">\n<div data-role="thread-actions"></div>\n<div class="discussion-activity__nav">\n<a href="#" class="dropdown-toggle visible-md text-medium text-semibold link-gray" data-toggle="dropdown">\n<span data-action="switch-tab" data-tab="best" role="menuitem" class="dropdown-toggle__selection">\n'+r(l(n,"gettext").call(a,"Sort by Best",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:26}}}))+'\n</span>\n<span data-action="switch-tab" data-tab="newest" role="menuitem" class="dropdown-toggle__selection">\n'+r(l(n,"gettext").call(a,"Sort by Newest",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:28}}}))+'\n</span>\n<span data-action="switch-tab" data-tab="oldest" role="menuitem" class="dropdown-toggle__selection">\n'+r(l(n,"gettext").call(a,"Sort by Oldest",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:0},end:{line:12,column:28}}}))+'\n</span>\n<span class="icon-arrow icon__position -caret"></span>\n</a>\n<ul class="nav--discussion">\n<li data-action="switch-tab" data-tab="best" class="nav__item" role="menuitem">\n<a href="'+r(s(null!=t?l(t,"discussionRoute"):t,t))+'best/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(l(n,"gettext").call(a,"Best",{name:"gettext",hash:{},data:o,loc:{start:{line:20,column:27},end:{line:20,column:45}}}))+'</span>\n</div>\n<div class="nav-lnk__checkmark">\n<span class="icon icon-checkmark icon__position text-smaller"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="newest" class="nav__item" role="menuitem">\n<a href="'+r(s(null!=t?l(t,"discussionRoute"):t,t))+'newest/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(l(n,"gettext").call(a,"Newest",{name:"gettext",hash:{},data:o,loc:{start:{line:30,column:27},end:{line:30,column:47}}}))+'</span>\n</div>\n<div class="nav-lnk__checkmark">\n<span class="icon icon-checkmark icon__position text-smaller"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="oldest" class="nav__item" role="menuitem">\n<a href="'+r(s(null!=t?l(t,"discussionRoute"):t,t))+'oldest/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(l(n,"gettext").call(a,"Oldest",{name:"gettext",hash:{},data:o,loc:{start:{line:40,column:27},end:{line:40,column:47}}}))+'</span>\n</div>\n<div class="nav-lnk__checkmark">\n<span class="icon icon-checkmark icon__position text-smaller"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n</div>\n'},useData:!0})),e.registerPartial("threadTitle",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"threadOverrides"):t)?r(a,"title"):a,t))+"\n"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"thread"):t)?r(a,"clean_title"):a,t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h2 class="discussion-title" dir="auto">\n<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="link-gray-darker truncate"\ndata-truncate-lines="'+s(r(null!=t?l(t,"numTitleLines"):t,t))+'"\ndata-role="thread-link"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-link-name="title"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?l(t,"threadOverrides"):t)?l(a,"title"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:10,column:0},end:{line:15,column:7}}}))?a:"")+"</a>\n</h2>\n"},useData:!0})),e.registerPartial("timeSelector",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<select name="time">\n<option></option>\n<option value="3600">'+r(s(n,"gettext").call(a,"1 hour",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:21},end:{line:3,column:41}}}))+'</option>\n<option value="10800">'+r(s(n,"gettext").call(a,"3 hours",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:22},end:{line:4,column:43}}}))+'</option>\n<option value="21600">'+r(s(n,"gettext").call(a,"6 hours",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:22},end:{line:5,column:43}}}))+'</option>\n<option value="43200">'+r(s(n,"gettext").call(a,"12 hours",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:22},end:{line:6,column:44}}}))+'</option>\n<option value="86400">'+r(s(n,"gettext").call(a,"1 day",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:22},end:{line:7,column:41}}}))+'</option>\n<option value="259200">'+r(s(n,"gettext").call(a,"3 days",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:23},end:{line:8,column:43}}}))+'</option>\n<option value="432000">'+r(s(n,"gettext").call(a,"5 days",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:23},end:{line:9,column:43}}}))+'</option>\n<option value="604800">'+r(s(n,"gettext").call(a,"1 week",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:23},end:{line:10,column:43}}}))+'</option>\n<option value="1209600">'+r(s(n,"gettext").call(a,"2 weeks",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:24},end:{line:11,column:45}}}))+"</option>\n</select>\n"},useData:!0})),e.registerPartial("topicTag",e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"topicRoute"):t,t))},3:function(e,t,n,i,o){return"#"},5:function(e,t,n,i,o){return'data-action="remove-tag"'},7:function(e,t,n,i,o){return'<span class="icon icon-cancel"></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"topicRoute"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:9},end:{line:1,column:57}}}))?a:"")+'" '+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"topicRoute"):t,{name:"unless",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:59},end:{line:1,column:116}}}))?a:"")+'\nclass="button--tag">\n'+e.escapeExpression(e.lambda(null!=t?s(t,"displayName"):t,t))+"\n"+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"topicRoute"):t,{name:"unless",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:11}}}))?a:"")+"</a>\n"},useData:!0})),e.registerPartial("userAvatar",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/by/'+e.escapeExpression(e.lambda(null!=t?r(t,"username"):t,t))+'/" class="avatar" data-link-name="user_avatar">\n'+(null!=(a=e.invokePartial(r(i,"userAvatarNoLink"),t,{name:"userAvatarNoLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n"},3:function(e,t,n,i,o){var a;return'<span class="avatar">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"userAvatarNoLink"),t,{name:"userAvatarNoLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"username"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:9,column:7}}}))?a:""},usePartial:!0,useData:!0})),e.registerPartial("userAvatarNoLink",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'" alt="'+s(r(null!=t?l(t,"displayName"):t,t))+'">\n'},useData:!0})),e.registerPartial("userCardBody",e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="description truncate-line text-medium">'+e.escapeExpression(e.lambda(null!=t?a(t,"about"):t,t))+"</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(r(i,"userAvatar"),t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="user-info">\n'+(null!=(a=e.invokePartial(r(i,"userName"),t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"about"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:7}}}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("userFollowButton",e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isPrivate"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:3,column:0},end:{line:11,column:7}}}))?a:""},2:function(e,t,n,i,o){return'<button class="button button-disabled button-small" disabled>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Private",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:21}}}))+'<span class="icon-lock icon-small spacing-left-small"></span>\n</button>\n'},4:function(e,t,n,i,o){var a;return'<span class="btn-follow--mobile">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSessionUser"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:12,column:11}}}))?a:""},usePartial:!0,useData:!0})),e.registerPartial("userGroup",e.template({1:function(e,t,n,i,o){var a;return'<span class="actor">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"userPreview"),t,{name:"userPreview",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</span>\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="actor name link-gray-darker" data-role="actors">\n'+e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"%(numUsers)s others",{name:"gettext",hash:{numUsers:null!=t?a(t,"numRemainingActors"):t},data:o,loc:{start:{line:14,column:0},end:{line:14,column:63}}}))+"\n</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="actors">\n'+(null!=(a=s(n,"each").call(r,null!=t?s(t,"shownActors"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:6,column:9}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"numRemainingActors"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:0},end:{line:16,column:7}}}))?a:"")+"</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("userGroupNames",e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="actor-group" data-role="actors">\n'+(null!=(a=s(n,"if").call(r,s(n,"gt").call(r,null!=t?s(t,"numRemainingActors"):t,1,{name:"gt",hash:{},data:o,loc:{start:{line:7,column:6},end:{line:7,column:31}}}),{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:7,column:0},end:{line:11,column:7}}}))?a:"")+"</span>\n"},2:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"%(numUsers)s others",{name:"gettext",hash:{numUsers:null!=t?a(t,"numRemainingActors"):t},data:o,loc:{start:{line:8,column:0},end:{line:8,column:63}}}))+"\n"},4:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 other",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:0},end:{line:10,column:21}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="actors">\n<span class="actor">\n'+(null!=(a=e.invokePartial(s(i,"userName"),null!=t?s(t,"firstActor"):t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</span>\n"+(null!=(a=s(n,"if").call(r,s(n,"gt").call(r,null!=t?s(t,"numRemainingActors"):t,0,{name:"gt",hash:{},data:o,loc:{start:{line:5,column:6},end:{line:5,column:31}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:0},end:{line:13,column:7}}}))?a:"")+"</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("userName",e.template({1:function(e,t,n,i,o){return'<a href="#"\nclass="tooltipped icon__position -inline -allstar"\ndata-action="show-allstar-modal"\ndata-toggle="tooltip"\ndata-placement="top"\ntitle="'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"All-Star",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:7},end:{line:8,column:29}}}))+'"><span class="icon-allstar allstar__icon"></span></a>'},3:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/by/'+r(a(null!=t?s(t,"username"):t,t))+'/" class="name" data-link-name="user_name">'+r(a(null!=t?s(t,"name"):t,t))+"</a>\n"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"name"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.program(8,o,0),data:o,loc:{start:{line:13,column:0},end:{line:17,column:7}}}))?a:""},6:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))+"\n"},8:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Guest",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:0},end:{line:16,column:19}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(n,"if").call(r,null!=t?s(t,"isPowerContributor"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:9,column:9}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"username"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:10,column:0},end:{line:18,column:7}}}))?a:"")},useData:!0})),e.registerPartial("userNameNoLink",e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))+"\n"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"username"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:4,column:0},end:{line:8,column:7}}}))?a:""},4:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"username"):t,t))+"\n"},6:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Guest",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:0},end:{line:7,column:19}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"name"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:9,column:7}}}))?a:""},useData:!0})),e.registerPartial("userPreview",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(r(i,"userAvatar"),t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(r(i,"userName"),t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"\n"},usePartial:!0,useData:!0})),e.registerPartial("userSpan",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span data-username="'+r(a(null!=t?s(t,"username"):t,t))+'" data-role="username">'+r(a(null!=t?s(t,"name"):t,t))+"</span>\n"},useData:!0})),e.registerPartial("welcomeOverlay",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="onboard-overlay__inner text-center">\n<span class="onboard-overlay__forum">'+(null!=(a=e.invokePartial(l(i,"forumAvatar"),null!=t?l(t,"forum"):t,{name:"forumAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</span>\n<div class="text-larger text-semibold spacing-top">\n'+s(l(n,"gettext").call(r,"Welcome to %(Disqus)s from %(Forum)s",{name:"gettext",hash:{Forum:l(n,"getPartial").call(r,"forumName",null!=t?l(t,"forum"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:4,column:75},end:{line:4,column:105}}}),Disqus:"Disqus"},data:o,loc:{start:{line:4,column:0},end:{line:4,column:107}}}))+'\n</div>\n<div class="onboard-overlay__description text-gray-dark spacing-top-narrow spacing-bottom-large">\n'+s(l(n,"gettext").call(r,"%(Disqus)s is more than comments. We're also about great conversations right here on %(disqusDotCom)s",{name:"gettext",hash:{disqusDotCom:"disqus.com",Disqus:"Disqus"},data:o,loc:{start:{line:7,column:0},end:{line:7,column:161}}}))+'\n</div>\n<button class="button button-fill--brand button-large" data-action="hide-welcome">\n'+s(l(n,"gettext").call(r,"Got it! Let's join the fun",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:0},end:{line:10,column:40}}}))+"\n</button>\n</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("cardGuestUser",e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="user '+(null!=(a=c(n,"if").call(r,null!=t?c(t,"highlight"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:16},end:{line:2,column:49}}}))?a:"")+'" data-role="guest">\n<span class="avatar" title="'+l(s(null!=t?c(t,"guestText"):t,t))+'">\n<img src="'+l(s(null!=t?c(t,"guestAvatarUrl"):t,t))+'" alt="'+l(c(n,"gettext").call(r,"Avatar",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:35},end:{line:4,column:55}}}))+'" />\n</span>\n<span class="username" title="'+l(s(null!=t?c(t,"guestText"):t,t))+'">\n'+l(s(null!=t?c(t,"guestText"):t,t))+"\n</span>\n</li>\n"},2:function(e,t,n,i,o){return"highlight"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"guestCount"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:10,column:7}}}))?a:""},useData:!0})),e.registerPartial("cardGuestVoterText",e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"%(guestCount)s Guest Votes",{name:"gettext",hash:{guestCount:null!=t?a(t,"guestCount"):t},data:o,loc:{start:{line:1,column:26},end:{line:1,column:90}}}))+" "},3:function(e,t,n,i,o){return" "+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 Guest Vote",{name:"gettext",hash:{},data:o,loc:{start:{line:1,column:100},end:{line:1,column:126}}}))+" "},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(n,"if").call(r,s(n,"gt").call(r,null!=t?s(t,"guestCount"):t,1,{name:"gt",hash:{},data:o,loc:{start:{line:1,column:6},end:{line:1,column:23}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:1,column:134}}}))?a:"")+"\n"},useData:!0})),e.registerPartial("cardOtherUserText",e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"%(guestCount)s Others",{name:"gettext",hash:{guestCount:null!=t?a(t,"guestCount"):t},data:o,loc:{start:{line:1,column:26},end:{line:1,column:85}}}))+" "},3:function(e,t,n,i,o){return" "+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 Other",{name:"gettext",hash:{},data:o,loc:{start:{line:1,column:95},end:{line:1,column:116}}}))+" "},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(n,"if").call(r,s(n,"gt").call(r,null!=t?s(t,"guestCount"):t,1,{name:"gt",hash:{},data:o,loc:{start:{line:1,column:6},end:{line:1,column:23}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:1,column:124}}}))?a:"")+"\n"},useData:!0})),e.registerPartial("cardUser",e.template({1:function(e,t,n,i,o){return"highlight"},3:function(e,t,n,i,o){return'data-action="profile"'},5:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="avatar">\n<img src="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'" alt="'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Avatar",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:33},end:{line:5,column:53}}}))+'" />\n</span>\n<span class="username">\n'+s(r(null!=t?l(t,"name"):t,t))+"\n</span>\n"},7:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="avatar" href="'+s(r(null!=t?l(t,"profileUrl"):t,t))+'" title="'+s(r(null!=t?l(t,"name"):t,t))+'" target="_blank" rel="noopener noreferrer">\n<img src="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'" alt="'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Avatar",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:33},end:{line:12,column:53}}}))+'" />\n</a>\n<a class="username" href="'+s(r(null!=t?l(t,"profileUrl"):t,t))+'" title="'+s(r(null!=t?l(t,"name"):t,t))+'" target="_blank" rel="noopener noreferrer">\n'+s(r(null!=t?l(t,"name"):t,t))+"\n</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="user '+(null!=(a=s(n,"if").call(r,null!=t?s(t,"highlight"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:16},end:{line:1,column:49}}}))?a:"")+'" '+(null!=(a=s(n,"unless").call(r,s(n,"switch").call(r,"sso_less_branding",{name:"switch",hash:{forum:null!=t?s(t,"forumId"):t},data:o,loc:{start:{line:1,column:61},end:{line:1,column:103}}}),{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:51},end:{line:1,column:137}}}))?a:"")+' data-username="'+e.escapeExpression(e.lambda(null!=t?s(t,"username"):t,t))+'">\n'+(null!=(a=s(n,"if_all").call(r,s(n,"switch").call(r,"sso_less_branding",{name:"switch",hash:{forum:null!=t?s(t,"forumId"):t},data:o,loc:{start:{line:3,column:10},end:{line:3,column:52}}}),s(n,"ne").call(r,null!=t?s(t,"isSSOProfileUrl"):t,!0,{name:"ne",hash:{},data:o,loc:{start:{line:3,column:53},end:{line:3,column:78}}}),{name:"if_all",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:3,column:0},end:{line:17,column:11}}}))?a:"")+"</li>\n"},useData:!0})),e.registerPartial("carouselArrowLeft",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<button class="carousel-control carousel-control__previous"><span class="icon icon-right-bracket icon-flipped"></span></button>\n'},useData:!0})),e.registerPartial("carouselArrowRight",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<button class="carousel-control carousel-control__next"><span class="icon icon-right-bracket"></span></button>\n'},useData:!0})),e.registerPartial("channelsHeader",e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="align-inline spacing-top">\n<div class="module-header__icon icon-colorful spacing-right">\n<svg class="icon-discover" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" width="26" height="26"><rect x="14" width="4" height="4" class="dot"/><rect x="14" y="7" width="4" height="4" class="dot"/><rect x="14" y="14" width="4" height="4" class="dot"/><rect x="7" width="4" height="4" class="dot"/><rect x="7" y="7" width="4" height="4" class="dot"/><rect x="7" y="14" width="4" height="4" class="dot"/><rect width="4" height="4" class="dot"/><rect y="7" width="4" height="4" class="dot"/><rect y="14" width="4" height="4" class="dot"/></g></svg>\n</div>\n<div class="module-header__title">\n<h1 class="text-larger text-darker">'+r(s(n,"gettext").call(a,"Channels",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:36},end:{line:6,column:58}}}))+'</h1>\n</div>\n</div>\n<p class="text-medium text-gray spacing-bottom-narrow">'+r(s(n,"gettext").call(a,"Places to start your own discussions.",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:55},end:{line:9,column:106}}}))+"</p>\n"},useData:!0})),e.registerPartial("genericFollowButton",e.template({1:function(e,t,n,i,o){return" active"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="btn-follow'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isFollowing"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:25},end:{line:1,column:58}}}))?a:"")+'" data-action="toggle-follow">\n<span class="symbol-default"><span class="icon-plus"></span></span><span class="text-default">'+s(l(n,"gettext").call(r,"Follow",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:94},end:{line:3,column:114}}}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+s(l(n,"gettext").call(r,"Following",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:224},end:{line:3,column:247}}}))+"</span>\n</button>\n"},useData:!0}))}),define("core/extensions/helpers/eq",[],function(){"use strict";return function(e,t){return e===t}}),define("core/extensions/helpers/ne",[],function(){"use strict";return function(e,t){return e!==t}}),define("core/extensions/helpers/gt",[],function(){"use strict";return function(e,t){return e>t}}),define("core/extensions/helpers/lt",[],function(){"use strict";return function(e,t){return e<t}}),define("core/extensions/helpers/ge",[],function(){"use strict";return function(e,t){return e>=t}}),define("core/extensions/helpers/le",[],function(){"use strict";return function(e,t){return e<=t}}),define("core/extensions/helpers/typeof",[],function(){"use strict";return function(e,t){return typeof e===t}}),define("core/extensions/helpers/notNull",[],function(){"use strict";return function(e){return null!==e}}),define("core/extensions/helpers/any",[],function(){"use strict";return function(){for(var e=arguments.length,t=0;t<e-1;t++)if(arguments[t])return arguments[t]}}),define("core/extensions/helpers/if_any",[],function(){"use strict";return function(){for(var e=arguments.length,t=arguments[e-1],n=0;n<e-1;n++)if(arguments[n])return t.fn(this);return t.inverse(this)}}),define("core/extensions/helpers/if_all",[],function(){"use strict";return function(){
for(var e=arguments.length,t=arguments[e-1],n=0;n<e-1;n++)if(!arguments[n])return t.inverse(this);return t.fn(this)}}),define("core/utils/cookies",[],function(){"use strict";var e={_doc:window.document,create:function(t,n,i){i||(i={});var o=t+"="+n+"; path="+(i.path||"/"),a=i.domain,r=i.expiresIn;if(a&&(o+="; domain=."+a),"[object Number]"===Object.prototype.toString.call(r)){o+="; expires="+new Date((new Date).getTime()+r).toGMTString()}"https:"===e._doc.location.protocol&&(o+="; secure"),o+="; SameSite=None",e._doc.cookie=o},read:function(t){for(var n,i=t+"=",o=e._doc.cookie.split(";"),a=0;a<o.length;a++)if(n=o[a].replace(/^\s+/,""),0===n.indexOf(i))return n.substring(i.length);return null},erase:function(t,n){var i={};for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.expiresIn=-1,e.create(t,"",i)},supported:function(){return e.create("cookie_support","1"),"1"===e.read("cookie_support")&&(e.erase("cookie_support"),!0)}};return e}),define("core/utils/fingerprint",[],function(){"use strict";function e(e){e=e||{};var t=e.Math||window.Math,n=e.Date||window.Date;try{var i=(new n).getTimezoneOffset(),o=1,a=window.screen;a&&a.availWidth?o=a.availWidth*a.availHeight+a.colorDepth:a&&a.width&&(o=a.width*a.height);var r=window.document.documentElement;return t.abs(17*i+25*o-r.clientWidth*r.clientHeight)}catch(e){return 1}}return{get:e}}),define("core/utils/guid",["core/utils/fingerprint"],function(e){"use strict";function t(e){e=e||{};var t=e.Uint32Array||window.Uint32Array,n=e.crypto||window.crypto,i=e.Math||window.Math;try{var o=new t(1);return n.getRandomValues(o),o[0]}catch(e){return i.floor(1e9*i.random())}}function n(){var e=window.performance,t=e&&e.timing;return t?11*(t.domainLookupEnd-t.domainLookupStart)+13*(t.connectEnd-t.connectStart)+17*(t.responseStart-t.navigationStart):1e5}function i(i){i=i||{};var o=i.Math||window.Math,a=+(""+(new Date).getTime()).substring(3),r=o.abs(a+n()-e.get()).toString(32);return r+=t(i).toString(32)}return{generate:i}}),define("core/utils/hash",[],function(){"use strict";return{calculate:function(e){var t,n,i,o=0;if(0===e.length)return o;for(t=0,n=e.length;t<n;t++)i=e.charCodeAt(t),o=(o<<5)-o+i,o|=0;return o}}}),define("core/analytics/identity",["exports","core/utils/cookies","core/utils/guid","core/utils/hash","core/utils/fingerprint"],function(e,t,n,i,o){"use strict";var a=!1,r=e.ImpressionManager=function(){this.isPrivate=!0,this.impId=n.generate()};r.prototype.COOKIE_NAME="__jid",r.prototype.TTL=18e5,r.prototype.init=function(e){this.isPrivate=e&&e.isPrivate,this.isPrivate||(this.prevImp=t.read(this.COOKIE_NAME)),this.persist()},r.prototype.setImpressionId=function(e){this.impId=e,this.persist()},r.prototype.persist=function(){if(this.isPrivate)return void t.erase(this.COOKIE_NAME);t.create(this.COOKIE_NAME,this.impId,{expiresIn:this.TTL})};var s=e.UniqueManager=function(){this.isPrivate=!0};s.prototype.COOKIE_NAME="disqus_unique",s.prototype.TTL=31536e6,s.prototype.init=function(e){if(this.isPrivate=e&&e.isPrivate)return void t.erase(this.COOKIE_NAME,{domain:window.location.host.split(":")[0]});this.value=t.read(this.COOKIE_NAME)||n.generate(),t.create(this.COOKIE_NAME,this.value,{domain:window.location.host.split(":")[0],expiresIn:this.TTL})},s.prototype.isPersistent=function(){return!this.isPrivate&&t.read(this.COOKIE_NAME)===this.value},e.init=function(t,n){a&&!n||(e.impression.init(t),e.unique.init(t),a=!0)},e.reset=function(){a=!1,e.impression=new r,e.unique=new s},e.reset(),e.clientId=function(){var t,n=e.unique;return n.isPersistent()&&(t=n.value),t||""+o.get()},e.getPercentBucketForString=function(e,t){var n=Math.abs(i.calculate(e));if(t){var o=Math.pow(10,t);return n%(100*o)/o}return n%100},e.clientPercent=function(){return e.getPercentBucketForString(e.clientId())}}),define("core/utils/storage",[],function(){"use strict";var e=function(e){var t="_dsqstorage_";try{return e.localStorage.setItem(t,t),e.localStorage.getItem(t),e.localStorage.removeItem(t),!0}catch(e){return!1}}(window),t=function(){var e={};return{getItem:function(t){return e.hasOwnProperty(t)?e[t]:null},setItem:function(t,n){e[t]=n+""},removeItem:function(t){delete e[t]},clear:function(){e={}}}}();return{get:function(e){var t=null;try{return t=this.backend.getItem(e),JSON.parse(t)}catch(e){return t}},set:function(e,t){try{this.backend.setItem(e,JSON.stringify(t))}catch(e){}},remove:function(e){try{this.backend.removeItem(e)}catch(e){}},clear:function(){try{this.backend.clear()}catch(e){}},backend:e?window.localStorage:t,isPersistent:e}}),define("core/utils/auth",["core/utils/cookies"],function(e){"use strict";var t={};return t.getFromCookie=function(){var t=(e.read("disqusauth")||"").replace(/"/g,"").split("|");!t||t[1]&&t[6]||(t=[],e.erase("disqusauth",{}));var n=parseInt(t[6]||"0",10);return{avatarUrl:t[7]?decodeURIComponent(t[7]):void 0,datetimeFormatting:parseInt(t[4],10)?"absolute":"relative",id:n,isModerator:parseInt(t[8],10)>0,staff:!!parseInt(t[2],10),tzOffset:t[5],username:t[1],isAuthenticated:!(!n||"0"===n)}},t}),define("core/switches",["underscore","remote/config","core/analytics/identity","core/utils/storage","core/utils/auth"],function(e,t,n,i,o){"use strict";var a={},r={};return r._getKey=function(e){return"switch:"+e},r.disableFeature=function(e){a[e]=!1},r.resetFeature=function(e){a[e]=null},r.forceFeature=function(e){a[e]=!0},r.getSwitchContext=function(e){var n=i.get(this._getKey(e));if(null!==n)return n;var o=a[e];return null!=o?o:(t.lounge&&t.lounge.switches||{})[e]},r.isFeatureActive=function(t,i){var a=r.getSwitchContext(t);if(e.isBoolean(a))return a;if(!a)return!1;var s=o.getFromCookie(),l={percent:n.clientPercent(),user_id:s.id,username:s.username,is_staff:s.staff,is_moderator:s.isModerator},c=e.defaults(i||{},l);return e.any(a,function(t,i){var o=c[i];if(/percent$/.test(i)&&e.isNumber(t)){if(e.isNumber(o))return t>o;if(e.isString(o)){var a=0;return t!==Math.round(t)&&(a=(""+t).split(".").pop().length),t>n.getPercentBucketForString(o,a)}return!1}return e.isArray(t)?e.contains(t,o):t===o})},r}),define("core/utils/object/has",[],function(){"use strict";return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}),define("core/utils/collection/each",["core/utils/object/has"],function(e){"use strict";return function(t,n){var i=t.length,o=Array.prototype.forEach;if(isNaN(i))for(var a in t)e(t,a)&&n(t[a],a,t);else if(o)o.call(t,n);else for(var r=0;r<i;r++)n(t[r],r,t)}}),define("core/utils/object/extend",["core/utils/collection/each","core/utils/object/has"],function(e,t){"use strict";return function(n){return e(Array.prototype.slice.call(arguments,1),function(e){for(var i in e)t(e,i)&&(n[i]=e[i])}),n}}),define("core/extensions/helpers/switch",["core/switches","core/utils/object/extend"],function(e,t){"use strict";return function(n,i){return e.isFeatureActive(n,t({},i.hash))}}),define("core/extensions/helpers/partial",["handlebars"],function(e){"use strict";return function(t,n){e.registerPartial(t,n.fn)}}),define("core/extensions/helpers/getPartial",["handlebars"],function(e){"use strict";return function(t,n,i){return void 0===i&&(i=n,n=this,e.Utils.extend(n,i.hash)),new e.SafeString(e.partials[t](n,i))}}),function(e,t){"use strict";"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define("loglevel",t):e.log=t()}(this,function(){"use strict";function e(e){return typeof console!==s&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):r)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(i.call(this,t,n),this[e].apply(this,arguments))}}function i(e,t){for(var n=0;n<l.length;n++){var i=l[n];this[i]=n<e?r:this.methodFactory(i,e,t)}}function o(t,i,o){return e(t)||n.apply(this,arguments)}function a(e,t,n){function a(e){var t=(l[e]||"silent").toUpperCase();try{return void(window.localStorage[d]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+t+";"}catch(e){}}function r(){var e;try{e=window.localStorage[d]}catch(e){}if(typeof e===s)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(d)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}var c,u=this,d="loglevel";e&&(d+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||o,u.getLevel=function(){return c},u.setLevel=function(t,n){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(c=t,!1!==n&&a(t),i.call(u,t,e),typeof console===s&&t<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){r()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var h=r();null==h&&(h=null==t?"WARN":t),u.setLevel(h,!1)}var r=function(){},s="undefined",l=["trace","debug","info","warn","error"],c=new a,u={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new a(e,c.getLevel(),c.methodFactory)),t};var d=typeof window!==s?window.log:void 0;return c.noConflict=function(){return typeof window!==s&&window.log===c&&(window.log=d),c},c}),define("core/strings",["loglevel","translations"],function(e,t){"use strict";var n={translations:t};return n.get=function(e){var t=n.translations[e];return void 0===t?e:t},n.interpolate=function(t,n){function i(i){var o="";return i in n?o=void 0!==n[i]&&null!==n[i]?""+n[i]:"":e.error("Key `"+i+"` not found in context for: ",t),o}return t.replace(/%\(\w+\)s/g,function(e){return i(e.slice(2,-2))})},n.gettext=function(t,i){return t=n.get(t),i=i||{},t.split(/(%\(\w+\)s)/g).map(function(n){var o=n.match(/%\((\w+)\)s/);return o&&(o[1]in i?n=i[o[1]]:e.error("Key `"+o[1]+"` not found in context for: "+t)),""===n?null:n})},n}),define("core/extensions/helpers/gettext",["handlebars","core/strings"],function(e,t){"use strict";return function(){var n,i,o,a,r=arguments.length,s=arguments[r-1],l=s.hash,c=arguments[0],u=e.partials;c=e.Utils.escapeExpression(t.get(c));for(o in l)l.hasOwnProperty(o)&&(i=RegExp("%\\(("+o+")\\)s","gm"),n=l[o],a=n&&n.executePartial,a&&(n=u[n.partial].call(this,n.context,s)),void 0===n||null===n||"number"==typeof n&&isNaN(n)?n="":a||(n=e.Utils.escapeExpression(n)),c=c.replace(i,""+n));return new e.SafeString(c)}}),define("core/config/urls",[],function(){"use strict";return{jester:"https://referrer."+window.document.location.host+"/juggler",cdn:void 0}}),define("core/utils/object/get",[],function(){"use strict";return function(e,t,n){for(var i=0,o=t.length;e&&i<o;)e=e[t[i]],i+=1;return i<o||void 0===e?n:e}}),define("core/extensions/helpers/urlfor",["core/config/urls","core/utils/object/get"],function(e,t){"use strict";return function(n){return t(e,n.split("."))}}),define("core/extensions/helpers/html",["handlebars"],function(e){"use strict";return function(t){return new e.SafeString(t||"")}}),define("core/extensions/helpers/with",[],function(){"use strict";return function(){var e=arguments.length,t=arguments[e-1],n=arguments[0];return 3===e?(n={},n[arguments[0]]=arguments[1]):"_window_"===n&&(n=window),t.fn(n)}}),define("core/extensions/helpers/each",["handlebars"],function(e){"use strict";return function(t,n){var i,o,a,r=n.fn,s=n.inverse,l=0,c="";if(n.data&&(i=e.createFrame(n.data)),t&&"object"==typeof t)if("[object Array]"===Object.prototype.toString.call(t))for(a=t.length;l<a;l++)i&&(i.index=l,i.length=t.length),c+=r(t[l],{data:i});else for(o in t)t.hasOwnProperty(o)&&(i&&(i.key=o),c+=r(t[o],{data:i}),l+=1);return 0===l&&(c=s(this)),c}}),define("core/extensions/helpers/log",[],function(){"use strict";return function(e){console.log(e,this)}}),define("core/extensions/helpers/debug",[],function(){"use strict";return function(){}}),define("core/extensions/helpers/geturl",[],function(){"use strict";return window.geturl||function(e){return e}}),define("core/extensions/helpers/tag",["handlebars"],function(e){"use strict";return function(t,n){var i=["<"+t],o=n.hash.text;delete n.hash.text;for(var a in n.hash)n.hash.hasOwnProperty(a)&&i.push(" "+a+'="'+e.escapeExpression(n.hash[a])+'"');return i.push(">"+e.escapeExpression(o)+"</"+t+">"),new e.SafeString(i.join(""))}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";function e(){return Wn.apply(null,arguments)}function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function i(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function r(e,t,n,i){return Se(e,t,n,i,!0).utc()}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return null==e._pf&&(e._pf=s()),e._pf}function c(e){if(null==e._isValid){var t=l(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function u(e){var t=r(NaN);return null!=e?a(l(t),e):l(t).userInvalidated=!0,t}function d(e){return void 0===e}function h(e,t){var n,i,o;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=l(t)),d(t._locale)||(e._locale=t._locale),Yn.length>0)for(n in Yn)i=Yn[n],o=t[i],d(o)||(e[i]=o);return e}function m(t){h(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===Jn&&(Jn=!0,e.updateOffset(this),Jn=!1)}function p(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function f(e){return e<0?Math.ceil(e):Math.floor(e)}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=f(t)),n}function v(e,t,n){var i,o=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),r=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&g(e[i])!==g(t[i]))&&r++;return r+a}function b(){}function y(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,i,o,a=0;a<e.length;){for(o=y(e[a]).split("-"),t=o.length,n=y(e[a+1]),n=n?n.split("-"):null;t>0;){if(i=x(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&v(o,n,!0)>=t-1)break;t--}a++}return null}function x(e){var t=null;if(!Kn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Gn._abbr,require("./locale/"+e),k(t)}catch(e){}return Kn[e]}function k(e,t){var n;return e&&(n=d(t)?_(e):C(e,t))&&(Gn=n),Gn._abbr}function C(e,t){return null!==t?(t.abbr=e,Kn[e]=Kn[e]||new b,Kn[e].set(t),k(e),Kn[e]):(delete Kn[e],null)}function _(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Gn;if(!t(e)){if(n=x(e))return n;e=[e]}return w(e)}function P(e,t){var n=e.toLowerCase();Xn[n]=Xn[n+"s"]=Xn[t]=e}function T(e){return"string"==typeof e?Xn[e]||Xn[e.toLowerCase()]:void 0}function O(e){var t,n,i={};for(n in e)o(e,n)&&(t=T(n))&&(i[t]=e[n]);return i}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(t,n){return function(i){return null!=i?(M(this,t,i),e.updateOffset(this,n),this):F(this,t)}}function F(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function M(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function A(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=T(e),S(this[e]))return this[e](t);return this}function D(e,t,n){var i=""+Math.abs(e),o=t-i.length;return(e>=0?n?"+":"":"-")+(""+Math.pow(10,Math.max(0,o))).substr(1)+i}function N(e,t,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),e&&(ti[e]=o),t&&(ti[t[0]]=function(){return D(o.apply(this,arguments),t[1],t[2])}),n&&(ti[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function R(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,i=e.match(Qn);for(t=0,n=i.length;t<n;t++)i[t]=ti[i[t]]?ti[i[t]]:R(i[t]);return function(o){var a="";for(t=0;t<n;t++)a+=i[t]instanceof Function?i[t].call(o,e):i[t];return a}}function j(e,t){return e.isValid()?(t=I(t,e.localeData()),(ei[t]=ei[t]||V(t))(e)):e.localeData().invalidDate()}function I(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Zn.lastIndex=0;i>=0&&Zn.test(e);)e=e.replace(Zn,n),Zn.lastIndex=0,i-=1;return e}function L(e,t,n){yi[e]=S(t)?t:function(e,i){return e&&n?n:t}}function U(e,t){return o(yi,e)?yi[e](t._strict,t._locale):RegExp(H(e))}function H(e){return q(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,o){return t||n||i||o}))}function q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function z(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=g(e)}),n=0;n<e.length;n++)wi[e[n]]=i}function $(e,t){z(e,function(e,n,i,o){i._w=i._w||{},t(e,i._w,i,o)})}function B(e,t,n){null!=t&&o(wi,e)&&wi[e](t,n._a,n,e)}function W(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function G(e,n){return t(this._months)?this._months[e.month()]:this._months[Fi.test(n)?"format":"standalone"][e.month()]}function Y(e,n){return t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Fi.test(n)?"format":"standalone"][e.month()]}function J(e,t,n){var i,o,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=r([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function K(e,t){var n;return e.isValid()?"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))?e:(n=Math.min(e.date(),W(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e):e}function X(t){return null!=t?(K(this,t),e.updateOffset(this,!0),this):F(this,"Month")}function Q(){return W(this.year(),this.month())}function Z(e){return this._monthsParseExact?(o(this,"_monthsRegex")||te.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function ee(e){return this._monthsParseExact?(o(this,"_monthsRegex")||te.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function te(){function e(e,t){return t.length-e.length}var t,n,i=[],o=[],a=[];for(t=0;t<12;t++)n=r([2e3,t]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),o.sort(e),a.sort(e),t=0;t<12;t++)i[t]=q(i[t]),o[t]=q(o[t]),a[t]=q(a[t]);this._monthsRegex=RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=RegExp("^("+o.join("|")+")$","i"),this._monthsShortStrictRegex=RegExp("^("+i.join("|")+")$","i")}function ne(e){var t,n=e._a;return n&&-2===l(e).overflow&&(t=n[ki]<0||n[ki]>11?ki:n[Ci]<1||n[Ci]>W(n[xi],n[ki])?Ci:n[_i]<0||n[_i]>24||24===n[_i]&&(0!==n[Pi]||0!==n[Ti]||0!==n[Oi])?_i:n[Pi]<0||n[Pi]>59?Pi:n[Ti]<0||n[Ti]>59?Ti:n[Oi]<0||n[Oi]>999?Oi:-1,l(e)._overflowDayOfYear&&(t<xi||t>Ci)&&(t=Ci),l(e)._overflowWeeks&&-1===t&&(t=Si),l(e)._overflowWeekday&&-1===t&&(t=Ei),l(e).overflow=t),e}function ie(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function oe(e,t){var n=!0;return a(function(){return n&&(ie(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+Error().stack),n=!1),t.apply(this,arguments)},t)}function ae(e,t){Ri[e]||(ie(t),Ri[e]=!0)}function re(e){var t,n,i,o,a,r,s=e._i,c=Vi.exec(s)||ji.exec(s);if(c){for(l(e).iso=!0,t=0,n=Li.length;t<n;t++)if(Li[t][1].exec(c[1])){o=Li[t][0],i=!1!==Li[t][2];break}if(null==o)return void(e._isValid=!1);if(c[3]){for(t=0,n=Ui.length;t<n;t++)if(Ui[t][1].exec(c[3])){a=(c[2]||" ")+Ui[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(c[4]){if(!Ii.exec(c[4]))return void(e._isValid=!1);r="Z"}e._f=o+(a||"")+(r||""),xe(e)}else e._isValid=!1}function se(t){var n=Hi.exec(t._i);if(null!==n)return void(t._d=new Date(+n[1]));re(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t))}function le(e,t,n,i,o,a,r){var s=new Date(e,t,n,i,o,a,r);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function ce(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ue(e){return de(e)?366:365}function de(e){return e%4==0&&e%100!=0||e%400==0}function he(){return de(this.year())}function me(e,t,n){var i=7+t-n;return-(7+ce(e,0,i).getUTCDay()-t)%7+i-1}function pe(e,t,n,i,o){var a,r,s=(7+n-i)%7,l=me(e,i,o),c=1+7*(t-1)+s+l;return c<=0?(a=e-1,r=ue(a)+c):c>ue(e)?(a=e+1,r=c-ue(e)):(a=e,r=c),{year:a,dayOfYear:r}}function fe(e,t,n){var i,o,a=me(e.year(),t,n),r=Math.floor((e.dayOfYear()-a-1)/7)+1;return r<1?(o=e.year()-1,i=r+ge(o,t,n)):r>ge(e.year(),t,n)?(i=r-ge(e.year(),t,n),o=e.year()+1):(o=e.year(),i=r),{week:i,year:o}}function ge(e,t,n){var i=me(e,t,n),o=me(e+1,t,n);return(ue(e)-i+o)/7}function ve(e,t,n){return null!=e?e:null!=t?t:n}function be(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ye(e){var t,n,i,o,a=[];if(!e._d){for(i=be(e),e._w&&null==e._a[Ci]&&null==e._a[ki]&&we(e),e._dayOfYear&&(o=ve(e._a[xi],i[xi]),e._dayOfYear>ue(o)&&(l(e)._overflowDayOfYear=!0),n=ce(o,0,e._dayOfYear),e._a[ki]=n.getUTCMonth(),e._a[Ci]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[_i]&&0===e._a[Pi]&&0===e._a[Ti]&&0===e._a[Oi]&&(e._nextDay=!0,e._a[_i]=0),e._d=(e._useUTC?ce:le).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_i]=24)}}function we(e){var t,n,i,o,a,r,s,c;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,r=4,n=ve(t.GG,e._a[xi],fe(Ee(),1,4).year),i=ve(t.W,1),((o=ve(t.E,1))<1||o>7)&&(c=!0)):(a=e._locale._week.dow,r=e._locale._week.doy,n=ve(t.gg,e._a[xi],fe(Ee(),a,r).year),i=ve(t.w,1),null!=t.d?((o=t.d)<0||o>6)&&(c=!0):null!=t.e?(o=t.e+a,(t.e<0||t.e>6)&&(c=!0)):o=a),i<1||i>ge(n,a,r)?l(e)._overflowWeeks=!0:null!=c?l(e)._overflowWeekday=!0:(s=pe(n,i,o,a,r),e._a[xi]=s.year,e._dayOfYear=s.dayOfYear)}function xe(t){if(t._f===e.ISO_8601)return void re(t);t._a=[],l(t).empty=!0;var n,i,o,a,r,s=""+t._i,c=s.length,u=0;for(o=I(t._f,t._locale).match(Qn)||[],n=0;n<o.length;n++)a=o[n],i=(s.match(U(a,t))||[])[0],i&&(r=s.substr(0,s.indexOf(i)),r.length>0&&l(t).unusedInput.push(r),s=s.slice(s.indexOf(i)+i.length),u+=i.length),ti[a]?(i?l(t).empty=!1:l(t).unusedTokens.push(a),B(a,i,t)):t._strict&&!i&&l(t).unusedTokens.push(a);l(t).charsLeftOver=c-u,s.length>0&&l(t).unusedInput.push(s),!0===l(t).bigHour&&t._a[_i]<=12&&t._a[_i]>0&&(l(t).bigHour=void 0),t._a[_i]=ke(t._locale,t._a[_i],t._meridiem),ye(t),ne(t)}function ke(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Ce(e){var t,n,i,o,r;if(0===e._f.length)return l(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)r=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],xe(t),c(t)&&(r+=l(t).charsLeftOver,r+=10*l(t).unusedTokens.length,l(t).score=r,(null==i||r<i)&&(i=r,n=t));a(e,n||t)}function _e(e){if(!e._d){var t=O(e._i);e._a=i([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ye(e)}}function Pe(e){var t=new m(ne(Te(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Te(e){var i=e._i,o=e._f;return e._locale=e._locale||_(e._l),null===i||void 0===o&&""===i?u({nullInput:!0}):("string"==typeof i&&(e._i=i=e._locale.preparse(i)),p(i)?new m(ne(i)):(t(o)?Ce(e):o?xe(e):n(i)?e._d=i:Oe(e),c(e)||(e._d=null),e))}function Oe(o){var a=o._i;void 0===a?o._d=new Date(e.now()):n(a)?o._d=new Date(+a):"string"==typeof a?se(o):t(a)?(o._a=i(a.slice(0),function(e){return parseInt(e,10)}),ye(o)):"object"==typeof a?_e(o):"number"==typeof a?o._d=new Date(a):e.createFromInputFallback(o)}function Se(e,t,n,i,o){var a={};return"boolean"==typeof n&&(i=n,n=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=n,a._i=e,a._f=t,a._strict=i,Pe(a)}function Ee(e,t,n,i){return Se(e,t,n,i,!1)}function Fe(e,n){var i,o;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return Ee();for(i=n[0],o=1;o<n.length;++o)n[o].isValid()&&!n[o][e](i)||(i=n[o]);return i}function Me(){return Fe("isBefore",[].slice.call(arguments,0))}function Ae(){return Fe("isAfter",[].slice.call(arguments,0))}function De(e){var t=O(e),n=t.year||0,i=t.quarter||0,o=t.month||0,a=t.week||0,r=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0;this._milliseconds=+(t.millisecond||0)+1e3*c+6e4*l+36e5*s,this._days=+r+7*a,this._months=+o+3*i+12*n,this._data={},this._locale=_(),this._bubble()}function Ne(e){return e instanceof De}function Re(e,t){N(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+D(~~(e/60),2)+t+D(~~e%60,2)})}function Ve(e,t){var n=(t||"").match(e)||[],i=n[n.length-1]||[],o=(i+"").match(Wi)||["-",0,0],a=60*o[1]+g(o[2]);return"+"===o[0]?a:-a}function je(t,i){var o,a;return i._isUTC?(o=i.clone(),a=(p(t)||n(t)?+t:+Ee(t))-+o,o._d.setTime(+o._d+a),e.updateOffset(o,!1),o):Ee(t).local()}function Ie(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Le(t,n){var i,o=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Ve(gi,t):Math.abs(t)<16&&(t*=60),!this._isUTC&&n&&(i=Ie(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!n||this._changeInProgress?tt(this,Ke(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:Ie(this):null!=t?this:NaN}function Ue(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function He(e){return this.utcOffset(0,e)}function qe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ie(this),"m")),this}function ze(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ve(fi,this._i)),this}function $e(e){return!!this.isValid()&&(e=e?Ee(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Be(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function We(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={};if(h(e,this),e=Te(e),e._a){var t=e._isUTC?r(e._a):Ee(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ge(){return!!this.isValid()&&!this._isUTC}function Ye(){return!!this.isValid()&&this._isUTC}function Je(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ke(e,t){var n,i,a,r=e,s=null;return Ne(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(s=Gi.exec(e))?(n="-"===s[1]?-1:1,r={y:0,d:g(s[Ci])*n,h:g(s[_i])*n,m:g(s[Pi])*n,s:g(s[Ti])*n,ms:g(s[Oi])*n}):(s=Yi.exec(e))?(n="-"===s[1]?-1:1,r={y:Xe(s[2],n),M:Xe(s[3],n),d:Xe(s[4],n),h:Xe(s[5],n),m:Xe(s[6],n),s:Xe(s[7],n),w:Xe(s[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(a=Ze(Ee(r.from),Ee(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),i=new De(r),Ne(e)&&o(e,"_locale")&&(i._locale=e._locale),i}function Xe(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ze(e,t){var n;return e.isValid()&&t.isValid()?(t=je(t,e),e.isBefore(t)?n=Qe(e,t):(n=Qe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function et(e,t){return function(n,i){var o,a;return null===i||isNaN(+i)||(ae(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=n,n=i,i=a),n="string"==typeof n?+n:n,o=Ke(n,i),tt(this,o,e),this}}function tt(t,n,i,o){var a=n._milliseconds,r=n._days,s=n._months;t.isValid()&&(o=null==o||o,a&&t._d.setTime(+t._d+a*i),r&&M(t,"Date",F(t,"Date")+r*i),s&&K(t,F(t,"Month")+s*i),o&&e.updateOffset(t,r||s))}function nt(e,t){var n=e||Ee(),i=je(n,this).startOf("day"),o=this.diff(i,"days",!0),a=o<-6?"sameElse":o<-1?"lastWeek":o<0?"lastDay":o<1?"sameDay":o<2?"nextDay":o<7?"nextWeek":"sameElse";return this.format(t&&(S(t[a])?t[a]():t[a])||this.localeData().calendar(a,this,Ee(n)))}function it(){return new m(this)}function ot(e,t){var n=p(e)?e:Ee(e);return!(!this.isValid()||!n.isValid())&&(t=T(d(t)?"millisecond":t),"millisecond"===t?+this>+n:+n<+this.clone().startOf(t))}function at(e,t){var n=p(e)?e:Ee(e);return!(!this.isValid()||!n.isValid())&&(t=T(d(t)?"millisecond":t),"millisecond"===t?+this<+n:+this.clone().endOf(t)<+n)}function rt(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function st(e,t){var n,i=p(e)?e:Ee(e);return!(!this.isValid()||!i.isValid())&&(t=T(t||"millisecond"),"millisecond"===t?+this==+i:(n=+i,+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t)))}function lt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function ct(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function ut(e,t,n){var i,o,a,r;return this.isValid()?(i=je(e,this),i.isValid()?(o=6e4*(i.utcOffset()-this.utcOffset()),t=T(t),"year"===t||"month"===t||"quarter"===t?(r=dt(this,i),"quarter"===t?r/=3:"year"===t&&(r/=12)):(a=this-i,r="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-o)/864e5:"week"===t?(a-o)/6048e5:a),n?r:f(r)):NaN):NaN}function dt(e,t){var n,i,o=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(o,"months");return t-a<0?(n=e.clone().add(o-1,"months"),i=(t-a)/(a-n)):(n=e.clone().add(o+1,"months"),i=(t-a)/(n-a)),-(o+i)}function ht(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function mt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():j(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pt(t){var n=j(this,t||e.defaultFormat);return this.localeData().postformat(n)}function ft(e,t){return this.isValid()&&(p(e)&&e.isValid()||Ee(e).isValid())?Ke({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.from(Ee(),e)}function vt(e,t){return this.isValid()&&(p(e)&&e.isValid()||Ee(e).isValid())?Ke({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function bt(e){return this.to(Ee(),e)}function yt(e){var t;return void 0===e?this._locale._abbr:(t=_(e),null!=t&&(this._locale=t),this)}function wt(){return this._locale}function xt(e){
switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function kt(e){return e=T(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function Ct(){return+this._d-6e4*(this._offset||0)}function _t(){return Math.floor(+this/1e3)}function Pt(){return this._offset?new Date(+this):this._d}function Tt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ot(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function St(){return this.isValid()?this.toISOString():"null"}function Et(){return c(this)}function Ft(){return a({},l(this))}function Mt(){return l(this).overflow}function At(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Dt(e,t){N(0,[e,e.length],0,t)}function Nt(e){return It.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Rt(e){return It.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Vt(){return ge(this.year(),1,4)}function jt(){var e=this.localeData()._week;return ge(this.year(),e.dow,e.doy)}function It(e,t,n,i,o){var a;return null==e?fe(this,i,o).year:(a=ge(e,i,o),t>a&&(t=a),Lt.call(this,e,t,n,i,o))}function Lt(e,t,n,i,o){var a=pe(e,t,n,i,o),r=ce(a.year,0,a.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function Ut(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Ht(e){return fe(e,this._week.dow,this._week.doy).week}function qt(){return this._week.dow}function zt(){return this._week.doy}function $t(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Bt(e){var t=fe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Wt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Gt(e,n){return t(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][e.day()]}function Yt(e){return this._weekdaysShort[e.day()]}function Jt(e){return this._weekdaysMin[e.day()]}function Kt(e,t,n){var i,o,a;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=Ee([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Xt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Wt(e,this.localeData()),this.add(e-t,"d")):t}function Qt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Zt(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function en(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function tn(){return this.hours()%12||12}function nn(e,t){N(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function on(e,t){return t._meridiemParse}function an(e){return"p"===(e+"").toLowerCase().charAt(0)}function rn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function sn(e,t){t[Oi]=g(1e3*("0."+e))}function ln(){return this._isUTC?"UTC":""}function cn(){return this._isUTC?"Coordinated Universal Time":""}function un(e){return Ee(1e3*e)}function dn(){return Ee.apply(null,arguments).parseZone()}function hn(e,t,n){var i=this._calendar[e];return S(i)?i.call(t,n):i}function mn(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)})}function pn(){return this._invalidDate}function fn(e){return this._ordinal.replace("%d",e)}function gn(e){return e}function vn(e,t,n,i){var o=this._relativeTime[n];return S(o)?o(e,t,n,i):o.replace(/%d/i,e)}function bn(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)}function yn(e){var t,n;for(n in e)t=e[n],S(t)?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function wn(e,t,n,i){return _()[n](r().set(i,t),e)}function xn(e,t,n,i,o){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return wn(e,t,n,o);var a,r=[];for(a=0;a<i;a++)r[a]=wn(e,a,n,o);return r}function kn(e,t){return xn(e,t,"months",12,"month")}function Cn(e,t){return xn(e,t,"monthsShort",12,"month")}function _n(e,t){return xn(e,t,"weekdays",7,"day")}function Pn(e,t){return xn(e,t,"weekdaysShort",7,"day")}function Tn(e,t){return xn(e,t,"weekdaysMin",7,"day")}function On(){var e=this._data;return this._milliseconds=vo(this._milliseconds),this._days=vo(this._days),this._months=vo(this._months),e.milliseconds=vo(e.milliseconds),e.seconds=vo(e.seconds),e.minutes=vo(e.minutes),e.hours=vo(e.hours),e.months=vo(e.months),e.years=vo(e.years),this}function Sn(e,t,n,i){var o=Ke(t,n);return e._milliseconds+=i*o._milliseconds,e._days+=i*o._days,e._months+=i*o._months,e._bubble()}function En(e,t){return Sn(this,e,t,1)}function Fn(e,t){return Sn(this,e,t,-1)}function Mn(e){return e<0?Math.floor(e):Math.ceil(e)}function An(){var e,t,n,i,o,a=this._milliseconds,r=this._days,s=this._months,l=this._data;return a>=0&&r>=0&&s>=0||a<=0&&r<=0&&s<=0||(a+=864e5*Mn(Nn(s)+r),r=0,s=0),l.milliseconds=a%1e3,e=f(a/1e3),l.seconds=e%60,t=f(e/60),l.minutes=t%60,n=f(t/60),l.hours=n%24,r+=f(n/24),o=f(Dn(r)),s+=o,r-=Mn(Nn(o)),i=f(s/12),s%=12,l.days=r,l.months=s,l.years=i,this}function Dn(e){return 4800*e/146097}function Nn(e){return 146097*e/4800}function Rn(e){var t,n,i=this._milliseconds;if("month"===(e=T(e))||"year"===e)return t=this._days+i/864e5,n=this._months+Dn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Nn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw Error("Unknown unit "+e)}}function Vn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function jn(e){return function(){return this.as(e)}}function In(e){return e=T(e),this[e+"s"]()}function Ln(e){return function(){return this._data[e]}}function Un(){return f(this.days()/7)}function Hn(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}function qn(e,t,n){var i=Ke(e).abs(),o=Do(i.as("s")),a=Do(i.as("m")),r=Do(i.as("h")),s=Do(i.as("d")),l=Do(i.as("M")),c=Do(i.as("y")),u=o<No.s&&["s",o]||a<=1&&["m"]||a<No.m&&["mm",a]||r<=1&&["h"]||r<No.h&&["hh",r]||s<=1&&["d"]||s<No.d&&["dd",s]||l<=1&&["M"]||l<No.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,Hn.apply(null,u)}function zn(e,t){return void 0!==No[e]&&(void 0===t?No[e]:(No[e]=t,!0))}function $n(e){var t=this.localeData(),n=qn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Bn(){var e,t,n,i=Ro(this._milliseconds)/1e3,o=Ro(this._days),a=Ro(this._months);e=f(i/60),t=f(e/60),i%=60,e%=60,n=f(a/12),a%=12;var r=n,s=a,l=o,c=t,u=e,d=i,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(r?r+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var Wn,Gn,Yn=e.momentProperties=[],Jn=!1,Kn={},Xn={},Qn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Zn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ei={},ti={},ni=/\d/,ii=/\d\d/,oi=/\d{3}/,ai=/\d{4}/,ri=/[+-]?\d{6}/,si=/\d\d?/,li=/\d\d\d\d?/,ci=/\d\d\d\d\d\d?/,ui=/\d{1,3}/,di=/\d{1,4}/,hi=/[+-]?\d{1,6}/,mi=/\d+/,pi=/[+-]?\d+/,fi=/Z|[+-]\d\d:?\d\d/gi,gi=/Z|[+-]\d\d(?::?\d\d)?/gi,vi=/[+-]?\d+(\.\d{1,3})?/,bi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,yi={},wi={},xi=0,ki=1,Ci=2,_i=3,Pi=4,Ti=5,Oi=6,Si=7,Ei=8;N("M",["MM",2],"Mo",function(){return this.month()+1}),N("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),N("MMMM",0,0,function(e){return this.localeData().months(this,e)}),P("month","M"),L("M",si),L("MM",si,ii),L("MMM",function(e,t){return t.monthsShortRegex(e)}),L("MMMM",function(e,t){return t.monthsRegex(e)}),z(["M","MM"],function(e,t){t[ki]=g(e)-1}),z(["MMM","MMMM"],function(e,t,n,i){var o=n._locale.monthsParse(e,i,n._strict);null!=o?t[ki]=o:l(n).invalidMonth=e});var Fi=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Mi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ai="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Di=bi,Ni=bi,Ri={};e.suppressDeprecationWarnings=!1;var Vi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ji=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ii=/Z|[+-]\d\d(?::?\d\d)?/,Li=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ui=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Hi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=oe("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),N("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),P("year","y"),L("Y",pi),L("YY",si,ii),L("YYYY",di,ai),L("YYYYY",hi,ri),L("YYYYYY",hi,ri),z(["YYYYY","YYYYYY"],xi),z("YYYY",function(t,n){n[xi]=2===t.length?e.parseTwoDigitYear(t):g(t)}),z("YY",function(t,n){n[xi]=e.parseTwoDigitYear(t)}),z("Y",function(e,t){t[xi]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var qi=E("FullYear",!1);e.ISO_8601=function(){};var zi=oe("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ee.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:u()}),$i=oe("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ee.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:u()}),Bi=function(){return Date.now?Date.now():+new Date};Re("Z",":"),Re("ZZ",""),L("Z",gi),L("ZZ",gi),z(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ve(gi,e)});var Wi=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Gi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Yi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ke.fn=De.prototype;var Ji=et(1,"add"),Ki=et(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Xi=oe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Dt("gggg","weekYear"),Dt("ggggg","weekYear"),Dt("GGGG","isoWeekYear"),Dt("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),L("G",pi),L("g",pi),L("GG",si,ii),L("gg",si,ii),L("GGGG",di,ai),L("gggg",di,ai),L("GGGGG",hi,ri),L("ggggg",hi,ri),$(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=g(e)}),$(["gg","GG"],function(t,n,i,o){n[o]=e.parseTwoDigitYear(t)}),N("Q",0,"Qo","quarter"),P("quarter","Q"),L("Q",ni),z("Q",function(e,t){t[ki]=3*(g(e)-1)}),N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),L("w",si),L("ww",si,ii),L("W",si),L("WW",si,ii),$(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=g(e)});var Qi={dow:0,doy:6};N("D",["DD",2],"Do","date"),P("date","D"),L("D",si),L("DD",si,ii),L("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),z(["D","DD"],Ci),z("Do",function(e,t){t[Ci]=g(e.match(si)[0],10)});var Zi=E("Date",!0);N("d",0,"do","day"),N("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),N("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),N("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),L("d",si),L("e",si),L("E",si),L("dd",bi),L("ddd",bi),L("dddd",bi),$(["dd","ddd","dddd"],function(e,t,n,i){var o=n._locale.weekdaysParse(e,i,n._strict);null!=o?t.d=o:l(n).invalidWeekday=e}),$(["d","e","E"],function(e,t,n,i){t[i]=g(e)});var eo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),to="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),no="Su_Mo_Tu_We_Th_Fr_Sa".split("_");N("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),L("DDD",ui),L("DDDD",oi),z(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),N("H",["HH",2],0,"hour"),N("h",["hh",2],0,tn),N("hmm",0,0,function(){return""+tn.apply(this)+D(this.minutes(),2)}),N("hmmss",0,0,function(){return""+tn.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)}),N("Hmm",0,0,function(){return""+this.hours()+D(this.minutes(),2)}),N("Hmmss",0,0,function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)}),nn("a",!0),nn("A",!1),P("hour","h"),L("a",on),L("A",on),L("H",si),L("h",si),L("HH",si,ii),L("hh",si,ii),L("hmm",li),L("hmmss",ci),L("Hmm",li),L("Hmmss",ci),z(["H","HH"],_i),z(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),z(["h","hh"],function(e,t,n){t[_i]=g(e),l(n).bigHour=!0}),z("hmm",function(e,t,n){var i=e.length-2;t[_i]=g(e.substr(0,i)),t[Pi]=g(e.substr(i)),l(n).bigHour=!0}),z("hmmss",function(e,t,n){var i=e.length-4,o=e.length-2;t[_i]=g(e.substr(0,i)),t[Pi]=g(e.substr(i,2)),t[Ti]=g(e.substr(o)),l(n).bigHour=!0}),z("Hmm",function(e,t,n){var i=e.length-2;t[_i]=g(e.substr(0,i)),t[Pi]=g(e.substr(i))}),z("Hmmss",function(e,t,n){var i=e.length-4,o=e.length-2;t[_i]=g(e.substr(0,i)),t[Pi]=g(e.substr(i,2)),t[Ti]=g(e.substr(o))});var io=/[ap]\.?m?\.?/i,oo=E("Hours",!0);N("m",["mm",2],0,"minute"),P("minute","m"),L("m",si),L("mm",si,ii),z(["m","mm"],Pi);var ao=E("Minutes",!1);N("s",["ss",2],0,"second"),P("second","s"),L("s",si),L("ss",si,ii),z(["s","ss"],Ti);var ro=E("Seconds",!1);N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,function(){return 10*this.millisecond()}),N(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),N(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),N(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),N(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),N(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),L("S",ui,ni),L("SS",ui,ii),L("SSS",ui,oi);var so;for(so="SSSS";so.length<=9;so+="S")L(so,mi);for(so="S";so.length<=9;so+="S")z(so,sn);var lo=E("Milliseconds",!1);N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var co=m.prototype;co.add=Ji,co.calendar=nt,co.clone=it,co.diff=ut,co.endOf=kt,co.format=pt,co.from=ft,co.fromNow=gt,co.to=vt,co.toNow=bt,co.get=A,co.invalidAt=Mt,co.isAfter=ot,co.isBefore=at,co.isBetween=rt,co.isSame=st,co.isSameOrAfter=lt,co.isSameOrBefore=ct,co.isValid=Et,co.lang=Xi,co.locale=yt,co.localeData=wt,co.max=$i,co.min=zi,co.parsingFlags=Ft,co.set=A,co.startOf=xt,co.subtract=Ki,co.toArray=Tt,co.toObject=Ot,co.toDate=Pt,co.toISOString=mt,co.toJSON=St,co.toString=ht,co.unix=_t,co.valueOf=Ct,co.creationData=At,co.year=qi,co.isLeapYear=he,co.weekYear=Nt,co.isoWeekYear=Rt,co.quarter=co.quarters=Ut,co.month=X,co.daysInMonth=Q,co.week=co.weeks=$t,co.isoWeek=co.isoWeeks=Bt,co.weeksInYear=jt,co.isoWeeksInYear=Vt,co.date=Zi,co.day=co.days=Xt,co.weekday=Qt,co.isoWeekday=Zt,co.dayOfYear=en,co.hour=co.hours=oo,co.minute=co.minutes=ao,co.second=co.seconds=ro,co.millisecond=co.milliseconds=lo,co.utcOffset=Le,co.utc=He,co.local=qe,co.parseZone=ze,co.hasAlignedHourOffset=$e,co.isDST=Be,co.isDSTShifted=We,co.isLocal=Ge,co.isUtcOffset=Ye,co.isUtc=Je,co.isUTC=Je,co.zoneAbbr=ln,co.zoneName=cn,co.dates=oe("dates accessor is deprecated. Use date instead.",Zi),co.months=oe("months accessor is deprecated. Use month instead",X),co.years=oe("years accessor is deprecated. Use year instead",qi),co.zone=oe("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ue);var uo=co,ho={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},mo={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},po=/\d{1,2}/,fo={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},go=b.prototype;go._calendar=ho,go.calendar=hn,go._longDateFormat=mo,go.longDateFormat=mn,go._invalidDate="Invalid date",go.invalidDate=pn,go._ordinal="%d",go.ordinal=fn,go._ordinalParse=po,go.preparse=gn,go.postformat=gn,go._relativeTime=fo,go.relativeTime=vn,go.pastFuture=bn,go.set=yn,go.months=G,go._months=Mi,go.monthsShort=Y,go._monthsShort=Ai,go.monthsParse=J,go._monthsRegex=Ni,go.monthsRegex=ee,go._monthsShortRegex=Di,go.monthsShortRegex=Z,go.week=Ht,go._week=Qi,go.firstDayOfYear=zt,go.firstDayOfWeek=qt,go.weekdays=Gt,go._weekdays=eo,go.weekdaysMin=Jt,go._weekdaysMin=no,go.weekdaysShort=Yt,go._weekdaysShort=to,go.weekdaysParse=Kt,go.isPM=an,go._meridiemParse=io,go.meridiem=rn,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=oe("moment.lang is deprecated. Use moment.locale instead.",k),e.langData=oe("moment.langData is deprecated. Use moment.localeData instead.",_);var vo=Math.abs,bo=jn("ms"),yo=jn("s"),wo=jn("m"),xo=jn("h"),ko=jn("d"),Co=jn("w"),_o=jn("M"),Po=jn("y"),To=Ln("milliseconds"),Oo=Ln("seconds"),So=Ln("minutes"),Eo=Ln("hours"),Fo=Ln("days"),Mo=Ln("months"),Ao=Ln("years"),Do=Math.round,No={s:45,m:45,h:22,d:26,M:11},Ro=Math.abs,Vo=De.prototype;return Vo.abs=On,Vo.add=En,Vo.subtract=Fn,Vo.as=Rn,Vo.asMilliseconds=bo,Vo.asSeconds=yo,Vo.asMinutes=wo,Vo.asHours=xo,Vo.asDays=ko,Vo.asWeeks=Co,Vo.asMonths=_o,Vo.asYears=Po,Vo.valueOf=Vn,Vo._bubble=An,Vo.get=In,Vo.milliseconds=To,Vo.seconds=Oo,Vo.minutes=So,Vo.hours=Eo,Vo.days=Fo,Vo.weeks=Un,Vo.months=Mo,Vo.years=Ao,Vo.humanize=$n,Vo.toISOString=Bn,Vo.toString=Bn,Vo.toJSON=Bn,Vo.locale=yt,Vo.localeData=wt,Vo.toIsoString=oe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Bn),Vo.lang=Xi,N("X",0,0,"unix"),N("x",0,0,"valueOf"),L("x",pi),L("X",vi),z("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),z("x",function(e,t,n){n._d=new Date(g(e))}),e.version="2.11.2",function(e){Wn=e}(Ee),e.fn=uo,e.min=Me,e.max=Ae,e.now=Bi,e.utc=r,e.unix=un,e.months=kn,e.isDate=n,e.locale=k,e.invalid=u,e.duration=Ke,e.isMoment=p,e.weekdays=_n,e.parseZone=dn,e.localeData=_,e.isDuration=Ne,e.monthsShort=Cn,e.weekdaysMin=Tn,e.defineLocale=C,e.weekdaysShort=Pn,e.normalizeUnits=T,e.relativeTimeThreshold=zn,e.prototype=uo,e}),define("core/extensions/helpers/now",["moment"],function(e){"use strict";return function(t){return e().format(t)}}),define("core/extensions/handlebars.helpers",["require","handlebars","./helpers/eq","./helpers/ne","./helpers/gt","./helpers/lt","./helpers/ge","./helpers/le","./helpers/typeof","./helpers/notNull","./helpers/any","./helpers/if_any","./helpers/if_all","./helpers/switch","./helpers/partial","./helpers/getPartial","./helpers/gettext","./helpers/urlfor","./helpers/html","./helpers/with","./helpers/each","./helpers/log","./helpers/debug","./helpers/geturl","./helpers/tag","./helpers/now"],function(e){"use strict";var t=e("handlebars");return t.registerHelper("eq",e("./helpers/eq")),t.registerHelper("ne",e("./helpers/ne")),t.registerHelper("gt",e("./helpers/gt")),t.registerHelper("lt",e("./helpers/lt")),t.registerHelper("ge",e("./helpers/ge")),t.registerHelper("le",e("./helpers/le")),t.registerHelper("typeof",e("./helpers/typeof")),t.registerHelper("notNull",e("./helpers/notNull")),t.registerHelper("any",e("./helpers/any")),t.registerHelper("if_any",e("./helpers/if_any")),t.registerHelper("if_all",e("./helpers/if_all")),t.registerHelper("switch",e("./helpers/switch")),t.registerHelper("partial",e("./helpers/partial")),t.registerHelper("getPartial",e("./helpers/getPartial")),t.registerHelper("gettext",e("./helpers/gettext")),t.registerHelper("urlfor",e("./helpers/urlfor")),t.registerHelper("html",e("./helpers/html")),t.registerHelper("with",e("./helpers/with")),t.registerHelper("each",e("./helpers/each")),t.registerHelper("log",e("./helpers/log")),t.registerHelper("debug",e("./helpers/debug")),t.registerHelper("geturl",e("./helpers/geturl")),t.registerHelper("tag",e("./helpers/tag")),t.registerHelper("now",e("./helpers/now")),t}),define("home/templates/preload",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return"<p></p>\n"},useData:!0})}),define("core/utils/urls",[],function(){"use strict";var e={},t=window.document.createElement("a");return e.getOrigin=function(e){t.href=e;var n=t.href.split("/");return n[0]+"//"+n[2]},e.getHostName=function(e){return t.href=e,t.hostname},e.getDomainPart=function(t,n){return void 0===n&&(n=0),e.getHostName(t).split(".").reverse()[n]},e.getQuery=function(e){return t.href=e,t.search},e.getPathname=function(e){return t.href=e,t.pathname},e}),define("core/frameBus",["jquery","underscore","backbone","core/utils/urls"],function(e,t,n,i){"use strict";var o=window.opener||window.parent,a=window.name,r=window.document.referrer,s={};s.client=i.getOrigin(window.document.location.href),s.secureClient=s.client.replace(/^\w+:\/\//,"https://"),s.host=r?i.getOrigin(r):s.client;var l={origins:s,messageHandler:function(e){e=e.originalEvent;var t;try{t=JSON.parse(e.data)}catch(e){return}t.name&&"!"===t.name[0]&&e.origin!==s.client&&e.origin!==s.secureClient||"client"===t.scope&&l.trigger(t.name,t.data)},postMessage:function(e){e=JSON.stringify(e),o.postMessage(e,"*")},sendHostMessage:function(e,t){t=t||[],l.postMessage({scope:"host",sender:a,name:e,data:t})}};return t.extend(l,n.Events),e(window).on("message",l.messageHandler),e(window).on("unload",function(){l.sendHostMessage("die")}),window.DISQUS=window.DISQUS||{},window.DISQUS.Bus=l,l}),define("core/bus",["backbone","underscore","core/frameBus"],function(e,t,n){"use strict";var i=t.extend({},e.Events);return i.frame=n,i}),define("core/utils/html",[],function(){"use strict";var e=function(e){var t;try{t=(new window.DOMParser).parseFromString("<!doctype html><meta charset=utf-8><title> </title>","text/html")}catch(e){}return t||(t=window.document.implementation.createHTMLDocument("")),t.body.innerHTML=e,t};return{stripTags:function(t){var n=e(t).body;return(n.textContent||n.innerText).replace(/\r?\n/g," ")},replaceAnchors:function(t,n){var i=e(t);return[].forEach.call(i.querySelectorAll("a"),function(e){var t=e.getAttribute("href")||"",i=e.innerHTML,o=n(e);0===t.indexOf(i.slice(0,-3))?i=o:t.length&&-1!==i.indexOf(t)?i=i.replace(t,o):i+=" "+o,e.insertAdjacentHTML("afterend",i),e.parentNode.removeChild(e)}),i.body.innerHTML.trim()}}}),define("core/utils/metatags",["jquery","underscore","backbone","core/utils/html","core/strings"],function(e,t,n,i,o){"use strict";var a=o.get,r={type:['property="og:type"'],title:['property="og:title"','name="twitter:title"'],description:['name="twitter:description"','property="og:description"','name="description"'],image:['property="og:image"','name="twitter:image"'],url:['property="og:url"','name="twitter:url"'],_card:['name="twitter:card"']},s=function(e){return 0===e.indexOf("//")&&(e="https:"+e),e},l={type:1,title:"Disqus",description:a("The web's community of communities now has one central hub."),image:s("//c.disquscdn.com/home/current/img/brand/favicon-192x192.png"),url:"https://disqus.com/",_card:"summary"},c=t.extend({DEFAULTS:l,META_TAGS:r,set:function(n){n=n||{},t.isString(n)&&(n={title:n}),n.title&&(n.title=i.stripTags(n.title)),n.title&&(n.title+=" · Disqus"),n.url||(n.url=(window.document.location+"").split("?")[0]),n.url=s(n.url),n.image&&(n.image=s(n.image)),n.description&&(n.description=i.stripTags(n.description));var o=e("head");t.each(r,function(i,a){t.each(i,function(t){var i=o.find("["+t+"]");i.length||(i=e("<meta "+t+">"),o.append(i)),i.attr("content",n[a]||l[a])})}),window.document.title=n.title||l.title,c.trigger("change:metatags")}},n.Events);return c}),define("core/config",[],function(){"use strict";var e=window.location.origin;return{urls:{avatar:{generic:"https://c.disquscdn.com/images/noavatar92.png"},api:e+"/api/3.0/",apiSettings:e+"/users/self/",login:e+"/next/login/",oauth:{twitter:e+"/_ax/twitter/begin/",google:e+"/_ax/google/begin/",facebook:e+"/_ax/facebook/begin/"},oauthDestroy:function(t){return e+"/_ax/"+t+"/unmerge/"},oauthStatus:function(t){return e+"/_ax/"+t+"/merged/"},userDelete:e+"/auth/json/user_delete/",verifyEmail:e+"/next/verify/"},keys:{api:"E8Uh5l5fHZ6gD8U3KycjAIAk46f68Zw7C6eW8WSjZvCLXebZ7p0r1yrYDrLilk2F"},feedApiVersion:"12",debug:!1}}),define("core/utils/browser",[],function(){"use strict";return{isIE:function(){return!!window.document.documentMode},isSafari:function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("safari")>-1&&-1===e.indexOf("chrome")},isFirefox:function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1&&-1===e.indexOf("chrome")},isChrome:function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("crios")>-1||!!window.chrome&&"Google Inc."===window.navigator.vendor&&void 0===window.opr&&-1===e.indexOf("edge")},isEdge:function(){return window.navigator.userAgent.toLowerCase().indexOf("edge")>-1},isOpera:function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("opera")>-1||e.indexOf("opr")>-1},isCrawler:function(e){return void 0===e&&(e=window),/bot|crawl|slurp|spider|facebookexternalhit|embedly|feedly|pinterest/i.test(e.navigator.userAgent)}}}),define("core/utils/isMobileUserAgent",[],function(){"use strict";return function(e){return e=e||window,/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(e.navigator.userAgent||e.navigator.vendor||e.opera)}}),define("core/utils",["jquery","underscore","core/config","core/utils/browser","core/utils/isMobileUserAgent"],function(e,t,n,i,o){"use strict";function a(e){return function(t){return t&&t.preventDefault&&t.preventDefault(),e.apply(this,arguments)}}function r(e){return function(t){return t&&t.stopPropagation&&t.stopPropagation(),e.apply(this,arguments)}}function s(e){return a(r(e))}function l(e){if(!e)return"";e="http://"+e.replace(/^([a-z+.-]+:)?\/+/i,"");var t=m.createElement("a");t.href=e;var n=t.hostname.replace(/^www\d*\./i,"");return n=n.toLowerCase()}function c(e){var n=[];return t.each(e,function(e,t){void 0!==e&&n.push(t+(null===e?"":"="+encodeURIComponent(e)))}),n.join("&")}function u(e,t,n){if(t&&(-1===e.indexOf("?")?e+="?":"&"!==e.charAt(e.length-1)&&(e+="&"),e+=this.serializeArgs(t)),n){var i={};return i[(new Date).getTime()]=null,this.serialize(e,i)}var o=e.length;return"&"===e.charAt(o-1)?e.slice(0,o-1):e}function d(e,n,i){i?t.extend(i,{location:1,status:1,resizable:1,scrollbars:1}):i={},i.width&&i.height&&t.defaults(i,{left:window.screen.width/2-i.width/2,top:window.screen.height/2-i.height/2});var o=t.map(i,function(e,t){return t+"="+e}).join(",");return window.open(e,n,o)}function h(e,t,n){t<0&&(t=0);var i=e.substring(0,t),o=e.substring(t);return i.length&&!/\s$/.test(i)&&(i+=" "),/^\s/.test(o)||(o=" "+o),i+n+o}var m=window.document,p=/^[a-zA-Z0-9.!#$%&'*+-\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,f=function(e){return p.test(e)
},g=n.TLDS||"zw|zuerich|zone|zm|zip|za|yt|youtube|yokohama|yoga|yodobashi|ye|yandex|yachts|xyz|xxx|xin|xerox|wtf|wtc|ws|world|works|work|wme|win|williamhill|wiki|wien|whoswho|wf|weir|wedding|wed|website|webcam|watch|wang|wales|vu|voyage|voto|voting|vote|vodka|vn|vlaanderen|vision|villas|video|viajes|vi|vg|vet|versicherung|ventures|vegas|ve|vc|vacations|va|uz|uy|us|uol|uno|university|uk|ug|ua|tz|tw|tv|tui|tt|trust|travel|training|trading|trade|tr|toys|town|tours|toshiba|toray|top|tools|tokyo|today|to|tn|tm|tl|tk|tj|tirol|tires|tips|tienda|tickets|theater|th|tg|tf|tennis|temasek|tel|technology|tech|team|td|tc|taxi|tax|tattoo|tatar|taipei|sz|systems|sydney|sy|sx|swiss|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|st|sr|spreadbetting|spiegel|space|soy|sony|solutions|solar|sohu|software|social|so|sn|sm|sl|sky|sk|sj|site|singles|si|shriram|show|shoes|shiksha|sh|sg|sexy|sex|sew|services|sener|seat|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|scb|sca|sc|sb|saxo|sarl|sap|samsung|sale|saarland|sa|ryukyu|rw|run|ruhr|ru|rsvp|rs|rodeo|rocks|ro|rip|rio|rich|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reit|reisen|reise|rehab|redstone|red|recipes|realtor|re|racing|quebec|qpon|qa|py|pw|pub|pt|ps|property|properties|prof|productions|prod|pro|press|praxi|pr|post|porn|poker|pohl|pn|pm|plus|plumbing|place|pl|pk|pizza|pink|pictures|pictet|pics|piaget|physio|photos|photography|photo|philips|pharmacy|ph|pg|pf|pe|party|parts|partners|paris|panerai|page|pa|ovh|otsuka|osaka|organic|org|oracle|ooo|online|onl|ong|one|om|okinawa|nz|nyc|nu|ntt|nrw|nra|nr|np|no|nl|nissan|ninja|nico|ni|nhk|ngo|ng|nf|nexus|news|new|neustar|network|net|nec|ne|nc|navy|name|nagoya|nadex|na|mz|my|mx|mw|mv|museum|mu|mtpc|mtn|mt|ms|mr|mq|mp|movie|mov|motorcycles|moscow|mortgage|mormon|money|monash|moe|moda|mobi|mo|mn|mma|mm|ml|mk|mini|mil|miami|mh|mg|menu|memorial|meme|melbourne|meet|media|me|md|mc|marriott|markets|marketing|market|mango|management|maison|maif|madrid|ma|ly|lv|luxury|luxe|lu|ltda|lt|ls|lr|love|lotto|lotte|london|lol|loans|loan|lk|link|limo|limited|lighting|life|lidl|liaison|li|lgbt|legal|leclerc|lease|lds|lc|lb|lawyer|latrobe|lat|land|lacaixa|la|kz|kyoto|ky|kw|kred|krd|kr|kp|komatsu|koeln|kn|km|kiwi|kitchen|kim|ki|kh|kg|ke|kddi|kaufen|juegos|jp|joburg|jobs|jo|jm|jewelry|jetzt|je|jcb|java|iwc|it|is|irish|ir|iq|io|investments|international|int|insure|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|im|il|ifm|ie|id|icu|ibm|hu|ht|hr|how|house|hosting|host|horse|honda|homes|holiday|holdings|hockey|hn|hm|hk|hiv|hitachi|hiphop|hermes|here|help|healthcare|haus|hangout|hamburg|gy|gw|guru|guitars|guide|guge|gu|gt|gs|gripe|green|gratis|graphics|gr|gq|gp|gov|gop|google|goog|goo|golf|goldpoint|gold|gn|gmx|gmo|gmail|gm|globo|global|gle|glass|gl|gives|gifts|gift|gi|gh|ggee|gg|gf|gent|ge|gdn|gd|gbiz|gb|garden|gallery|gal|ga|futbol|furniture|fund|frogans|frl|fr|foundation|forsale|forex|football|foo|fo|fm|fly|flsmidth|flowers|florist|flights|fk|fj|fitness|fit|fishing|fish|firmdale|financial|finance|film|fi|feedback|fashion|farm|fans|fan|faith|fail|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|et|estate|esq|es|erni|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|ec|eat|dz|dvag|durban|download|doosan|domains|doha|dog|docs|do|dnp|dm|dk|dj|discount|directory|direct|digital|diet|diamonds|dev|design|desi|dentist|dental|democrat|delivery|degree|deals|de|dclk|day|datsun|dating|date|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|crs|cricket|creditcard|credit|cr|courses|country|coop|cool|cooking|contractors|consulting|construction|condos|computer|company|community|com|cologne|college|coffee|codes|coach|co|cn|cm|club|clothing|clinic|click|cleaning|claims|cl|ck|city|citic|ci|church|chrome|christmas|chloe|cheap|chat|channel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbn|catering|cat|casino|cash|casa|cartier|cars|careers|career|care|cards|caravan|capital|capetown|canon|cancerresearch|camp|camera|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|business|builders|build|budapest|bt|bs|brussels|brother|broker|bridgestone|br|boutique|boo|bond|boats|bo|bnpparibas|bn|bmw|bm|blue|bloomberg|blackfriday|black|bj|biz|bio|bingo|bike|bid|bi|bh|bg|bf|best|berlin|beer|be|bd|bbc|bb|bayern|bauhaus|bargains|barclays|barclaycard|bar|bank|band|ba|az|axa|ax|aw|autos|auto|audio|auction|au|attorney|at|associates|asia|as|arpa|army|archi|ar|aquarelle|aq|apartments|ao|android|an|amsterdam|am|alsace|allfinanz|al|airforce|aig|ai|agency|ag|afl|af|aero|ae|adult|ads|ad|actor|active|accountants|accountant|accenture|academy|ac|abogado|abbott|abb",v=RegExp("([^@.]|^)\\b(?:\\w[\\w-]*:/{0,3}(?:(?:\\w+:)?\\w+@)?)?([\\w-]+\\.)+(?:"+g+')(?!\\.\\w)\\b(?::\\d+)?(?:[/?][^\\s\\{\\}\\|\\\\\\^\\[\\]`<>"\\x80-\\xFF\\x00-\\x1F\\x7F]*)?',"g"),b=function(e){return!!e.match(v)},y=/^[\w-]+:\/{0,3}/,w=/([.,]+)$/g,x=function(e){var t,n,i,o,a,r=[];if(!e)return r;for(;t=v.exec(e);){n=t[0],a=t[1],n=n.slice(a.length),w.lastIndex=0,i=w.exec(n),i&&(n=n.slice(0,n.length-i[0].length)),o=y.test(n)?n:"http://"+n;var s=t.index+a.length;r.push({text:n,url:o,index:s,endIndex:s+n.length})}return r},k=RegExp("[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E\\u00A1-\\u00BF\\u2010-\\u2027\\u2030-\\u205E\\u2300-\\u23FF\\u2E00-\\u2E7F\\u3001-\\u303F\\uFE10-\\uFE19\\uFE30-\\uFE4F\\uFE50-\\uFE6B\\uFF01-\\uFF0F\\uFF1A-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF60\\uFF5F-\\uFF64]+$"),C=function(e,t){if(e.length<=t)return e;e=e.slice(0,t-1);var n=e,i=/(^.*\S)\s/.exec(e);i&&(e=i[1]);var o=k.exec(e);return o&&(e=e.slice(0,e.length-o[0].length)),e.length<.5*n.length&&(e=n),e+"…"},_=function(){var e=m.createElement("fakeelement");return function(t,n){return void 0!==e.style[n]}}();return{validateEmail:f,isUrl:b,bleachFindUrls:x,niceTruncate:C,transitionEndEvent:function(){return t.find({transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},_)||null}(),animationEndEvent:function(){return t.find({animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},_)||null}(),isMobileUserAgent:o,preventDefaultHandler:a,stopPropagationHandler:r,stopEventHandler:s,getDomain:l,serializeArgs:c,serialize:u,openWindow:d,insertWithWhitespace:h,willOpenNewWindow:function(t,n){return n||(n=e(t.currentTarget)),"_blank"===n.attr("target")||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey},clickShouldBeLogged:function(){var e={},n=/#.*$/,i=function(e){var n=e.attr("data-tid");return n||(n=t.uniqueId(),e.attr("data-tid",n)),n};return function(t,o){if(t.isDefaultPrevented())return!1;if(!o.is("a"))return!1;if(!(o.attr("href")||"").replace(n,""))return!1;var a=i(o),r=(new Date).getTime();return!(e[a]&&r-e[a]<500||(e[a]=r,0))}}(),browser:i}}),define("home/mixins/asEmbedLayout",["jquery","underscore","core/frameBus","core/utils"],function(e,t,n,i){"use strict";return function(){this.events=t.extend({"click [data-action=close-drawer]":"closeDrawer","click .viewport":"closeDrawerOnClick","click [data-action=full-home]":"openFullHome","click [data-action=refresh-drawer]":"handleRefresh",keydown:"handleKeyPress","wheel .scrollable-measure-selector":"handleScroll","wheel .viewport":"handleViewportScroll","mousewheel .scrollable-measure-selector":"handleScroll","mousewheel .viewport":"handleViewportScroll"},this.events||{}),this.handleRefresh=function(t){t.preventDefault();var n=e(t.currentTarget);n.addClass("loading");var i=this.session.getOrCreateNotifications(),o=e.Deferred(),a=e.Deferred();e.when(o,a).done(function(){n.removeClass("loading"),i.all.trigger("clearUnreadCount")}),i.all.fetchItems({reset:!0,success:function(){o.resolve()}}),i.replies.fetchItems({reset:!0,success:function(){a.resolve()}})},this.openFullHome=function(e){e.preventDefault(),window.open(window.location.href,"_blank")},this.closeDrawerOnClick=function(t){e(t.target).hasClass("viewport")&&this.closeDrawer(t)},this.isIE10=function(){return 10===window.document.documentMode},this.handleKeyPress=function(e){27===e.which&&this.closeDrawer(e)},this.closeDrawer=function(o){o.preventDefault();var a=e("body");a.removeClass("active"),this.isIE10()||!i.transitionEndEvent?t.delay(t.bind(n.sendHostMessage,this,"close"),300):a.one(i.transitionEndEvent,function(){n.sendHostMessage("close")})};var o=this.onRender;this.onRender=function(){o.apply(this,arguments),t.defer(t.bind(n.trigger,n,"mainlayoutRendered"))},this.getScrollableContainer=function(){return this.scrollableContainer&&e.contains(window.document.documentElement,this.scrollableContainer[0])||(this.scrollableContainer=this.$(".scrollable-measure-selector")),this.scrollableContainer},this.handleViewportScroll=function(e){e.preventDefault()},this.handleScroll=function(e){var t=e.originalEvent,n=t.wheelDeltaY||-t.deltaY,i=this.getScrollableContainer();i&&(0===i.scrollTop()&&n>0&&e.preventDefault(),i.scrollTop()+i.innerHeight()>=i[0].scrollHeight&&n<0&&e.preventDefault(),e.stopPropagation())}}}),define("home/mixins/withClickLinkTracking",["jquery","underscore","core/bus"],function(e,t,n){"use strict";var i=t.debounce(function(e,t){n.trigger("uiAction:clickLink",e,t)},500,!0);return function(t){this.trackClickLink=function(n){if("edit"!==n.currentTarget.dataset.action){var o=e(n.currentTarget),a={adjective:o.attr("data-link-name")};a.area=t||o.closest("[data-jester-area]").attr("data-jester-area"),i(n,a)}}}}),define("core/api",["jquery","underscore","backbone","core/config","core/utils"],function(e,t,n,i,o){"use strict";function a(e){return d.href=e,d.origin||d.protocol+"//"+d.hostname+(d.port?":"+d.port:"")}function r(e){return e.replace(/^(http:)?\/\//,"https://")}function s(n){n=t.defaults(n,h),n.traditional=!0,a(window.location.href)!==a(n.url)&&(n.xhrFields={withCredentials:!0}),n.omitDisqusApiKey||(n.data=n.data||{},window.FormData&&n.data instanceof window.FormData?n.url=o.serialize(n.url,{api_key:i.keys.api}):n.data.api_key=i.keys.api);var r=n.error;return n.error=function(e){m.trigger("error",e),t.isFunction(r)&&r(e)},e.ajax(n)}function l(e,n){return n=n||{},n.url=c(e),n.omitDisqusApiKey||(n.data=t.extend(n.data||{},{api_key:i.keys.api})),m.trigger("call",n),s(n).always(t.bind(this.trigger,this,"complete",n))}function c(e){return/(https?:)?\/\//.test(e)?r(e):i.urls.api+e}var u=window.document,d=u.createElement("a"),h={},m={ERROR_CODES:{OBJ_NOT_FOUND:8,MAX_ITEMS_REACHED:24},ajax:s,call:l,getURL:c,defaults:function(e){Object.keys(e).forEach(function(n){var i=e[n],o=h[n];t.isObject(i)&&t.isObject(o)?t.extend(o,i):h[n]=i})},headers:function(e){var n=t.extend({},h.headers,e);return h.headers=t.pick(n,Boolean)},makeHttps:r};return t.extend(m,n.Events),m}),define("core/time",[],function(){"use strict";function e(e){return e.indexOf("+")>=0?e:e+"+00:00"}return{ISO_8601:"YYYY-MM-DDTHH:mm:ssZ",assureTzOffset:e}}),define("core/models/BaseUser",["backbone","core/config"],function(e,t){"use strict";return e.Model.extend({defaults:{about:null,avatar:{cache:t.urls.avatar.generic,permalink:t.urls.avatar.generic},connections:{},email:null,isAnonymous:!0,isFollowedBy:null,isFollowing:null,joinedAt:null,name:null,profileUrl:null,url:null,username:null,numPosts:null,numFollowing:null,numForumsFollowing:null,numFollowers:null,numLikesReceived:null,isFlagged:null},hasValidAvatar:function(e){var t=e?e.avatar:this.get("avatar");return t&&t.cache},isAnonymous:function(){return!this.get("id")},isRegistered:function(){return!this.isAnonymous()},validate:function(e){if(!this.hasValidAvatar(e))return"None of the avatar related properties can be null, undefined or empty on User models."},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.thread={},this.hasValidAvatar()||(t.avatar=this.defaults.avatar),t.isRegistered=this.isRegistered(),t}})}),define("core/models/User",["jquery","underscore","moment","core/config","core/time","core/utils","core/strings","core/api","core/models/BaseUser"],function(e,t,n,i,o,a,r,s,l){"use strict";function c(e,t,n){e[t]=e[t]||[],e[t].push(n)}var u=r.get,d=l.extend({url:s.getURL("users/details"),validate:function(n){var i={};if(n.display_name&&(n.display_name=e.trim(n.display_name)),n.display_name||c(i,"display_name",u("Please enter your name.")),n.email||c(i,"email",u("Please enter your email address.")),a.validateEmail(n.email)||c(i,"email",u("Invalid email address.")),this.isNew()&&(n.password?n.password.length<d.MIN_PASSWORD_LEN&&c(i,"password",u("Password must have at least 6 characters.")):c(i,"password",u("Please enter a password."))),n.name&&(n.name.length<d.MIN_NAME_LEN&&c(i,"name",r.interpolate(u("Name must have at least %(minLength)s characters."),{minLength:d.MIN_NAME_LEN})),n.name.length>d.MAX_NAME_LEN&&c(i,"name",r.interpolate(u("Name must have less than %(maxLength)s characters."),{maxLength:d.MAX_NAME_LEN}))),n.location&&n.location.length>d.MAX_LOCATION_LEN&&c(i,"location",r.interpolate(u("Location must have less than %(maxLength)s characters."),{maxLength:d.MAX_LOCATION_LEN})),n.url&&(n.url.length>d.MAX_URL_LEN&&c(i,"url",r.interpolate(u("Site must have less than %(maxLength)s characters."),{maxLength:d.MAX_URL_LEN})),a.isUrl(n.url)||c(i,"url",u("Please enter a valid site."))),!t.isEmpty(i))return i},prepareFetchOptions:function(e){e=e?t.clone(e):{};var n={};return this.get("id")?n.user=this.get("id"):this.get("username")&&(n.user="username:"+this.get("username")),t.extend(n,e.data),e.data=n,e},fetch:function(e){return e=this.prepareFetchOptions(e),l.prototype.fetch.call(this,e)},parse:function(e){return e.response||e},register:function(e){var n=this;return e=e||{},s.call("internal/users/register.json",{data:t.extend(this.toRegisterJSON(),{gRecaptchaResponse:e.gRecaptchaResponse}),method:"POST",success:function(i){s.call("users/acceptTerms",{method:"POST"}),n.set(t.extend({},i.response,{hasAcceptedGdprTerms:!0})),e.success&&e.success(i)},error:e.error})},saveAvatar:function(e){var t=new window.FormData;return t.append("avatar_file",e),t.append("api_key",i.keys.api),s.call("internal/users/updateAvatar.json",{method:"post",data:t,cache:!1,contentType:!1,processData:!1})},saveProfile:function(){return s.call("users/updateProfile.json",{method:"POST",data:{name:this.get("name"),about:this.get("about"),location:this.get("location"),url:this.get("url")}})},toRegisterJSON:function(){return t.pick(this.toJSON(),"display_name","email","password")},isSession:function(e){return e.user.id&&e.user.id===this.id},isEditable:function(e){return this.isSession(e)&&!this.get("remote")},toJSON:function(e){e=e||{};var t=l.prototype.toJSON.call(this),n=this.collection&&this.collection.thread;return t.thread.canModerate=!(!n||!n.isModerator(this)),e.session&&(t.isSession=this.isSession(e.session),t.isEditable=this.isEditable(e.session)),t},_changeFollowState:function(e){this.set({isFollowing:e,numFollowers:Math.max(0,this.get("numFollowers")+(e?1:-1))});var t="users/"+(e?"follow":"unfollow"),n=this;return s.call(t+".json",{data:{target:this.get("id")},method:"POST",success:function(e){n.trigger("sync",n,e,{})}})},follow:function(){return this._changeFollowState(!0)},unfollow:function(){return this._changeFollowState(!1)},_changeBlockState:function(e){var t=this;return s.call("users/block/"+(e?"create":"delete")+".json",{data:{user:this.get("id")},method:"POST",success:function(e){t.set(e.response)}})},block:function(){return this._changeBlockState(!0)},unblock:function(){return this._changeBlockState(!1)},report:function(e){var t=this;return s.call("users/report.json",{data:{reason:e,user:this.get("id")},method:"POST",success:function(){t.set("isFlagged",!0)}})},toggleFollowState:function(){return this._changeFollowState(!this.get("isFollowing"))},registeredLessThan:function(e,t){var i=o.assureTzOffset(this.get("joinedAt")),a=n().subtract(e,t);return n(i).isAfter(a)},registeredToday:function(){return this.registeredLessThan(1,"day")},registeredThisWeek:function(){return this.registeredLessThan(1,"week")},shouldHomeOnboard:function(){return!this.get("homeOnboardingComplete")},setHomeOnboardComplete:function(e){this.updateFlags({homeOnboardingComplete:e}),e&&this.listenTo(this,"change:homeOnboardingComplete",t.bind(this.set,this,"homeOnboardingComplete",e,{silent:!0}))},updateFlags:function(e){return this.set(e),s.call("internal/users/updateFlags.json",{data:t.mapObject(e,function(e){return e?1:0}),method:"POST"})}},{MIN_PASSWORD_LEN:6,MIN_NAME_LEN:2,MAX_NAME_LEN:30,MAX_LOCATION_LEN:255,MAX_URL_LEN:200});return d}),define("core/models/Session",["jquery","underscore","backbone","moment","core/api","core/bus","core/config","core/time","core/utils","core/utils/cookies","core/utils/guid","core/utils/auth","core/models/BaseUser","core/models/User"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m){"use strict";var p=function(){return d.getFromCookie()},f=n.Model.extend({initialize:function(){this.constructor.fromCookie=t.once(p),this.user=this.getAnonUserInstance()},setUser:function(e){this.user&&this.stopListening(this.user),this.user=e,this.setIfNewUser(),this.listenTo(e,"all",this.trigger),this.trigger("change:id",e)},isLoggedOut:function(){return!this.isLoggedIn()},isLoggedIn:function(){return!!this.user.get("id")},fetch:function(e){var n=e||{};return o.call("users/details.json",{data:n.data,success:t.bind(function(e){e=e.response,e.id&&this.setUser(this.getUserInstance(e)),n.success&&n.success(e),n.complete&&n.complete(e)},this),error:function(e){n.error&&n.error(e),n.complete&&n.complete(e)}})},getAnonUserInstance:function(e){return new h(e)},getUserInstance:function(e){return new m(e)},getCsrfToken:function(){var e=c.read("csrftoken");return e||(e=u.generate().replace(/\W/g,""),c.create("csrftoken",e,{domain:window.location.hostname,expiresIn:31536e6})),e},authenticate:function(n){var i=this.authServices[n];if(i){if(t.isFunction(i))return i.call(this);a.trigger("uiAction:openLogin",n);var o=this.getAuthWindowArgs(i),r=i.url;r+=(r.indexOf("?")>-1?"&":"?")+e.param(o),this.openAuthWindow(r,i.width,i.height)}},authServices:{disqus:{url:r.urls.login,width:460,height:355,attachExperiment:!0},twitter:{url:r.urls.oauth.twitter,width:650,height:680,csrf:!0,attachExperiment:!0},facebook:{url:r.urls.oauth.facebook,width:550,height:300,csrf:!0,attachExperiment:!0},google:{url:r.urls.oauth.google,width:445,height:635,csrf:!0,attachExperiment:!0}},getAuthWindowArgs:function(e){var n={};return e.csrf&&(n.ctkn=this.getCsrfToken()),t.extend(n,e.params),n},openAuthWindow:function(e,t,n){return l.openWindow(e,"_blank",{width:t,height:n})},setIfNewUser:function(){var e=this.user.get("joinedAt");if(this.user.get("isAnonymous")||!e)return void this.user.set("joinedRecently",!1);var t=s.assureTzOffset(e);this.user.set("joinedRecently",i().subtract(10,"seconds").isBefore(t))}});return f.fromCookie=p,f.isKnownToBeLoggedOut=function(){return!f.fromCookie().id},f}),define("core/UniqueModel",["underscore"],function(e){"use strict";function t(e,n,i){var o=t.pool(e),a=n&&n[e.prototype.idAttribute];return a?(t.get(e,a)?o[a].set(n):o[a]=new e(n,i),o[a]):new e(n,i)}return t.pool={},t.pool=function(e){var n=t.pool[e.__type__];if(!n)throw Error("Model not registered. Use UniqueModel.addType");return n},t.get=function(e,n){return t.pool(e)[n]},t.set=function(e,n){var i=t.pool(e),o=n&&n.get(e.prototype.idAttribute);if(!o)return n;var a=t.get(e,o);return a?a.set(n.attributes):a=i[o]=n,a},t.addType=function(e,n){n.__type__&&t.pool[e]||(n.__type__=e,t.pool[e]={})},t.boundModel=function(n){var i=e.bind(t,t,n);return i.prototype=n.prototype,i},t.wrap=t.boundModel,t}),define("home/utils/backboneUtils",["jquery"],function(e){"use strict";return{memoizedFetch:function(){if(this.fetchPromise)return this.fetchPromise;var e=this;return this.fetchPromise=this.constructor.__super__.fetch.apply(this,arguments).then(function(){return e.fetchPromise=null,e.fetched=!0,arguments},function(t){return e.fetchPromise=null,t})},getPromiseFor:function(t,n){var i=e.Deferred();return t.has(n)?i.resolve(t.get(n)):t.once("change:"+n,function(e,t){i.resolve(t)}),i.promise()}}}),define("core/utils/url/serializeArgs",["require","exports","module","core/utils/collection/each"],function(e,t,n){"use strict";var i=e("core/utils/collection/each");n.exports=function(e){var t=[];return i(e,function(e,n){void 0!==e&&t.push(encodeURIComponent(n)+(null===e?"":"="+encodeURIComponent(e)))}),t.join("&")}}),define("core/utils/url/serialize",["require","exports","module","core/utils/url/serializeArgs"],function(e,t,n){"use strict";var i=e("core/utils/url/serializeArgs");n.exports=function e(t,n,o){if(n&&(-1===t.indexOf("?")?t+="?":"&"!==t.charAt(t.length-1)&&(t+="&"),t+=i(n)),o){var a={};return a[(new Date).getTime()]=null,e(t,a)}var r=t.length;return"&"===t.charAt(r-1)?t.slice(0,r-1):t}}),define("home/utils/sidebarUtils",[],function(){"use strict";var e={};return e.isSidebar=function(){try{return window.self!==window.top}catch(e){return!0}},e}),define("home/utils/navigationUtils",["jquery","underscore","backbone","core/utils/url/serialize","home/utils/sidebarUtils","home/config"],function(e,t,n,i,o,a){"use strict";var r,s=/^#/,l=/\/$/,c=/^[#\/]|\s+$/g,u=function(){e("body").html('<div class="spinner"></div>');var t={next:"https://disqus.com"+window.location.pathname+window.location.search};r||(r=require("home/models/Session"));var n=r.get(),o=n.forum;o&&(t.forum=o.shortname);var a=i("https://disqus.com/profile/login/",t);window.top.location=a},d=function(){e("body").html('<div class="spinner"></div>'),window.top.location="https://disqus.com/"},h={scrollPositions:{},lastNavigateTime:null,handleLinkClicks:function(n){var i=n.currentTarget;if(!this.shouldNotHandleLinkClick(n,i)){var a=e(i),r=a.attr("href");if(s.test(r)&&i.hash)return void this.scrollToElement(n);if(o.isSidebar()||!this.matchesRoute(i)&&!this.isInternalLink(i)){var l=a.attr("data-link-out");if(l){var c=a.attr("href");t.delay(function(){a.attr("href",c)},500),a.attr("href",l)}return void a.attr("target","_blank")}this.isInternalLink(i)&&!this.matchesRoute(i)||(n.preventDefault(),this.navigate(i,!0))}},coerceTrailingSlash:function(e){l.test(e.pathname)||this.navigate(decodeURI(e.pathname+"/"+e.search+e.hash),{replace:!0})},getFragmentFromLink:function(e){var t=decodeURI(e.pathname+e.search),n=a.appRoot.replace(l,"");return t.indexOf(n)||(t=t.slice(n.length)),t.replace(c,"")},isInternalLink:function(e){var t=window.location.host;return t===e.host||e.host.indexOf(t)>1},isInbound:function(e){return"#"===e.href[0]||this.matchesRoute(e)},matchesRoute:function(e){if(e.host!==window.location.host)return!1;var i=this.getFragmentFromLink(e);return t.any(n.history.handlers,function(e){return e.route.test(i)})},shouldNotHandleLinkClick:function(t,n){return t.isDefaultPrevented()||e(n).attr("target")||this.hasModifierKey(t)||e(n).closest("[data-view-type=react]").length},hasModifierKey:function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},linkClickChangesPage:function(t,n){return"_blank"!==e(n).attr("target")&&(!this.hasModifierKey(t)&&(!this.isInbound(n)&&!1))},scrollToElement:function(t){if(t){var n=e(t.currentTarget).attr("href"),i=e(n);if(i.length){t.preventDefault();var o=e("header.site-nav--wrapper"),a=o.height();e("body").scrollTop(i.offset().top-a)}}},navigate:function(t,i){i=i||{};var o,a=i.trigger,r="";return t.pathname&&(r=t.hash,t=this.getFragmentFromLink(t)),-1!==t.indexOf("home/user")&&(t=t.replace("home/user","by")),this.storeScrollPosition(),i.replace||(h.lastNavigateTime=e.now()),o=n.history.navigate(t+r,i),a&&this.applyScrollPosition(),o},notFoundRouteHandler:function(){h.navigate("/",{trigger:!0,replace:!0})},storeScrollPosition:function(){this.scrollPositions[n.history.getFragment()]=window.pageYOffset||window.document.documentElement.scrollTop},applyScrollPosition:function(){window.scrollTo(0,this.scrollPositions[n.history.getFragment()])},navigateToLoginOnAuthFail:function(e){if(!e.responseText)return e;try{var t=JSON.parse(e.responseText);"/home/welcome"!==window.location.pathname&&(4===t.code||2===t.code&&/authenticate/.test(t.response))&&u()}catch(e){}return e},navigateToLogin:u,navigateToHomepage:d};return h}),define("home/templates/confirmModal",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" modal-dialog--light"},3:function(e,t,n,i,o){return'<button class="text-smaller modal-close" data-dismiss="modal">\n<span class="icon-cancel"></span>\n</button>\n'},5:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-footer">\n<button type="button" class="button button-outline button-small" data-dismiss="modal">\n'+r(s(n,"gettext").call(a,"Cancel",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:0},end:{line:15,column:20}}}))+'\n</button>\n<button type="button" class="button button-fill--brand button-small" data-dismiss="modal" data-action="confirm">\n'+r(s(n,"gettext").call(a,"Confirm",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:0},end:{line:18,column:21}}}))+"\n</button>\n</div>\n"},7:function(e,t,n,i,o){return'<div class="modal-footer">\n<button type="button" class="button button-outline button-small" data-dismiss="modal">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Close",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:0},end:{line:25,column:19}}}))+"\n</button>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">\n<div class="modal-dialog'+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"type"):t,null!=(a=null!=t?s(t,"types"):t)?s(a,"CLOSE_LIGHT"):a,{name:"eq",hash:{},data:o,loc:{start:{line:2,column:30},end:{line:2,column:57}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:24},end:{line:2,column:86}}}))?a:"")+'">\n<div class="modal-content">\n'+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"type"):t,null!=(a=null!=t?s(t,"types"):t)?s(a,"CLOSE_ICON"):a,{name:"eq",hash:{},data:o,loc:{start:{line:4,column:6},end:{line:4,column:32}}}),{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:8,column:7}}}))?a:"")+'<div data-role="content">\n</div>\n</div>\n'+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"type"):t,null!=(a=null!=t?s(t,"types"):t)?s(a,"CONFIRM_CANCEL"):a,{name:"eq",hash:{},data:o,loc:{start:{line:12,column:6},end:{line:12,column:36}}}),{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:0},end:{line:21,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"type"):t,null!=(a=null!=t?s(t,"types"):t)?s(a,"CLOSE"):a,{name:"eq",hash:{},data:o,loc:{start:{line:22,column:6},end:{line:22,column:27}}}),{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:0},end:{line:28,column:7}}}))?a:"")+"</div>\n</div>\n"},useData:!0})}),define("home/utils/confirmModal",["jquery","home/utils/navigationUtils","home/templates/confirmModal"],function(e,t,n){"use strict";function i(){var t=e("<div>").addClass("modal-scrollbar-measure")[0];e("body").append(t);var n=t.offsetWidth-t.clientWidth;return e(t).remove(),n}function o(t){var n=e("<style>").attr("type","text/css")[0];n.styleSheet?n.styleSheet.cssText=t:n.innerHTML=t,e("head").append(n)}function a(i){i=i||{},i.modal=i.modal||{};var o=e(n({type:i.modal.type||s.CLOSE_ICON,types:s}));return i.modal.content&&o.find("[data-role=content]").html(i.modal.content),o.on("shown.bs.modal",function(){e("body").addClass("scroll-fix")}).on("hidden.bs.modal",function(){e("body").removeClass("scroll-fix"),o.remove()}).on("click","a[data-action=close-and-navigate]",function(n){n.preventDefault();var i=e(n.target),a=i.attr("href");a&&t.navigate(a,{trigger:!0}),o.modal("hide")}),e("body").append(o),o}function r(t,n){t=t||s.CLOSE;var i=e.Deferred(),o=a({modal:{type:t,content:n}});return o.on("click","[data-action=confirm]",function(){i.resolve(!0,o)}).on("hidden.bs.modal",function(){i.resolve(!1,o)}),o.modal("show"),i.promise()}var s={CLOSE:1,CONFIRM_CANCEL:2,CLOSE_ICON:3,CLOSE_LIGHT:4};return e(function(){var e=i();o(["@media only screen and (min-width: 480px) {","body.scroll-fix { margin-right: "+e+"px; }","body.scroll-fix .compensation { margin-right: "+e+"px; }","}"].join(" "))}),{TYPES:s,getModal:a,confirmationPromise:r}}),define("home/templates/confirmBlacklistUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">'+r(s(n,"gettext").call(a,"Ban %(username)s?",{name:"gettext",hash:{username:s(n,"tag").call(a,"b",{name:"tag",hash:{text:null!=t?s(t,"username"):t},data:o,loc:{start:{line:2,column:65},end:{line:2,column:90}}})},data:o,loc:{start:{line:2,column:24},end:{line:2,column:92}}}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+r(s(n,"gettext").call(a,"Click Confirm to ban and remove this user's recent comments and discussions. This user will no longer be able to post comments.",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:3},end:{line:5,column:144}}}))+"</p>\n</div>\n"},useData:!0})}),define("home/models/User",["jquery","underscore","core/api","core/strings","core/models/User","home/utils/backboneUtils","home/utils/confirmModal","home/templates/confirmBlacklistUser","core/UniqueModel"],function(e,t,n,i,o,a,r,s,l){"use strict";var c=o,u=c.prototype,d=i.get,h={forum:!0,channel:!0},m=c.extend({defaults:t.defaults({numChannelsFollowing:null},u.defaults),idAttribute:"username",initialize:function(e,t){u.initialize.call(this,e,t),this.session=require("home/models/Session").get(),this.listenTo(this,"followed:user",this.handleFollowedUser),this.listenTo(this,"unfollowed:user",this.handleUnfollowedUser),this.listenTo(this,"followed:forum",this.handleFollowedForum),this.listenTo(this,"unfollowed:forum",this.handleUnfollowedForum),this.listenTo(this,"followed:channel",this.handleFollowedChannel),this.listenTo(this,"unfollowed:channel",this.handleUnfollowedChannel)},shouldFetch:function(){return!(this.get("name")&&this.has("numFollowers")&&this.has("numFollowing")&&this.has("numForumsFollowing"))},shouldFetchBasics:function(){return!this.get("name")},ensureFetchedBasics:function(){return this.shouldFetchBasics()&&this.fetch(),this.fetchPromise||e.Deferred().resolve().promise()},isSessionUser:function(){return this.isSession(this.session)},isGlobalAdmin:function(){return this.session.user.get("isGlobalAdmin")},getUserReputationLabel:function(){var e=this.get("rep");return e<.25?"Low 1":e<.8?"Low 2":e<2.9?"Average":"High"},prepareFetchOptions:function(e){return e=e?t.clone(e):{},e.data=t.extend({attach:"userFlaggedUser"},e.data),u.prepareFetchOptions.call(this,e)},fetch:function(e){return e=this.prepareFetchOptions(e),a.memoizedFetch.call(this,e)},getNumTotalFollowing:function(){return this.get("numFollowing")+this.getNumCommunitiesFollowing()},getNumCommunitiesFollowing:function(){return this.get("numForumsFollowing")+this.get("numChannelsFollowing")},toggleFollowed:function(){return this.get("isFollowing")?this.unfollow():this.follow()},follow:function(){return this.session.user.trigger("followed:user",this),u.follow.call(this)},unfollow:function(){return this.session.user.trigger("unfollowed:user",this),
u.unfollow.call(this)},removeFollower:function(e){if(this.isSessionUser()){var t=this.get("numFollowers")-1;return this.set("numFollowers",Math.max(0,t)),n.call("users/removeFollower",{type:"POST",data:{follower:e.get("id")}})}},handleFollowedUser:function(){this.set({numFollowing:this.get("numFollowing")+1})},handleUnfollowedUser:function(){this.set({numFollowing:Math.max(0,this.get("numFollowing")-1)})},handleFollowedForum:function(){this.set({numForumsFollowing:this.get("numForumsFollowing")+1})},handleUnfollowedForum:function(){this.set({numForumsFollowing:Math.max(0,this.get("numForumsFollowing")-1)})},handleFollowedChannel:function(){this.set({numChannelsFollowing:this.get("numChannelsFollowing")+1})},handleUnfollowedChannel:function(){this.set({numChannelsFollowing:Math.max(0,this.get("numChannelsFollowing")-1)})},moderate:function(i){if(h[i.type]){var o=i.shouldModerate?"addModerator":"removeModerator",a=i.endpoint+"/"+o,r={user:"username:"+this.get("username")};return r[i.type]=i.entity.id,e.when(this.ensureFetchedBasics(),n.call(a,{method:"POST",data:r})).done(t.bind(function(){var e=this.get("moderatedForums")||[];i.shouldModerate?e.push(i.forumId):e=t.reject(e,function(e){return e===i.forumId}),this.set("moderatedForums",e),i.entity.trigger(o,this)},this))}},moderateForum:function(e,t){return this.moderate({entity:e,type:"forum",endpoint:"forums",forumId:e.id,shouldModerate:t})},moderateChannel:function(e,t){return this.moderate({entity:e,type:"channel",endpoint:"channels",forumId:e.primaryForum.id,shouldModerate:t})},confirmBlacklist:function(e){r.confirmationPromise(r.TYPES.CONFIRM_CANCEL,s(this.toJSON())).then(t.bind(function(t){t&&this.addToBlacklist(e)},this))},addToBlacklist:function(e){e=e||{};var i=t.extend({},e,{user:this.get("id"),retroactive:e&&e.retroactive?1:0});n.call(i.forum?"blacklists/add.json":"blacklists/global/add.json",{method:"POST",data:i}).done(t.bind(function(e){e&&(i.forum?this.trigger("blacklist:add",i.forum):this.set("isOnGlobalBlacklist",!0),window.alert(d("User was added to the ban list")))},this)).error(function(e){e&&e.responseJSON&&window.alert(e.responseJSON.response)})},removeFromBlacklist:function(e){e=e||{};var i=t.extend({},e,{user:this.get("id")});n.call(i.forum?"blacklists/remove.json":"blacklists/global/remove.json",{method:"POST",data:i}).done(t.bind(function(e){e&&(i.forum?this.trigger("blacklist:remove",i.forum):this.set("isOnGlobalBlacklist",!1),window.alert(d("User was removed from the ban list")))},this)).error(function(e){e&&e.responseJSON&&window.alert(e.responseJSON.response)})},requestSpamReview:function(){this.get("flaggedForSpamReview")||n.call("internal/users/requestSpamReview",{method:"POST"}).done(t.bind(function(){this.set("flaggedForSpamReview",!0)},this))},getDisplayName:function(e){return e=e||this.attributes,e.name||e.username||"Guest"},toJSON:function(){var e=u.toJSON.apply(this,arguments);return e.displayName=this.getDisplayName(e),e}});return l.addType("User",m),m}),define("core/collections/PaginatedCollection",["underscore","backbone"],function(e,t){"use strict";return t.Collection.extend({PER_PAGE:30,initialize:function(t,n){this.cid=e.uniqueId("collection"),n=n||{},this.cursor=n.cursor||{}},ensureFetched:e.memoize(function(){return this.fetch()},function(){return this.cid}),fetch:function(n){return n=n||{},n.data=e.defaults(n.data||{},{cursor:n.cursor||"",limit:n.limit||this.PER_PAGE}),t.Collection.prototype.fetch.call(this,n)},hasPrev:function(){return this.cursor.hasPrev},hasNext:function(){return this.cursor.hasNext},next:function(t){return this.cursor.hasNext?this.fetch(e.extend({},t,{add:!0,remove:!0,cursor:this.cursor.next})):void this.trigger("nodata")},prev:function(t){return this.cursor.hasPrev?this.fetch(e.extend({},t,{add:!0,remove:!0,cursor:this.cursor.prev})):void this.trigger("nodata")},more:function(t){function n(e){a.push(e)}var i=this;if(t=t||{},t.post?!t.post.attributes.hasMore:!this.cursor.hasNext)return void i.trigger("nodata");var o,a=[];if(t.post){var r=this.postCursors[t.post.id];o=r&&r.cursor?r.cursor.next:""}else o=this.cursor.next;return this.on("add",n),this.fetch(e.extend({},t,{add:!0,remove:!1,cursor:o,limit:this.PER_PAGE||this.perPage,success:function(){i.trigger("add:many",a,i,t),i.off("add",n),t.success&&t.success.apply(this,arguments)}}))},parse:function(n){return Array.isArray(n)&&e.every(n,function(e){return e instanceof t.Model})?n:(this.cursor=n.cursor||{hasNext:!1},n.response)},getLength:function(){return this.length}})}),define("home/collections/PaginatedUserCollection",["core/collections/PaginatedCollection","core/UniqueModel","home/models/User"],function(e,t,n){"use strict";return e.extend({model:t.boundModel(n),initialize:function(e,t){t&&t.url&&(this.url=t.url)}})}),define("home/collections/common/ExtensibleCollection",["jquery","underscore","backbone","core/collections/PaginatedCollection"],function(e,t,n,i){"use strict";var o=i.extend({PER_PAGE:10,initialize:function(){i.prototype.initialize.call(this,arguments),this.once("sync",this.extendData,this),this.on("add:many",this.extendData,this),this.on("nodata",this.onNoData,this)},extendData:function(e){var t;if(e.models?t=e.models:e instanceof n.Model?(t=[e],this.once("sync",this.extendData,this)):t=e,!t.length)return this.cursor.hasNext=!1,void this.trigger("nodata");var i=0;this.extensionRequestsCount=0;do{this.requestExData(t.slice(i,Math.min(i+10,t.length))),i+=10,this.extensionRequestsCount+=1}while(i<=t.length-1)},getThreadFromModel:function(e){if(!e.getThread)throw Error("Any model that is in an ExtensibleCollection must define function getThread");return e.getThread()},requestExData:function(n,i){i=i||0;var a={};t.each(n,function(e){var t=this.getThreadFromModel(e),n=t&&t.getLinks()||[],i=1===n.length?n[0]:null;if(!this.shouldExtend(t,i))return void(t&&t.set({extending:!1}));t.set({extending:!0}),a[i]=e},this);var r=t.keys(a);if(r.length){e.ajax({url:o.EXTRACT_URL,data:{url:r,words:200,image_width:320},traditional:!0,dataType:"jsonp",success:function(e){n.timeouts=0,this.onExtendData(e,a)},error:function(e){this.extendDataFailed(e,n,i)},context:this,timeout:3e3,complete:this.checkExtendDataComplete})}},shouldExtend:function(e,n){return e&&n&&!t.any(e.getMedia(),function(e){return e.url===n})},onExtendData:function(e,n){this.extensionRequestsCount-=1,t.each(e,function(e){var t=e&&n[e.original_url];if(t){var i=this.getThreadFromModel(t);i.setEmbedlyData(e),i.set({extending:!1})}},this)},extendDataFailed:function(e,n,i){if("timeout"===e.statusText&&i<3)return void this.handleTimeout(n,i);t.each(n,function(e){this.getThreadFromModel(e).set({extending:!1})},this),this.extensionRequestsCount-=1},handleTimeout:function(e,t){this.requestExData(e,t+1)},checkExtendDataComplete:function(){this.extensionRequestsCount||this.finalizeExtendingData(this.cursor.hasNext)},finalizeExtendingData:function(e){this.trigger("extend",e)},onNoData:function(){this.finalizeExtendingData()}},{EXTRACT_URL:"//extract.services.disqus.com"});return o}),define("core/advice",["underscore"],function(e){"use strict";function t(){e.each(["before","after","around"],function(e){this[e]=function(t,i){return this[t]="function"==typeof this[t]?n[e](this[t],i):i}},this)}var n={around:function(t,n){return function(){var i=e.toArray(arguments);return n.apply(this,[e.bind(t,this)].concat(i))}},before:function(t,i){return n.around(t,function(){var t=e.toArray(arguments),n=t.shift();return i.apply(this,t),n.apply(this,t)})},after:function(t,i){return n.around(t,function(){var t=e.toArray(arguments),n=t.shift(),o=n.apply(this,t);return i.apply(this,t),o})}};return{withAdvice:t}}),define("core/models/mixins",["underscore","moment","core/time"],function(e,t,n){"use strict";function i(){t.locale("en",{relativeTime:{future:"%s from now",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),this._getCreatedMoment=e.memoize(function(e){var i=this.get(e||"createdAt");if(i)return t(n.assureTzOffset(i),n.ISO_8601)},function(e){return this.get(e||"createdAt")}),this.getRelativeCreatedAt=function(e){var t=this._getCreatedMoment(e);return t&&t.from(+new Date)},this.getFormattedCreatedAt=e.memoize(function(e){var t=this._getCreatedMoment(e);return t&&t.format("LLLL")},function(e){return this.get(e||"createdAt")})}return{withCreatedAt:i}}),define("core/collections/UserCollection",["jquery","backbone","core/models/User"],function(e,t,n){"use strict";return t.Collection.extend({model:n,initialize:function(e,n){t.Collection.prototype.initialize.apply(this,arguments),this.thread=n&&n.thread},fetch:function(){return e.when(!0)}})}),define("core/collections/VotersUserCollection",["underscore","backbone","core/api","core/collections/UserCollection"],function(e,t,n,i){"use strict";return i.extend({LIMIT:50,url:function(){return n.getURL("posts/listUsersVotedPost")},initialize:function(e,t){this.postId=t.postId,this.threadId=t.threadId},fetch:function(n){return t.Collection.prototype.fetch.call(this,e.extend({data:{post:this.postId,thread:this.threadId,vote:n.vote,limit:this.LIMIT}},n))}})}),define("core/models/Vote",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{score:0}})}),define("core/collections/VoteCollection",["backbone","core/models/Vote"],function(e,t){"use strict";return e.Collection.extend({model:t})}),define("core/models/Post",["jquery","underscore","backbone","moment","core/config/urls","core/api","core/strings","core/time","core/utils","core/utils/html","core/advice","remote/config","core/models/mixins","core/collections/VotersUserCollection","core/collections/VoteCollection"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p){"use strict";var f=0,g=function(){var t=e.now();return!(t-f<1e3)&&(f=t,!0)},v=r.get,b=n.Model.extend({votersCollectionClass:m,defaults:function(){return{createdAt:i().format(s.ISO_8601),editableUntil:i().add(d.max_post_edit_days,"days").format(s.ISO_8601),dislikes:0,isApproved:!0,isDeleted:!1,isEdited:!1,isFlagged:!1,isFlaggedByUser:!1,isHighlighted:!1,isRealtime:!1,isImmediateReply:!1,isMinimized:null,hasMedia:!1,message:null,raw_message:null,likes:0,media:[],parent:null,points:0,depth:0,userScore:0,rating:null}},initialize:function(){this.votes=new p},messageText:function(){var e=this.get("message");return e&&c.stripTags(e)},permalink:function(e,t){var n=this.id;if(!n||!e)return"";var i=!1!==t&&e.currentUrl||e.permalink(),o=window.document.createElement("a");return o.href=i,o.hash="#comment-"+n,o.href},shortLink:function(){return o.shortener+"/p/"+(+this.id).toString(36)},twitterText:function(e){var t=140,n=this.author.get("name")||this.author.get("username");return t-=n.length+3,t-=e.length+1,t-=2,'"'+l.niceTruncate(this.messageText(),t)+'" — '+n},toJSON:function(e){var t=n.Model.prototype.toJSON.call(this);if(e){var i=e.session,o=e.thread;t.canBeEdited=this.canBeEdited(i,o),t.canBeRepliedTo=this.canBeRepliedTo(i,o),t.canBeShared=this.canBeShared(),t.permalink=this.permalink(o)}return t.shortLink=this.shortLink(),t.isMinimized=this.isMinimized(),t.plaintext=this.messageText(),t.relativeCreatedAt=this.getRelativeCreatedAt(),t.formattedCreatedAt=this.getFormattedCreatedAt(),t.cid=this.cid,t},isPublic:function(){return!(!this.get("isHighlighted")&&!this.get("isSponsored"))||!this.get("isDeleted")&&this.get("isApproved")},isMinimized:function(){return!this.get("isHighlighted")&&(!1!==this.get("isMinimized")&&!this.get("isApproved"))},isAuthorSessionUser:function(){return!1},canBeEdited:function(){return!1},canBeRepliedTo:function(){return!1},canBeShared:function(){return!1},validateMessage:function(e){if(t.isString(e.raw_message)){if(""===e.raw_message)return v("Comments can't be blank.");if(e.raw_message.length<2)return v("Comments must have at least 2 characters.")}},validate:function(n){if(!this.id&&!n.id){var i=this.validateMessage(n);return i||(n.author_email&&(n.author_email=e.trim(n.author_email)),n.author_name&&(n.author_name=e.trim(n.author_name)),""===n.author_email&&""===n.author_name?v("Please sign in or enter a name and email address."):""===n.author_email||""===n.author_name?v("Please enter both a name and email address."):t.isString(n.author_email)&&!this.validateEmail(n.author_email)?v("Invalid email address format."):void 0)}},validateEmail:function(e){return l.validateEmail(e)},report:function(e){this.set("isFlagged",!0);var t={post:this.id};e&&(t.reason=e),a.call("posts/report.json",{data:t,method:"POST"})},_highlight:function(e){this.set("isHighlighted",e),a.call("posts/"+(e?"highlight":"unhighlight")+".json",{data:{post:this.id},method:"POST"})},highlight:function(){this._highlight(!0)},unhighlight:function(){this._highlight(!1)},getThreadId:function(){return this.get("thread")},getUpvotersUserCollection:t.memoize(function(){return new(0,this.votersCollectionClass)(void 0,{postId:this.id,threadId:this.getThreadId()})},function(){return this.id+"1"}),getDownvotersUserCollection:t.memoize(function(){return new(0,this.votersCollectionClass)(void 0,{postId:this.id,threadId:this.getThreadId()})},function(){return this.id+"-1"}),_vote:function(e,t,n){var i=e-t,o={likes:this.get("likes"),dislikes:this.get("dislikes"),points:this.get("points")};return 0===i?i:(e>0?(o.likes+=e,o.dislikes+=t):e<0?(o.dislikes-=e,o.likes-=t):t>0?o.likes-=t:o.dislikes+=t,o.points+=i,n&&(1===e?(this.getUpvotersUserCollection().add(n),this.getDownvotersUserCollection().remove(n)):(this.getDownvotersUserCollection().add(n),this.getUpvotersUserCollection().remove(n))),this.set(o),i)},vote:function(e){if(!g())return 0;var t=this;0!==t._vote(e,t.get("userScore"))&&(t.set("userScore",e),a.call("posts/vote.json",{data:{post:t.id,vote:e},method:"POST",success:function(n){t.votes.add({id:n.response.id,score:e},{merge:!0})}}))},_delete:function(){return this.set({isApproved:!1,isDeleted:!0}),a.call("posts/remove.json",{data:{post:this.id},method:"POST"})},spam:function(){this.set({isApproved:!1,isDeleted:!0,isSpam:!0}),this.trigger("spam"),a.call("posts/spam.json",{data:{post:this.id},method:"POST"})},_create:function(e,t){var n=this,i=e.attributes,o={thread:i.thread,message:i.raw_message,rating:i.rating};return i.parent&&(o.parent=i.parent),i.author_name&&(o.author_name=i.author_name,o.author_email=i.author_email),a.call("posts/create.json",{data:o,method:"POST",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},_update:function(e,t){var n=this,i=e.attributes;return a.call("posts/update.json",{data:{post:i.id,message:i.raw_message,rating:i.rating},method:"POST",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},_read:function(e,t){var n=this;return t=t||{},a.call("posts/details.json",{data:{post:n.id},method:"GET",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},sync:function(e,t,n){n=n||{};var i=n.error;switch(i&&(n.error=function(e){var t={};try{t=JSON.parse(e.responseText)}catch(e){}i(t)}),e){case"create":return this._create(t,n);case"update":return this._update(t,n);case"delete":return this._delete();case"read":return this._read(t,n)}},storageKey:function(){if(this.isNew()&&this.getThreadId())return["drafts:thread",this.getThreadId(),"parent",this.get("parent")||0].join(":")}},{formatMessage:function(){var e=/(?:\r\n|\r|\n){2,}/,n=/\r\n|\r|\n/;return function(i){var o=t.chain(i.split(e)).compact().value();return"<p>"+t.map(o,function(e){return t.chain(e.split(n)).compact().map(t.escape).join("<br>").value()}).join("</p><p>")+"</p>"}}()});return h.withCreatedAt.call(b.prototype),u.withAdvice.call(b.prototype),b.withAuthor=function(e){this.around("set",function(n,i,o,a){var r;if(null==i)return this;"object"==typeof i?(r=i,a=o):(r={},r[i]=o);var s=r.author;if(s){if(t.isString(s)||t.isNumber(s)){var l=s;s={},s[e.prototype.idAttribute||"id"]=l}this.author=new e(s),this.trigger("changeRelated:author"),delete r.author}return n.call(this,r,a)}),this.around("toJSON",function(e){var n=e.apply(this,t.rest(arguments));return this.author&&(n.author=this.author.toJSON()),n})},b.withMediaCollection=function(e){this.after("set",function(n){n&&"string"!=typeof n&&(t.isUndefined(n.media)||(this.media?this.media.reset(n.media):this.media=new e(n.media),delete n.media))}),this.around("toJSON",function(e){var n=e.apply(this,t.rest(arguments));return this.media&&(n.media=this.media.toJSON()),n})},b}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("dompurify",t):e.DOMPurify=t()}(this,function(){"use strict";function e(e,t){g&&g(e,null);for(var n=t.length;n--;){var i=t[n];if("string"==typeof i){var o=i.toLowerCase();o!==i&&(Object.isFrozen(t)||(t[n]=o),i=o)}e[i]=!0}return e}function t(e){var t={},n=void 0;for(n in e)b(f,e,[n])&&(t[n]=e[n]);return t}function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A(),u=function(e){return i(e)};if(u.version="2.0.7",u.removed=[],!o||!o.document||9!==o.document.nodeType)return u.isSupported=!1,u;var f=o.document,g=!1,v=!1,b=o.document,y=o.DocumentFragment,S=o.HTMLTemplateElement,N=o.Node,R=o.NodeFilter,V=o.NamedNodeMap,j=void 0===V?o.NamedNodeMap||o.MozNamedAttrMap:V,I=o.Text,L=o.Comment,U=o.DOMParser,H=o.TrustedTypes;if("function"==typeof S){var q=b.createElement("template");q.content&&q.content.ownerDocument&&(b=q.content.ownerDocument)}var z=D(H,f),$=z?z.createHTML(""):"",B=b,W=B.implementation,G=B.createNodeIterator,Y=B.getElementsByTagName,J=B.createDocumentFragment,K=f.importNode,X={};u.isSupported=W&&void 0!==W.createHTMLDocument&&9!==b.documentMode;var Q=w,Z=x,ee=k,te=C,ne=P,ie=T,oe=_,ae=null,re=e({},[].concat(n(a),n(r),n(s),n(l),n(c))),se=null,le=e({},[].concat(n(d),n(h),n(m),n(p))),ce=null,ue=null,de=!0,he=!0,me=!1,pe=!1,fe=!1,ge=!1,ve=!1,be=!1,ye=!1,we=!1,xe=!1,ke=!1,Ce=!0,_e=!0,Pe=!1,Te={},Oe=e({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Se=e({},["audio","video","img","source","image"]),Ee=null,Fe=e({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Me=null,Ae=b.createElement("form"),De=function(i){Me&&Me===i||(i&&"object"===(void 0===i?"undefined":O(i))||(i={}),ae="ALLOWED_TAGS"in i?e({},i.ALLOWED_TAGS):re,se="ALLOWED_ATTR"in i?e({},i.ALLOWED_ATTR):le,Ee="ADD_URI_SAFE_ATTR"in i?e(t(Fe),i.ADD_URI_SAFE_ATTR):Fe,ce="FORBID_TAGS"in i?e({},i.FORBID_TAGS):{},ue="FORBID_ATTR"in i?e({},i.FORBID_ATTR):{},Te="USE_PROFILES"in i&&i.USE_PROFILES,de=!1!==i.ALLOW_ARIA_ATTR,he=!1!==i.ALLOW_DATA_ATTR,me=i.ALLOW_UNKNOWN_PROTOCOLS||!1,pe=i.SAFE_FOR_JQUERY||!1,fe=i.SAFE_FOR_TEMPLATES||!1,ge=i.WHOLE_DOCUMENT||!1,ye=i.RETURN_DOM||!1,we=i.RETURN_DOM_FRAGMENT||!1,xe=i.RETURN_DOM_IMPORT||!1,ke=i.RETURN_TRUSTED_TYPE||!1,be=i.FORCE_BODY||!1,Ce=!1!==i.SANITIZE_DOM,_e=!1!==i.KEEP_CONTENT,Pe=i.IN_PLACE||!1,oe=i.ALLOWED_URI_REGEXP||oe,fe&&(he=!1),we&&(ye=!0),Te&&(ae=e({},[].concat(n(c))),se=[],!0===Te.html&&(e(ae,a),e(se,d)),!0===Te.svg&&(e(ae,r),e(se,h),e(se,p)),!0===Te.svgFilters&&(e(ae,s),e(se,h),e(se,p)),!0===Te.mathMl&&(e(ae,l),e(se,m),e(se,p))),i.ADD_TAGS&&(ae===re&&(ae=t(ae)),e(ae,i.ADD_TAGS)),i.ADD_ATTR&&(se===le&&(se=t(se)),e(se,i.ADD_ATTR)),i.ADD_URI_SAFE_ATTR&&e(Ee,i.ADD_URI_SAFE_ATTR),_e&&(ae["#text"]=!0),ge&&e(ae,["html","head","body"]),ae.table&&(e(ae,["tbody"]),delete ce.tbody),M&&M(i),Me=i)},Ne=function(e){u.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=$}},Re=function(e,t){try{u.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){u.removed.push({attribute:null,from:t})}t.removeAttribute(e)},Ve=function(t){var n=void 0,i=void 0;if(be)t="<remove></remove>"+t;else{var o=t.match(/^[\s]+/);i=o&&o[0],i&&(t=t.slice(i.length))}if(g)try{n=(new U).parseFromString(t,"text/html")}catch(e){}if(v&&e(ce,["title"]),!n||!n.documentElement){n=W.createHTMLDocument("");var a=n,r=a.body;r.parentNode.removeChild(r.parentNode.firstElementChild),r.outerHTML=z?z.createHTML(t):t}return t&&i&&n.body.insertBefore(b.createTextNode(i),n.body.childNodes[0]||null),Y.call(n,ge?"html":"body")[0]};u.isSupported&&(function(){try{Ve('<svg><p><textarea><img src="</textarea><img src=x abc=1//">').querySelector("svg img")&&(g=!0)}catch(e){}}(),function(){try{/<\/title/.test(Ve("<x/><title>&lt;/title&gt;&lt;img&gt;").querySelector("title").innerHTML)&&(v=!0)}catch(e){}}());var je=function(e){return G.call(e.ownerDocument||e,e,R.SHOW_ELEMENT|R.SHOW_COMMENT|R.SHOW_TEXT,function(){return R.FILTER_ACCEPT},!1)},Ie=function(e){return!(e instanceof I||e instanceof L)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof j&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI)},Le=function(e){return"object"===(void 0===N?"undefined":O(N))?e instanceof N:e&&"object"===(void 0===e?"undefined":O(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ue=function(e,t,n){X[e]&&X[e].forEach(function(e){e.call(u,t,n,Me)})},He=function(e){var t=void 0;if(Ue("beforeSanitizeElements",e,null),Ie(e))return Ne(e),!0;var n=e.nodeName.toLowerCase();if(Ue("uponSanitizeElement",e,{tagName:n,allowedTags:ae}),("svg"===n||"math"===n)&&0!==e.querySelectorAll("p, br").length)return Ne(e),!0;if(!ae[n]||ce[n]){if(_e&&!Oe[n]&&"function"==typeof e.insertAdjacentHTML)try{var i=e.innerHTML;e.insertAdjacentHTML("AfterEnd",z?z.createHTML(i):i)}catch(e){}return Ne(e),!0}return"noscript"===n&&/<\/noscript/i.test(e.innerHTML)?(Ne(e),!0):"noembed"===n&&/<\/noembed/i.test(e.innerHTML)?(Ne(e),!0):(!pe||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(u.removed.push({element:e.cloneNode()}),e.innerHTML=e.innerHTML?e.innerHTML.replace(/</g,"&lt;"):e.textContent.replace(/</g,"&lt;")),fe&&3===e.nodeType&&(t=e.textContent,t=t.replace(Q," "),t=t.replace(Z," "),e.textContent!==t&&(u.removed.push({element:e.cloneNode()}),e.textContent=t)),Ue("afterSanitizeElements",e,null),!1)},qe=function(e,t,n){if(Ce&&("id"===t||"name"===t)&&(n in b||n in Ae))return!1;if(he&&ee.test(t));else if(de&&te.test(t));else{if(!se[t]||ue[t])return!1;if(Ee[t]);else if(oe.test(n.replace(ie,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==n.indexOf("data:")||!Se[e]){if(me&&!ne.test(n.replace(ie,"")));else if(n)return!1}else;}return!0},ze=function(e){var t=void 0,n=void 0,i=void 0,o=void 0,a=void 0;Ue("beforeSanitizeAttributes",e,null);var r=e.attributes;if(r){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se};for(a=r.length;a--;){t=r[a];var l=t,c=l.name,d=l.namespaceURI;if(n=t.value.trim(),i=c.toLowerCase(),s.attrName=i,s.attrValue=n,s.keepAttr=!0,Ue("uponSanitizeAttribute",e,s),n=s.attrValue,"name"===i&&"IMG"===e.nodeName&&r.id)o=r.id,r=E(F,r,[]),Re("id",e),Re(c,e),r.indexOf(o)>a&&e.setAttribute("id",o.value);else{if("INPUT"===e.nodeName&&"type"===i&&"file"===n&&s.keepAttr&&(se[i]||!ue[i]))continue;"id"===c&&e.setAttribute(c,""),Re(c,e)}if(s.keepAttr)if(/svg|math/i.test(e.namespaceURI)&&RegExp("</("+Object.keys(Oe).join("|")+")","i").test(n))Re(c,e);else{fe&&(n=n.replace(Q," "),n=n.replace(Z," "));var h=e.nodeName.toLowerCase();if(qe(h,i,n))try{d?e.setAttributeNS(d,c,n):e.setAttribute(c,n),u.removed.pop()}catch(e){}}}Ue("afterSanitizeAttributes",e,null)}},$e=function e(t){var n=void 0,i=je(t);for(Ue("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Ue("uponSanitizeShadowNode",n,null),He(n)||(n.content instanceof y&&e(n.content),ze(n));Ue("afterSanitizeShadowDOM",t,null)};return u.sanitize=function(e,t){var n=void 0,i=void 0,a=void 0,r=void 0,s=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Le(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=""+e))throw new TypeError("dirty is not a string, aborting")}if(!u.isSupported){if("object"===O(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof e)return o.toStaticHTML(e);if(Le(e))return o.toStaticHTML(e.outerHTML)}return e}if(ve||De(t),u.removed=[],Pe);else if(e instanceof N)n=Ve("\x3c!--\x3e"),i=n.ownerDocument.importNode(e,!0),1===i.nodeType&&"BODY"===i.nodeName?n=i:"HTML"===i.nodeName?n=i:n.appendChild(i);else{if(!ye&&!fe&&!ge&&ke&&-1===e.indexOf("<"))return z?z.createHTML(e):e;if(!(n=Ve(e)))return ye?null:$}n&&be&&Ne(n.firstChild);for(var l=je(Pe?e:n);a=l.nextNode();)3===a.nodeType&&a===r||He(a)||(a.content instanceof y&&$e(a.content),ze(a),r=a);if(r=null,Pe)return e;if(ye){if(we)for(s=J.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return xe&&(s=K.call(f,s,!0)),s}var c=ge?n.outerHTML:n.innerHTML;return fe&&(c=c.replace(Q," "),c=c.replace(Z," ")),z&&ke?z.createHTML(c):c},u.setConfig=function(e){De(e),ve=!0},u.clearConfig=function(){Me=null,ve=!1},u.isValidAttribute=function(e,t,n){Me||De({});var i=e.toLowerCase(),o=t.toLowerCase();return qe(i,o,n)},u.addHook=function(e,t){"function"==typeof t&&(X[e]=X[e]||[],X[e].push(t))},u.removeHook=function(e){X[e]&&X[e].pop()},u.removeHooks=function(e){X[e]&&(X[e]=[])},u.removeAllHooks=function(){X={}},u}var o=Object.freeze||function(e){return e},a=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),r=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),s=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),l=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),c=o(["#text"]),u=Object.freeze||function(e){return e},d=u(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","minlength","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),h=u(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),m=u(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),p=u(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),f=Object.hasOwnProperty,g=Object.setPrototypeOf,v="undefined"!=typeof Reflect&&Reflect,b=v.apply;b||(b=function(e,t,n){return e.apply(t,n)});var y=Object.seal||function(e){return e},w=y(/\{\{[\s\S]*|[\s\S]*\}\}/gm),x=y(/<%[\s\S]*|[\s\S]*%>/gm),k=y(/^data-[\-\w.\u00B7-\uFFFF]/),C=y(/^aria-[\-\w]+$/),_=y(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),P=y(/^(?:\w+script|data):/i),T=y(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S="undefined"!=typeof Reflect&&Reflect,E=S.apply,F=Array.prototype.slice,M=Object.freeze,A=function(){return"undefined"==typeof window?null:window};E||(E=function(e,t,n){return e.apply(t,n)});var D=function(e,t){if("object"!==(void 0===e?"undefined":O(e))||"function"!=typeof e.createPolicy)return null;var n=null
;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return i()}),define("core/utils/threadRatingsHelpers",["core/utils/object/get"],function(e){"use strict";var t={};return t.isThreadRatingsEnabled=function(t,n){return!!(t&&t.forum&&n&&n.id===t.forum)&&!!(e(t,["ratingsEnabled"])&&e(n,["settings","threadRatingsEnabled"])&&e(n,["features","threadRatings"]))},t.isThreadModelRatingsEnabled=function(e){if(!e||!e.forum)return!1;var t=e.forum.get("settings"),n=e.forum.get("features");return!!(e.get("ratingsEnabled")&&t&&t.threadRatingsEnabled&&n&&n.threadRatings)},t.isForumRatingsEnabled=function(t){return!!t&&!(!e(t,["settings","threadRatingsEnabled"])||!e(t,["features","threadRatings"]))},t.isForumModelRatingsEnabled=function(e){if(!e)return!1;var t=e.get("settings"),n=e.get("features");return!!(t&&t.threadRatingsEnabled&&n&&n.threadRatings)},t}),define("core/models/Thread",["underscore","backbone","loglevel","core/config/urls","core/utils","core/api","core/config","core/advice","core/UniqueModel","core/utils/threadRatingsHelpers","core/models/User"],function(e,t,n,i,o,a,r,s,l,c,u){"use strict";var d=t.Model,h=d.prototype,m=d.extend({defaults:{author:null,category:null,createdAt:null,forum:null,identifiers:[],ipAddress:null,isClosed:!1,isDeleted:!1,hasStreaming:!1,link:null,message:null,slug:null,title:null,userSubscription:!1,posts:0,likes:0,dislikes:0,userScore:0},initialize:function(e,t){t=t||{},this.moderators=t.moderators,this.forum=t.forum,this.on("change:userScore",function(){var e=this.get("userScore");e>0&&0===this.get("likes")&&this.set("likes",e)},this)},_vote:function(e,t){var n=e-t;return 0===n?n:(this.set("likes",this.get("likes")+n),n)},vote:function(e){var t=this;0!==t._vote(e,t.get("userScore"))&&(this.set("userScore",e),a.call("threads/vote.json",{data:{thread:this.id,vote:e},method:"POST",success:function(e){e.response.id&&t.trigger("vote:success",e)}}))},fetch:function(e){var t,i=this,o=i.attributes;e=e||{},t=o.identifier?"ident:"+o.identifier:"link:"+o.url,a.call("threads/details.json",{data:{thread:t,forum:o.forum},success:function(t){i.set(t.response),e.success&&e.success()},error:function(){r.debug?i.save({},{success:e.success}):n.info("Couldn't find thread; not creating in production.")}})},_toggleState:function(e,t){t||(t={});var n=e?"open.json":"close.json";return this.set("isClosed",!e),a.call("threads/"+n,{method:"POST",data:{thread:this.id},success:t.success,error:t.error})},open:function(e){return this._toggleState(!0,e)},close:function(e){return this._toggleState(!1,e)},premoderate:function(t,n){return this.set("validateAllPosts",t),a.call("threads/update",e.extend({},n,{method:"POST",data:e.extend({thread:this.id,validateAllPosts:t?1:0},n&&n.data)}))},sync:function(){var e=this,t=e.attributes;a.call("threads/create.json",{data:{title:t.title,forum:t.forum,identifier:t.identifier,url:t.url},method:"POST",success:function(t){e.set(t.response)}})},fetchRatings:function(){var e=this;return a.call("threads/ratingsSummary.json",{data:{thread:e.id},method:"GET",success:function(t){e.set("ratings",t.response)}})},toggleRatingsEnabled:function(){var e=this;if(c.isForumModelRatingsEnabled(e.forum)){var t=e.get("ratingsEnabled"),n={thread:e.id,ratingsEnabled:t?0:1};return e.set("ratingsEnabled",!t),a.call("threads/update.json",{data:n,method:"POST"})}},incrementPostCount:function(e){var t=this.get("posts")+e;this.set("posts",t>0?t:0)},isModerator:function(t){var n;if(this.moderators)return n=t instanceof u||e.isObject(t)?t.id:t,n=parseInt(n,10),e(this.moderators).contains(n)},subscribe:function(e){if(e=!1!==e,this.get("userSubscription")!==e)return this.set("userSubscription",e),a.call("threads/"+(e?"subscribe.json":"unsubscribe.json"),{data:{thread:this.id},method:"POST"})},twitterText:function(e){var t=140-(e.length+1),n=this.get("clean_title");return n=o.niceTruncate(n,t)},permalink:function(){return this.get("url")||this.get("link")||this.currentUrl},shortLink:function(){return i.shortener+"/t/"+(+this.id).toString(36)},toJSON:function(){var e=h.toJSON.call(this);return e.permalink=this.permalink(),e.shortLink=this.shortLink(),e},getDiscussionRoute:function(e){var t=["","home","discussion",this.forum.id,this.get("slug"),""];return e=e||this.forum.channel,e&&(e=e.attributes||e,t.splice(2,0,"channel",e.slug)),t.join("/")}});return s.withAdvice.call(m.prototype),m.withThreadVoteCollection=function(e){this.after("initialize",function(){this.votes=new e,this.on("vote:success",function(e){this.votes.get(e.response.id)||this.votes.add({id:e.response.id,score:e.response.vote,currentUser:!0})},this)})},m.withPostCollection=function(t){this.after("initialize",function(n){n=n||{},this.posts=new t(n.posts,{thread:this,cursor:n.postCursor,order:n.order,perPage:this.postsPerPage}),this.listenTo(this.posts,"add reset",function(t){t=t.models?t.models:[t],this.users&&e.each(t,function(e){this.users.get(e.author.id)||this.users.add(e.author)}),this.recalculatePostCount()}),this.listenTo(this.posts,"change:isDeleted change:isFlagged",function(e,t){t&&this.incrementPostCount(-1)})}),this.recalculatePostCount=function(){var e=this.get("posts");e>50||(e=this.posts.reduce(function(e,t){return t.isPublic()?e+1:e},0),this.set("posts",e))}},l.addType("Thread",m),m}),define("home/models/Topic",["underscore","backbone","core/strings","core/UniqueModel"],function(e,t,n,i){"use strict";var o=n.get,a=t.Model.extend({idAttribute:"identifier",defaults:{identifier:null,displayName:null},validate:function(e){var t=e.displayName;if(!t)return{attrName:"displayName",message:o("Topic name cannot be empty.")};var i=a.TOPIC_NAME_RANGES;return t.length>i.maxLength||t.length<i.minLength?{attrName:"displayName",message:n.interpolate(o("A topic must be between %(minLength)s and %(maxLength)s characters."),{minLength:i.minLength,maxLength:i.maxLength})}:void 0}},{TOPIC_NAME_RANGES:{minLength:2,maxLength:30},cleanTopicName:function(e){return e.replace(/\s+/g," ").trim()},getOrCreateTopic:function(t){var n=a.cleanTopicName(t);if(!n)return null;var o=n.toLowerCase(),r=e.find(i.pool(a),function(e){return e.get("displayName").toLowerCase()===o});return r||new i(a,{displayName:n})}});return i.addType("Topic",a),a}),define("home/collections/TopicCollection",["underscore","backbone","home/models/Topic","core/UniqueModel","core/api","core/strings"],function(e,t,n,i,o,a){"use strict";var r=a.get,s=t.Collection.extend({model:i.boundModel(n),initialize:function(e,t){t&&t.thread&&(this.thread=t.thread)},getCategoryTopics:function(){var t=this.thread.forum.channel,i=t.getCategories();return i?(i=i&&e.keys(i),this.filter(function(t){var o=t.get("displayName").toLowerCase();return e.find(i,function(e){return n.cleanTopicName(e).toLowerCase()===o})})):[]},isValid:function(){var e=this.validationError=this.validate()||null;return!e||(this.trigger("invalid",this,e,{validationError:e}),!1)},validate:function(){var t=this.find(function(e){return!e.isValid()});if(t)return t.validationError;if(this.thread){if(this.countBy(function(e){return e.get("hidden")?"hidden":"visible"}).visible>s.MAX_LENGTH)return{attrName:"topics",message:a.interpolate(r("You may not have more than %(num)s topics"),{num:s.MAX_LENGTH})};var n=this.thread.forum.channel;if(n&&n.getCategories()){var i=this.getCategoryTopics();if(i.length<1)return{attrName:"category",message:r("You must choose a category")};if(e.any(i,function(e){return!e.get("hidden")}))return{attrName:"topics",message:r("You may not enter a category as a topic")}}}},_syncTopicsOnThread:function(n,i){var o={url:this.urls[i],type:"POST",processData:!0,emulateHTTP:!0,data:{thread:this.thread.id,topics:e.map(n,function(e){return e.get("displayName")})}};return t.sync(i,this,o)},urls:{addTopicsToThread:o.getURL("timelines/curation/addTopicsToThread"),removeTopicsFromThread:o.getURL("timelines/curation/removeTopicsFromThread")},save:function(){if(this.thread&&this.isValid()){var t=this.thread.topics.models,o=e.difference(this.models,t),a=e.difference(t,this.models),r=this.thread;o.length&&this._syncTopicsOnThread(o,"addTopicsToThread").then(function(t){t.response&&r.topics.add(e.map(t.response,function(e){return new i(n,e)}))}),a.length&&this._syncTopicsOnThread(a,"removeTopicsFromThread").then(function(){r.topics.remove(a)})}},parse:function(e){return e.response}},{MAX_LENGTH:5});return s}),define("core/models/Forum",["backbone","core/UniqueModel","core/api"],function(e,t,n){"use strict";var i=e.Model.extend({defaults:{settings:{},followUrl:"forums/follow",unfollowUrl:"forums/unfollow",isFollowing:!1},initialize:function(e,t){t&&t.channel&&(this.channel=t.channel),this.getFeatures(),this.on("change:id",this.getFeatures)},_changeFollowingState:function(e){return n.call(e,{method:"POST",data:{target:this.get("id")}})},follow:function(){return this.set("isFollowing",!0),this._changeFollowingState(this.get("followUrl"))},unfollow:function(){return this.set("isFollowing",!1),this._changeFollowingState(this.get("unfollowUrl"))},toggleFollowed:function(){if(this.channel&&this.channel.get("options").isCurationOnlyChannel)return this.channel.toggleFollowed();var e=this.get("isFollowing")?this.unfollow():this.follow();return this.trigger("toggled:isFollowing"),e},getFeatures:function(){var e=this;e.id&&n.call("forums/details",{data:{forum:this.id,attach:"forumFeatures"},success:function(t){t&&t.response&&e.set("features",t.response.features)}})}});return t.addType("Forum",i),i}),define("home/models/Forum",["jquery","underscore","backbone","require","core/utils/html","core/models/Forum","core/api","core/utils"],function(e,t,n,i,o,a,r,s){"use strict";return a.extend({getFriendlyUrl:function(){var e=s.getDomain(this.get("url"));return e.indexOf("disqus.com")>-1?"disqus.com":e},initialize:function(e,n){if(!this.get("id"))throw Error("Forum must be initialized with an id");a.prototype.initialize.call(this,e,n),this.fetch=t.memoize(t.bind(this.fetch,this)),this.buildChannel(n),this.listenTo(this,"change:channel",this.updateChannel),this.listenTo(this,"toggled:isFollowing",this.handleFollowingToggled)},buildChannel:function(n){if(!this.channel){var o=n&&n.channel||this.get("channel");if(o){e.isPlainObject(o)?o.primaryForum=this:n=t.defaults({primaryForum:this},n);this.initializeRelated("channel",n,i("home/models/Channel"))}}},updateChannel:function(){var e=this.get("channel");this.unset("channel"),e&&(this.channel?this.channel.shouldFetch()&&t.isObject(e)&&this.channel.set(e):this.buildChannel({channel:e}))},url:function(){return r.getURL("forums/details?forum="+this.get("id"))},parse:function(e){return e.response||e},shouldFetch:function(){return!this.get("name")},shouldFetchWithAttachments:function(e){return this.shouldFetch()||t.some(e,function(e){return!this.has(e)},this)},fetchWithAttachments:function(e){this.fetch({data:{attach:e}})},hasFavicon:function(){var e=this.getFavicon();return e&&!e.match(/favicon-default\.png/)},getFavicon:function(){var e=(this.get("favicon")||{}).cache;return this.channel&&this.channel.get("options").favicon||e},hasGuidelines:function(){return!!e(this.get("guidelines")).text().length},handleFollowingToggled:function(){var e,t;this.get("isFollowing")?(e="followed",t=1):(e="unfollowed",t=-1),i("home/models/Session").get().user.trigger(e+":forum",this),this.has("numFollowers")&&this.set("numFollowers",this.get("numFollowers")+t)},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments),i=t.defaults({forumRoute:this.getForumRoute(),faviconImage:this.getFavicon()},e);return this.channel&&(i.channelInfo=t.pick(this.channel.attributes,["name","slug","options"])),i},getPlainDescription:function(){var e=this.get("description");if(e)return o.stripTags(e)},getForumRoute:function(){return(this.channel?["channel",this.channel.id]:["forum",this.id]).join("/")}})}),define("home/templates/confirmDeleteThread",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">'+r(s(n,"gettext").call(a,"Remove %(discussionTitle)s?",{name:"gettext",hash:{discussionTitle:s(n,"tag").call(a,"b",{name:"tag",hash:{text:null!=t?s(t,"title"):t},data:o,loc:{start:{line:2,column:82},end:{line:2,column:104}}})},data:o,loc:{start:{line:2,column:24},end:{line:2,column:106}}}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+r(s(n,"gettext").call(a,"Click Confirm to remove and close the discussion so it can't be easily found. This prevents new comments from being posted.",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:3},end:{line:5,column:140}}}))+"</p>\n</div>\n"},useData:!0})}),define("home/utils/datetimeUtils",["moment"],function(e){"use strict";var t=function(e){return e.indexOf("+")>=0?e:e+"+00:00"};return{getRelativeDatetime:function(n){return n&&n!==1/0?(n=t(n),e.utc(n,"YYYY-MM-DDTHH:mm:ssZ").local().fromNow()):null}}}),define("home/models/Thread",["jquery","underscore","backbone","dompurify","core/api","core/bus","core/models/mixins","core/models/Thread","core/UniqueModel","core/utils","core/utils/auth","core/utils/html","home/collections/common/ExtensibleCollection","home/collections/TopicCollection","home/models/Forum","home/models/User","home/models/Post","home/templates/confirmDeleteThread","home/utils/backboneUtils","home/utils/datetimeUtils","home/utils/confirmModal","home/utils/navigationUtils"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v,b,y,w,x){"use strict";var k=/^https:\/\/[^.]+\.disqus\.com\/thread\//,C=s,_=C.prototype,P=C.extend({defaults:t.defaults({id:null,content:{title:"",description:"",keywords:[],image:{url:"",height:"",width:""}},message:void 0,canModerate:!1,canEdit:!1,isAuthor:!1},_.defaults),initialize:function(e,t){_.initialize.call(this,e,t),this.initializeRelated("forum",t,p,"name"),this.listenTo(this,"change:forum",function(e,t){t instanceof n.Model||this.forum.set(t)}),this.listenTo(this,"change:author",function(e,t){this.setAuthor(t)}),this.listenTo(this,"change:message",this._clearDescriptions),this.topics=new m([],{thread:this});var i=this;b.getPromiseFor(this,"topics").then(function(e){i.topics.add(e),i.unset("topics")}),this.checkUserGenerated(t),this.listenTo(this,"change:userSubscription",this.onChangeUserSubscription)},onChangeUserSubscription:function(e,n){var i=require("home/models/Session"),o=i.get();o.loadPromise().always(t.bind(function(){o.user.trigger(n?"subscribe:thread":"unsubscribe:thread",this)},this))},validate:function(e){if(!e.title||!e.title.trim())return{attrName:"title",message:"Please enter a title for your discussion."};if(e.title.length>200)return{attrName:"title",message:"Please shorten your title."};if(!e.message||e.message.trim().length<2)return{attrName:"message",message:"Please enter a longer discussion body"};var n=this.forum.channel&&this.forum.channel.getCategories();if(n){var i=t.chain(n).keys().find(function(t){return 0===e.title.indexOf(t)}).value();if(i&&!e.title.match(RegExp(i+".*\\w+")))return{attrName:"title",message:"Your title must contain more than just a category."}}},checkUserGenerated:function(e){return e=e||{},this.shouldFetch()?void this.listenToOnce(this,"sync",t.bind(this.checkUserGenerated,this,e)):this.forum.channel?(this.setAuthor(e.author),this.initializeRecentPosts(e),void this.set({isUserGenerated:!0})):void this.set({isUserGenerated:!1})},setAuthor:function(e){e=e||this.get("author"),this.author?t.isObject(e)&&this.author.set(e):t.isObject(e)?this.initializeRelated("author",{author:e},f):(e=this.getAuthorFromUniqueModel(e))&&(this.author=e)},getAuthorFromUniqueModel:function(e){if(t.isString(e)&&e.length)return t.find(l.pool(f),function(t){return t.get("id")===e})},fetchAuthor:function(){var n,i=this.get("author");return(n=this.getAuthorFromUniqueModel(i))?(this.setAuthor(n),e.Deferred().resolve(n).promise()):(n=new f({id:i}),n.fetch().then(t.bind(function(){this.setAuthor(n.attributes)},this)))},initializeRecentPosts:function(e){g||(g=require("home/models/Post")),this.recentPosts=new n.Collection(t.map(e.recentPosts,function(e){return e instanceof g?e:new l(g,e,{thread:this})},this))},getLinks:function(){return this.get("isUserGenerated")?this.getLinksFromMessage():[this.get("link")]},getFriendlySourceUrl:function(){var e=c.getDomain(this.get("link"));return e.indexOf("disqus.com")>-1?"disqus.com":e},getLinksFromMessage:t.memoize(function(){return e("<div>").html(this.get("message")).find("a[href]").map(function(t,n){return e(n).attr("href")})},function(){return this.id}),shouldFetch:function(){return!this.get("clean_title")},url:function(e){return this.urls[e]||this.urls.read},urls:{read:o.getURL("threads/details"),create:o.getURL("threads/create"),update:o.getURL("threads/update"),delete:o.getURL("threads/remove"),restore:o.getURL("threads/restore"),inviteUserGroup:o.getURL("threads/inviteUserGroup"),approve:o.getURL("threads/approve"),spam:o.getURL("threads/spam")},buildFetchData:function(e){var n;if(this.get("id"))n={thread:this.get("id")};else{if(!this.get("slug")||!this.forum.id)throw Error("Cannot fetch thread without an id or a slug plus forum");n={thread:"slug:"+this.get("slug"),forum:this.forum.id}}return t.extend(n,e)},fetch:function(e){if(this.fetchPromise)return this.fetchPromise;e=e||{},e.data=t.extend(this.buildFetchData(),e.data),e.data.attach=e.data.attach||[],e.data.attach.push("topics"),this.forum.shouldFetch()&&(e.data.related=e.data.related||[],e.data.related.push("forum")),this.fetchPromise=n.Model.prototype.fetch.call(this,e);var i=this;return this.fetchPromise.always(function(){i.fetchPromise=null}),this.fetchPromise},sync:function(e,i,o){var a=i.attributes;switch(o=o||{},o.url=this.url(e),o.processData=!0,o.emulateHTTP=!0,e){case"create":var r=a.forum;a.forum||(r=this.forum.id),o.data=t.extend({title:a.title,forum:r,message:a.message},o.data);break;case"update":o.data=t.extend({thread:a.id},{title:a.title,message:a.message});break;case"delete":o.data=t.extend({thread:a.id},o.data);break;case"restore":case"inviteUserGroup":case"spam":case"approve":o.data=t.extend({thread:a.id},o.data),o.type="POST"}return n.sync(e,i,o)},parse:function(e){return e.response||e},toJSON:function(){var e=_.toJSON.call(this);return t.extend(e,{forum:this.forum.toJSON(),author:this.author?this.author.toJSON():void 0}),e.link?k.test(e.link)&&(e.link=this.getDiscussionRoute()):e.slug&&(e.link=this.getDiscussionRoute()),e},getThread:function(){return this},getHostname:function(){var t=this.get("link");return t?e("<a>").attr("href",t)[0].hostname||t:""},getRelativeCreatedAt:function(){return y.getRelativeDatetime(this.get("createdAt"))},getRelativeCommentTimestamp:function(){return y.getRelativeDatetime(this.get("most_recent_comment_timestamp"))},getMostRecentCommenter:function(){var e=this.get("most_recent_commenter");if(e&&!e.isAnonymous)return e},setEmbedlyData:function(e){this.set({content:{title:i.sanitize(e.title),description:i.sanitize(e.description),image:e.images&&e.images[0]||{},keywords:e.keywords.length?e.keywords.map(function(e){return i.sanitize(e)}).slice(0,3):[]}})},getImage:function(){var e;return this.get("isUserGenerated")&&(e=this.getUserGeneratedImage()),e||this.getEmbedlyImage()},getEmbedlyImage:function(){var e=this.get("content");if(e&&e.image&&e.image.url&&this.hasValidImageUrl(e.image))return{src:e.image.url,title:this.get("title")}},hasValidImageUrl:function(e){var t=e.url.match(/url=([^&]+)/m);return t&&t.length>1&&t[1].length},getUserGeneratedImage:function(){var e=this.getMedia(),t=e&&e[0];if(t&&t.thumbnailUrl)return{src:t.thumbnailUrl,title:t.title}},getMedia:function(){return this.get("media")},hasPreview:function(){var e=this.get("content");return!(!e||!e.image.url&&!e.description)},toggleFavorited:function(){var e=this.get("userScore")?0:1;1===e&&a.trigger("threadFavorited",this),_.vote.call(this,e)},toggleIsSpam:function(){this.markAsSpam(!this.get("isSpam"))},markAsSpam:function(e){e=!1!==e;var n=t.bind(this.set,this,"isSpam",e);this.sync(e?"spam":"approve",this).then(n)},getDefaultDescription:function(){return this._getDescription(70)},getShortDescription:function(){return this._getDescription(50)},getLongDescription:function(){return this._getDescription(200)},getFullDescription:function(){return this._getDescription(1/0)},getPlainDescription:function(){return this._truncate(d.stripTags(this.getFullDescription()),50)},_getDescription:function(e){if(this.descriptions&&this.descriptions[e])return this.descriptions[e];var n;if(this.get("isUserGenerated")?n=this.get("message"):this.has("content")&&(n=this.get("content").description),!n||!e)return"";var i=this._truncate(n,e);return this.get("shouldSanitizeMessage")&&(i=t.escape(i)),this._storeDescription(i,e),i},_truncate:function(e,t){var n=e.split(" "),i=n.length;if(t>=i)return e;var o,a,r;for(o=0;(t-1-o>=0||t+o-1<i)&&(a=t-1+o,!(r=n[a])||"."!==r.slice(-1))&&(a=t-1-o,!(r=n[a])||"."!==r.slice(-1));o++)a=i-1;return n.slice(0,a+1).join(" ")},_storeDescription:function(e,t){this.descriptions||(this.descriptions={}),this.descriptions[t]=e},_clearDescriptions:function(){this.descriptions={}},confirmDelete:function(e){w.confirmationPromise(w.TYPES.CONFIRM_CANCEL,v(this.toJSON())).then(t.bind(function(t){t&&(this.removeThread(),e||x.navigate("/home/channel/"+this.forum.channel.id+"/",{trigger:!0,replace:!0}))},this))},removeThread:function(){if(this.topics.length>0){new m([],{thread:this}).save()}this.get("isDeleted")||this.sync("delete",this).then(t.bind(this.set,this,{isDeleted:!0})),this.get("isClosed")||this.sync("close",this).then(t.bind(this.set,this,{isClosed:!0}))},restore:function(){(this.get("isDeleted")||this.get("isClosed"))&&(this.sync("restore",this).then(t.bind(this.set,this,{isDeleted:!1})),this.sync("open",this).then(t.bind(this.set,this,{isClosed:!1})))},toggleSubscription:function(){return this.subscribe(!this.get("userSubscription"))},inviteUserGroup:function(e){return this.sync("inviteUserGroup",this,{data:{userGroup:e}})},getEditPermissions:function(n){return this.get("isDeleted")?e.Deferred().resolve(!1).promise():e.when(this.isAuthorSessionUser(n),this.getModeratePermissions(n)).then(t.bind(function(e,t){var n=e||t;return this.set("canEdit",n),n},this))},getModeratePermissions:function(n){return this.get("canModerate")||u.getFromCookie().staff?(this.set("canModerate",!0),e.Deferred().resolve(!0).promise()):n.loadModeratedForums().then(t.bind(function(){var e=t.contains(n.moderatedForums,this.forum.id);return this.set("canModerate",e),e},this))},isAuthorSessionUser:function(e){var n=this.author?this.author.get("id"):this.get("author");return e.loadPromise().then(t.bind(function(){var t=e.user.get("id")&&e.user.get("id")===n;return this.set("isAuthor",t),t},this))},getShareUrl:function(){return"https://disq.us/t/"+(+this.id).toString(36)},shareThread:function(e){var t,n,i=this.getShareUrl(),o=this.get("clean_title");switch(e){case"twitter":t="https://twitter.com/intent/tweet",n=t+"?text="+window.encodeURIComponent(o)+"&url="+window.encodeURIComponent(i);break;case"facebook":t="https://www.facebook.com/sharer.php",n=t+"?u="+window.encodeURIComponent(i);break;default:return}this._showSharePopup(n)},_showSharePopup:function(e){return c.openWindow(e,"_blank",{width:550,height:520})},storageKey:function(){if(this.isNew()&&this.forum.id)return["drafts:forum",this.forum.id].join(":")}},{CATEGORY_TITLE_SEPARATOR:": ",getOrCreateThread:function(e,n,i){var o=l.pool(P),a=t.find(o,function(t){return t.get("slug")===n&&t.forum.get("id")===e});if(!a){var r=new h;a=new P({slug:n,forum:{id:e}}),r.add(a),a.fetch(i).then(function(){l.set(P,a)})}return a}});return l.addType("Thread",P),r.withCreatedAt.call(P.prototype),P}),define("home/collections/VotersUserCollection",["core/UniqueModel","home/models/User","core/collections/VotersUserCollection"],function(e,t,n){"use strict";return n.extend({model:e.boundModel(t),parse:function(e){return e.response}})}),define("home/models/Post",["jquery","underscore","core/models/Post","core/UniqueModel","home/models/Thread","home/models/User","home/collections/VotersUserCollection"],function(e,t,n,i,o,a,r){"use strict";var s=n,l=s.prototype,c=n.extend({votersCollectionClass:r,initialize:function(e,n){l.initialize.call(this,e,n),this.set({state:this._getPostState()}),this.initializeRelated("thread",t.extend({forum:e.forum},n),o)},toJSON:function(){var e=l.toJSON.apply(this,arguments);return e.thread=this.thread.toJSON(),e},getLinks:t.memoize(function(){return e("<div>").html(this.get("message")).find("a[href]").map(function(t,n){return e(n).attr("href")})},function(){return this.id}),getThreadId:function(){return this.thread.id},_getPostState:function(){return this.get("isSpam")?"spam":this.get("isDeleted")?"deleted":this.get("isFlagged")&&!this.get("isApproved")?"flagged":this.get("isApproved")?"visible":"pending"}});return n.withAuthor.call(c.prototype,i.boundModel(a)),i.addType("Post",c),c}),define("home/collections/PostCollection",["core/collections/PaginatedCollection","core/UniqueModel","home/models/Post"],function(e,t,n){"use strict";return e.extend({model:t.boundModel(n)})}),define("home/models/Feed",["underscore","jquery","backbone"],function(e,t,n){"use strict";return n.Model.extend({defaults:function(){return{fetching:!1,fetched:!1,hasNext:!0,error:!1,items:null,numPages:0,fetchOptions:{},active:!1}},initialize:function(t,n){if(!n||!n.collectionClass&&!n.collection)throw Error("Feed must specify the type of collection it maintains, or pass the collection");var i=n.collection||new n.collectionClass([],n.collectionOptions);i.cursor&&e.has(i.cursor,"hasNext")&&this.set("hasNext",i.cursor.hasNext),n.collectionUrl&&(i.url=n.collectionUrl),this.set({items:i}),this.items=i,i.on("extend",this.onExtendComplete,this),i.on("sync",this.onSync,this),this.listenTo(i,"all",this.propagateCollectionEvents),this.on("change:active",this.activeChanged,this)},propagateCollectionEvents:function(){var e=Array.prototype.slice.apply(arguments);e[0]="items:"+e[0],this.trigger.apply(this,e)},activeChanged:function(){this.get("active")&&!this.get("items").length&&this.fetchItems()},fetchItems:function(n){if(n=n||{},!n.reset&&!this.get("hasNext"))return t.Deferred().resolve();if(this.get("fetching")&&!this.get("timeouts"))return this.fetchPromise;this.set({fetching:!0}),n.reset&&this.set({fetched:!1}),n.data=n.data||{},e.extend(n.data,this.get("fetchOptions"));var i=n.error,o=n.success,a=this;n.error=function(e,t){if("timeout"===t.statusText&&(a.get("timeouts")||0)<3)return a.set({timeouts:(a.get("timeouts")||0)+1}),void a.fetchItems();a.set({fetching:!1,error:!0,hasNext:!1,timeouts:0}),i&&i.apply(this,arguments)},n.success=function(){a.set({error:!1,timeouts:0,numPages:a.get("numPages")+1}),o&&o.apply(this,arguments)};var r=t.isEmptyObject(a.get("items").cursor)||n.reset;return this.fetchPromise=a.get("items")[r?"fetch":"more"](n)},onSync:function(e,t){this.set({fetched:!0,fetching:!1,hasNext:t.cursor&&t.cursor.hasNext})},ensureFetched:function(){return this.get("fetched")||this.get("fetching")||this.fetchPromise||this.fetchItems({reset:!0}),this.fetchPromise?this.fetchPromise:t.Deferred().resolve()},onExtendComplete:function(e){this.set({hasNext:e})}})}),define("home/models/ActivityFeedItem",["jquery","underscore","backbone","core/api","home/collections/PostCollection","home/models/Thread","home/models/Feed","home/utils/datetimeUtils"],function(e,t,n,i,o,a,r,s){"use strict";var l=n.Model.extend({initialize:function(e,t){t.thread&&this.initializeRelated("thread",t,a),this.activities=t.activities,this.id||(this.id=l.buildId(this.activities)),this.set({isUnread:this.activities[0].get("isUnread")}),this.handleBoostEnd(),this.on("change:fixedUntil",this.handleBoostEnd)},parse:function(e){var n=e.score;return n&&(n={score:n.value,naturalScore:n.calculated||n.value,boostedScore:n.boost,fixedUntil:n.fixedUntil}),t.extend(e,n)},url:function(e){return i.getURL("timelines/curation/"+this.urls[e])},urls:{boost:"boostThreadInChannel",unboost:"unboostThreadInChannel"},sync:function(e,i,o){switch(o=o||{},o.url=i.url(e),o.processData=!0,o.emulateHTTP=!0,e){case"boost":o.type="POST",o.data=t.extend({score:i.get("score"),fixedUntil:i.get("fixedUntil")},o.data);break;case"unboost":o.type="POST"}return o.data=t.defaults({thread:i.thread.id},o.data),n.sync(e,i,o)},toJSON:function(){return t.defaults({activities:t.invoke(this.activities,"toJSON"),actors:t.invoke(this.actors,"toJSON"),thread:this.thread&&this.thread.toJSON(),relativeTime:this.getRelativeTimestamp()},n.Model.prototype.toJSON.apply(this,arguments))},getThread:function(){return this.thread},getPosts:function(){if(!this.posts){var e={collectionClass:o,collectionUrl:i.getURL("threads/listPosts")};this.posts={desc:new r({fetchOptions:{thread:this.thread.id,order:"desc"}},e),asc:new r({fetchOptions:{thread:this.thread.id,order:"asc"}},e)}}return this.posts},hasThreadImage:function(){var t=e.Deferred(),n=this.thread;return n?n.getImage()?t.resolve(!0):!1===n.get("extending")?t.resolve(!1):n.on("change:extending",function(e,n){!1===n&&t.resolve(!!e.getImage())}):t.resolve(!1),t.promise()},getBackendId:function(){return this.activities[0].get("backendId")},getRelativeTimestamp:function(){return s.getRelativeDatetime(this.get("published"))},getRelativeBoostTimeRemaining:function(){var e=this.get("fixedUntil");return e&&s.getRelativeDatetime(e)},getSelectedPost:function(){return this.activities[0].get("selectedPost")},setSelectedPost:function(e){this.activities[0].set({selectedPost:e})},getThreadOverrides:function(){return this.activities[0].get("threadOverrides")||{}},setThreadOverrides:function(e){this.activities[0].set({threadOverrides:e})},getPostsPreviewCollection:function(){if(!this.previewPostsCollection){var e=this.getSelectedPost();this.previewPostsCollection=this.thread.recentPosts.clone(),e&&this.previewPostsCollection.add(e,{at:0})}return this.previewPostsCollection},handleBoostEnd:function(){if(this.boostEndTimeout&&(clearTimeout(this.boostEndTimeout),this.boostEndTimeout=null),this.get("fixedUntil")){var e=new Date(this.get("fixedUntil")).getTime(),n=e-(new Date).getTime();n<1?this.unboost():this.boostEndTimeout=setTimeout(t.bind(this.unboost,this),n)}},boostInChannel:function(e,t,n){var i=n?new Date((new Date).getTime()+n).toISOString():this.get("fixedUntil");if(this.set({boostedScore:t,fixedUntil:i,score:t}),i)return this.sync("boost",this,{data:{channel:e,fixedUntil:i}})},unboost:function(){this.set({score:this.get("naturalScore"),boostedScore:null,fixedUntil:null})},unboostInChannel:function(e){return this.unboost(),this.sync("unboost",this,{data:{channel:e}})}},{buildId:function(e){return t.pluck(e,"id").join("|")},DEFAULT_BOOST_TIME_MS:36e5,DEFAULT_DECAY_RATE_SEC:1800});return l}),define("home/models/UnreadCounter",["backbone","core/api","core/config"],function(e,t,n){"use strict";var i=e.Model,o=i.prototype;return i.extend({initialize:function(e,t){t=t||{},this.uniqueTogether={type:t.type,index:t.index,target:t.target},this.prepareFetchOptions=t.prepareFetchOptions},defaults:{numUnread:void 0},url:t.getURL("timelines/getUnreadCount"),fetch:function(e){return this.prepareFetchOptions&&(e=this.prepareFetchOptions(e)),e.data.routingVersion=n.feedApiVersion,o.fetch.call(this,e)},parse:function(e,t){if(!t.initializeOnly||!this.has("numUnread"))return{numUnread:e.response}}})}),define("core/models/Channel",["underscore","backbone","core/UniqueModel","core/api","core/models/Forum","core/strings"],function(e,t,n,i,o,a){"use strict";var r=a.get,s=t.Model.extend({defaults:{primaryForum:{},slug:null,
name:null,options:{},followUrl:"channels/follow",unfollowUrl:"channels/unfollow"},idAttribute:"slug",initialize:function(e,t){this.buildPrimaryForum(t),this.listenTo(this,"change:primaryForum",this.updatePrimaryForum),this.listenTo(this,"change:primaryCategory",this.updatePrimaryCategory)},buildPrimaryForum:function(){if(!this.primaryForum){var e=this.get("primaryForum");e&&(this.primaryForum=new n(o,e,{channel:this}),this.unset("primaryForum"))}},updatePrimaryForum:function(){var e=this.get("primaryForum");e&&(this.primaryForum||this.buildPrimaryForum(),this.primaryForum.set(e),this.unset("primaryForum"))},updatePrimaryCategory:function(){var e=this.get("primaryCategory"),t=this.primaryCategory;null===e?this.primaryCategory=void 0:t?t.set(e):this.primaryCategory=new n(s,e),this.unset("primaryCategory"),this.trigger("changeRelated:primaryCategory")},fetch:function(n){return n=n?e.clone(n):{},n.data=this.buildFetchData(n.data),t.Model.prototype.fetch.call(this,n)},buildFetchData:function(t){var n=t?e.clone(t):{};return this.id&&(n.channel=this.id),n},url:function(e){return i.getURL(this.constructor.URLS[e]||this.constructor.URLS.read)},sync:function(n,i,o){var a=i.attributes;o=e.extend({url:this.url(n),emulateHTTP:!0},o);var r={bannerColor:a.bannerColor,description:a.description,primaryCategory:i.primaryCategory&&i.primaryCategory.get("slug")||""};switch("default"===o.avatarType?r.avatar="":a.avatar&&!e.isString(a.avatar)&&(r.avatar=a.avatar),"file"!==o.bannerType?r.banner="":a.banner&&!e.isString(a.banner)&&(r.banner=a.banner),n){case"create":o.processData=!1,o.contentType=!1,r.name=a.name,o.data=this.toFormData(e.extend({},r,o.data));break;case"update":o.processData=!1,o.contentType=!1,r.channel=a.slug,o.data=this.toFormData(e.extend({},r,o.data))}return t.sync(n,i,o)},toFormData:function(t){return e.reduce(t,function(t,n,i){return t.append(i,e.isString(n)?n.trim():n),t},new window.FormData)},parse:function(e){return e.response||e},shouldFetch:function(){return!this.get("name")||!this.get("dateAdded")},ensureFetched:function(){this.shouldFetch()&&this.fetch()},validate:function(t){var n=[],i=t.name.trim();i.length<this.constructor.MIN_NAME_LENGTH?n.push({attrName:"name",message:a.interpolate(r("Name must have at least %(minLength)s characters."),{minLength:this.constructor.MIN_NAME_LENGTH})}):i.length>this.constructor.MAX_NAME_LENGTH&&n.push({attrName:"name",message:a.interpolate(r("Name must have less than %(maxLength)s characters."),{maxLength:this.constructor.MAX_NAME_LENGTH})});var o=t.description.trim();if(o.length<this.constructor.MIN_DESCRIPTION_LENGTH?n.push({attrName:"description",message:a.interpolate(r("Description must have at least %(minLength)s characters."),{minLength:this.constructor.MIN_DESCRIPTION_LENGTH})}):o.length>this.constructor.MAX_DESCRIPTION_LENGTH&&n.push({attrName:"description",message:a.interpolate(r("Description must have less than %(maxLength)s characters."),{maxLength:this.constructor.MAX_DESCRIPTION_LENGTH})}),this.constructor.BANNER_COLORS[t.bannerColor]||n.push({attrName:"bannerColor",message:a.interpolate(r("Banner color must be one of "+e.invoke(e.values(this.constructor.BANNER_COLORS),"toLowerCase").join(", "))+".")}),!e.isEmpty(n))return n},_changeFollowingState:function(t,n){return n=n||{},n.type="POST",n.data=e.extend({target:this.get("slug")},n.data),i.call(t,n)},follow:function(e){return this.primaryForum.set("isFollowing",!0),this._changeFollowingState(this.get("followUrl"),e)},unfollow:function(e){return this.primaryForum.set("isFollowing",!1),this._changeFollowingState(this.get("unfollowUrl"),e)},toggleFollowed:function(){if(this.get("options").isCurationOnlyChannel&&this.primaryForum){var e=this.primaryForum.get("isFollowing")?this.unfollow():this.follow();return this.primaryForum.trigger("toggled:isFollowing"),e}},toJSON:function(){var n=t.Model.prototype.toJSON.call(this);return e.defaults({primaryCategory:this.primaryCategory?this.primaryCategory.toJSON():{}},n)}},{URLS:{read:"channels/details",create:"channels/create",update:"channels/update"},BANNER_COLORS:{gray:r("Gray"),blue:r("Blue"),green:r("Green"),yellow:r("Yellow"),orange:r("Orange"),red:r("Red"),purple:r("Purple")},MIN_NAME_LENGTH:3,MAX_NAME_LENGTH:100,MIN_DESCRIPTION_LENGTH:5,MAX_DESCRIPTION_LENGTH:200});return n.addType("Channel",s),s}),define("core/utils/objectExpander",["underscore","core/UniqueModel","core/models/Channel","core/models/Thread"],function(e,t,n,i){"use strict";return{Channel:n,Thread:i,parseObject:function(t,n){return e.isString(n)?t[n]:n},buildThread:function(n,i){if(i instanceof this.Thread)return i;if(i=this.parseObject(n,i),e.isString(i.author)){var o=i.author.replace("auth.User?id=","");i.author=n["auth.User?id="+o]||o}return new t(this.Thread,i,{forum:this.parseObject(n,i.forum),author:i.author})},buildChannel:function(e,n){return n instanceof this.Channel?n:(n=this.parseObject(e,n),new t(this.Channel,n))}}}),define("core/utils/models",["underscore"],function(e){"use strict";return{channel:{extendJSON:function(t){var n=t.name||"";return e.defaults({channelAvatar:t.avatar||t.options.favicon,bannerColorClass:t.bannerColor?"-"+t.bannerColor:"",channelInitial:n.charAt(0)},t)}}}}),define("home/models/Channel",["underscore","core/UniqueModel","core/switches","core/models/Channel","core/utils/auth","core/utils/models","core/strings","home/models/Forum","remote/config"],function(e,t,n,i,o,a,r,s,l){"use strict";var c,u=r.get,d=i.extend({buildPrimaryForum:function(t){var n=t&&t.primaryForum||this.get("primaryForum");if(e.isEmpty(n))return void this.listenToOnce(this,"change:primaryForum",e.bind(this.buildPrimaryForum,this,t));s||(s=require("home/models/Forum")),this.initializeRelated("primaryForum",e.defaults({channel:this},t),s),this.trigger("changeRelated:primaryForum")},getCategories:function(){var t=this.get("options"),n=t&&t.categories;return e.isEmpty(n)?null:n},shouldFetch:function(){return i.prototype.shouldFetch.call(this)||!this.primaryForum},userCanCreate:function(t){if(this.get("options").isCurationOnlyChannel)return!1;if(n.isFeatureActive("home_admin_channel",this.attributes))return o.getFromCookie().staff;var i=l.lounge&&l.lounge.home_channel_creator_whitelists&&l.lounge.home_channel_creator_whitelists[this.id];return!i||o.getFromCookie().staff||e.contains(i,t.get("username"))},ensureFetchedWithCounters:function(){this.primaryForum&&this.primaryForum.has("numThreads")||this.fetch()},buildFetchData:function(t){var n=i.prototype.buildFetchData.call(this,t);return e.extend({attach:["counters","channel_categories"]},n)},validate:function(t){var n=i.prototype.validate.call(this,t)||[];c||(c=require("home/collections/CategoryCollection"));var o=c.get().pluck("slug");if(t.primaryCategory?e.contains(o,t.primaryCategory.slug)||n.push({attrName:"primaryCategory",message:u("Invalid primary category")}):n.push({attrName:"primaryCategory",message:"Primary cateogry is required"}),!e.isEmpty(n))return n},toJSON:function(){var t=i.prototype.toJSON.call(this);return a.channel.extendJSON(e.defaults({primaryForum:this.primaryForum?this.primaryForum.toJSON():{}},t))},follow:function(e){var t=i.prototype.follow.call(this,e);return require("home/models/Session").get().user.trigger("followed:channel",this),t},unfollow:function(t){var n=require("home/models/Session"),o=n.get().user;t=t||{},t.success=e.bind(function(){this.get("options").isCurationOnlyChannel&&!this.primaryForum.get("isFollowing")&&o.trigger("unfollowed:curationchannel",this)},this);var a=i.prototype.unfollow.call(this,t);return o.trigger("unfollowed:channel",this),a}},{getOrCreate:function(e,n){var i=e[d.prototype.idAttribute];if(i){var o=t.get(d,i);if(o)return o}return new t(d,e,n)}});return d}),define("home/models/Announcement",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{subject:null,title:null,body:null,name:null}})}),define("home/activityExpander",["underscore","core/UniqueModel","core/utils/objectExpander","home/models/User","home/models/Post","home/models/Thread","home/models/Forum","home/models/Channel","home/models/Announcement"],function(e,t,n,i,o,a,r,s,l){"use strict";return e.extend(n,{Channel:s,Thread:a,buildPost:function(e,n){if(n instanceof o)return n;n=this.parseObject(e,n);var i=this.parseObject(e,n.thread)||e["forums.Thread?id="+n.thread]||t.pool(a)[n.thread];return new t(o,n,{author:this.parseObject(e,n.author),thread:this.buildThread(e,i)})},buildAnnouncement:function(e,t){return new l(this.parseObject(e,t))},buildUser:function(e,n){return n instanceof i?n:(n=this.parseObject(e,n),new t(i,n))},buildForum:function(e,n){return n instanceof r?n:(n=this.parseObject(e,n),new t(r,n))}})}),define("home/models/Activity",["underscore","backbone","home/utils/datetimeUtils","core/UniqueModel"],function(e,t,n,i){"use strict";var o=t.Model.extend({defaults:{version:0,verb:null},buildId:function(e){return e=e||this.attributes,this.constructor.buildId(e.actor,e.verb||this.constructor.prototype.defaults.verb,e.target,e.object)},parse:function(e,t){return e.id&&t&&t.objects&&(e=this.parseRelatedModels(e,t.objects),e.backendId=e.id,e.id=this.buildId(e)),e},toJSON:function(){return e.defaults({actor:this.actor&&this.actor.toJSON(),target:this.target&&this.target.toJSON(),object:this.object&&this.object.toJSON(),thread:this.thread&&this.thread.toJSON(),forum:this.thread&&this.thread.forum.toJSON()},t.Model.prototype.toJSON.call(this))},getThread:function(){return this.thread},getRelativeCreatedAt:function(){return n.getRelativeDatetime(this.object.get("createdAt"))}},{buildId:function(e,t,n,i){return[e?e.id:"",t,n?n.id:"",i?i.id:""].join("|")}});return i.addType("Activity",o),o}),define("home/models/activities/ThreadActivity",["underscore","home/models/Activity","home/activityExpander"],function(e,t,n){"use strict";return t.extend({initialize:function(e){this.target=e.target,this.thread=this.target,this.targetChannel=e.targetChannel},parseRelatedModels:function(t,i){t.target&&"TrendingThreadOnChannel"===t.type&&(t.targetChannel=n.buildChannel(i,t.target)),t.target=n.buildThread(i,t.object);var o=t.thread=t.target;if(t.selectedPost){var a=t.selectedPost.excerpt;t.selectedPost=n.buildPost(i,t.selectedPost.post),t.selectedPost.set({excerpt:a})}return o.initializeRecentPosts({recentPosts:e.map(t.recentPosts,e.bind(n.buildPost,n,i))}),t}})}),define("home/models/activities/FavoriteChannelThreadActivity",["home/models/activities/ThreadActivity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"recommend"},initialize:function(t){e.prototype.initialize.call(this,t),this.actor=t.actor},parseRelatedModels:function(n,i){return e.prototype.parseRelatedModels.call(this,n,i),n.actor=t.buildUser(i,n.actor),n}})}),define("home/models/activities/ChannelPostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"channel-post"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.object=t.buildPost(n,e.object),e}})}),define("home/models/activities/FavoriteThreadActivity",["home/models/activities/ThreadActivity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"favorite"},initialize:function(t){e.prototype.initialize.call(this,t),this.actor=t.actor},parseRelatedModels:function(n,i){return e.prototype.parseRelatedModels.call(this,n,i),n.actor=t.buildUser(i,n.actor),n}})}),define("home/models/activities/ReplyActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"reply"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=e.target,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.object=t.buildPost(n,e.object),e.actor=e.actor?t.buildUser(n,e.actor):e.object.author,e.target=t.buildPost(n,e.object.get("parent_post")),e}})}),define("home/models/activities/MentionActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"mention"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=e.target,this.thread=e.target.thread},parseRelatedModels:function(e,n){return e.object=t.buildUser(n,e.object),e.actor=t.buildUser(n,e.actor),e.target=t.buildPost(n,e.target),e}})}),define("home/models/activities/PostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"post"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=this.object.thread,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.object=t.buildPost(n,e.object),e.target=e.object.thread,e}})}),define("home/models/activities/LikePostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"favorite"},initialize:function(e){this.actor=e.actor,this.target=e.target,this.thread=this.target.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildPost(n,e.object),e}})}),define("home/models/activities/TrendingThreadActivity",["home/models/activities/ThreadActivity"],function(e){"use strict";return e.extend({defaults:{verb:"trending"}})}),define("home/models/activities/FollowUserActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"follow"},initialize:function(e){this.actor=e.actor,this.target=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildUser(n,e.object),e}})}),define("home/models/activities/AnnouncementActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"send"},initialize:function(e){this.object=e.object},parseRelatedModels:function(e,n){return e.object=t.buildAnnouncement(n,e.object),e}})}),define("home/models/activities/CreateThreadActivity",["home/models/activities/ThreadActivity"],function(e){"use strict";return e.extend({defaults:{verb:"create"}})}),define("home/models/activities/ShareThreadActivity",["home/models/activities/ThreadActivity"],function(e){"use strict";return e.extend({defaults:{verb:"share"}})}),define("home/models/activities/ThreadInviteActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"threadInvite"},initialize:function(e){this.actor=e.actor,this.thread=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildThread(n,e.target),e}})}),define("home/models/activities/ChannelInviteActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"channelInvite"},initialize:function(e){this.actor=e.actor,this.channel=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildChannel(n,e.target),e}})}),define("home/models/activities/HighlightPostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"highlight"},initialize:function(e){this.actor=e.actor,this.target=e.target,this.thread=this.target.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildPost(n,e.object),e}})}),define("home/models/activities/AddModActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"add-mod"},initialize:function(e){this.actor=e.actor,this.target=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildForum(n,e.target),e}})}),define("home/ActivityFactory",["underscore","home/activityExpander","core/UniqueModel","home/models/Activity","home/models/activities/FavoriteChannelThreadActivity","home/models/activities/ChannelPostActivity","home/models/activities/FavoriteThreadActivity","home/models/activities/ReplyActivity","home/models/activities/MentionActivity","home/models/activities/PostActivity","home/models/activities/LikePostActivity","home/models/activities/TrendingThreadActivity","home/models/activities/FollowUserActivity","home/models/activities/AnnouncementActivity","home/models/activities/CreateThreadActivity","home/models/activities/ShareThreadActivity","home/models/activities/ThreadInviteActivity","home/models/activities/ChannelInviteActivity","home/models/activities/HighlightPostActivity","home/models/activities/AddModActivity"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v,b,y){"use strict";var w=function(){};return e.extend(w.prototype,{createActivity:function(e,t){var o=this.getActivityClass(e,t);if(!o)return null;var a=new o(e,t);return n.set(i,a)},getActivityClass:function(e,n){switch(e.type){case"RegisteredUserFavoriteThread":case"AnonymousUserFavoriteThread":return"ThreadAuthorRelation"===e.routings[0].type?(e.verb=o.prototype.defaults.verb,o):(e.verb=r.prototype.defaults.verb,r);case"RegisteredUserSubmitPost":case"AnonymousUserSubmitPost":var i=t.buildPost(n.objects,e.object);return e.object=i,"ThreadAuthorRelation"===e.routings[0].type?(e.verb=a.prototype.defaults.verb,a):i.get("parent_post")?(e.verb=s.prototype.defaults.verb,s):(e.verb=c.prototype.defaults.verb,c);case"UserMentionUserOnPost":return e.verb=l.prototype.defaults.verb,l;case"RegisteredUserLikePost":case"AnonymousUserLikePost":return e.verb=u.prototype.defaults.verb,u;case"RegisteredUserCreateThread":return e.verb=p.prototype.defaults.verb,p;case"TrendingThread":case"TrendingThreadOnChannel":case"TrendingThreadOnForum":return e.verb=d.prototype.defaults.verb,d;case"UserFollowUser":return e.verb=h.prototype.defaults.verb,h;case"SendAnnouncementToUser":return e.verb=m.prototype.defaults.verb,m;case"UserShareThreadToChannel":return e.verb=f.prototype.defaults.verb,f;case"UserInviteUserToThread":case"UserInviteUserGroupToThread":return e.verb=g.prototype.defaults.verb,g;case"UserInviteUserToChannel":return e.verb=v.prototype.defaults.verb,v;case"UserAddModeratorToForum":return e.verb=y.prototype.defaults.verb,y;case"UserHighlightPost":return e.verb=b.prototype.defaults.verb,b;case"UserFollowForum":return null}}}),w}),define("home/collections/FeedItemCollection",["underscore","home/collections/common/ExtensibleCollection","home/models/ActivityFeedItem","home/models/UnreadCounter","home/ActivityFactory","home/activityExpander","core/api"],function(e,t,n,i,o,a,r){"use strict";var s=t,l=s.prototype,c=s.extend({url:r.getURL("timelines/activities"),initialize:function(t,n){l.initialize.call(this,t,n),n=n||{},this.uniqueTogether={type:n.type,index:n.index,target:n.target},this.unreadCounter=new i(null,e.extend({prepareFetchOptions:this.prepareFetchOptions},this.uniqueTogether))},prepareFetchOptions:function(t){return t=t?e.clone(t):{},t.data=e.extend({},this.uniqueTogether,t.data),t},fetch:function(e){return e=this.prepareFetchOptions(e),l.fetch.call(this,e)},canUpdate:function(){return this.length&&this.url.indexOf("timelines/activities")>0},updateUnreadCount:function(){this.canUpdate()&&this.unreadCounter.fetch({data:{readPosition:this.latestPosition}}).then(e.bind(function(){this.fetchUnread(this.unreadCounter.get("numUnread"))},this))},updateUniqueTogether:function(t){if(t&&e.isObject(t)){var n=e.pick(t,"type","index","target");this.uniqueTogether=e.extend(this.uniqueTogether,n),this.unreadCounter&&this.updateUniqueTogether.call(this.unreadCounter,this.uniqueTogether)}},fetchUnread:function(t){t<=0||(this.unreadQueue=this.unreadQueue||new this.constructor(null,e.clone(this.uniqueTogether)),this.unreadQueue.fetch({reset:!0,data:{limit:t}}).then(e.bind(function(){var e=this.unreadQueue.length;this.unreadCounter.set("numUnread",e),this.trigger("unreadItemsReady",e)},this)))},addUnread:function(){this.latestPosition=this.unreadQueue.latestPosition,this.unreadQueue.invoke("set","isFromUnreadQueue",!0),this.add(this.unreadQueue.models,{at:0}),this.unreadQueue.reset(),this.unreadCounter.set("numUnread",0)},parse:function(t,n){n=n||{},this.latestPosition&&!n.reset||(this.latestPosition=t.response.latestPosition);var i=e.bind(c.transform,c,t.response.objects);return t.response=e.chain(t.response.activities).map(i).compact().value(),"home"===this.uniqueTogether.type&&t&&t.response&&e.isArray(t.response)&&(t.response=e.filter(t.response,function(e){return-1===e.thread.forum.id.indexOf("channel-")||"channel-discussdisqus"===e.thread.forum.id})),l.parse.call(this,t,n)}},{activityFactory:new o,transform:function(e,t){return t.items?this.buildFeedItemFromGroupedActivities(e,t):this.buildFeedItemFromSingleActivity(e,t)},buildFeedItemFromGroupedActivities:function(t,i){i.actors=i.actors||{items:[]};var o=e.chain(i.items).map(e.bind(this.buildActivity,this,t)).compact().value(),r=e.map(i.actors.items,e.bind(a.buildUser,a,t)),s=o[0],l=s&&s.get("verb");if(s){!r.length&&s.actor&&(i.actors.totalItems=1,r=[s.actor]);var c=n.buildId(o),u=n.prototype.parse.call(null,{id:c,verb:"reply"===l&&o.length>1?"post":l,published:i.published,totalActors:i.actors&&i.actors.totalItems||0,totalActivities:i.totalItems,score:i.score}),d={activities:o,thread:s.thread},h=new n(u,d);return h.actors=r,h}},buildFeedItemFromSingleActivity:function(t,i){var o=this.buildActivity(t,i);if(o){var a=[o],r=n.buildId(a),s=e.defaults({id:r,totalActors:1,totalActivities:1,verb:o.get("verb")},i),l={activities:a,thread:o.thread},c=new n(s,l);return c.actors=o.actor?[o.actor]:[],c}},buildActivity:function(e,t){try{return this.activityFactory.createActivity(t,{objects:e,parse:!0})}catch(e){window.Raven&&window.Raven.captureMessage("error parsing activity item",{extra:t})}}});return c}),define("home/collections/ForumCollection",["core/collections/PaginatedCollection","core/UniqueModel","home/models/Forum"],function(e,t,n){"use strict";return e.extend({model:t.boundModel(n),parse:function(t){return t=e.prototype.parse.call(this,t)}})}),define("home/collections/FollowingForumCollection",["underscore","home/utils/backboneUtils","home/collections/ForumCollection","core/api"],function(e,t,n,i){"use strict";return n.extend({url:i.getURL("users/listFollowingForums"),initialize:function(){this.on("add",this.completeModel)},completeModel:function(e){e.get("name")||e.fetch()},fetch:function(n){return n=n||{},n.data=e.defaults({limit:100},n.data),t.memoizedFetch.call(this,n)},parse:function(t){return t&&t.response&&e.isArray(t.response)&&(t=e.defaults({response:e.filter(t.response,function(e){return-1===e.id.indexOf("channel-")||"channel-discussdisqus"===e.id})},t)),t=n.prototype.parse.call(this,t)}})}),define("core/collections/ChannelCollection",["underscore","core/collections/PaginatedCollection","core/UniqueModel","core/api","core/models/Channel","core/utils/objectExpander"],function(e,t,n,i,o,a){"use strict";return t.extend({url:i.getURL("channels/list"),model:n.boundModel(o),initialize:function(e,n){t.prototype.initialize.call(this,e,n),n=n||{},this.listName=n.listName},fetch:function(n){return n=n||{},this.listName&&(n.data=e.extend({listName:this.listName},n.data)),t.prototype.fetch.call(this,n)},parse:function(n){return n&&n.response&&e.isArray(n.response)&&(n=e.defaults({response:e.filter(n.response,function(e){return!e||!e.primaryForum||!e.primaryForum.id||"channel-discussdisqus"===e.primaryForum.id})},n)),n=t.prototype.parse.call(this,n),n.items?e.map(n.items,function(e){return a.buildChannel(n.objects,e.reference)}):n}})}),define("home/collections/ChannelCollection",["core/collections/ChannelCollection","core/UniqueModel","home/models/Channel"],function(e,t,n){"use strict";return e.extend({model:t.boundModel(n)})}),define("home/collections/FollowingChannelCollection",["underscore","home/utils/backboneUtils","home/collections/ChannelCollection","core/api"],function(e,t,n,i){"use strict";return n.extend({url:i.getURL("users/listFollowingChannels"),initialize:function(){this.on("add",this.completeModel)},completeModel:function(e){e.shouldFetch()&&e.fetch()},fetch:function(n){return n=n||{},n.data=e.defaults({limit:100},n.data),t.memoizedFetch.call(this,n)}})}),define("home/collections/FollowingUserCollection",["home/collections/PaginatedUserCollection","core/api"],function(e,t){"use strict";return e.extend({url:t.getURL("users/listFollowing")})}),define("home/collections/MostActiveForumCollection",["backbone","home/models/Forum","core/UniqueModel","core/api"],function(e,t,n,i){"use strict";return e.Collection.extend({url:i.getURL("users/listMostActiveForums"),model:n.boundModel(t),parse:function(e){return e.response}})}),define("home/collections/UserManagedChannelCollection",["underscore","core/api","home/collections/ChannelCollection"],function(e,t,n){"use strict";return n.extend({url:t.getURL("users/listModeratedChannels"),initialize:function(e,t){this.user=t.user,this.listenTo(this.user,"change:id",this.sort)},comparator:function(e,t){var n=this.user.get("id"),i=e.get("owner_id")===n;return i===(t.get("owner_id")===n)?e.get("name").toLowerCase()<t.get("name").toLowerCase()?-1:1:i?-1:1},fetch:function(t){return n.prototype.fetch.call(this,e.defaults({data:{user:"username:"+this.user.get("username"),excludeOwned:0}},t))}})}),define("home/models/UserModerationDetails",["backbone","home/utils/backboneUtils","core/api"],function(e,t,n){"use strict";return e.Model.extend({idAttribute:"username",url:n.getURL("internal/users/moderationDetails"),initialize:function(e){e=e||{},this.forum=e.forum,this.network=e.network},shouldFetch:function(){return!this.get("username")||!this.get("forumsPostedIn")},fetch:function(){var e={data:{user:"username:"+this.get("username"),forum:this.forum||null,network:this.network?"username:"+this.network:null}};return t.memoizedFetch.call(this,e)},ensureFetched:function(){this.shouldFetch()&&this.fetch()},parse:function(e){return e.response}})}),define("home/models/UserProfile",["jquery","underscore","backbone","home/utils/backboneUtils","home/collections/PaginatedUserCollection","home/collections/FeedItemCollection","home/collections/FollowingForumCollection","home/collections/FollowingChannelCollection","home/collections/FollowingUserCollection","home/collections/MostActiveForumCollection","home/collections/UserManagedChannelCollection","core/UniqueModel","home/models/User","home/models/Feed","home/models/UserModerationDetails","core/api"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f){"use strict";var g=n.Model.extend({idAttribute:"username",initialize:function(e,n){this.initializeRelated("user",t.defaults({user:{username:this.get("username")}},n),h),this.user.listenTo(this,"change:username",this.updateUsername),this.listenTo(this.user,"change:isFollowing",this.updateFollowers);var i="username:"+this.user.get("username"),d={user:i,order:"desc"};this.forumsFollowing=new m({fetchOptions:d},{collectionClass:r}),this.channelsFollowing=new m({fetchOptions:d},{collectionClass:s}),this.listenToOnce(this.channelsFollowing,"items:sync",function(){this.user.set({numChannelsFollowing:this.channelsFollowing.items.length})}),this.syncFollowingCommunities(),this.following=new m({fetchOptions:d},{collectionClass:l}),this.followers=new m({fetchOptions:d},{collectionClass:o,collectionUrl:f.getURL("users/listFollowers")}),this.mostActiveForums=new m({fetchOptions:{user:i,limit:5}},{collectionClass:c}),this.managedChannels=new m(void 0,{collectionClass:u,collectionOptions:{user:this.user}}),this.followedChannels=new m({fetchOptions:{user:i,includeFollowedPrimaryForums:1,excludeModerated:1,excludeOwned:1}},{collectionClass:s,collectionOptions:{url:f.getURL("users/listFollowingChannels")}});var g="user:"+i;this.posts=new m(void 0,{collectionClass:a,collectionOptions:{type:"profile",index:"comments",target:g}}),this.favorites=new m(void 0,{collectionClass:a,collectionOptions:{type:"profile",index:"favorites",target:g}}),this.threads=new m(void 0,{collectionClass:a,collectionOptions:{type:"profile",index:"threads",target:g}}),this.profileFeed=new m(void 0,{collectionClass:a,collectionOptions:{type:"profile",target:g}}),this.moderationDetails=new p({username:this.user.get("username")}),this.listenTo(this.user,"change:isOnGlobalBlacklist",this.handleChangeGlobalBlacklist),this.listenTo(this.user,"blacklist:add",this.removeUserDiscussions),this.listenTo(this.user,"change:username",this.updateUsernameInChildren)},syncFollowingCommunities:function(){var e=this.forumsFollowing.items,n=this.channelsFollowing.items;this.listenTo(n,{reset:function(){e.add(t.pluck(n.models,"primaryForum"),{at:0})},add:function(t){e.add(t.primaryForum,{at:0})},remove:function(t){e.remove(t.primaryForum)}}),this.listenTo(e,"reset",function(){e.add(t.pluck(n.models,"primaryForum"),{at:0})})},handleChangeGlobalBlacklist:function(){this.user.get("isOnGlobalBlacklist")&&this.removeUserDiscussions()},removeUserDiscussions:function(e){(this.threads.get("fetched")?this.threads.fetchItems():this.threads.ensureFetched()).then(t.bind(function(){this.threads.items.each(function(t){var n=t.thread;e&&n.forum.id!==e||n.removeThread()}),this.threads.get("hasNext")&&this.removeUserDiscussions(e)},this))},isPrivate:function(){return!this.user.isSessionUser()&&this.user.get("isPrivate")},isBlocked:function(){return!this.user.isSessionUser()&&this.user.get("isBlocked")},ensureFetched:function(){var n=require("home/models/Session"),o=n.get();o.loadPromise().always(t.bind(function(){var n=o.user.isGlobalAdmin();i.getPromiseFor(this.user,"isPrivate").then(t.bind(function(){if(!this.isPrivate()||n){this.favorites.ensureFetched(),this.posts.ensureFetched(),this.threads.ensureFetched(),this.mostActiveForums.ensureFetched(),this.channelsFollowing.ensureFetched();var t=this;n&&(t.moderationDetails.ensureFetched(),e.when(t.moderationDetails.fetchPromise).then(function(){t.trigger("moderationDetailsReady")}))}},this))},this)),this.fetchUser()},ensureFetchedAllChannels:function(){this.managedChannels.ensureFetched(),this.followedChannels.ensureFetched()},toJSON:function(){return t.defaults({user:this.user.toJSON(),following:this.following.toJSON(),followers:this.followers.toJSON(),mostActiveForums:this.mostActiveForums.toJSON(),posts:this.posts.toJSON(),threads:this.threads.toJSON(),profileFeed:this.profileFeed.toJSON(),moderationDetails:this.moderationDetails.toJSON()},n.Model.prototype.toJSON.call(this))},fetchUser:function(){if(!this.user.get("username"))throw Error("UserProfile requires a username or id in order to be fetched");this.user.shouldFetch()&&this.user.fetch({data:{user:"username:"+this.user.get("username")}})},fetchFollowing:function(){this.following.fetchItems({reset:!0})},fetchForumsFollowing:function(){this.forumsFollowing.fetchItems({reset:!0})},fetchChannelsFollowing:function(){this.channelsFollowing.fetchItems({reset:!0})},updateFollowers:function(){var e=require("home/models/Session"),t=e.get();if(!t.isAnonymous()){var n=this.followers.get("items");this.user.get("isFollowing")?n.add(t.user):n.remove(t.user)}},updateUsername:function(e,t){this.set("username",t)},updateUsernameInChildren:function(e,n){var i="username:"+n,o={user:i};t.each([this.forumsFollowing,this.channelsFollowing,this.following,this.followers,this.mostActiveForums,this.followedChannels],function(e){e.set("fetchOptions",t.extend(e.get("fetchOptions"),o))}),i="user:"+i;var a={target:i};t.each([this.posts,this.favorites,this.threads,this.profileFeed],function(e){e.items.updateUniqueTogether(a)}),this.moderationDetails.set("username",n)}});return d.addType("UserProfile",g),g}),define("home/models/AnonUser",["core/models/BaseUser","home/utils/navigationUtils"],function(e,t){"use strict";var n=e.extend({initialize:function(){this.listenTo(this,"followed:user",this.promptLogin),this.listenTo(this,"unfollowed:user",this.promptLogin),this.listenTo(this,"followed:forum",this.promptLogin),this.listenTo(this,"unfollowed:forum",this.promptLogin),
this.listenTo(this,"followed:channel",this.promptLogin),this.listenTo(this,"unfollowed:channel",this.promptLogin),this.listenTo(this,"subscribe:thread",this.promptLogin),this.listenTo(this,"unsubscribe:thread",this.promptLogin)},promptLogin:function(){t.navigateToLogin()},isGlobalAdmin:function(){return!1}});return function(){var e;return function(){return e||(e=new n),e}}()}),define("home/collections/NotificationCollection",["underscore","backbone","core/api","core/config","home/collections/FeedItemCollection"],function(e,t,n,i,o){"use strict";var a=o,r=a.prototype;return a.extend({fetch:function(t){return t=t?e.clone(t):{},t.data=t.data?e.clone(t.data):{},t.data.readPosition=this.readPosition,t.data.routingVersion=i.feedApiVersion,r.fetch.call(this,t)},parse:function(t,n){this.readPosition&&!n.reset||(this.readPosition=t.response.readPosition);var i=r.parse.apply(this,arguments),o=require("home/views/NotificationCardCollectionView");return e.filter(i,function(t){if(e.chain(o.ITEM_VIEWS).keys().contains(t.get("verb")).value())return!0;window.Raven&&window.Raven.captureMessage("unsupported activity item",{extra:t})})},syncReadPosition:function(){var i=this.latestPosition;i&&i!==this.previousLatestPosition&&i!==this.readPosition&&(this.previousLatestPosition=i,t.ajax({url:n.getURL("timelines/setReadPosition"),type:"POST",data:e.extend({},this.uniqueTogether,{position:i})}))}})}),define("home/models/TimelineFilter",["backbone","core/api","core/config"],function(e,t,n){"use strict";return e.Model.extend({urls:{update:t.getURL("timelines/filters/add"),delete:t.getURL("timelines/filters/remove")},parse:function(e){return e.response||e},serializeData:function(){return{filter:this.id,api_key:n.keys.api}},sync:function(t,n,i){return i.emulateHTTP=!0,i.emulateJSON=!1,i.processData=!0,"update"!==t&&"delete"!==t||(i.data=n.serializeData()),i.url=this.urls[t],e.Model.prototype.sync.call(this,t,n,i)}},{FILTER_LIKEPOST:"likepost",FILTER_INVITE:"invite",FILTER_RECOMMEND:"favoritethread",FILTER_THREADREPLIES:"threadreplies",FILTER_MENTIONS:"mentions"})}),define("home/collections/TimelineFiltersCollection",["jquery","backbone","core/api","home/models/TimelineFilter"],function(e,t,n,i){"use strict";return t.Collection.extend({model:i,initialize:function(e,t){t=t||{},this.type=t.type},url:function(){return n.getURL("timelines/filters/list")+"?"+e.param({type:this.type})},addFilter:function(e){var t=this.get(e);return t||(t=this.add({id:e})),t.save()},removeFilter:function(e){var t=this.get(e);return t||(t=new i({id:e})),t.destroy()},parse:function(e){return e.response||e}})}),define("home/models/FollowRecommendation",["backbone","core/UniqueModel"],function(e,t){"use strict";var n=e.Model.extend({defaults:{reason:""},initialize:function(){this.object=this.get("object"),this.unset("object")}});return t.addType("FollowRecommendation",n),n}),define("home/collections/FollowRecommendationCollection",["underscore","backbone","core/UniqueModel","home/models/FollowRecommendation"],function(e,t,n,i){"use strict";return t.Collection.extend({model:n.boundModel(i),initialize:function(e,t){this.expander=t.expander},parse:function(t){return t=t.response,e.map(t.items,function(e){return{object:this.expander(t.objects,e.id),reason:e.reason}},this)}})}),define("home/models/FollowRecommendationFeed",["underscore","core/api","home/activityExpander","home/models/Feed","home/collections/FollowRecommendationCollection"],function(e,t,n,i,o){"use strict";var a=i.extend({defaults:{fetchOptions:{limit:3}},initialize:function(e,t){return t=t||{},t.collectionClass=o,i.prototype.initialize.call(this,e,t)}},{createUserFollowRecommendationFeed:function(i){return i=i||{},new a(i,{collectionOptions:{expander:e.bind(n.buildUser,n)},collectionUrl:t.getURL("users/interestingUsers")})},createForumFollowRecommendationFeed:function(i){return i=i||{},new a(i,{collectionOptions:{expander:e.bind(n.buildForum,n)},collectionUrl:t.getURL("forums/interestingForums")})}});return a}),define("home/models/Notifications",["backbone","home/models/Feed","home/collections/NotificationCollection","home/collections/TimelineFiltersCollection","home/models/FollowRecommendationFeed"],function(e,t,n,i,o){"use strict";var a;return e.Model.extend({initialize:function(e){this.session=e.session;var a=function(e){return-1*new Date(e.get("published")).getTime()};this.all=new t({},{collectionClass:n,collectionOptions:{comparator:a,type:"notifications"}}),this.replies=new t({},{collectionClass:n,collectionOptions:{comparator:a,type:"notifications",index:"replies"}}),this.interestingForums=o.createForumFollowRecommendationFeed(),this.interestingUsers=o.createUserFollowRecommendationFeed(),this.unreadCounter=this.all.items.unreadCounter,this.filters=new i,this.listenTo(this.all,"clearUnreadCount",this.clearUnreadCount)},ensureFetchedRecommendations:function(){this.interestingForums.ensureFetched(),this.interestingUsers.ensureFetched()},ensureFetched:function(){a||(a=require("home/models/Session")),a.isKnownToBeLoggedOut()||this.all.fetched||(this.unreadCounter.fetch({initializeOnly:!0}),this.all.fetchItems())},clearUnreadCount:function(){this.unreadCounter.set({numUnread:0}),this.all.items.syncReadPosition()}})}),define("home/models/Session",["jquery","underscore","backbone","core/api","core/models/Session","core/UniqueModel","home/models/User","home/models/UserProfile","home/models/AnonUser","home/models/Notifications","home/utils/backboneUtils","home/utils/sidebarUtils"],function(e,t,n,i,o,a,r,s,l,c,u,d){"use strict";var h,m=o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.moderatedForums=[],this._load=e.Deferred(),this._loadPromise=this._load.promise(),this.load=t.once(this.load,this),this.loadModeratedForums=t.once(this.loadModeratedForums,this)},getAnonUserInstance:function(e){return new l(e)},isAnonymous:function(){return this.user.get("isAnonymous")},setUser:function(e){return this.user&&this.stopListening(this.user),this.listenTo(e,"all",this.trigger),o.prototype.setUser.apply(this,arguments)},loadModeratedForums:function(){var t=this.user,o=this;return m.fromCookie().isModerator?n.ajax({url:i.getURL("internal/users/details"),success:function(e){var n=e.response.moderated_forums;o.moderatedForums=n,o.trigger("setModeratedForums",n),t.set({isModerator:!!n.length,moderatedForums:n})},context:t}):e.Deferred().resolve().promise()},provider:function(){var e=m.fromCookie().username;return e?-1===e.indexOf("-")?"disqus":e.split("-")[0]:""},fromSessionStorage:function(){var e;try{e=JSON.parse(window.sessionStorage[m.STORAGE_KEY]),delete window.sessionStorage[m.STORAGE_KEY]}catch(e){}return t.isObject(e)?e:void 0},load:function(){var e=this._load,t=this.fromSessionStorage();if(d.isSidebar()&&t&&t.username&&t.id)this.setUser(this.getUserInstance(t)),this.fetched=!0,e.resolve(this);else if(o.isKnownToBeLoggedOut())e.reject(this);else{var n=this;n.fetch().done(function(){e.resolve(n)}).fail(function(){e.reject(n)})}},loadPromise:function(){return this._loadPromise},fetch:function(){if(this.fetchPromise)return this.fetchPromise;var e=this,t=u.memoizedFetch.apply(this,arguments);return t.then(function(){e.trigger("fetch:success")},function(){e.trigger("fetch:error")}),t},getUserInstance:function(e){return new a(r,e)},getUserProfile:function(){if(!this.isAnonymous())return this.userProfile},getOrCreateNotifications:function(){return this.notifications||(this.notifications=new c({session:this}),this.notifications.ensureFetched()),this.notifications},toJSON:function(){return this.user.toJSON.apply(this.user,arguments)},initUserProfile:function(e){if(e){this.userProfile&&this.userProfile.stopListening(this),this.userProfile=new a(s,{username:e});var i=function(e){e instanceof n.Model&&(e=t([e])),e.each(function(e){e.primaryForum&&(e=e.primaryForum),e.set("isFollowing",!0)})};this.userProfile.forumsFollowing.on("items:sync",i),this.userProfile.channelsFollowing.on("items:sync",i);var o=this.userProfile.following.get("items"),r=this.userProfile.forumsFollowing.get("items"),l=this.userProfile.channelsFollowing.get("items");this.userProfile.listenTo(this,"followed:user",t.bind(o.add,o)),this.userProfile.listenTo(this,"unfollowed:user",t.bind(o.remove,o)),this.userProfile.listenTo(this,"followed:forum",t.bind(r.add,r)),this.userProfile.listenTo(this,"unfollowed:forum",t.bind(r.remove,r)),this.userProfile.listenTo(this,"followed:channel",t.bind(l.add,l)),this.userProfile.listenTo(this,"unfollowed:channel",t.bind(l.remove,l)),this.fetchFollowedForums(),this.fetchFollowedChannels()}},fetchFollowedForums:function(){this.userProfile.fetchForumsFollowing()},fetchFollowedChannels:function(){this.userProfile.fetchChannelsFollowing()},logout:function(){this.setUser(this.getAnonUserInstance()),window.top.location="//disqus.com/logout/?redirect=http%3A%2F%2Fdisqus.com"}},{STORAGE_KEY:"home.session"});return m.get=function(){return h=h||new m},m.forget=function(){h&&(h.stopListening(),h.off(),h=null)},m}),define("core/analytics/jester",["jquery","underscore","backbone","core/analytics/identity","core/config/urls"],function(e,t,n,i,o){"use strict";var a=n.Model.extend({url:o.jester+"/event.js",defaults:{experiment:"default",variant:"control"},setHostReferrer:function(e){e?-1===e.indexOf("http")||this.set("page_referrer",e):this.set("page_referrer","direct")},decoratePayload:function(n){if(n.event||(n.event="activity"),n=t.extend(this.toJSON(),n),t.extend(n,{imp:i.impression.impId,prev_imp:i.impression.prevImp}),n.section||(n.section="default"),n.area||(n.area="n/a"),e.param(n).length>2048&&this.has("page_referrer")){var o=window.document.createElement("a");o.href=this.get("page_referrer");var a=o.hostname;a&&(n.page_referrer_domain=a),delete n.page_referrer}return n},emit:function(n){return e.ajax({url:t.result(this,"url"),data:this.decoratePayload(n),dataType:"script",cache:!0})}}),r=function(t){var n=new window.Image;return n.src=o.jester+"/stat.gif?"+e.param({event:t}),n},s=function(n,i){if(!t.any(i,function(e){return e<0})){t.each(i,function(e,t){i[t]=Math.round(e)});var a=new window.Image;return a.src=o.jester+"/telemetry/"+n+".gif?"+e.param(i),a}},l=new a;return l.setHostReferrer(window.document.referrer),{ActivityClient:a,client:l,logStat:r,telemetry:s}}),define("home/utils/trackingUtils",["jquery","underscore","home/models/Session","home/utils/sidebarUtils","home/utils/navigationUtils","core/analytics/jester","core/bus"],function(e,t,n,i,o,a,r){"use strict";var s={},l={openSection:function(){h({verb:"open",object_type:"section",object_id:a.client.get("zone")+"/"+a.client.get("section")})},viewSection:function(){h({verb:"view",object_type:"section",object_id:a.client.get("zone")+"/"+a.client.get("section")})},viewFeed:function(e){var t={verb:"open",object_type:"section",object_id:a.client.get("zone")+"/"+a.client.get("section")+"/page-1"};e.isError()?t.adjective="error":e.collection.length||(t.adjective="empty"),h(t)},viewMoreFeed:function(e){h({verb:"open",object_type:"section",object_id:a.client.get("zone")+"/"+a.client.get("section")+"/page-"+e})},removeFollower:function(e){h({verb:"remove-follower",object_type:"user",object_id:e.get("id")})},"uiCallback:postCreated":function(e,n){n=n||{},t.extend(n,{object_type:"post",object_id:e.id,verb:"post"}),e.has("parent")&&(n.target_type="comment",n.target_id=e.get("parent")),h(n)},"uiAction:postUpvote":function(e){h({verb:"like",object_type:"post",object_id:e.id})},"uiAction:postUnvote":function(e){h({verb:"unlike",object_type:"post",object_id:e.id})},"uiAction:postDownvote":function(e){h({verb:"dislike",object_type:"post",object_id:e.id})},"uiAction:clickLink":function(n,i){var a=e(n.currentTarget),r=o.isInbound(a[0]);t.each(c,function(e,t){var n=a.attr(e);n&&(i[t]=n)}),h(t.extend({verb:"click",object_type:"link",object_id:a.attr("href"),adverb:r?"internal":"external"},i))},"uiAction:postStartUpdate":function(e,n){n=n||{},t.extend(n,{verb:"click",adjective:"edit",object_type:"link",object_id:e.id}),h(n)},threadFavorited:function(e){h({verb:"like",object_type:"thread",object_id:e.id})}},c={forum_id:"data-forum-pk",thread_id:"data-thread-id",channel_slug:"data-channel-slug"},u={user:"profile","/by/\\w+":"profile",inbox:"notifications","/welcome/?$":"welcome","/explore(/.+)?":"explore",discussion:"thread",discuss:"thread",edit:"thread",forum:"community",topic:"topic",settings:"settings",discover:"discover","/channels(\\/(yours|explore))?\\/?(\\?.+)?$":"discover","/channels?/\\w+":"channel","/home/?$":"activityfeed",preload:"DNT"},d=["channel_slug","forum"],h=function(n){"DNT"!==n.zone&&(n.zone||"DNT"!==a.client.get("zone"))&&e.when(s).then(function(e){a.client.emit(t.defaults(n,t.pick(e,d)))})};return{init:function(){var e={experiment:"V2",variant:"active",product:this.productName(),page_referrer_url:window.document.referrer};a.client.set(e),r.on(l)},productName:function(){return i.isSidebar()?"bridge":"home"},jesterEmit:h,pageChanged:function(){this.urlChanged(),this.setSection(),s={}},urlChanged:function(){var e=window.document.location.href,n=t.find(u,function(t,n){return RegExp(n).test(e)});a.client.set({page_url:e,zone:n||"n/a"})},setSection:function(e){a.client.set({section:e||"default"})},setPageParams:function(e){s=e},initUser:function(e){e&&a.client.set("user_id",e)},trackVisit:function(){a.client.has("zone")||this.urlChanged();var e=this.productName(),i=function(){h({verb:"view",object_type:"product",object_id:e})},o=n.get();o.loadPromise().always(t.bind(function(){this.initUser(o.user.get("id")),i()},this))}}}),define("home/collections/UserCollection",["backbone","core/UniqueModel","home/models/User"],function(e,t,n){"use strict";return e.Collection.extend({model:t.boundModel(n),initialize:function(e,t){t&&t.url&&(this.url=t.url)},parse:function(e){return e.response}})}),define("home/collections/ModeratorCollection",["underscore","home/collections/UserCollection"],function(e,t){"use strict";return t.extend({initialize:function(e,t){this.channel=t&&t.channel},parse:function(t){return e.pluck(t.response,"user")},comparator:function(e,t){var n=this.channel&&this.channel.get("owner_id"),i=e.get("id")===n;return i===(t.get("id")===n)?e.get("name").toLowerCase()<t.get("name").toLowerCase()?-1:1:i?-1:1}})}),define("home/collections/SourceForumCollection",["underscore","core/api","home/collections/ForumCollection"],function(e,t,n){"use strict";return n.extend({url:t.getURL("internal/channels/listSourceForums"),initialize:function(e,t){this.channelId=t&&t.channelId},fetch:function(t){return t=t||{},t.data=e.extend({channel:this.channelId,attach:"counters"},t.data),n.prototype.fetch.call(this,t)}})}),define("home/models/ChannelProfile",["underscore","backbone","core/utils/storage","core/UniqueModel","core/strings","home/models/Feed","home/models/Channel","home/collections/FeedItemCollection","home/collections/UserCollection","home/collections/ModeratorCollection","home/collections/TopicCollection","home/collections/SourceForumCollection","home/utils/backboneUtils","core/api"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m){"use strict";var p=o.get,f=t.Model.extend({defaults:{channel:void 0},initialize:function(t,i){i=i||{},this.initializeRelated("channel",i,r),this.listenTo(this.channel,"addModerator",function(e){this.moderators.items.add(e)}),this.listenTo(this.channel,"removeModerator",function(e){this.moderators.items.remove(e)});var o,h=this.channel.id,p="channel:"+h;this.recentActivities=new a(i.recentActivitiesOptions,{collectionClass:s,collectionOptions:{type:"profile",target:p}}),n.get("channelSort")&&(i.topActivitiesOptions=i.topActivitiesOptions||{},i.topActivitiesOptions.fetchOptions=e.defaults({sort:n.get("channelSort")},i.topActivitiesOptions.fetchOptions)),this.topActivities=new a(i.topActivitiesOptions,{collectionClass:s,collectionUrl:m.getURL("timelines/ranked"),collectionOptions:{type:"default",target:p}}),this.sourceForums=new d([],{channelId:this.channel.id}),o={channel:this.channel.id,limit:10},this.leaders=new a({fetchOptions:o},{collectionClass:l,collectionUrl:m.getURL("channels/communityLeaders")}),this.channel.primaryForum?o={forum:this.channel.primaryForum.id}:(this.listenToOnce(this.channel,"changeRelated:primaryForum",function(){this.moderators.set({fetchOptions:{forum:this.channel.primaryForum.id}})}),o=null),this.moderators=new a({fetchOptions:o},{collectionClass:c,collectionOptions:{channel:this.channel},collectionUrl:m.getURL("forums/listModerators")}),this.trendingTopics=new a({fetchOptions:{channel:this.channel.id,limit:15}},{collectionClass:u,collectionUrl:m.getURL("channels/listTrendingTopics")}),this.topicFilteredFeeds={}},toJSON:function(){var n=t.Model.prototype.toJSON.apply(this,arguments);return e.defaults({channel:this.channel.toJSON(),recentActivities:this.recentActivities.toJSON(),topActivities:this.topActivities.toJSON(),trendingTopics:this.trendingTopics&&this.trendingTopics.items.toJSON()},n)},getFetchedTopicFilteredFeed:function(e){if(this.trendingTopics){this.topicFilteredFeeds[e]||(this.topicFilteredFeeds[e]=new a({fetchOptions:{topic:e}},{collectionClass:s,collectionUrl:m.getURL("timelines/ranked"),collectionOptions:{type:"default",target:"channel:"+this.channel.id}}));var t=this.topicFilteredFeeds[e];return t.ensureFetched(),t}},ensureFetched:function(){this.channel.ensureFetchedWithCounters(),this.recentActivities.ensureFetched(),this.ensureFetchedTopActivities(),this.ensureFetchedLeaders(),this.ensureFetchedModerators(),this.ensureFetchedTrendingTopics()},ensureFetchedTrendingTopics:function(){this.trendingTopics&&this.trendingTopics.ensureFetched()},ensureFetchedTopActivities:function(){this.topActivities.ensureFetched()},ensureFetchedLeaders:function(){return this.leaders.ensureFetched(),this.leadersPromise=this.leaders.fetchPromise},ensureFetchedModerators:function(){if(this.moderatorsPromise)return this.moderatorsPromise;if(this.moderators.get("fetchOptions"))this.moderators.ensureFetched(),this.moderatorsPromise=this.moderators.fetchPromise;else{var t=this.moderators;this.moderatorsPromise=h.getPromiseFor(t,"fetchOptions").then(function(){return t.ensureFetched(),t.fetchPromise})}return this.moderatorsPromise.then(e.bind(this.markModerators,this))},ensureFetchedSourceForums:function(){return this.sourceForumsPromise||(this.sourceForumsPromise=this.sourceForums.fetch()),this.sourceForumsPromise},markModerators:function(){var t=this.channel.primaryForum.id;this.moderators.items.each(function(n){var i=n.get("moderatedForums")||[];n.set({moderatedForums:e.union(i,[t])})})},validateNewModerator:function(e){return e.get("username").trim().length?this.moderators.items.contains(e)?{attrName:"username",message:p("This user is already a moderator.")}:void 0:{attrName:"username",message:p("You must enter a username.")}}});return i.addType("ChannelProfile",f),f}),define("home/collections/ChannelProfileCollection",["underscore","core/collections/PaginatedCollection","core/UniqueModel","home/activityExpander","home/models/ChannelProfile"],function(e,t,n,i,o){"use strict";var a=o;return t.extend({model:n.boundModel(a),parse:function(n){return n=t.prototype.parse.call(this,n),n.items?e.map(n.items,function(e){var t=i.buildChannel(n.objects,e.reference);return{channel:t}[a.prototype.idAttribute]=t.id,{id:t.id,channel:t}}):n}})}),define("home/models/ChannelProfileFeed",["underscore","core/api","core/UniqueModel","home/collections/ChannelProfileCollection","home/models/Feed"],function(e,t,n,i,o){"use strict";var a=o.extend({idAttribute:"listName",initialize:function(n,a){a=e.extend({collectionClass:i,collectionUrl:t.getURL("channels/list")},a),o.prototype.initialize.call(this,n,a),this.set("fetchOptions",e.extend({listName:this.get("listName"),attach:"counters"},this.get("fetchOptions")))}},{LIST_NAMES:{promoted:"promoted",explore:"explore"}});return n.addType("ChannelProfileFeed",a),a}),define("home/templates/nav",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="site-nav__item">\n<a class="site-nav__link" data-role="discover" data-page-icon="channels" href="/home/channels/">\n<span class="site-nav__icon--wrapper">\n<svg class="icon-discover site-nav__icon -discover" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><rect x="14" width="4" height="4" class="dot"/><rect x="14" y="7" width="4" height="4" class="dot"/><rect x="14" y="14" width="4" height="4" class="dot"/><rect x="7" width="4" height="4" class="dot"/><rect x="7" y="7" width="4" height="4" class="dot"/><rect x="7" y="14" width="4" height="4" class="dot"/><rect width="4" height="4" class="dot"/><rect y="7" width="4" height="4" class="dot"/><rect y="14" width="4" height="4" class="dot"/></g></svg>\n'+r(s(n,"gettext").call(a,"Channels",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:0},end:{line:32,column:22}}}))+'\n</span>\n</a>\n</div>\n<div class="site-nav__item">\n<a class="site-nav__link" data-role="explore" data-page-icon="explore exploreChannel" href="/home/explore/">\n<span class="site-nav__icon--wrapper">\n<svg class="icon-explore-svg site-nav__icon -explore" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 22 22" version="1.1" x="0px" y="0px"><g class="outline"><path d="M11,22 C17.0751325,22 22,17.0751325 22,11 C22,4.92486745 17.0751325,0 11,0 C4.92486745,0 0,4.92486745 0,11 C0,17.0751325 4.92486745,22 11,22 L11,22 Z M5.69559185,5.6975623 L9.23181625,12.7679396 L16.3021935,16.3041641 L12.7676954,9.2320604 L5.69559185,5.6975623 L5.69559185,5.6975623 Z M7.32147215,7.3591919 L11.9771118,10.0310669 L10.0346069,12.0039673 L7.32147215,7.3591919 L7.32147215,7.3591919 Z" class="fill"></path></g></svg>\n'+r(s(n,"gettext").call(a,"Explore",{name:"gettext",hash:{},data:o,loc:{start:{line:41,column:0},end:{line:41,column:21}}}))+"\n</span>\n</a>\n</div>\n"},3:function(e,t,n,i,o){return'<div class="site-nav__item text-center"\ndata-role="onboarding-steps-icon" data-onboarding-step="'+e.escapeExpression(e.lambda(t,t))+'">\n\n<div class="onboarding__bar"></div>\n</div>\n'},5:function(e,t,n,i,o){return'<div class="site-nav__item -skip site-nav--onboarding hidden-md">\n<a href="/home/" data-action="skip-onboarding">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Skip",{name:"gettext",hash:{},data:o,loc:{start:{line:60,column:47},end:{line:60,column:65}}}))+"</a>\n</div>\n"},7:function(e,t,n,i,o){return'<div class="site-nav__item -discuss">\n<button class="button button-small button-outline" data-action="create-discussion">\n<span class="icon-create-discussion icon-small"></span>\n<span class="text-medium spacing-left-small hidden-lg">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Discuss",{name:"gettext",hash:{},data:o,loc:{start:{line:67,column:55},end:{line:67,column:76}}}))+"</span>\n</button>\n</div>\n"},9:function(e,t,n,i,o){return'<a href="/admin/" data-action="admin-click">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Admin",{name:"gettext",hash:{},data:o,loc:{start:{line:106,column:0},end:{line:106,column:19}}}))+"\n</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<nav class="site-nav section-contained">\n<div class="align">\n<div class="site-nav__item -logo site-nav__logo--wrapper">\n'+(null!=(a=e.invokePartial(l(i,"navLogo"),t,{name:"navLogo",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="site-nav--secondary" data-role="icon-links">\n<div class="site-nav__item">\n<a href="/home/" class="site-nav__link" data-page-icon="home">\n<span class="site-nav__icon--wrapper">\n<svg class="icon-home site-nav__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 16 18" enable-background="new 0 0 16 18" xml:space="preserve"><polygon points="6,18 6,12 10,12 10,18 16,18 16,7.9 8,0 0,7.9 0,18" class="fill" /></svg>\n'+s(l(n,"gettext").call(r,"Home",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:0},end:{line:12,column:18}}}))+'\n</span>\n</a>\n</div>\n<div class="site-nav__item">\n<a class="site-nav__link" data-role="notifications" data-page-icon="inbox" href="/home/inbox/">\n<span class="site-nav__icon--wrapper">\n<div class="notif-count" data-role="unread-notification-count"></div>\n<svg class="icon-notif site-nav__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path d="M10.4 20c5.3 0 9.6-4.5 9.6-10S15.7 0 10.4 0C5 0 0.7 4.5 0.7 10 c0 1.5 0.3 2.9 0.9 4.1L0 18.2l4.1-0.6C5.8 19.1 8 20 10.4 20z" class="icon-notif__fill" /><path d="M11 11.2v2.6l4-3.9L11 6v2.3C6.1 8.3 5 14 5 14 C6.4 11.4 8.3 11.2 11 11.2z" class="arrow"/></svg>\n'+s(l(n,"gettext").call(r,"Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:0},end:{line:22,column:27}}}))+"\n</span>\n</a>\n</div>\n"+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"onboardingWithoutChannels"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:0},end:{line:45,column:11}}}))?a:"")+'</div>\n</div>\n<div class="site-nav--onboarding" data-role="onboarding-steps">\n'+(null!=(a=l(n,"each").call(r,null!=t?l(t,"stepNumbers"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:49,column:0},end:{line:55,column:9}}}))?a:"")+'</div>\n<div class="align site-nav__user--wrapper">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"userCanSkipOnboarding"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:58,column:0},end:{line:62,column:7}}}))?a:"")+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"onboardingWithoutChannels"):t,{name:"unless",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:63,column:0},end:{line:70,column:11}}}))?a:"")+'<div class="tooltipped site-nav__item -profile"\ndata-role="user" data-page-icon="profile" data-toggle="tooltip" data-placement="bottom" title="'+s(l(n,"gettext").call(r,"Profile",{name:"gettext",hash:{},data:o,loc:{start:{line:72,column:95},end:{line:72,column:116}}}))+'">\n'+(null!=(a=e.invokePartial(l(i,"navUserIcon"),t,{name:"navUserIcon",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="tooltipped bottom-right site-nav__item -settings"\ndata-toggle="tooltip" data-placement="bottom" title="'+s(l(n,"gettext").call(r,"Settings",{name:"gettext",hash:{},data:o,loc:{start:{line:76,column:53},end:{line:76,column:75}}}))+'" data-role="settings">\n<div class="dropdown" data-action="toggle-dropdown" data-dropdown="settings">\n<a data-toggle="dropdown" class="dropdown-toggle nav__lnk--settings" href="#">\n<svg class="icon-settings site-nav__icon -settings" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path d="M10 13.8c2.1 0 3.8-1.7 3.8-3.8S12.1 6.2 10 6.2S6.2 7.9 6.2 10 S7.9 13.8 10 13.8z M20 8.8v2.5c0 0.3-0.2 0.6-0.5 0.6l-2.3 0.3c-0.1 0.5-0.3 0.9-0.6 1.4l1.4 1.8c0.2 0.2 0.2 0.6-0.1 0.8L16.2 18 c-0.1 0.1-0.3 0.2-0.5 0.2c-0.1 0-0.3 0-0.4-0.1l-1.8-1.4c-0.4 0.2-0.9 0.4-1.4 0.6l-0.3 2.3c0 0.3-0.3 0.5-0.6 0.5H8.8 c-0.3 0-0.6-0.2-0.6-0.5l-0.3-2.3c-0.5-0.1-0.9-0.3-1.4-0.6L4.6 18c-0.1 0.1-0.2 0.1-0.4 0.1c-0.2 0-0.3-0.1-0.4-0.2L2 16.2 C1.8 16 1.8 15.6 2 15.4l1.4-1.8c-0.2-0.4-0.4-0.9-0.6-1.4l-2.3-0.3c-0.3 0-0.5-0.3-0.5-0.6V8.8c0-0.3 0.2-0.6 0.5-0.6l2.3-0.3 C3 7.3 3.2 6.9 3.4 6.5L2 4.6C1.8 4.4 1.8 4 2 3.8L3.8 2c0.1-0.1 0.3-0.2 0.4-0.2c0.1 0 0.3 0 0.4 0.1l1.8 1.4 C6.9 3.2 7.3 3 7.8 2.8l0.3-2.3C8.2 0.2 8.4 0 8.8 0h2.5c0.3 0 0.6 0.2 0.6 0.5l0.3 2.3c0.5 0.2 0.9 0.3 1.4 0.6L15.4 2 c0.1-0.1 0.2-0.1 0.4-0.1c0.2 0 0.3 0.1 0.5 0.2L18 3.8C18.2 4 18.2 4.4 18 4.6l-1.4 1.8c0.2 0.4 0.4 0.9 0.6 1.4l2.3 0.3 C19.8 8.2 20 8.4 20 8.8z" class="fill"/></svg>\n</a>\n<ul class="dropdown-menu dropdown-settings">\n<li class="hidden-md">\n<a href="/home/settings/profile/">\n'+s(l(n,"gettext").call(r,"Edit Profile",{name:"gettext",hash:{},data:o,loc:{start:{line:84,column:0},end:{line:84,column:26}}}))+'\n</a>\n</li>\n<li class="hidden-md">\n<a href="/home/settings/account/">\n'+s(l(n,"gettext").call(r,"Settings",{name:"gettext",hash:{},data:o,loc:{start:{line:89,column:0},end:{line:89,column:22}}}))+'\n</a>\n</li>\n<li class="visible-md">\n<a href="/home/settings/">\n'+s(l(n,"gettext").call(r,"Settings",{name:"gettext",hash:{},data:o,loc:{start:{line:94,column:0},end:{line:94,column:22}}}))+'\n</a>\n</li>\n<li>\n<a href="/follow/facebook/">\n'+s(l(n,"gettext").call(r,"Find Friends",{name:"gettext",hash:{},data:o,loc:{start:{line:99,column:0},end:{line:99,column:26}}}))+'\n</a>\n</li>\n<li role="presentation" class="divider hidden-md"></li>\n<li>\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isModerator"):t,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:104,column:0},end:{line:108,column:7}}}))?a:"")+'</li>\n<li>\n<a href="https://publishers.disqus.com/engage?utm_source=Home-Nav" class="hidden-md">\n'+s(l(n,"gettext").call(r,"Add %(disqus)s To Site",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:112,column:0},end:{line:112,column:54}}}))+'\n</a>\n</li>\n<li role="presentation" class="divider"></li>\n<li>\n<a href="https://disqus.com/about/" data-role="about">About</a>\n</li>\n<li>\n<a href="https://help.disqus.com/" data-role="help">\n'+s(l(n,"gettext").call(r,"Help",{name:"gettext",hash:{},data:o,loc:{start:{line:121,column:0},end:{line:121,column:18}}}))+'\n</a>\n</li>\n<li>\n<a href="/logout/?redirect=https%3A%2F%2Fdisqus.com%2F">\n'+s(l(n,"gettext").call(r,"Log Out",{name:"gettext",hash:{},data:o,loc:{start:{line:126,column:0},end:{line:126,column:21}}}))+"\n</a>\n</li>\n</ul>\n</div>\n\n</div>\n</div>\n</nav>\n"},usePartial:!0,useData:!0})}),define("home/templates/anonNav",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-top-narrow">\n<a href="/home/explore/"\nclass="button button-explore button-small hidden-md"\ndata-role="icon-links">\n<span class="icon-explore button-explore__icon"></span>\n'+r(s(n,"gettext").call(a,"Explore",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:0},end:{line:11,column:21}}}))+'\n</a>\n<a href="https://disqus.com/profile/login/"\nclass="button button-outline button-small spacing-right-small"\ndata-action="navigate-return">\n'+r(s(n,"gettext").call(a,"Log In",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:0},end:{line:16,column:20}}}))+'\n</a>\n<a href="https://disqus.com/profile/signup/"\nclass="button button-fill--brand button-small"\ndata-action="navigate-return">\n'+r(s(n,"gettext").call(a,"Sign Up",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:0},end:{line:21,column:21}}}))+"\n</a>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'<nav class="site-nav section-contained">\n<div class="site-nav__item -logo">\n'+(null!=(a=e.invokePartial(r(i,"navLogo"),t,{name:"navLogo",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"+(null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"sessionIsFetching"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:0},end:{line:24,column:11}}}))?a:"")+"</nav>\n"},usePartial:!0,useData:!0})}),define("home/templates/createDiscussionNav",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="discuss-tile__wrap align align--stretch">\n<a href="/home/discuss/'+s(r(null!=(a=null!=t?l(t,"primaryForum"):t)?l(a,"id"):a,t))+'/" data-action="confirm" alt="'+s(r(null!=t?l(t,"name"):t,t))+'"\nclass="discuss-tile__link text-center link-gray-dark align align--column">\n<div class="tile__wrapper">\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?l(t,"options"):t)?l(a,"tile"):a,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:14,column:0},end:{line:22,column:7}}}))?a:"")+'</div>\n<div class="discuss-tile__description align align--middle">\n<p>'+s(r(null!=(a=null!=t?l(t,"options"):t)?l(a,"description"):a,t))+"</p>\n</div>\n</a>\n</div>\n"},2:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"options"):t)?r(a,"tile"):a,t))+'" class="img-responsive border-radius-sm block__item" />\n'},4:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile__overlay">\n<h1 class="tile__name">'+e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))+'</h1>\n</div>\n<img src="https://media.disquscdn.com/home/blank_tile.png"\nclass="img-responsive border-radius-sm block__item" />\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="text-smaller modal-close -light" data-dismiss="modal">\n<span class="icon-cancel"></span>\n</button>\n<div class="text-center padding-default">\n<h1 class="text-larger text-gray-darker spacing-top spacing-bottom-small">'+s(l(n,"gettext").call(r,"Start a discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:74},end:{line:5,column:106}}}))+'</h1>\n<p class="text-gray">'+s(l(n,"gettext").call(r,"Pick the channel that best fits your discussion topic",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:21},end:{line:6,column:88}}}))+'</p>\n</div>\n<div class="padding-default align align--wrap">\n'+(null!=(a=l(n,"each").call(r,null!=t?l(t,"channels"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:29,column:9}}}))?a:"")+"</div>\n"},useData:!0})}),define("home/mixins/withOnboarding",["underscore","home/models/Session","home/utils/navigationUtils"],function(e,t,n){"use strict";var i=["explore","exploreChannel","exploreDiscussions"],o=function(){var o;return{events:{"click [data-action=skip-onboarding]":"completeOnboarding"},initialize:function(n){n.apply(this,e.rest(arguments));var i=t.get();i.loadPromise().then(e.bind(function(){this.listenTo(i.getUserProfile().forumsFollowing.items,"add remove reset",this.updateStepNumber),this.updateStepNumber()},this))},getStepNumber:function(){return o},isInOnboarding:function(t,n){return n.isLoggedIn()&&n.user.shouldHomeOnboard()&&e.contains(i,t.getCurrentRouteName())},userCanSkip:function(){var e=t.get();return e.isLoggedIn()&&!e.user.registeredThisWeek()},updateStepNumber:function(){var e=this.getChannelsFollowing(),t=e.length||0,n=Math.min(t,3)+1,i=n!==o;o=n,i&&this.trigger("change:stepNumber")},getChannelsFollowing:function(){return t.get().getUserProfile().forumsFollowing.items.filter(function(e){return e.channel})},completeOnboarding:function(e){e&&e.preventDefault(),t.get().user.setHomeOnboardComplete(!0),n.navigate("/home/",{trigger:!0})}}};return function(){var t=o();this.constructor.NUM_STEPS=3,this.initialize=e.wrap(this.initialize,t.initialize),this.events=e.extend(t.events,this.events),e.extend(this,e.pick(t,["getStepNumber","isInOnboarding","userCanSkip","updateStepNumber","getChannelsFollowing","completeOnboarding"]))}}),define("home/mixins/withSubviews",["underscore","jquery","backbone-marionette"],function(e,t,n){"use strict";function i(e){this.selector=e,this.el=null,this.currentView=null}function o(e){var n=e&&e.currentView;return n&&t.contains(this.el,n.el)&&n.$el.detach()}function a(e){var t=e.selector,n=this.$(t);if(!n.length)return void e.close();var i=e.currentView.$el;i.is(t)?(n.replaceWith(i),e.setElement(i)):(n.append(i),e.setElement(n))}function r(){n.triggerMethod.call(this,"show")}function s(e,t){e&&(e.close(),this._regions[t]=null)}i.prototype={setElement:function(e){this.$el=e instanceof t?e:t(e),this.el=this.$el[0]},render:function(e){if(!this.currentView){var t=this.el,n=this.$el;t&&(this.currentView=e,e.$el.is(t)||n.append(e.el),e.render())}},close:function(){var e=this.currentView;this.el=null,this.currentView=null,e&&(e.close?e.close():e.remove&&e.remove())}};var l={initialize:function(e,t){this._regions={},this.initializeRegions(),e.call(this,t)},initializeRegions:function(){e.each(this.regions,function(e,t){this[t]=this.addRegion(e)},this)},addRegion:function(e){var t=this._regions[e];return t||(t=new i(e),this._regions[e]=t),t},activateRegion:function(e,t){var n=e.currentView;return n||(e.setElement(this.$(e.selector)),n=t.call(this),e.render(n),n.listenTo(this,"show",r),this._isShown&&r.call(n),n)},render:function(t){var n=e.filter(this._regions,o,this);return t.call(this),e.each(n,a,this),this},close:function(t){return e.each(this._regions,s,this),t.call(this)}};return function(){this.initializeRegions&&this.addRegion||(this.initialize=e.wrap(this.initialize,l.initialize),this.render=e.wrap(this.render,l.render),this.close=e.wrap(this.close,l.close),e.extend(this,e.pick(l,"initializeRegions","addRegion","activateRegion")))}}),define("home/views/NavView",["underscore","jquery","backbone-marionette","core/UniqueModel","home/utils/confirmModal","home/models/Channel","home/models/Session","home/models/ChannelProfileFeed","home/templates/nav","home/templates/anonNav","home/templates/createDiscussionNav","home/mixins/withClickLinkTracking","home/mixins/withOnboarding","home/mixins/withSubviews"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m){"use strict";var p=n.ItemView,f=p.prototype,g=p.extend({className:"compensation",template:function(e){return e.id?l(e):c(e)},templateHelpers:function(){return{customBase:this.devBase,sessionIsFetching:this.session.fetchPromise,stepNumbers:e.range(1,this.constructor.NUM_STEPS+1),userCanSkipOnboarding:this.userCanSkip(),onboardingWithoutChannels:this.app.onboardingWithoutChannels}},events:{"show.bs.dropdown [data-action=toggle-dropdown]":"removeTooltip","hide.bs.dropdown [data-action=toggle-dropdown]":"addTooltip","click [data-role=settings] a[data-link-name]":"trackClickLinkWithArea","click [data-action=navigate-return]":"navigateAndReturn","click [data-action=create-discussion]":"handleCreateDiscussionNavClick"},initialize:function(e){this.session=r.get(),this.app=e.app,this.notifications=this.session.getOrCreateNotifications(),this.promotedChannels=new i(s,{listName:s.LIST_NAMES.promoted}),this.promotedChannels.ensureFetched(),this.session.user.get("isAnonymous")||this.changeUser(),this.listenTo(this.session,"change:id fetch:error fetch:success change:isModerator",this.changeUser),this.listenTo(this.notifications.unreadCounter,"change:numUnread",this.updateNotifications),this.listenTo(this.app,"route",this.activatePageIcon),this.listenTo(this.app,"route",this.toggleIconLinks),this.listenTo(this.app,"route",this.updateOnboardingSteps),this.listenTo(this,"change:stepNumber",this.updateOnboardingSteps),this.devBase=t("body").attr("data-disqus-dev-base")},changeUser:function(){this.stopListening(this.model,"change:username",this.debouncedRender),this.model=this.session.user,this.listenTo(this.model,"change:username",this.debouncedRender),this.debouncedRender()},debouncedRender:e.debounce(function(){this.render.apply(this,arguments)},300),render:function(){var e=f.render.apply(this,arguments);return this.updateOnboardingSteps(),this.updateNotifications(),e},onDomRefresh:function(){t(".tooltipped").tooltip()},updateNotifications:function(){var e=this.notifications.unreadCounter.get("numUnread");this.$("[data-role=notifications]").toggleClass("has-notifs",!!e),this.$("[data-role=unread-notification-count]").text(e>9?"9+":e)},navigateAndReturn:function(e){if(e){e.preventDefault();var n=t(e.currentTarget).attr("href");if(n){var i=/(\?|&)next=[^&]+/,o="next="+encodeURIComponent("https://disqus.com"+window.location.pathname),a=!1;n=n.replace(i,function(e,t){return a=!0,t+o}),a||(-1===n.indexOf("?")?n+="?":"&"!==n.charAt(n.length-1)&&(n+="&"),n+=o),window.top.location=n}}},getDiscussChannels:function(){return this.promotedChannels.ensureFetched().then(e.bind(function(){var t=this.promotedChannels.items.map(function(e){return e.channel}),n=this.session.getUserProfile(),i=e.pluck(n.forumsFollowing.items.models,"channel"),o=this.app.getCurrentView().model||{},r=o instanceof a?o:o.channel;r&&!r.id&&(r=null);var s=this.session.user;return e.chain([r,t,i]).flatten().compact().filter(function(e){return e.userCanCreate(s)}).uniq(!1,function(e){return e.id}).invoke("toJSON").value()},this))},handleCreateDiscussionNavClick:function(){this.getDiscussChannels().then(function(e){o.confirmationPromise(o.TYPES.CLOSE_LIGHT,u({channels:e})).then(function(e){e&&t(".modal").remove()})},this)},activatePageIcon:function(t,n){this.reactivatePageIcon&&this.stopListening(this,"render",this.reactivatePageIcon),this.reactivatePageIcon=e.bind(this.activatePageIcon,this,t,n),this.listenTo(this,"render",this.reactivatePageIcon),this.$("[data-page-icon].active").removeClass("active"),"profile"===t&&n[0]!==this.session.user.id||this.$('[data-page-icon~="'+t+'"]').addClass("active")},toggleIconLinks:function(e){"home"===e&&this.session.isLoggedOut()?t("[data-role=icon-links]").hide():t("[data-role=icon-links]").show()},updateOnboardingSteps:function(){e.defer(e.bind(function(){var t=this.isInOnboarding(this.app,this.session);if(this.$("[data-role=onboarding-steps-icon]").removeClass("is-complete"),this.$el.toggleClass("is-onboarding",t),t){var n=this.getStepNumber();e.each(e.range(1,n),function(e){this.$("[data-role=onboarding-steps-icon][data-onboarding-step="+e+"]").addClass("is-complete")},this)}},this))},completeHomeOnboarding:function(){this.session.user.setHomeOnboardComplete(!0)},removeTooltip:function(e){e&&t(e.currentTarget).closest(".tooltipped").tooltip("destroy")},addTooltip:function(e){e&&t(e.currentTarget).closest(".tooltipped").tooltip()}}),v=g.prototype;return d.call(v,"top_nav_user"),m.call(v),h.call(v),g}),define("home/templates/message",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert-message-success">\n<div class="section-contained alert-message">\n'+a(e.lambda(null!=t?r(t,"message"):t,t))+'\n<button class="close" aria-hidden="true" title="'+a(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Don't show this message again",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:48},end:{line:4,column:91}}}))+'" data-action="hide-message">\n<span class="icon-cancel"></span>\n</button>\n</div>\n</div>\n'},useData:!0})}),define("home/views/MessageView",["backbone-marionette","home/templates/message"],function(e,t){"use strict";return e.ItemView.extend({template:t,events:{"click [data-action=hide-message]":"close"},close:function(e){e.preventDefault(),this.remove()}})}),define("home/views/MessageCollectionView",["backbone-marionette","home/views/MessageView"],function(e,t){"use strict";return e.CollectionView.extend({itemView:t})}),define("home/templates/mainLayout",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="drawer-footer">\n<a href="/" data-action="full-root" target="_blank" class="nav-logo">\n<img src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:11,column:10},end:{line:11,column:26}}}))+'/img/disqus-logo-blue-white.svg" alt="Disqus">\n</a>\n<button class="drawer-close button button-outline -border-muted" data-action="close-drawer"><span class="icon-cancel text-smaller"></span>'+r(s(n,"gettext").call(a,"Close",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:138},end:{line:13,column:157}}}))+'</button>\n<div class="drawer-footer-right" data-jester-area="drawer_footer">\n<a class="nav-expand truncate-line" data-action="full-root" target="_blank" href="/home/">\n<svg class="icon-home" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path d="M39.5 20.7L21.7 2.5c-0.9-1-2.4-1-3.3 0L0.5 20.7c-0.9 1-0.6 1.7 0.8 1.7H5v13.9c0 1 0 1.8 1.8 1.8h8.7v-14 h9.1v14h9.1c1.4 0 1.4-0.8 1.4-1.8V22.4h3.7C40.1 22.4 40.4 21.6 39.5 20.7z"/></svg>\n<span class="hidden-md">Disqus Home</span>\n</a>\n<a class="nav-feedback truncate-line" target="_blank" href="//www.surveymonkey.com/s/MMWLGSR?u='+r(e.lambda(null!=t?s(t,"userId"):t,t))+'" data-link-name="feedback">\n<span class="icon-checkmark"></span>\n<span class="hidden-md">'+r(s(n,"gettext").call(a,"Feedback?",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:24},end:{line:22,column:47}}}))+'</span>\n</a>\n<a class="nav-help truncate-line" target="_blank" href="//help.disqus.com" data-link-name="help">\n<span class="icon-forward"></span>\n<span class="hidden-md">'+r(s(n,"gettext").call(a,"Get Help",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:24},end:{line:26,column:46}}}))+'</span>\n</a>\n</div>\n</div>\n\n<div class="drawer-nav">\n<a class="drawer-nav-option drawer-nav-close" data-action="close-drawer" href="#"><span class="drawer-nav-option-text">'+r(s(n,"gettext").call(a,"Close",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:119},end:{line:32,column:138}}}))+'</span><span class="icon-cancel"></span></a>\n<a class="drawer-nav-option drawer-nav-full" data-action="full-home" href="#"><span class="drawer-nav-option-text">'+r(s(n,"gettext").call(a,"View on %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:33,column:115},end:{line:33,column:165}}}))+'</span><span class="icon-expand"></span></a>\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="viewport">\n<header class="site-nav--wrapper" data-role="nav-view">\n</header>\n\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSidebar"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:0},end:{line:35,column:7}}}))?a:"")+'\n<div data-role="messages-view" class="alert-global">\n</div>\n\n<div id="container-main">\n</div>\n</div>\n'},useData:!0})}),define("home/views/MainLayout",["jquery","underscore","backbone","backbone-marionette","core/bus","core/utils/metatags","home/mixins/asEmbedLayout","home/mixins/withClickLinkTracking","home/utils/trackingUtils","home/utils/sidebarUtils","home/models/Session","home/views/NavView","home/views/MessageCollectionView","home/templates/mainLayout"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m){"use strict";var p=i.Layout,f=p.prototype,g=p.extend({id:"container-page",template:m,serializeData:function(){var e=f.serializeData.apply(this,arguments),n=this.session.user;n&&n.toJSON&&t.extend(e,n.toJSON());var i=u.fromCookie().id;return i&&(e.userId=i),e.isSidebar=c.isSidebar(),e.messages=this.app.messages,e},events:{"click [data-jester-area=drawer_footer] a[data-link-name]":"trackClickLink","click [data-jester-area=mobile_sidebar] a[data-link-name]":"trackClickLink"},regions:{content:{selector:"#container-main"},nav:"[data-role=nav-view]",alerts:"[data-role=messages-view]"},initialize:function(n){this.container=n.container,this.session=n.session,this.app=n.app,this.windowHeight=e(window).height(),e(window).resize(t.bind(function(){this.windowHeight=e(window).height(),this.toggleHeight()},this))},onRender:function(){if(e(this.container).html(this.$el),!c.isSidebar()){this.nav.show(new d({app:this.app}));var t=new n.Collection(this.app.messages);this.alerts.show(new h({collection:t}))}},showView:function(t,n){this.rendered||(this.render(),this.rendered=!0),n=n||{},this.updateBackgroundClass(n.lightBackground),t.getPageTrackingParams&&l.setPageParams(t.getPageTrackingParams()),this.$(this.content.el).removeData("height"),this.content.currentView&&this.stopListening(this.content.currentView),this.listenTo(t,"all",this.handleContentEvents),this.content.show(t),e.when(t.getMetaAttrs?t.getMetaAttrs():{}).then(a.set),o.trigger("viewSection")},updateBackgroundClass:function(e){this.$el.toggleClass("bg--light",!!e)},handleContentEvents:function(e){"show"===e||"render"===e?this.toggleHeight():/toggleHeight/.test(e)&&this.toggleHeight(t.last(arguments))},toggleHeight:function(e){if(this.content&&this.content.$el){e||(e=this.content.$el.data("height")||"fill");var t;switch(e){case"fill":this.navHeight=this.navHeight||(this.nav.$el?this.nav.$el.height():0),t=this.windowHeight-this.navHeight+"px";break;case"content":t=""}this.content.$el.css({"min-height":t}).data({height:e})}}});return c.isSidebar()&&r.call(g.prototype),s.call(g.prototype),g}),define("home/views/common/TabbedView",["jquery","underscore","backbone-marionette","core/utils/metatags","core/bus","home/utils/trackingUtils","home/utils/navigationUtils"],function(e,t,n,i,o,a,r){"use strict";return n.Layout.extend({defaultTab:void 0,attributes:{"data-view-type":"tabbed"},getTabView:function(){throw Error("Not implemented")},getTrackingSection:function(){return null},regions:{contentRegion:"[data-role=content-area]"},events:{"click [data-action=switch-tab]":"switchTab"},initialize:function(e){e=e||{},this.activeTab=e.activeTab,this.isModule=e.isModule,this.setTrackingSection()},switchTab:function(n){if(!n)return!1;n.preventDefault(),n.stopPropagation();var i=e(n.currentTarget).data("tab");if(this.toggleDropdown(),i!==this.activeTab){this.activeTab=i||t.result(this,"defaultTab");var o=e(n.target).closest("[data-action=switch-tab]"),a=o.find("a[href]").addBack("a[href]");a.length&&r.navigate(a[0]),this.updateTab()}},toggleDropdown:function(){var e=this.$(".nav__item");e.length>0&&e.toggleClass("dropdown-open")},updateTab:function(){this.activeTab||(this.activeTab=t.result(this,"defaultTab"));var e=this.activeTab,n=this.getTabView(e);n||(this.trigger("badTab"),e=this.activeTab=t.result(this,"defaultTab"),n=this.getTabView(e)),this.setTrackingSection(),this.updateTabContent(n),this.updateTabClasses(),this.trigger("change:activeTab",e),o.trigger("viewTab")},getTabs:function(){return this.$("[data-action=switch-tab]").not(this.$("[data-view-type=tabbed] [data-action=switch-tab]"))},updateTabClasses:function(){this.activeTab||(this.activeTab=t.result(this,"defaultTab"));var e=this.getTabs();e.filter(".active").removeClass("active"),e.filter('[data-tab="'+this.activeTab+'"]').addClass("active")},updateTabContent:function(t){var n=this.contentRegion.currentView;if(n&&(n.onBeforeClose=function(){return!1},!this.isModule)){var o=e(window).scrollTop();if(o){t.$el.css("minHeight",o+e(window).height()-n.$el.offset().top)}}this.contentRegion.show(t),this.getMetaAttrs&&e.when(this.getMetaAttrs()).then(i.set),n&&(n.onBeforeClose=null,n.close())},onDomRefresh:function(){this.$(this.contentRegion.el).length&&this.updateTab()},setTrackingSection:function(){a.setSection(this.getTrackingSection(this.activeTab)||t.result(this,"defaultTab"))}})}),define("home/templates/allstarModal",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">\n<span class="icon__position -allstar -inline">\n<span class="icon-allstar allstar__icon"></span>\n</span>\n'+r(s(n,"gettext").call(a,"%(Disqus)s All-Star",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:6,column:0},end:{line:6,column:51}}}))+'\n</h4>\n</div>\n<div class="modal-body">\n<p>'+r(s(n,"gettext").call(a,"All-Stars are the star contributors of %(Disqus)s. If you’ve come across them, you know they have a lot to say in their comments and discussions. They stand out for bringing their authenticity, knowledge, and personality to communities. Often, they are the hearts of the community and what makes this corner of the Internet a special place to be.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:10,column:3},end:{line:10,column:381}}}))+'</p>\n</div>\n<div class="modal-footer">\n<a href="/home/channel/announcements/discussion/channel-announcements/all_stars/"\nclass="button button-fill--brand button-padding-taller button-wide"\ndata-action="close-and-navigate">\n'+r(s(n,"gettext").call(a,"Learn More",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:0},end:{line:16,column:24}}}))+"\n</a>\n</div>\n"},useData:!0})}),define("home/mixins/withAllstarPopover",["underscore","home/utils/confirmModal","home/templates/allstarModal"],function(e,t,n){"use strict";var i={events:{"click [data-action=show-allstar-modal]":"showAllstarModal"},onDomRefresh:function(e){e&&e.call(this),this.$("[data-toggle=tooltip]").tooltip()},showAllstarModal:e.debounce(function(){t.getModal({modal:{type:t.TYPES.CLOSE_ICON,content:n()}}).modal("show")})};return function(){this.events=e.extend({},i.events,this.events),this.onDomRefresh=e.wrap(this.onDomRefresh,i.onDomRefresh),e.defaults(this,e.pick(i,["showAllstarModal"]))}}),define("home/templates/recommendation",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="recommended-object"></div>\n<div class="recommended__reason"><em>'+e.escapeExpression(e.lambda(null!=t?a(t,"reason"):t,t))+"</em></div>\n"},useData:!0})}),define("home/views/RecommendationView",["backbone-marionette","home/mixins/withAllstarPopover","home/mixins/withSubviews","home/templates/recommendation"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:i,className:"recommended-wrap",regions:{recommendedObjectRegion:"[data-role=recommended-object]"},initialize:function(e){this.RecommendedObjectView=e&&e.RecommendedObjectView},onRender:function(){this.RecommendedObjectView&&this.activateRegion(this.recommendedObjectRegion,this.createRecommendedObjectView)},createRecommendedObjectView:function(){return new this.RecommendedObjectView({model:this.model.object})}});return t.call(o.prototype),n.call(o.prototype),o}),define("home/views/BaseSuggestionView",["backbone-marionette"],function(e){"use strict";return e.ItemView.extend({events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:name":"render","change:isFollowing":"handleFollowedClass"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()}})}),define("home/templates/userSuggestion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(r(i,"userAvatar"),t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<h3 class="recommended__name truncate-line">'+(null!=(a=e.invokePartial(r(i,"userName"),t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</h3>\n"+(null!=(a=e.invokePartial(r(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")},usePartial:!0,useData:!0})}),define("home/views/UserSuggestionView",["home/views/BaseSuggestionView","home/templates/userSuggestion"],function(e,t){"use strict";return e.extend({template:t,className:"recommended__item",toggleFollow:function(e){this.constructor.__super__.toggleFollow.call(this,e,"follow user")}})}),define("home/templates/forumSuggestion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"forumAvatarLink"),t,{name:"forumAvatarLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},3:function(e,t,n,i,o){var a;return'<div class="avatar--empty">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"defaultForumAvatar"),t,{name:"defaultForumAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hasFavicon"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:7,column:8}}}))?a:"")+'<h3 class="recommended__name truncate-line">\n<a href="/home/forum/'+s(r(null!=t?l(t,"id"):t,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n\n'+(null!=(a=e.invokePartial(l(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n</h3>\n"+(null!=(a=e.invokePartial(l(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")},usePartial:!0,useData:!0})}),define("home/views/ForumSuggestionView",["home/views/BaseSuggestionView","home/templates/forumSuggestion"],function(e,t){"use strict";return e.extend({template:t,className:"recommended__item",templateHelpers:function(){return{hasFavicon:this.model.hasFavicon()}},toggleFollow:function(e){this.constructor.__super__.toggleFollow.call(this,e,"follow forum")}})}),define("home/templates/ProfileModuleEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="post-comments__wrapper">\n<div class="empty-message">\n<span class="icon-heart-break text-gray-light icon-huge"></span>\n<p class="text-gray-light">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Nothing to see.",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:27},end:{line:4,column:56}}}))+"</p>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileModuleEmptyView",["backbone-marionette","home/templates/ProfileModuleEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/recommendedUsersModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<footer class="module-footer">\n<a href="/home/explore/people/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Discover More People",{name:"gettext",hash:{},data:o,loc:{start:{line:17,column:26},end:{line:17,column:60}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header class="module-header text-center">\n<button data-action="refresh" class="icon__position--corner">\n<span class="icon icon-refresh text-gray-light text-small"></span>\n</button>\n<div class="module-header__icon">\n<span class="icon text-brand icon-interesting-commenters"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+s(l(n,"gettext").call(r,"Interesting Commenters",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:35},end:{line:9,column:71}}}))+'</h2>\n<p class="module-header__subheading">'+s(l(n,"gettext").call(r,"Follow people from around the %(disqus)s Network.",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:10,column:37},end:{line:10,column:118}}}))+'</p>\n</div>\n</header>\n<div data-role="items" class="module-body"></div>\n'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"hideDiscoverLink"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:23,column:11}}}))?a:"")},useData:!0})}),define("home/templates/recommendedForumsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<footer class="module-footer">\n<a href="/home/explore/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Discover More Communities",{name:"gettext",hash:{},data:o,loc:{start:{line:17,column:26},end:{line:17,column:65}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header class="module-header text-center">\n<button data-action="refresh" class="icon__position--corner">\n<span class="icon icon-refresh text-gray-light text-small"></span>\n</button>\n<div class="module-header__icon">\n<span class="icon text-brand icon-communities"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+s(l(n,"gettext").call(r,"Lively Communities",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:35},end:{line:9,column:67}}}))+'</h2>\n<p class="module-header__subheading">'+s(l(n,"gettext").call(r,"Follow sites from around the %(disqus)s Network.",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:10,column:37},end:{line:10,column:117}}}))+'</p>\n</div>\n</header>\n<div data-role="items" class="module-body"></div>\n'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"hideDiscoverLink"):t,{name:"unless",
hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:23,column:11}}}))?a:"")},useData:!0})}),define("home/views/RecommendationsModuleView",["underscore","backbone-marionette","home/views/RecommendationView","home/views/UserSuggestionView","home/views/ForumSuggestionView","home/views/ProfileModuleEmptyView","home/templates/recommendedUsersModule","home/templates/recommendedForumsModule"],function(e,t,n,i,o,a,r,s){"use strict";var l=t.CompositeView.extend({className:"aside__wrap -padded",itemView:n,emptyView:a,itemViewContainer:"[data-role=items]",events:{"click [data-action=refresh]":"refreshModule"},templateHelpers:function(){return{hideDiscoverLink:this.hideDiscoverLink}},initialize:function(e){this.collection=this.model&&this.model.items,this.hideDiscoverLink=e&&e.hideDiscoverLink},refreshModule:function(){var e=this.$el;e.addClass("is-refreshing");var t=function(){e.removeClass("is-refreshing")};this.model.fetchItems({reset:!0}).then(t)}},{createUserRecommendedModuleView:function(t){return new l(e.extend({template:r,itemViewOptions:{RecommendedObjectView:i}},t))},createForumRecommendedModuleView:function(t){return new l(e.extend({template:s,itemViewOptions:{RecommendedObjectView:o}},t))}});return l}),define("core/utils/uniqueId",[],function(){"use strict";var e=Math.floor(1e4*Math.random()+1);return function(t){e+=1;var n=e+"";return t?t+n:n}}),define("core/Events",["require","core/utils/collection/each","core/utils/object/has","core/utils/uniqueId"],function(e){"use strict";var t=e("core/utils/collection/each"),n=e("core/utils/object/has"),i=e("core/utils/uniqueId"),o=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},a=Object.keys||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)n(e,i)&&(t[t.length]=i);return t},r=[].slice,s={on:function(e,t,n){return c(this,"on",e,[t,n])&&t?(this._events=this._events||{},(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,a=o(function(){i.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,n)},off:function(e,t,n){var i,o,r,s,l,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:a(this._events),l=0,u=s.length;l<u;l++)if(e=s[l],r=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=r.length;d<h;d++)o=r[d],(n&&n!==o.context||t&&t!==o.callback&&t!==o.callback._callback)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(n,t),i&&u(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var o=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var a in i)i[a].off(t,n,this),o&&delete this._listeners[a];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),r=0,s=a.length;r<s;r++)e[t].apply(e,[a[r]].concat(i));return!1}return!0},u=function(e,t){var n,i,o=e.length,a=t[0],r=t[1],s=t[2];switch(t.length){case 0:for(i=0;i<o;i++)(n=e[i]).callback.call(n.ctx);return;case 1:for(i=0;i<o;i++)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(i=0;i<o;i++)(n=e[i]).callback.call(n.ctx,a,r);return;case 3:for(i=0;i<o;i++)(n=e[i]).callback.call(n.ctx,a,r,s);return;default:for(i=0;i<o;i++)(n=e[i]).callback.apply(n.ctx,t)}};return t({listenTo:"on",listenToOnce:"once"},function(e,t){s[t]=function(t,n,o){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=i("l"))]=t,"object"==typeof n&&(o=this),t[e](n,o,this),this}}),s.bind=s.on,s.unbind=s.off,s}),define("core/utils/function/debounce",[],function(){"use strict";return function(e,t,n){var i,o,a,r,s,l=function(){var c=(new Date).getTime()-r;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,r=(new Date).getTime();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(a,o),a=o=null),s}}}),define("core/utils/function/throttle",[],function(){"use strict";return function(e,t,n){n||(n=0);var i,o,a,r,s=0,l=function(){s=new Date,a=null,r=e.apply(i,o)};return function(){var c=new Date,u=t-(c-s);return i=this,o=arguments,u<=0?(clearTimeout(a),a=null,s=c,r=e.apply(i,o)):a||(a=setTimeout(l,u+n)),r}}}),define("core/utils/array/indexOf",[],function(){"use strict";return function(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),define("core/utils/array/some",[],function(){"use strict";return function(e,t,n){for(var i=0;i<e.length;++i)if(t.call(n,e[i],i,e))return!0;return!1}}),define("core/utils/html/getCurrentStyle",[],function(){"use strict";return window.getComputedStyle?function(e,t,n){try{return window.document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(e){return null}}:function(e,t,n){return e.currentStyle[t]||e.currentStyle[n]}}),define("core/utils/html/isVisible",["core/utils/html/getCurrentStyle"],function(e){"use strict";return function(t){return!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)||"hidden"===e(t,"visibility"))}}),define("core/utils/lang/isFunction",[],function(){"use strict";return function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),define("core/utils/object/result",["core/utils/lang/isFunction"],function(e){"use strict";return function(t,n,i){var o=null===t||void 0===t?void 0:t[n];return void 0===o&&(o=i),e(o)?o.call(t):o}}),define("core/utils/lang/isElement",[],function(){"use strict";return function(e){return!(!e||1!==e.nodeType)}}),define("core/stance/utils",["exports","core/utils/lang/isElement","core/utils/uniqueId"],function(e,t,n){"use strict";e.getElement=function(e){return t(e)?e:e&&e.el},e.EL_ID_ATTR="data-visibility-id",e.OBJ_ID_PROP="_visibility_id",e.getId=function(i){var o=null;return t(i)?(o=i.getAttribute(e.EL_ID_ATTR)||null)||(o=n(),i.setAttribute(e.EL_ID_ATTR,o)):i&&((o=i[e.OBJ_ID_PROP]||null)||(o=i[e.OBJ_ID_PROP]=n())),o},e.visiblePercent=function(e,t){var n=0;if(!t)return n;var i=e.top,o=i+e.height,a=t.visibleTop<i,r=t.visibleBottom>o;return!a&&!r||a&&r?n=1:a?n=(t.height-(i-t.visibleTop))/t.height:r&&(n=(o-t.visibleTop)/t.height),Math.round(100*n)}});define("core/stance/tracking",["core/utils/array/indexOf","core/utils/array/some","core/utils/html/isVisible","core/utils/object/result","./utils","exports"],function(e,t,n,i,o,a){"use strict";a.events=[],a.lastPos=null,a.clearCache=function(e){if(void 0===e)a.getElementOffset.cache={};else{var t=o.getId(e);t&&(a.getElementOffset.cache[t]=null)}},a.calculateOffset=function(e){if(!e)return null;if(!n(e))return null;var t=e.ownerDocument.documentElement;return{height:e.offsetHeight,top:e.getBoundingClientRect().top+window.pageYOffset-(t.clientTop||0)}},a._getElementOffset=function(e){var t=o.getElement(e);if(!t)return null;var n=a.calculateOffset(t);return n?{visibleTop:n.top+(i(e,"topEdgeOffset")||0),visibleBottom:n.top+n.height-(i(e,"bottomEdgeOffset")||0),offsetTop:n.top,height:n.height}:null},a.getElementOffset=function(){var e=function(t){var n=e.cache,i=o.getId(t);if(i&&n[i])return n[i];var r=a._getElementOffset(t);return i&&r&&(n[i]=r),r};return e.cache={},e}(),a.EVENT_NAMES=["enter","exit","visible","invisible","all"],a.updateTracking=function(n){var i;t(a.EVENT_NAMES,function(e){return e?function(t){return e[t]}:function(){}}(n._events))?-1===(i=e(a.events,n))&&a.events.push(n):-1!==(i=e(a.events,n))&&a.events.splice(i,1)},a.processEvents=function(e){a.lastPos=e;var t=a.events;if(t.length)for(var n=t.length-1;n>=0;--n){var i=t[n],o=i.isVisible(e);null!==o&&(o!==i.lastVisible&&i.trigger(o?"enter":"exit",i,e),i.trigger(o?"visible":"invisible",i,e),i.lastVisible=o)}}}),define("core/stance/main",["core/Events","core/utils/function/debounce","core/utils/function/throttle","core/utils/object/extend","./tracking"],function(e,t,n,i,o){"use strict";function a(e){if(!(this instanceof a))return new a(e);this.obj=e,this.lastVisible=!1}var r=t(function(){o.processEvents(o.lastPos)},250);return i(a.prototype,e,{on:function(t){var n=!(this._events&&this._events[t]),i=e.on.apply(this,arguments);return n&&o.updateTracking(this),r(),i},off:function(t){var n=e.off.apply(this,arguments);return this._events&&this._events[t]||o.updateTracking(this),n},offset:function(){return o.getElementOffset(this.obj)},isVisible:function(e){if(!(e=e||o.lastPos))return null;var t=e.top,n=t+e.height,i=this.offset();return!!i&&(i.offsetTop>=t&&i.visibleTop<n||i.offsetTop+i.height<=n&&i.visibleBottom>t)},invalidate:function(){return o.clearCache(this.obj),this}}),i(a,{invalidate:o.clearCache,scroll:o.processEvents,_windowScrollHandlerBound:!1,_ignoreCache:!1,_windowScrollHandler:n(function(){a._ignoreCache&&a.invalidate(),o.processEvents({top:window.pageYOffset,height:window.document.documentElement.clientHeight})},250),bindWindowEvents:function(e){this._windowScrollHandlerBound||(void 0!==e&&(a._ignoreCache=e),window.addEventListener("scroll",this._windowScrollHandler),window.addEventListener("resize",this._windowScrollHandler),this._windowScrollHandlerBound=!0,this._windowScrollHandler())},unbindWindowEvents:function(){a._ignoreCache=!1,window.removeEventListener("scroll",this._windowScrollHandler),window.removeEventListener("resize",this._windowScrollHandler),this._windowScrollHandlerBound=!1}}),a}),define("home/views/FetchingView",["backbone-marionette"],function(e){"use strict";return e.ItemView.extend({className:"spinner",template:function(){},initialize:function(t){e.ItemView.prototype.initialize.call(this,t),t=t||{},t.className&&(this.className=t.className)}})}),define("home/views/common/FetchableCollectionView",["underscore","jquery","backbone","backbone-marionette","core/stance/main","home/views/FetchingView"],function(e,t,n,i,o,a){"use strict";return i.CollectionView.extend({fetchingView:a,emptyView:n.View,initialize:function(t){this.listenable=this.model||this.collection,this.listenTo(this.listenable,"change:fetching",this.render),this.listenTo(this.collection,"add",this.closeNonItemViews),this.listenTo(this.collection,"reset",this.closeViews),this.listenTo(this,"before:item:added",this.onFirstItem),t.infiniteScroll&&this.setupInfiniteScroll(),this.triggerRenderInitialContent=e.once(e.bind(this.trigger,this,"renderInitialContent"))},setupInfiniteScroll:function(){o.bindWindowEvents(),this.listenTo(this,"after:item:added",e.debounce(this.updateInfiniteScrollTrigger,0))},onFirstItem:function(e){this.collection.at(0)===e.model&&(this.stopListening(this,"before:item:added",this.onFirstItem),this.listenToOnce(e,"show",function(){this.trigger("showFirstItem",e)}))},infiniteScrollTriggerOffset:function(){return-t(window).height()},updateInfiniteScrollTrigger:function(){if(this.collection.length){var t=e.values(this.children._views);if(t.length){var n=e.findLastIndex(t,function(e){return!/(\s|^)hidden(\s|$)/.test(e.$el.attr("class"))});if(!(n<0)){var i=t[n];if(i){var a=this.infiniteScrollTrigger;a&&this.stopListening(a),a=o({el:i.el,topEdgeOffset:this.infiniteScrollTriggerOffset}),this.infiniteScrollTrigger=a,this.listenToOnce(a,"enter",this.loadMore)}}}}},loadMore:function(){var e=this.listenable;e.fetchItems?e.fetchItems():e.more&&e.more(),this.infiniteScrollTrigger=null},onCollectionBeforeClose:function(){this._showingEmptyView=!0},onCollectionClosed:function(){this._showingEmptyView=!1},render:function(){var e=!this.collection.length,t=this.isFetching(),n=this.isError();e?t?this.showFetchingView():n?(this.closeViews(),this.triggerRenderInitialContent()):this._showingEmptyView||(i.CollectionView.prototype.render.apply(this,arguments),this.triggerRenderInitialContent()):this.children.length&&!this.isShowingNonItemView()||(this.closeViews(),i.CollectionView.prototype.render.apply(this,arguments),this.triggerRenderInitialContent())},buildItemView:function(t,n,o){var a=i.getOption(this,"emptyViewOptions");return this._showingEmptyView&&a&&(o=a,e.isFunction(o)&&(o=o.call(this))),i.CollectionView.prototype.buildItemView.call(this,t,n,o)},appendHtml:function(e,n,i){e.isBuffering&&e._bufferedChildren.push(n);var o=e.isBuffering?t(e.elBuffer):e.$el,a=o.children();a.size()<=i?o.append(n.el):a.eq(i).before(n.el)},isFetching:function(){return this.checkState("fetching")},isError:function(){return this.checkState("error")},checkState:function(t){return this.listenable.get?this.listenable.get(t):e.result(this.listenable,t)},bindViewClose:function(e,t){var n=this;e.on("close",function(){n[t]=!1})},closeNonItemViews:function(){this.isShowingNonItemView()&&this.closeViews()},isShowingNonItemView:function(){return this._showingFetchingView||this._showingEmptyView},closeViews:function(){this._showingEmptyView=!0,this.closeChildren(),this._showingEmptyView=!1,this._showingFetchingView=!1},showFetchingView:function(){var e=i.getOption(this,"fetchingView");if(e&&!this._showingFetchingView){this.closeViews(),this._showingFetchingView=!0;this.bindViewClose(this.addItemView(this.model||new n.Model,e,0),"_showingFetchingView")}}})}),define("home/templates/threadCardDefaultFooter",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<span class="icon-lock icon-tiny spacing-right-small"></span>\n'},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 Comment",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:0},end:{line:11,column:23}}}))+"\n"},5:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"%(posts)s Comments",{name:"gettext",hash:{posts:null!=t?a(t,"posts"):t},data:o,loc:{start:{line:13,column:0},end:{line:13,column:44}}}))+"\n"},7:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="action">\n<a href="#" data-action="favorite"\nclass="action-favorite '+(null!=(a=s(n,"if").call(r,null!=t?s(t,"favorited"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:23},end:{line:21,column:53}}}))?a:"")+'">\n\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"favorited"):t,{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.program(12,o,0),data:o,loc:{start:{line:23,column:0},end:{line:27,column:7}}}))?a:"")+'\n<span class="icon icon-heart"></span>\n</a>\n</li>\n'},8:function(e,t,n,i,o){return"active"},10:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Recommended",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:0},end:{line:24,column:25}}}))+"\n"},12:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Recommend",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:0},end:{line:26,column:23}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="actions">\n<li class="action">\n<a href="'+s(r(null!=t?c(t,"discussionRoute"):t,t))+'"\ndata-link-name="comment_count"\ndata-thread-id="'+s(r(null!=t?c(t,"id"):t,t))+'">\n'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"isClosed"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?a:"")+"\n"+(null!=(a=c(n,"if").call(l,c(n,"eq").call(l,null!=t?c(t,"posts"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:10,column:6},end:{line:10,column:18}}}),{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:10,column:0},end:{line:14,column:7}}}))?a:"")+'<span class="icon icon-comment"></span>\n</a>\n</li>\n'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"authenticated"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:0},end:{line:32,column:7}}}))?a:"")+"</ul>\n"},useData:!0})}),define("home/mixins/withThreadSharing",["jquery","underscore"],function(e,t){"use strict";var n=function(){return this.model.thread||this.model};return function(){this.events=t.extend({"click [data-action=share]":"handleShareThread"},this.events),this.handleShareThread=function(t){if(t){t.preventDefault(),t.stopPropagation();n.call(this).shareThread(e(t.currentTarget).attr("data-network"))}}}}),define("home/views/ThreadCardDefaultFooterView",["backbone-marionette","home/models/Session","home/templates/threadCardDefaultFooter","home/mixins/withThreadSharing"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:n,templateHelpers:function(){var e=t.get();return{favorited:this.model.get("userScore")>0,discussionRoute:this.model.getDiscussionRoute(this.channel),authenticated:!e.isAnonymous(),likes:this.model.get("likes")}},events:{"click [data-action=favorite]":"toggleThreadFavorited","click [data-action=toggle-subscription]":"toggleSubscription"},initialize:function(e){this.listenTo(this.model,"change:userScore",this.render),this.listenTo(this.model,"change:userSubscription",this.render),this.channel=e&&e.channel},toggleThreadFavorited:function(e){e&&e.preventDefault(),this.model.toggleFavorited()},toggleSubscription:function(e){e&&e.preventDefault(),this.model.toggleSubscription()}});return i.call(o.prototype),o}),define("home/mixins/withThreadCardDefaultFooter",["underscore","home/mixins/withSubviews","home/views/ThreadCardDefaultFooterView"],function(e,t,n){"use strict";var i=function(){return this.model.thread||this.model},o={render:function(e){return e.call(this),this.footerRegion=this.addRegion("[data-role=footer]"),this.activateRegion(this.footerRegion,this.createThreadDefaultFooter),this},createThreadDefaultFooter:function(){var e=i.call(this);return new n({el:this.footerRegion.el,model:e,channel:this.channel})}};return function(){t.call(this),this.createThreadDefaultFooter=o.createThreadDefaultFooter,this.render=e.wrap(this.render,o.render)}}),define("home/mixins/withTruncate",["jquery","underscore"],function(e,t){"use strict";var n={onDomRefresh:function(t){t&&t.call(this),this.$(".truncate").each(function(t,n){e(n).trunk8({lines:e(n).data("truncateLines")||1})}),this.trigger("truncate:complete")}};return function(){this.onDomRefresh=t.wrap(this.onDomRefresh,n.onDomRefresh)}}),define("home/mixins/asGenericCard",["underscore","home/utils/layoutUtils","home/mixins/withThreadCardDefaultFooter","home/mixins/withTruncate"],function(e,t,n,i){"use strict";var o={className:function(t){return e.isFunction(t)&&(t=t.apply(this,e.rest(arguments))),t=t||"",["card card-generic","card-generic-"+this.model.get("verb"),t].join(" ")},initialize:function(e,t){t=t||{},e.call(this,t),this.channel=t.channel,this.hideImage=t.hideImage,this.listenTo(this.model.thread,"change:content",this.render),this.numTitleLines=t.numTitleLines||3},serializeData:function(n){var i=n.call(this),o=this.model.thread;return e.defaults(i,{discussionRoute:o.getDiscussionRoute(this.channel),threadDescriptionHTML:o.getDefaultDescription(),image:!this.hideImage&&!t.isNarrowLayout()&&o.getImage(),numTitleLines:this.numTitleLines})}};return function(){n.apply(this,arguments),i.apply(this,arguments),this.className=e.wrap(this.className,o.className),this.initialize=e.wrap(this.initialize,o.initialize),this.serializeData=e.wrap(this.serializeData,o.serializeData)}}),define("core/utils/views",["underscore"],function(e){"use strict";return{mixin:function(t,n,i){var o=t.prototype,a=e.extend({},n,i);if(e.defaults(o,a),e.defaults(o.events,a.events),void 0!==o.initialize&&void 0!==a.initialize){var r=o.initialize;o.initialize=function(){var e=r.apply(this,arguments);return a.initialize.apply(this,arguments),e}}}}}),define("core/views/common/HoverCard",["jquery","underscore","backbone","core/bus","core/utils"],function(e,t,n,i,o){"use strict";var a=n.View.extend({events:{mouseenter:"enter",mouseleave:"leave"},initialize:function(){this._id=t.uniqueId(),this._rendered=!1,this._hoverState="out",this._visible=!1,this._enterTimeout=null,this._leaveTimeout=null,a.open={},this.events=this.events||{},this.events["click [data-action=profile]"]="handleShowProfile",this.listenTo(this,"authenticating",this.keepOpen)},render:function(){return this.hide(),e("body").append(this.el),this},target:function(e){e.on("mouseenter",t.bind(this.enter,this,e)),e.on("mouseleave",t.bind(this.leave,this))},enter:function(e){var n=this;e.originalEvent&&(e=null),e&&(n.$target=e),n._leaveTimeout&&clearTimeout(n._leaveTimeout),"in"!==n._hoverState&&(n._hoverState="in",n._enterTimeout=t.delay(function(){"in"===n._hoverState&&n.show(),n._enterTimeout=null},a.DELAY_ENTER),a.open[this.uid]=this)},leave:function(){var e=this;e._enterTimeout&&clearTimeout(e._enterTimeout),"out"!==e._hoverState&&(e._hoverState="out",e._leaveTimeout=t.delay(function(){"out"===e._hoverState&&e.hide(),e._leaveTimeout=null},a.DELAY_LEAVE),a.open[this.uid]&&delete a.open[this.uid])},show:function(){var e=this;e._rendered||(e._rendered=!0,e.render()),e.moveTo(e.$target),e.$el.show(),e._visible=!0,e.trigger("show")},moveTo:function(e){if(e){var t=a.POSITION_OFFSET,n=e.offset(),i=this.$el,o=i.height(),r=this.getContainerPosition();n.top-=t;n.top+o+r.containerOffset.top<=r.pageOffset+r.containerHeight?i.css("top",n.top):i.css("top",n.top-o+2*t),i.css("left",n.left+t)}},getContainerPosition:function(){return{pageOffset:e(window).scrollTop(),containerOffset:{top:0,height:e(window).height()},containerHeight:e(window).height()}},hide:function(){this._keepOpen||(this._enterTimeout&&clearTimeout(this._enterTimeout),this.$el.hide(),this._visible=!1)},keepOpen:function(){this._keepOpen=!0,this.setupKeepOpenCanceler()},setupKeepOpenCanceler:function(){var n=this,o=function(){"out"===n._hoverState&&(n.stopListening(i,"window.click",o),e("body").off("click",o),n._keepOpen=!1,n.hide())};t.delay(function(){n.listenTo(i,"window.click",o),e("body").on("click",o)},100)},isVisible:function(){return this._visible},handleShowProfile:o.preventDefaultHandler(function(){this.hide()})},{open:{},instances:{},DELAY_ENTER:350,DELAY_LEAVE:175,POSITION_OFFSET:20,exitAll:function(){t.invoke(a.open,"leave")},create:function(e,t,n,i){var o=a.instances[n];o||(a.instances[n]=o={});var r=o[e];return r||(r=new i(t),o[e]=r),t.targetElement&&r.target(t.targetElement),r}});return function(){e(window.document).on("mouseout",t.debounce(function(e){var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||a.exitAll()},10))}(),a}),define("core/views/common/mixins/LocalScroll",[],function(){"use strict";return{events:{mousewheel:"handleScrollEvent",wheel:"handleScrollEvent"},scrollMeasureSelector:"",getScrollMeasure:function(){return this.scrollMeasure||(this.scrollMeasure=this.$el,this.scrollMeasureSelector&&(this.scrollMeasure=this.$el.find(this.scrollMeasureSelector))),this.scrollMeasure},handleScrollEvent:function(e){var t=e.originalEvent,n=t.wheelDeltaY||-t.deltaY,i=this.$el,o=i.height(),a=this.getScrollMeasure(),r=a.height(),s=a.parent()[0].scrollTop,l=s>=r-o,c=0===s;(l&&n<0||c&&n>0)&&e.preventDefault()}}}),define("core/templates/usersCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return"guests-only"},3:function(e,t,n,i,o,a,r){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(n,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"users"):t,{name:"each",hash:{},fn:e.program(4,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:9}}}))?s:""},4:function(e,t,n,i,o,a,r){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=e.invokePartial(l(i,"cardUser"),t,{name:"cardUser",hash:{forumId:null!=r[1]?l(r[1],"forumId"):r[1],highlight:null!=r[1]?l(r[1],"highlight"):r[1]},data:o,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o,a,r){var s,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tooltip voters '+(null!=(s=c(n,"unless").call(l,null!=(s=null!=t?c(t,"users"):t)?c(s,"length"):s,{name:"unless",hash:{},fn:e.program(1,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:1,column:27},end:{line:1,column:73}}}))?s:"")+'">\n<ul class="scroll-measure" data-role="content">\n'+(null!=(s=c(n,"if").call(l,null!=(s=null!=t?c(t,"users"):t)?c(s,"length"):s,{name:"if",hash:{},fn:e.program(3,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:7,column:7}}}))?s:"")+'</ul>\n</div>\n<div class="tooltip-point hidden"></div>\n'},usePartial:!0,useData:!0,useDepths:!0})}),define("core/views/UsersCard",["jquery","underscore","handlebars","core/config","core/bus","core/utils/views","core/views/common/HoverCard","core/views/common/mixins/LocalScroll","core/templates/usersCard"],function(e,t,n,i,o,a,r,s,l){"use strict";var c=function(e){return e.get("isAnonymous")||e.get("isBlocked")},u=r.extend({guestTextPartialName:"cardOtherUserText",className:"tooltip-outer voters-outer",initialize:function(e){r.prototype.initialize.call(this,e),this.collection=this.collection||e.collection,this.session=e.session,this.numUsers=e.numUsers,this.voteType=e.voteType,this.listenTo(this.collection,"add",this.addUser),this.listenTo(this.collection,"change:isBlocked",this.render),this.listenTo(this.collection,"remove",this.removeUser),this.listenTo(this.collection,"reset",this.render)},addUser:function(e){c(e)?this.updateGuests():this.$listEl&&this.$listEl.length&&(this.$listEl.prepend(n.partials.cardUser(this.getUserTemplateData(e))),this.stopHighlightUsername())},removeUser:function(e){if(c(e))this.updateGuests();else{var t=this.$el.find("[data-username="+e.get("username")+"]");t.length&&t.remove()}},stopHighlightUsername:t.debounce(function(){this.$el.find(".highlight").removeClass("highlight")},1100),getGuestCount:function(){return Math.max(this.numUsers-this.collection.reject(c).length,0)},updateGuests:function(){var e=this.$el.find("[data-role=guest]"),t=this.getGuestCount(),o=n.partials[this.guestTextPartialName]({guestCount:t}),a={guestCount:t,guestAvatarUrl:i.urls.avatar.generic,highlight:e.length,guestText:o},r=n.partials.cardGuestUser(a);e.length?(e.replaceWith(r),this.stopHighlightUsername()):this.$listEl&&this.$listEl.length&&this.$listEl.append(r)},getTemplateData:function(){return{users:t.invoke(this.collection.reject(c),"toJSON"),highlight:!1}},getUserTemplateData:function(e){return t.extend({highlight:!0},e.toJSON())},render:function(){delete this.pointEl,this.$el.html(l(this.getTemplateData())),r.prototype.render.call(this),this.$listEl=this.$el.find(".voters ul"),this.updateGuests()},show:function(){this.numUsers&&!this.isVisible()&&(r.prototype.show.call(this),o.trigger("uiAction:userCardShow"))},showPoint:function(e){var n=["tl","bl"];this.pointEl||(this.pointEl=this.$el.find(".tooltip-point"),this.pointEl.removeClass("hidden")),t.each(n,function(e){this.pointEl.removeClass("point-position-"+e)},this),this.pointEl.addClass("point-position-"+e)},moveTo:function(e,t){if(e){var n=r.POSITION_OFFSET,i=e.offset(),o=this.$el,a=o.height(),s=this.getContainerPosition();t&&(a+=o.find("li.user").height()+10),i.top-a-n>=0&&i.top-a+s.containerOffset.top>=s.pageOffset?(o.css({bottom:s.containerOffset.height-i.top+n,top:"inherit"}),this.showPoint("bl")):(o.css({bottom:"inherit",top:i.top+2*n}),this.showPoint("tl")),o.css("left",i.left-n)}},handleShowProfile:function(t){r.prototype.handleShowProfile.call(this,t);var n=e(t.currentTarget),i=n.attr("data-username");o.trigger("uiCallback:showProfile",i)}},{create:function(e,t){return r.create(e,t,"UsersCard",u)}});return a.mixin(u,s,{scrollMeasureSelector:"[data-role=content]"}),u}),define("home/utils/cardUtils",["core/bus","home/utils/navigationUtils","home/utils/sidebarUtils"],function(e,t,n){"use strict";e.on({"uiCallback:showProfile":function(e){var i="/by/"+e+"/";n.isSidebar()?window.open(i):t.navigate(i,{trigger:!0})}})}),define("home/views/ActivityActorsHoverCard",["underscore","backbone","home/models/Session","core/views/UsersCard","core/views/common/HoverCard","home/utils/cardUtils"],function(e,t,n,i,o){"use strict";var a=i.extend({initialize:function(o){var a=o.activityFeedItem,r=o.numShownActors;e.extend(o,{numUsers:a.get("totalActors")-r,session:n.get(),collection:new t.Collection(a.actors.slice(r))}),i.prototype.initialize.apply(this,arguments)},show:function(){i.prototype.show.apply(this,arguments),this.trigger("uiAction:activityActorsCardShow")}},{create:function(e){return o.create(e.activityId,e,"ActivityActorsHoverCard",a)}});return a}),define("home/mixins/withReason",["underscore","home/views/ActivityActorsHoverCard","core/utils"],function(e,t,n){"use strict";var i=function(){if(!n.isMobileUserAgent()){var e=this.$("[data-role=actors]");e.length&&(this.hoverCard&&this.hoverCard.remove(),this.hoverCard=t.create({targetElement:e,activityFeedItem:this.model,activityId:this.model.id,numShownActors:1}))}},o=function(){if(!this.model.actors||1!==this.model.actors.length)return 0;var e=this.model.get("totalActivities");return e>1?e:0};return function(){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this.listenTo(this,"render",i)});var t=this.templateHelpers;this.templateHelpers=function(){var n=this.options&&this.options.enableBestOfDisqusCallout,i=this.model.thread,a=this.model.activities[0],r=n&&"TrendingThreadOnChannel"===a.get("type")&&a.targetChannel&&a.targetChannel.get("options").isCurationOnlyChannel;return e.extend({relativeTime:this.model.getRelativeTimestamp(),numRemainingActors:this.model.get("totalActors")-1,numOccurrences:o.call(this),firstActor:this.model.actors[0]&&this.model.actors[0].toJSON(),isBestOfDisqus:r,threadLikes:i&&i.get("likes")+(r?1:0)},e.isFunction(t)?t.apply(this,arguments):t)}}}),define("home/templates/postActions",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="vote-up'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"sessionUserHasUpvoted"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:26},end:{line:2,column:69}}}))?a:"")+'" data-action="vote" data-vote="1">\n<span class="vote__count text-gray text-small" data-role="upvotes">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"likes"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:4,column:29}}}))?a:"")+'\n</span>\n<span class="icon-arrow-up icon-tiny"></span>\n</a>\n'},2:function(e,t,n,i,o){return" active"},4:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"likes"):t,t))},6:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="vote-down'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"sessionUserHasDownvoted"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:28},
end:{line:11,column:73}}}))?a:"")+'" data-action="vote" data-vote="-1">\n<span class="icon-arrow-down icon-tiny"></span>\n<span class="vote__count text-gray text-small" data-role="downvotes">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"showDownvoteCount"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:14,column:44}}}))?a:"")+"\n</span>\n</a>\n"},7:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"dislikes"):t,t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=c(n,"if").call(r,null!=t?c(t,"showUpvote"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:8,column:7}}}))?a:"")+"\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"showDownvote"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:0},end:{line:17,column:7}}}))?a:"")+"\n"+(null!=(a=e.invokePartial(c(i,"replyOrEditLink"),t,{name:"replyOrEditLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\n<a href="'+l(s(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+l(s(null!=t?c(t,"id"):t,t))+'"\nclass="view-comment link-gray"\ndata-link-name="view_comment"\ndata-thread-id="'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n\n<span class="visible-md">'+l(c(n,"gettext").call(r,"View",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:25},end:{line:26,column:43}}}))+'</span><span class="hidden-md">'+l(c(n,"gettext").call(r,"View in discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:74},end:{line:26,column:106}}}))+'</span><span class="icon-expand"></span>\n</a>\n'},usePartial:!0,useData:!0})}),define("home/utils/features",["modernizr"],function(e){"use strict";var t={browser:{mobile:/iPhone|Android|iPod|iPad|webOS|Mobile Safari|Windows Phone|BlackBerry|Opera Mini|IEMobile/i.test(window.navigator.userAgent)}},n=e.contenteditable&&!t.browser.mobile&&!(window.opera&&window.opera.version);return{canUseContentEditable:function(){return n}}}),define("core/templates/alert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="icon icon-'+e.escapeExpression(e.lambda(null!=t?a(t,"iconType"):t,t))+'"></span>\n'},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.lambda(null!=t?r(t,"message"):t,t))?a:"")+"\n"},5:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"message"):t,t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="close" data-action="dismiss" title="'+e.escapeExpression(s(n,"gettext").call(r,"Dismiss",{name:"gettext",hash:{},data:o,loc:{start:{line:1,column:46},end:{line:1,column:67}}}))+'">×</a>\n<span>\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"icon"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:5,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"safe"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:6,column:0},end:{line:10,column:7}}}))?a:"")+"</span>\n"},useData:!0})}),define("core/views/AlertView",["backbone","core/templates/alert"],function(e,t){"use strict";return e.View.extend({defaultClassName:"alert",events:{"click [data-action=dismiss]":"dismiss"},initialize:function(e){this.options=e,this.message=e.message,this.safe=e.safe,this.type=e.type,this.className=e.className||this.defaultClassName},render:function(){var e=this.$el;return e.html(t({message:this.message,safe:this.safe,icon:!!this.type,iconType:"error"===this.type||"warn"===this.type?"warning":this.type})),e.attr("class",this.className),this.type&&e.addClass(this.type),this},dismiss:function(e){e&&e.preventDefault&&e.preventDefault(),this.remove(),this.trigger("dismiss")}})}),define("core/mixins/withAlert",["underscore","core/views/AlertView"],function(e,t){"use strict";var n={alert:function(n,i){e.isObject(i)||(i={});var o=i.target||this._alertSelector;this.dismissAlert();var a=this._alert=new t(e.extend({message:n},i));if(this.listenToOnce(this._alert,"dismiss",function(){this._alert=null}),a.render(),o){var r=this.$el.find(o);r.length?r.prepend(a.el):this.listenToOnce(this,"threadView:render",function(){return this.alert(n,i)})}else this.el.parentNode&&this.el.parentNode.insertBefore(a.el,this.el);return a},dismissAlert:function(e){this._alert&&(e&&!e(this._alert)||(this.stopListening(this._alert),this._alert.dismiss(),this._alert=null))},getAlert:function(){return this._alert||null},setAlertSelector:function(e){this._alertSelector=e}};return function(){return e.extend(this,n)}}),define("core/models/Media",["underscore","backbone","core/api","core/UniqueModel"],function(e,t,n,i){"use strict";var o=t.Model.extend({idAttribute:"url",defaults:{mediaType:null,html:"",htmlWidth:null,htmlHeight:null,thumbnailUrl:"",thumbnailWidth:null,thumbnailHeight:null,url:"",urlRedirect:"",resolvedUrl:"",resolvedUrlRedirect:"",title:"",description:"",providerName:""},parse:function(e){return e.response},sync:function(t,i,o){if("read"!==t)throw Error('Media models do not support methods other than "read".');return n.call("media/details.json",e.extend({method:"POST",data:{url:this.get("url"),forum:o.forum}},o))}},{MEDIA_TYPES:{IMAGE:"1",IMAGE_UPLOAD:"2",YOUTUBE_VIDEO:"3",WEBPAGE:"4",TWITTER_STATUS:"5",FACEBOOK_PAGE:"6",FACEBOOK_POST:"7",FACEBOOK_PHOTO:"8",FACEBOOK_VIDEO:"9",SOUNDCLOUD_SOUND:"10",GOOGLE_MAP:"11",VIMEO_VIDEO:"12",VINE_VIDEO:"14",GIF_VIDEO:"15"},WEBPAGE_TYPES:["4","6","7"]});return i.addType("Media",o),o}),define("core/utils/media/upload",["underscore","exports","core/api","core/models/Media","core/UniqueModel"],function(e,t,n,i,o){"use strict";t.uploadSupported=!!window.FormData,t._extractFirstImageFile=function(t){return e.find(t,function(e){return e.type.match(/^image\//)})},t._uploadViaApi=function(e,t,i){return Promise.resolve(n.call(e,{data:t,contentType:!1,processData:!1,method:"POST",xhr:function(){var e=new window.XMLHttpRequest,t=i&&i.onProgress;return t&&e.upload.addEventListener("progress",function(e){e.total&&t(100*e.loaded/e.total)}),e}}))},t.UPLOAD_URL="https://uploads.services.disqus.com/api/3.0/media/create.json",t.uploadMediaUrl=function(n,a){var r,s=new window.FormData,l=t._extractFirstImageFile(n);return l?(s.append("upload",l),s.append("permanent",1),t._uploadViaApi(t.UPLOAD_URL,s,a).then(function(t){var n=t.response,a=e.first(e.values(n));if(!a||!a.ok)throw r=Error("Upload failed"),r.code=a&&a["error-code"],r;return new o(i,{mediaType:i.MEDIA_TYPES.IMAGE_UPLOAD,url:a.url,thumbnailUrl:a.url})},function(e){if(e.responseJSON&&4===e.responseJSON.code)throw r=Error("Upload failed"),r.code="not-authenticated",r;throw e})):(r=Error("No image file to upload"),r.code="invalid-content-type",Promise.reject(r))}}),define("core/views/media/DragDropUploadView",["underscore","backbone","core/utils"],function(e,t,n){"use strict";var i=n.stopEventHandler;return t.View.extend({events:{dragover:"_dragOn",dragenter:"_dragOn",dragleave:"_dragOff",dragexit:"_dragOff",drop:"_drop"},_dragOn:i(function(){this.trigger("uploader:dragEnter"),this._toggleDragPlaceholder(!0)}),_dragOff:i(function(){this._toggleDragPlaceholder(!1)}),_drop:i(function(e){this._toggleDragPlaceholder(!1);var t=e.originalEvent.dataTransfer.files;if(!t.length)return void this.trigger("uploader:dropError","No files");this.trigger("uploader:attachMedia",t)}),_toggleDragPlaceholder:e.throttle(function(e){this.trigger(e?"uploader:showPlaceholder":"uploader:hidePlaceholder")},50)})}),define("core/templates/postMediaUploadButton",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<a href="#" tabindex="-1" data-action="attach" class="attach" title="'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Upload Images",{name:"gettext",hash:{},data:o,loc:{start:{line:1,column:69},end:{line:1,column:96}}}))+'">\n<div class="wysiwyg__attach wysiwyg__attach-dims"\nrole="img"\naria-label="A"\n/>\n</a>\n<input type="file" data-role="media-upload" tabindex="-1" accept="image/*">\n'},useData:!0})}),define("core/views/media/UploadButtonView",["jquery","underscore","backbone","core/templates/postMediaUploadButton","core/utils"],function(e,t,n,i,o){"use strict";var a=o.stopEventHandler,r="input[type=file][data-role=media-upload]";return n.View.extend({events:function(){var e={"click [data-action=attach]":"_attachMedia"};return e["change "+r]="_selectorChange",e}(),initialize:function(e){this.template=e&&e.template||this.generateImageUploadButton},generateImageUploadButton:function(){return i({imageUrl:"https://c.disquscdn.com/next/embed/assets/img/attach.03c320b14aa9c071da30c904d0a0827f.svg"})},render:function(){return this.$el.html(this.template()),this},_attachMedia:a(t.throttle(function(){this.$(r).click()},1e3,{trailing:!1})),_selectorChange:function(t){var n=t.target,i=n.files;i.length&&(this.trigger("uploader:attachMedia",i),e(n).replaceWith(n.cloneNode()))}})}),define("core/templates/postMediaUploadProgress",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n<div class="media-progress-box">\n<div class="media-progress">\n<div class="bar" style="right: '+e.escapeExpression(e.lambda(null!=t?a(t,"remainingPerc"):t,t))+'%"></div>\n</div>\n</div>\n</li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"collection"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:9,column:9}}}))?a:""},useData:!0})}),define("core/views/media/UploadsProgressSubView",["backbone","core/templates/postMediaUploadProgress"],function(e,t){"use strict";return e.View.extend({initialize:function(){this.collection=new e.Collection,this.listenTo(this.collection,"add remove change",this.render)},hasVisible:function(){return!!this.collection.length},render:function(){return this.$el.html(t({collection:this.collection.toJSON()})),this}})}),define("core/templates/postMediaUploadRich",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"media"):t)?r(a,"title"):a,t))},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Media attachment",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:81},end:{line:6,column:111}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="publisher-border-color">\n<div class="media-box">\n<div class="media-ct">\n<div class="media-surface">\n<a href="'+s(r(null!=(a=null!=t?l(t,"media"):t)?l(a,"url"):a,t))+'" target="_blank">\n<img src="'+s(r(null!=(a=null!=t?l(t,"media"):t)?l(a,"thumbnailUrl"):a,t))+'" alt="'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?l(t,"media"):t)?l(a,"title"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:6,column:39},end:{line:6,column:118}}}))?a:"")+'">\n</a>\n</div>\n</div>\n</div>\n</li>\n'},useData:!0})}),define("core/views/media/UploadsRichSubView",["underscore","backbone","core/models/Media","core/UniqueModel","core/utils","core/templates/postMediaUploadRich"],function(e,t,n,i,o,a){"use strict";return t.View.extend({initialize:function(){this._hasVisible=!1,this.collection=new t.Collection([],{model:n,comparator:"index"}),this.listenTo(this.collection,"add remove reset sort change:thumbnailUrl change:mediaType change:editsFinished",this.render),this.listenTo(this.collection,"change:index",e.bind(this.collection.sort,this.collection))},render:function(){return this.$el.empty(),this._hasVisible=!1,this.collection.each(function(t){t.get("thumbnailUrl")&&(e.contains(n.WEBPAGE_TYPES,t.get("mediaType"))||t.get("editsFinished")&&(this.$el.append(a({media:t.toJSON()})),this._hasVisible=!0))},this),this},hasVisible:function(){return this._hasVisible},addMedia:function(e,t){var o=i.get(n,e.url);if(o)o.set(e);else{if(!e.editsFinished)return;o=new i(n,e),o.fetch(t)}return this.collection.add(o),o},updateFromText:function(t,n,i){if(!t)return void this.collection.reset();var a=o.bleachFindUrls(t);a=e.uniq(a,!1,function(e){return e.url});var r={};e.each(a,function(o){r[o.url]=!0;var a=e.pick(o,"index","url");(o.index<n&&n<=o.endIndex||"."===t[o.endIndex])&&!i.isPasteEvent||(a.editsFinished=!0),this.addMedia(a,i)},this);var s=this.collection.pluck("url");r=e.keys(r);var l=e.difference(s,r);this.collection.remove(this.collection.filter(function(t){return e.contains(l,t.get("url"))}))}})}),define("core/templates/postMediaUploads",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<ul data-role="media-progress-list"></ul>\n<ul data-role="media-rich-list"></ul>\n<div class="media-expanded empty" data-role="media-preview-expanded">\n<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="\ndata-role="media-preview-expanded-image" alt="'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Media preview placeholder",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:46},end:{line:6,column:85}}}))+'">\n</div>\n'},useData:!0})}),define("core/views/media/UploadsView",["backbone","core/views/media/UploadsProgressSubView","core/views/media/UploadsRichSubView","core/templates/postMediaUploads"],function(e,t,n,i){"use strict";return e.View.extend({initialize:function(){this.richView=new n,this.rich=this.richView.collection,this.uploadProgressView=new t,this.uploadProgress=this.uploadProgressView.collection,this.listenTo(this.rich,"all",this._updateEmpty),this.listenTo(this.uploadProgress,"all",this._updateEmpty)},render:function(){return this.richView.$el.detach(),this.uploadProgressView.$el.detach(),this.$el.html(i()),this._updateEmpty(),this.richView.setElement(this.$("[data-role=media-rich-list]")[0]),this.uploadProgressView.setElement(this.$("[data-role=media-progress-list]")[0]),this},clear:function(){this.rich.reset(),this.uploadProgress.reset()},_updateEmpty:function(){this.richView.hasVisible()||this.uploadProgressView.hasVisible()?this.$el.removeClass("empty"):this.$el.addClass("empty")}})}),define("core/mixins/withUploadForm",["underscore","backbone","core/strings","core/utils","core/utils/media/upload","core/utils/storage","core/views/media/DragDropUploadView","core/views/media/UploadButtonView","core/views/media/UploadsView"],function(e,t,n,i,o,a,r,s,l){"use strict";var c=n.get,u=function(){e.defaults(this,u.bothProto,u.uploadsProto,u.previewsProto)},d={"invalid-image-file":c("Unfortunately your image upload failed. Please verify that the file is valid and in a supported format (JPEG, PNG, or GIF)."),"invalid-content-type":c("Unfortunately your image upload failed. Please verify that the file is in a supported format (JPEG, PNG, or GIF)."),"file-too-large":c("Unfortunately your image upload failed. Please verify that your image is under 5MB."),"not-authenticated":c("You must be logged in to upload an image.")},h=c("Unfortunately your image upload failed. Please verify that your image is in a supported format (JPEG, PNG, or GIF) and under 5MB. If you continue seeing this error, please try again later.");return u.previewsProto={initMediaPreviews:function(t,n){this.mediaUploadsView=new l({el:t[0]}),this.mediaUploadsView.render(),this.updateLiveMediaDebounced=e.partial(e.debounce(this.updateLiveMedia,500),n,!1),this.stopListening(n,"keychange"),this.stopListening(n,"paste"),this.listenTo(n,{keychange:this.updateLiveMediaDebounced,paste:function(t,i){i&&i.fake||e.defer(e.bind(this.updateLiveMedia,this,n,!0))}}),this.updateLiveMedia(n,!0)},clearMediaPreviews:function(){this.mediaUploadsView&&this.mediaUploadsView.clear()},updateLiveMedia:function(e,t){if(this.mediaUploadsView){this.mediaUploadsView.richView.updateFromText(e.get(),e.offset(),{isPasteEvent:t,forum:this.thread.forum.id})}}},u.uploadsProto={initMediaUploads:function(e,t,n){this.mediaDragDropView&&this.stopListening(this.mediaDragDropView),this.mediaDragDropView=new r({el:t[0]}),this.listenTo(this.mediaDragDropView,{"uploader:attachMedia":function(){a.set("usedDragDrop",1),this.handleAttachMedia.apply(this,arguments)},"uploader:dragEnter":function(){this.$el.addClass("expanded")},"uploader:showPlaceholder":function(){e.show()},"uploader:hidePlaceholder":function(){e.hide()},"uploader:dropError":function(){this.alert(c("Sorry we didn't catch that. Try again?"),{type:"error",isUploadError:!0})}}),this.mediaUploadButtonView&&this.stopListening(this.mediaUploadButtonView),this.mediaUploadButtonView=new s({el:n[0]}),this.listenTo(this.mediaUploadButtonView,{"uploader:attachMedia":this.handleUploadViaButton}),this.mediaUploadButtonView.render()},handleUploadViaButton:function(e){if(e&&a.isPersistent&&!a.get("usedDragDrop")&&!i.isMobileUserAgent()){this.listenToOnce(this.alert(c("Did you know you can drag and drop images too? Try it now!")),"dismiss",function(){a.set("usedDragDrop",1)})}this.handleAttachMedia.apply(this,arguments)},handleAttachMedia:function(n,i){var a=this,r=new t.Model({remainingPerc:100});a.mediaUploadsView.uploadProgress.add(r),i=e.extend(i||{},{onProgress:function(e){r.set("remainingPerc",100-e)}});var s=function(){a.mediaUploadsView.uploadProgress.remove(r)};o.uploadMediaUrl(n,i).then(function(e){e.fetch({forum:a.thread.forum.id}),a.textarea.insertAtCursor(e.get("url")),a.updateLiveMedia(a.textarea,!0),a.dismissUploadError()}).catch(function(e){var t;e&&e.code&&(t=d[e.code]),t||(t=h),a.alert(t,{type:"error",isUploadError:!0})}).then(s,s)},dismissUploadError:function(){this.dismissAlert(function(e){return e.options&&e.options.isUploadError})},uploadSupported:o.uploadSupported,isUploadInProgress:function(){return this.mediaUploadsView&&this.mediaUploadsView.uploadProgress.length}},u.bothProto={initMediaViews:function(e){(e.mediaembedEnabled||e.gifPickerEnabled)&&this.initMediaPreviews(this.$("[data-role=media-preview]"),e.textarea),e.allowUploads&&this.initMediaUploads(this.$("[data-role=drag-drop-placeholder]"),this.$("[data-role=textarea]"),this.$("[data-role=media-uploader]"))}},u}),define("core/editable",[],function(){"use strict";function e(e){return e.replace(i," ")}function t(n,i,o){var r,s,l,c,u="",d=[];for("string"!=typeof o&&(o="\n\n"),c=0;c<n.length;++c)s=n[c],r=s.nodeName.toLowerCase(),1===s.nodeType?(l=i&&i(s),l?u+=l:a.hasOwnProperty(r)?(u&&d.push(u),u=t(s.childNodes,i,o)):u+="br"===r?"\n":t(s.childNodes,i,o)):3===s.nodeType&&(u+=e(s.nodeValue));return d.push(u),d.join(o)}var n=window.document,i=RegExp(String.fromCharCode(160),"gi"),o="h1 h2 h3 h4 h5 h6 p pre blockquote address ul ol dir menu li dl div form".split(" "),a={},r=0;for(r=0;r<o.length;r++)a[o[r]]=!0;var s=function(e,t,n){var i=this;if(!e||!e.contentEditable)throw Error("First argument must be contentEditable");this.elem=e,(this.emulateTextarea=e.getAttribute("plaintext-only")||t)&&(this.pasteHandler=function(e){var t=e&&e.clipboardData||window.clipboardData;t&&!t.getData("text")&&(e.preventDefault(),e.stopPropagation());var n=i.plainTextReformat,o=function(){n.timeout=null,n.call(i)};n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(o,0)},e.addEventListener("paste",this.pasteHandler));for(var o in n)n.hasOwnProperty(o)&&(this[o]=n[o])};return s.prototype={insertHTML:function(e){if(n.all){var t=n.selection.createRange();return t.pasteHTML(e),t.collapse(!1),t.select()}return n.execCommand("insertHTML",!1,e)},insertNode:function(e){var t,i,o;window.getSelection?(t=window.getSelection(),t.getRangeAt&&t.rangeCount&&(i=t.getRangeAt(0),i.deleteContents(),i.insertNode(e),i.collapse(!1),t.removeAllRanges(),t.addRange(i))):n.selection&&n.selection.createRange&&(i=n.selection.createRange(),o=3===e.nodeType?e.data:e.outerHTML,i.pasteHTML(o),i.collapse(!1))},getTextNodes:function(e){var t=this.elem;e&&e.nodeType?e=[e]:e||(e=t.childNodes);for(var n,i=[],o=0;o<e.length;++o)if(n=e[o])switch(n.nodeType){case 1:i=i.concat(this.getTextNodes(n.childNodes));break;case 3:/^\n\s+/.test(n.nodeValue)||i.push(n)}return i},text:function(e){var n,i,o,a=this.elem;try{i=Array.prototype.slice.call(a.childNodes)}catch(e){for(i=[],o=0;o<a.childNodes.length;++o)i.push(a.childNodes[o])}return n=t(i,e,this.emulateTextarea&&"\n"),n.replace(/^\s+|\s+$/g,"")},setText:function(e){e=e||"";var t,i,o,a=n.createDocumentFragment(),r=[e],s=r&&r.length;for(t=0;t<s;t++)i=r[t],o=this.createParagraph(i),a.appendChild(o);if(a.lastChild.appendChild(n.createElement("br")),this.elem.innerHTML="",this.elem.appendChild(a),"WebkitAppearance"in n.documentElement.style&&-1===window.navigator.userAgent.indexOf("Firefox")&&-1===window.navigator.userAgent.indexOf("MSIE")){var l=window.getSelection&&window.getSelection();l&&l.anchorNode===this.elem&&l.modify&&l.modify("move","forward","line")}},createParagraph:function(e){var t,i,o,a,r,s,l,c=n.createElement("p");for(o=e.split(/\r\n|\r|\n/),i=0,r=o.length;i<r;i++){for(a=o[i],l=this.getHtmlElements(a),t=0,s=l.length;t<s;t++)c.appendChild(l[t]);c.appendChild(n.createElement("br"))}return c.lastChild&&c.removeChild(c.lastChild),c},getHtmlElements:function(e){return[n.createTextNode(e)]},plainTextReformat:function(){if(!(this.elem.getElementsByTagName("p").length<=1)){this.emulateTextarea=!1;var e=this.text();this.emulateTextarea=!0,this.setText(e)}},removeNode:function(e){var t,i,o;window.getSelection?(t=e.previousSibling,e.parentNode.removeChild(e),i=window.getSelection(),o=n.createRange(),t&&(o.setStart(t,t.length),o.setEnd(t,t.length)),i.addRange(o)):e.parentNode.removeChild(e)},selectedTextNode:function(){var t,i,o,a,r,s,l,c,u,d=this.elem;if(window.getSelection)return t=window.getSelection(),t.anchorNode;if(n.selection.createRange){for(i=n.selection.createRange().duplicate();-1e3===i.moveStart("character",-1e3);)continue;var h=i.text;for(c=0;c<d.childNodes.length;++c)for(o=d.childNodes[c],r=this.getTextNodes(o),u=0;u<r.length;++u)if(a=r[u],l=e(a.nodeValue),h.indexOf(l)>-1)s=a,h=h.replace(l,"");else if(l.indexOf(h)>-1)return a;return s}},selectedTextNodeOffset:function(t){var i,o,a;if(window.getSelection){var r=window.getSelection();r&&r.anchorOffset&&(a=r.anchorOffset)}else if(t&&n.selection.createRange){var s=e(t.nodeValue);i=n.selection.createRange();var l=i.duplicate(),c=l.parentElement();for(o=0;0!==i.moveStart("character",-1)&&(0!==s.indexOf(e(i.text))&&c===i.parentElement());o++)l=i.duplicate(),c=l.parentElement();a=o}return isNaN(a)?0:a},offset:function(){function t(i,o){function r(e){l+=e[0];for(var t=1;t<e.length;++t)s.push(l),l=e[t]}"string"!=typeof o&&(o="\n\n");for(var s=[],l="",c=0;c<i.length;++c){var u=i[c],d=u.nodeName.toLowerCase();1===u.nodeType?a.hasOwnProperty(d)?(l&&(l+=o),r(t(u.childNodes,o))):"br"===d?l+="\n":r(t(u.childNodes,o)):3===u.nodeType&&(u===n.anchorNode?(l+=e(u.nodeValue.slice(0,n.anchorOffset)),s.push(l),l=e(u.nodeValue.slice(n.anchorOffset))):l+=e(u.nodeValue))}return s.push(l),s}var n=window.getSelection();if(!n||!n.anchorNode||3!==n.anchorNode.nodeType)return 0;var i,o=this.elem;try{i=Array.prototype.slice.call(o.childNodes)}catch(e){i=[];for(var r=0;r<o.childNodes.length;++r)i.push(o.childNodes[r])}var s=t(i,this.emulateTextarea&&"\n");if(1===s.length)return 0;var l=s[0].length,c=s.join(""),u=c.match(/\s+$/);if(u){var d=u[0].length;l=Math.min(l,c.length-d)}var h=c.match(/^\s+/);if(h){l-=h[0].length}return l},selectNodeText:function(t,i,o){var a,r,s=this.elem;if(window.getSelection)return a=window.getSelection(),a.removeAllRanges(),r=n.createRange(),r.setStart(t,i),r.setEnd(t,o),a.addRange(r),a;if(n.selection.createRange){r=n.selection.createRange();var l=e(t.nodeValue);if("body"===r.parentElement().nodeName.toLowerCase()){for(s.focus(),r=n.selection.createRange();-1e3===r.moveStart("character",-1e3);)continue;for(;1e3===r.moveEnd("character",1e3);)continue;var c=e(r.text),u=c.indexOf(l);u>0&&r.moveStart("character",u+2),r.collapse()}for(;-1===r.moveStart("character",-1)&&0!==l.indexOf(e(r.text));)continue;for(;1===r.moveEnd("character",1)&&l!==e(r.text);)continue;return r.moveStart("character",i),r.moveEnd("character",-1*(o-i-r.text.length)),r.select(),r}}},s.normalizeSpace=e,s}),define("core/utils/html/nodeTypes",[],function(){"use strict";return{isP:function(e){return"p"===e.nodeName.toLowerCase()},isDiv:function(e){return"div"===e.nodeName.toLowerCase()},isText:function(e){return"#text"===e.nodeName.toLowerCase()},isBr:function(e){return"br"===e.nodeName.toLowerCase()},isButton:function(e){return"button"===e.nodeName.toLowerCase()},isNewline:function(e){return"br"===e.nodeName.toLowerCase()||"#text"===e.nodeName.toLowerCase()&&"\n"===e.nodeValue},isPorDiv:function(e){return"p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase()}}}),define("core/CappedStorage",["core/utils/storage"],function(e){"use strict";var t=function(e,t){this.max=e||10,this.queueKey=t||"__queue",this.getQueue()||this.setQueue([])};return t.prototype.set=function(t,n){var i=this.getQueue()||this.setQueue([]);i.length===this.max&&e.remove(i.shift()),e.set(t,n),i.push(t),this.setQueue(i)},t.prototype.get=function(t){return e.get(t)},t.prototype.remove=function(t){e.remove(t);for(var n=this.getQueue()||[],i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}this.setQueue(n)},t.prototype.clear=function(){e.clear(),this.setQueue([])},t.prototype.getQueue=function(){return e.get(this.queueKey)},t.prototype.setQueue=function(t){return e.set(this.queueKey,t),t},t}),define("core/extensions/jquery.autoresize",["jquery","underscore"],function(e,t){"use strict";return e.fn.autoresize=function(n){var i=t.extend({extraSpace:0,maxHeight:1e3},n);return this.each(function(){var n=e(this).css({resize:"none",overflow:"hidden"}),o=n[0].contentEditable+""=="true"?"html":"val",a="html"===o?"<br>":"\n",r=n.height(),s=function(){var i={};t.each(i,function(e,t){i[t]=n.css(t)});var o=e(n[0].cloneNode(!0));return o.removeAttr("id").removeAttr("name").css({visibility:"hidden",position:"absolute",top:"-9999px",left:"-9999px",contentEditable:!1}).css(i).attr("tabIndex","-1"),o.insertAfter(n[0]),o}(),l=null,c=function(){s[0].style.height=0,s[o](n[o]()+a),s.scrollTop(s[0].scrollHeight);var e=Math.max(s[0].scrollHeight,r)+parseInt(i.extraSpace,10);i.maxHeight&&(e>=i.maxHeight?(n.css("overflow",""),e=i.maxHeight):n.css("overflow","hidden")),l!==e&&(l=e,n.height(e),n.trigger&&n.trigger("resize"))},u=t.throttle(c,500);n.bind("keyup",function(e){13===e.keyCode?c():u()}).bind("paste",c).css("overflow","hidden"),c()})},e}),define("core/views/TextareaView",["underscore","jquery","backbone","core/utils","core/utils/html/nodeTypes","core/CappedStorage","core/extensions/jquery.autoresize"],function(e,t,n,i,o,a){"use strict";return n.View.extend({events:{"keydown  [data-role=editable]":"handleKeyDown","keyup    [data-role=editable]":"handleKeyUp","paste    [data-role=editable]":"handlePaste","focusin  [data-role=editable]":"handleFocusIn","blur     [data-role=editable]":"handleBlur"},initialize:function(t){t=t||{},this.storageKey=t.storageKey,this.value=t.value||this.getDraft()[0],this.history=[this.value],this.historyPosition=0,this.placeholder=t.placeholder,this.selectionIndices={start:0,end:0,endElemInd:0,endElemSelectionInd:0,startElemInd:0,startElemSelectionInd:0},this.inputFixed=!1,this.listenTo(this,"keychange",e.debounce(this.saveDraft,this.constructor.SAVE_DRAFT_INTERVAL))},render:function(){return this.$input=this.createInput(),this.set(this.value),this.$el.append(this.$input),this.$input.autoresize({maxHeight:this.constructor.MAX_TEXTAREA_HEIGHT}),this},createInput:function(){return t("<textarea>").attr({class:"textarea",placeholder:this.placeholder,"data-role":"editable"})},resize:function(){this.$input.trigger("paste",{fake:!0})},get:function(){return this.$input.val().replace(/^\s+|\s+$/g,"")},getSelected:function(){var e=this.$input[0];return"number"==typeof e.selectionStart?this.$input.val().substring(e.selectionStart,e.selectionEnd):""},offset:function(){var e=this.$input[0],t=this.$input.val(),n="number"==typeof e.selectionStart?e.selectionStart:0,i=t.match(/\s+$/);if(i){var o=i[0].length;n=Math.min(n,t.length-o)}var a=t.match(/^\s+/);if(a){var r=a[0].length;n=Math.max(n-r,0)}return n},insertAtCursor:function(e){this.focus();var t=this.get(),n=this.offset(),o=i.insertWithWhitespace(t,n,e),a=this.$input[0];if(this.set(o),a.setSelectionRange){var r=o.indexOf(e,n)+e.length+1;a.setSelectionRange(r,r)}},insertAroundSelection:function(e,t){this.focus();var n,i,o=this.$input[0];"number"==typeof o.selectionStart?(n=o.selectionStart,i=o.selectionEnd):n=i=0;var a=this.get();this.set(a.substring(0,n)+e+a.substring(n,i)+t+a.substring(i)),o.setSelectionRange&&o.setSelectionRange(n+e.length,i+e.length)},set:function(e){this.$input.val(e)},clear:function(){this.set("")},focus:function(){this.$input.focus()},handleKeyDown:function(e){this.trigger("keydown",e)},handleKeyUp:function(e){this.trigger("keychange",e)},handlePaste:function(e,t){t=t||{},this.trigger(t.fake?"paste":"paste keychange"),this.$input.trigger("resize")},handleFocusIn:function(){this.fixInputStructure(),this.trigger("focus")},handleBlur:function(){this.trigger("blur")},saveDraft:function(){if(this.storageKey)return t.trim(this.get())?void this.constructor.storage.set(this.storageKey,this.toJSON()):void this.removeDraft()},toJSON:function(){return[this.get(),t.now()]},getDraft:function(){var e=[""];if(!this.storageKey)return e;var n=this.constructor.storage.get(this.storageKey);return n?(e=n,e.length?t.now()-e[1]>=this.constructor.DRAFT_MAX_AGE?(this.removeDraft(),[""]):e:[""]):e},removeDraft:function(){this.storageKey&&this.constructor.storage.remove(this.storageKey)},fixInputStructure:function(){var e,t,n,a,r,s,l,c=!1,u=!1,d=window.document,h=this.$input[0];if(h.type&&"textarea"===h.type);else if(i.browser.isChrome())0===h.childNodes.length?(t=h.appendChild(d.createElement("p")),t.appendChild(d.createTextNode("\n")),c=!0):(e=h.childNodes[0],e.childNodes.forEach(function(t){o.isBr(t)&&e.replaceChild(d.createTextNode("\n"),t)}));else if(i.browser.isIE()){if(0===h.childNodes.length)n=d.createElement("p"),n.appendChild(d.createTextNode("")),h.appendChild(n),c=!0;else for(r=h.childNodes.length,l=0;l<r;l++)if(o.isP(h.childNodes[l]))if(0===(a=h.childNodes[l].childNodes.length))h.childNodes[l].appendChild(d.createTextNode("")),
1===r&&(c=!0);else if(1===a)o.isBr(h.childNodes[l].childNodes[0])&&(h.childNodes[l].replaceChild(d.createTextNode(""),h.childNodes[l].childNodes[0]),1===r&&(c=!0));else for(;a>0;)s=h.childNodes[l].childNodes[0],1===a&&o.isBr(s)?(h.childNodes[l].replaceChild(d.createTextNode(""),s),a-=1):2===a&&o.isBr(s)&&o.isText(h.childNodes[l].childNodes[1])&&this.inputFixed?(n=d.createElement("p"),n.appendChild(d.createTextNode("")),h.insertBefore(n,h.childNodes[l]),l+=1,r+=1,h.childNodes[l].removeChild(s),a-=2,this.selectionIndices={startElemInd:l,endElemInd:l,startElemSelectionInd:0,endElemSelectionInd:0},u=!0):2===a&&o.isText(s)&&o.isBr(h.childNodes[l].childNodes[1])?(this.inputFixed&&(n=d.createElement("p"),n.appendChild(d.createTextNode("")),l===r-1?h.appendChild(n):h.insertBefore(n,h.childNodes[l+1]),r+=1,this.selectionIndices={startElemInd:l+1,endElemInd:l+1,startElemSelectionInd:0,endElemSelectionInd:0},u=!0),h.childNodes[l].removeChild(h.childNodes[l].childNodes[1]),a-=2):a>2&&o.isText(s)&&o.isBr(h.childNodes[l].childNodes[1])?(n=d.createElement("p"),n.appendChild(d.createTextNode(s.nodeValue)),h.insertBefore(n,h.childNodes[l]),l+=1,r+=1,h.childNodes[l].removeChild(h.childNodes[l].childNodes[1]),h.childNodes[l].removeChild(s),a-=2):a-=1}else if(i.browser.isFirefox()){if(1===h.childNodes.length&&o.isP(h.childNodes[0])&&h.childNodes[0].childNodes.length>2){for(a=h.childNodes[0].childNodes.length,l=0;l<a;l++)s=h.childNodes[0].childNodes[l],o.isText(s)?(n=d.createElement("p"),n.appendChild(d.createTextNode(s.nodeValue)),l<a-1&&o.isBr(h.childNodes[0].childNodes[l+1])&&(l+=1)):o.isBr(s)&&(n=d.createElement("p"),n.appendChild(d.createElement("br"))),h.appendChild(n);h.removeChild(h.childNodes[0])}else 1===h.childNodes.length&&o.isBr(h.childNodes[0])?(h.removeChild(h.childNodes[0]),n=d.createElement("p"),n.appendChild(d.createElement("br")),h.appendChild(n)):0===h.childNodes.length&&(n=d.createElement("p"),n.appendChild(d.createElement("br")),h.appendChild(n),c=!0);for(l=0;l<h.childNodes.length;l++){var m=h.childNodes[l];o.isP(m)&&1===m.childNodes.length&&o.isBr(m.childNodes[0])?m.insertBefore(d.createTextNode(""),m.childNodes[0]):o.isDiv(m)&&(n=d.createNode("P"),1===m.childNodes.length&&o.isBr(m.childNodes[0])?(n.appendChild(d.createTextNode("")),n.appendChild(d.createNode("BR"))):2===m.childNodes.length&&o.isText(m.childNodes[0])&&m.childNodes[0].nodeValue.length>0&&o.isBr(m.childNodes[1])&&n.appendChild(d.createTextNode(m.childNodes[0].nodeValue)),h.replaceChild(n,m))}}else if(i.browser.isSafari()||i.browser.isEdge())if(0!==h.childNodes.length&&o.isP(h.childNodes[0])){for(e=h.childNodes[0],a=e.childNodes.length,l=0;l<a;l+=1)o.isBr(e.childNodes[l])&&(0===l||o.isBr(e.childNodes[l-1]))&&(e.insertBefore(d.createTextNode(""),e.childNodes[l]),l===a-1&&(c=!0));for(l=0;l<a-1;l+=1)o.isText(e.childNodes[l])&&""===e.childNodes[l].nodeValue&&o.isText(e.childNodes[l+1])&&(e.removeChild(e.childNodes[l]),l-=1,a-=1)}else{for(n=d.createElement("p"),n.appendChild(d.createTextNode("")),n.appendChild(d.createElement("br"));h.firstChild;)h.removeChild(h.firstChild);h.appendChild(n),c=!0}else if(i.browser.isOpera())if(0===h.childNodes.length)n=d.createElement("p"),n.appendChild(d.createTextNode("\n")),h.appendChild(n),c=!0;else for(e=h.childNodes[0],l=0;l<e.childNodes.length;l++)o.isBr(e.childNodes[l])&&e.replaceChild(d.createTextNode("\n"),e.childNodes[l]);this.inputFixed=!0,u?this.selectText():c&&this.focusEndOfText()},focusEndOfText:function(){var e,t=this.$input[0],n=0,a=0,r=0,s=0;i.browser.isChrome()||i.browser.isOpera()?(e=t.childNodes[0],n=a=e.childNodes.length-1,r=s=e.childNodes[n].nodeValue.length):i.browser.isSafari()||i.browser.isEdge()?(e=t.childNodes[0],n=a=o.isText(e.childNodes[e.childNodes.length-1])?e.childNodes.length-1:e.childNodes.length-2,r=s=e.childNodes[n].nodeValue.length):(i.browser.isFirefox()||i.browser.isIE())&&(n=a=t.childNodes.length-1,r=t.childNodes[n].childNodes[0].nodeValue.length,s=r),this.selectionIndices={startElemInd:n,startElemSelectionInd:r,endElemInd:a,endElemSelectionInd:s},this.selectText()},getWhichChildIndex:function(e,t){for(var n=0;n<e.childNodes.length;n++)if(e.childNodes[n]===t)return n;return-1},getNodeLength:function(e){return o.isBr(e)?1:e.nodeValue.length},placeholderSetSelection:function(){var e,t,n=window.getSelection();this.$input[0].type&&"textarea"===this.$input[0].type?(e=this.$input[0].selectionStart,t=this.$input[0].selectionEnd):"DIV"===n.anchorNode.tagName?(e=0,t=this.get().length):"P"===n.anchorNode.tagName?e=t=this.get().length:(e=Math.min(n.focusOffset,n.anchorOffset),t=Math.max(n.focusOffset,n.anchorOffset)),this.selectionIndices={start:e,end:t,endElemInd:0,endElemSelectionInd:0,startElemInd:0,startElemSelectionInd:0}},setSelection:function(){var e,t,n,a,r,s,l;this.fixInputStructure();var c=this.$input[0],u=!1,d=window.getSelection();if(c.type&&"textarea"===c.type)t=c.selectionStart,n=c.selectionEnd;else if(d.rangeCount){var h=d.getRangeAt(0);if(i.browser.isChrome()){for(e=c.childNodes[0],t=a=0;e.childNodes[a]!==h.startContainer;)t+=this.getNodeLength(e.childNodes[a]),a+=1;if(s=h.startOffset,t+=h.startOffset,h.collapsed)r=a,n=t,l=s;else if(h.startContainer===h.endContainer)r=a,l=h.endOffset,n=t+(h.endOffset-h.startOffset);else{for(r=a,n=t-h.startOffset;e.childNodes[r]!==h.endContainer;)n+=this.getNodeLength(e.childNodes[r]),r+=1;o.isNewline(e.childNodes[r])?(l=this.getNodeLength(e.childNodes[r-1]),r-=1):(n+=h.endOffset,l=h.endOffset)}}else if(i.browser.isIE())o.isDiv(h.startContainer)&&o.isDiv(h.endContainer)&&h.collapsed?(a=c.childNodes.length-1,r=c.childNodes.length-1,s=c.childNodes[a].childNodes[0].nodeValue.length,l=c.childNodes[r].childNodes[0].nodeValue.length,u=!0):o.isDiv(h.startContainer)&&o.isDiv(h.endContainer)&&!h.collapsed?(a=h.startOffset,r=h.endOffset-1,s=0,l=c.childNodes[r].childNodes[0].nodeValue.length):o.isText(h.startContainer)&&o.isText(h.endContainer)?(a=this.getWhichChildIndex(c,h.startContainer.parentNode),r=this.getWhichChildIndex(c,h.endContainer.parentNode),s=h.startOffset,l=h.endOffset):o.isText(h.startContainer)&&o.isDiv(h.endContainer)?(a=this.getWhichChildIndex(c,h.startContainer.parentNode),r=h.endOffset-1,s=h.startOffset,l=c.childNodes[r].childNodes[0].nodeValue.length):(a=0,r=0,s=0,l=0);else if(i.browser.isFirefox())o.isDiv(h.startContainer)&&o.isDiv(h.endContainer)&&h.startContainer===c&&h.endContainer===c&&h.collapsed?(a=c.childNodes.length-1,r=c.childNodes.length-1,s=c.childNodes[a].childNodes[0].nodeValue.length,l=c.childNodes[r].childNodes[0].nodeValue.length,u=!0):o.isDiv(h.startContainer)&&o.isDiv(h.endContainer)&&h.startContainer===c&&h.endContainer===c&&!h.collapsed?(a=h.startOffset,r=h.endOffset-1,s=0,l=c.childNodes[r].childNodes[0].nodeValue.length):o.isDiv(h.startContainer)&&o.isText(h.endContainer)&&h.startContainer===c?(a=0,r=this.getWhichChildIndex(c,h.endContainer.parentNode),s=0,l=h.endOffset):o.isDiv(h.startContainer)&&o.isP(h.endContainer)&&h.startContainer===c?(a=0,r=this.getWhichChildIndex(c,h.endContainer),s=0,l=c.childNodes[r].childNodes[0].nodeValue.length):o.isText(h.startContainer)&&o.isText(h.endContainer)?(a=this.getWhichChildIndex(c,h.startContainer.parentNode),r=this.getWhichChildIndex(c,h.endContainer.parentNode),s=h.startOffset,l=h.endOffset):o.isText(h.startContainer)&&o.isP(h.endContainer)?(a=this.getWhichChildIndex(c,h.startContainer.parentNode),r=this.getWhichChildIndex(c,h.endContainer),s=h.startOffset,l=a===r?c.childNodes[r].childNodes[0].nodeValue.length:0):o.isP(h.startContainer)&&o.isText(h.endContainer)?(a=this.getWhichChildIndex(c,h.startContainer),r=this.getWhichChildIndex(c,h.endContainer.parentNode),s=0,l=h.endOffset):o.isP(h.startContainer)&&o.isP(h.endContainer)?(a=this.getWhichChildIndex(c,h.startContainer),r=this.getWhichChildIndex(c,h.endContainer),s=0,l=c.childNodes[r].childNodes[0].nodeValue.length):(a=0,r=0,s=0,l=0);else if(i.browser.isSafari()||i.browser.isEdge())e=c.childNodes[0],o.isText(h.startContainer)?(a=this.getWhichChildIndex(e,h.startContainer),s=h.startOffset):o.isP(h.startContainer)?(a=h.startOffset<e.childNodes.length&&o.isText(e.childNodes[h.startOffset])?h.collapsed?h.startOffset:h.startOffset-2:h.startOffset-1,s=e.childNodes[a].nodeValue.length):o.isDiv(h.startContainer)&&(h.collapsed?(a=o.isText(e.childNodes[e.childNodes.length-1])?e.childNodes.length-1:e.childNodes.length-2,s=e.childNodes[a].nodeValue.length):(a=0,s=0)),o.isText(h.endContainer)?(r=this.getWhichChildIndex(e,h.endContainer),l=h.endOffset):o.isP(h.endContainer)?(r=h.endOffset<e.childNodes.length&&o.isText(e.childNodes[h.endOffset])?h.collapsed?h.endOffset:h.endOffset-2:h.endOffset-1<e.childNodes.length&&o.isText(e.childNodes[h.endOffset-1])?h.endOffset-1:h.endOffset-1<e.childNodes.length&&o.isBr(e.childNodes[h.endOffset-1])?h.endOffset-2:e.childNodes.length-2,l=e.childNodes[r].nodeValue.length):o.isDiv(h.endContainer)&&(r=o.isText(e.childNodes[e.childNodes.length-1])?e.childNodes.length-1:e.childNodes.length-2,l=e.childNodes[a].nodeValue.length);else{if(!i.browser.isOpera())return this.placeholderSetSelection();e=c.childNodes[0],a=this.getWhichChildIndex(e,h.startContainer),r=this.getWhichChildIndex(e,h.endContainer),s=h.startOffset,l=h.endOffset}}else this.focusEndOfText();this.selectionIndices={start:t,end:n,startElemInd:a,startElemSelectionInd:s,endElemInd:r,endElemSelectionInd:l},u&&this.selectText()},addTagTextarea:function(e){var t,n,i,o=this.selectionIndices.start,a=this.selectionIndices.end,r=this.selectionIndices.startElemInd,s=this.selectionIndices.endElemInd,l=this.selectionIndices.startElemSelectionInd,c=this.selectionIndices.endElemSelectionInd;switch(e){case"a":t='<a href="#">',n="</a>";break;default:t="<"+e+">",n="</"+e+">"}var u=this.get(),d=u.slice(0,o),h=u.slice(o,a),m=u.slice(a),p=RegExp("<"+e+"[^<>]*>"),f=RegExp(n+"$"),g=h.match(p),v=h.match(f);g&&v&&0===g.index&&v.index===a-o-n.length?(i=h.replace(p,"").replace(f,""),a-=g[0].length+v[0].length,c-=g[0].length+v[0].length):(i=t+h+n,a+=t.length+n.length,c+=t.length+n.length),this.selectionIndices={start:o,end:a,startElemInd:r,endElemInd:s,startElemSelectionInd:l,endElemSelectionInd:c},this.set(d+i+m),this.debouncedSaveHistory(),this.selectText()},addTag:function(e){var t,n,o,a,r,s,l,c,u,d,h,m,p,f=window.document,g=this.$input[0],v=this.selectionIndices.start,b=this.selectionIndices.end,y=this.selectionIndices.startElemInd,w=this.selectionIndices.endElemInd,x=this.selectionIndices.startElemSelectionInd,k=this.selectionIndices.endElemSelectionInd;switch(e){case"a":t='<a href="#">',n="</a>";break;default:t="<"+e+">",n="</"+e+">"}var C=RegExp("<"+e+"[^<>]*>"),_=RegExp(n+"$");if(g.type&&"textarea"===g.type)return this.addTagTextarea(e);if(i.browser.isChrome()||i.browser.isSafari()||i.browser.isOpera()||i.browser.isEdge())u=g.childNodes[0],d=u.childNodes[y],h=u.childNodes[w],m=d.nodeValue,p=h.nodeValue,a=m.slice(x).match(C),r=p.slice(0,k).match(_),a&&r&&0===a.index&&r.index===k-n.length?(y===w?(s=m.slice(0,x)+m.slice(x,k).replace(C,"").replace(_,"")+m.slice(k),u.replaceChild(f.createTextNode(s),d),k-=a[0].length+r[0].length):(l=m.slice(0,x)+m.slice(x).replace(C,""),c=p.slice(0,k).replace(_,"")+p.slice(k),u.replaceChild(f.createTextNode(l),d),u.replaceChild(f.createTextNode(c),h),k-=r[0].length),b-=a[0].length+r[0].length):(y===w?(s=m.slice(0,x)+t+m.slice(x,k)+n+m.slice(k),u.replaceChild(f.createTextNode(s),d),k+=t.length+n.length):(l=m.slice(0,x)+t+m.slice(x),c=p.slice(0,k)+n+p.slice(k),u.replaceChild(f.createTextNode(l),d),u.replaceChild(f.createTextNode(c),h),k+=n.length),b+=t.length+n.length);else if(i.browser.isFirefox()||i.browser.isIE()){var P=g.childNodes[this.selectionIndices.startElemInd],T=g.childNodes[this.selectionIndices.endElemInd];d=P.childNodes[0],h=T.childNodes[0],m=d.nodeValue,p=h.nodeValue,a=m.slice(x).match(C),r=p.slice(0,k).match(_),a&&r&&0===a.index&&r.index===k-n.length?(y===w?(s=m.slice(0,x)+m.slice(x,k).replace(C,"").replace(_,"")+m.slice(k),P.replaceChild(f.createTextNode(s),d),k-=a[0].length+r[0].length):(l=m.slice(0,x)+m.slice(x).replace(C,""),c=p.slice(0,k).replace(_,"")+p.slice(k),P.replaceChild(f.createTextNode(l),d),T.replaceChild(f.createTextNode(c),h),k-=r[0].length),b-=a[0].length+r[0].length):(y===w?(s=m.slice(0,x)+t+m.slice(x,k)+n+m.slice(k),P.replaceChild(f.createTextNode(s),d),k+=t.length+n.length):(l=m.slice(0,x)+t+m.slice(x),c=p.slice(0,k)+n+p.slice(k),P.replaceChild(f.createTextNode(l),d),T.replaceChild(f.createTextNode(c),h),k+=n.length),b+=t.length+n.length)}else{var O=this.get(),S=O.slice(0,v),E=O.slice(v,b),F=O.slice(b);a=E.match(C),r=E.match(_),a&&r&&0===a.index&&r.index===b-v-n.length?(o=E.replace(C,"").replace(_,""),b=b-a[0].length-r[0].length):(o=t+E+n,b=b+t.length+n.length),this.set(S+o+F)}this.debouncedSaveHistory(),this.selectionIndices={start:v,end:b,startElemInd:y,startElemSelectionInd:x,endElemInd:w,endElemSelectionInd:k},this.selectText()},selectText:function(){var e,t,n,o,a=this.$input[0],r=window.document.createRange(),s=this.selectionIndices.start,l=this.selectionIndices.end,c=a.childNodes[0],u=window.getSelection();if(a.type&&"textarea"===a.type)a.setSelectionRange(s,l);else if(i.browser.isChrome()||i.browser.isSafari()||i.browser.isOpera()||i.browser.isEdge())e=c.childNodes[this.selectionIndices.startElemInd],t=this.selectionIndices.startElemSelectionInd,n=c.childNodes[this.selectionIndices.endElemInd],o=this.selectionIndices.endElemSelectionInd,r.setStart(e,t),r.setEnd(n,o),u.removeAllRanges(),u.addRange(r);else if(i.browser.isFirefox()||i.browser.isIE())e=a.childNodes[this.selectionIndices.startElemInd].childNodes[0],t=this.selectionIndices.startElemSelectionInd,n=a.childNodes[this.selectionIndices.endElemInd].childNodes[0],o=this.selectionIndices.endElemSelectionInd,r.setStart(e,t),r.setEnd(n,o),(!i.browser.isIE()||u.rangeCount>0&&u.getRangeAt(0).getClientRects().length>0)&&u.removeAllRanges(),u.addRange(r);else{var d=c.childNodes[0];r.setStart(d,s),r.setEnd(d,l),u.removeAllRanges(),u.addRange(r)}(i.browser.isEdge()||a.type&&"textarea"===a.type)&&this.focus()},debouncedSaveHistory:e.debounce(function(){var e=this.toJSON()[0];e!==this.history[this.historyPosition]&&(this.historyPosition!==this.history.length-1&&(this.history=this.history.slice(0,this.historyPosition+1)),this.history.push(e),this.historyPosition+=1)},200),undoTextarea:function(){this.historyPosition>0&&(this.historyPosition-=1,this.set(this.history[this.historyPosition]),this.fixInputStructure(),this.focusEndOfText())},redoTextarea:function(){this.historyPosition<this.history.length-1&&(this.historyPosition+=1,this.set(this.history[this.historyPosition]),this.fixInputStructure(),this.focusEndOfText())}},{MAX_TEXTAREA_HEIGHT:350,SAVE_DRAFT_INTERVAL:500,DRAFT_MAX_AGE:864e5,storage:new a(5,"drafts.queue")})}),define("core/views/ContentEditableView",["jquery","underscore","core/editable","core/views/TextareaView"],function(e,t,n,i){"use strict";var o=window.document,a=i,r=a.prototype;return a.extend({events:t.defaults({"focusout [data-role=editable]":"handleFocusOut","click .placeholder":"handlePlaceholderClick"},r.events),initialize:function(){r.initialize.apply(this,arguments),this.hasFocus=!1,this._selectionRange=null},saveSelection:function(){var e=window.getSelection();this._selectionRange=e&&e.rangeCount&&e.getRangeAt(0)},restoreSelection:function(){if(this._selectionRange){var e=window.getSelection();e.removeAllRanges(),e.addRange(this._selectionRange),this._selectionRange=null}},render:function(){return this.$input=this.createInput(),this.$el.append(this.$input),this.set(this.value),this.renderPlaceholder(),this},createInput:function(){var t=e("<div>").attr({class:"textarea",tabIndex:0,role:"textbox","aria-multiline":"true",contenteditable:"PLAINTEXT-ONLY","data-role":"editable"}).css({overflow:"auto","word-wrap":"break-word","max-height":this.constructor.MAX_TEXTAREA_HEIGHT+"px"}),i=t[0];return"plaintext-only"!==i.contentEditable&&(i.contentEditable="true"),this.content=new n(i,!0),t},renderPlaceholder:function(){var t=this.placeholder;t&&(this.$input.attr("aria-label",t),this.$placeholder=e('<span class="placeholder">'+t+"</span>"),this.updatePlaceholderDisplay())},updatePlaceholderDisplay:function(){this.$placeholder&&(this.hasFocus||this.content.text()?this.$placeholder.remove():this.$el.prepend(this.$placeholder))},handlePlaceholderClick:function(){this.$input.focus()},handleFocusIn:function(){r.handleFocusIn.call(this),this.restoreSelection(),this.hasFocus=!0,this.updatePlaceholderDisplay()},handleFocusOut:function(){this.saveSelection(),this.hasFocus=!1,this.updatePlaceholderDisplay()},get:function(){return this.content.text()},getSelected:function(){return this.hasFocus&&window.getSelection?""+window.getSelection():this._selectionRange?""+this._selectionRange:""},offset:function(){return this.content.offset()},set:function(e){this.content.setText(e),this.resize(),this.updatePlaceholderDisplay()},insertAtCursor:function(e){this.focus();var t=" "+e+" ";o.queryCommandSupported&&o.queryCommandSupported("insertText")&&o.execCommand("insertText",!1,t)||this.content.insertNode(o.createTextNode(t))},clear:function(){r.clear.call(this),t.defer(function(e){e.$input.blur()},this)},insertAroundSelection:function(e,t){this.focus();var n=window.getSelection();if(n.rangeCount){var i=n.getRangeAt(0),a=i.cloneRange();a.collapse(!1);var r=o.createTextNode(t);a.insertNode(r);var s=i.cloneRange();s.collapse(!0);var l=o.createTextNode(e);s.insertNode(l),i.setStart(l,e.length),i.setEnd(r,0),n.removeAllRanges(),n.addRange(i)}}})}),define("home/templates/postReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="avatar">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"user"):t)?r(a,"isRegistered"):a,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:9,column:0},end:{line:15,column:7}}}))?a:"")+"</div>\n"},2:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=e.invokePartial(r(i,"userAvatar"),null!=t?r(t,"user"):t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},4:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="user">\n<img data-role="user-avatar" src="'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"user"):t)?r(a,"avatar"):a)?r(a,"cache"):a,t))+'"/>\n</span>\n'},6:function(e,t,n,i,o){return'style="margin-left: 0"'},8:function(e,t,n,i,o){return'<div class="media-preview empty" data-role="media-preview"></div>\n'},10:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="post-actions">\n<ul class="wysiwyg">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"displayMediaUploadButton"):t,{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:33,column:0},end:{line:35,column:7}}}))?a:"")+"</ul>\n"+(null!=(a=s(n,"if").call(r,null!=(a=null!=t?s(t,"user"):t)?s(a,"isRegistered"):a,{name:"if",hash:{},fn:e.program(13,o,0),inverse:e.noop,data:o,loc:{start:{line:38,column:0},end:{line:48,column:7}}}))?a:"")+"</div>\n"},11:function(e,t,n,i,o){return'<li data-role="media-uploader"></li>\n'},13:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="logged-in">\n<section>\n<div class="temp-post" style="text-align: right">\n<button class="btn">\n'+e.escapeExpression(r(n,"gettext").call(a,"Post as %(username)s",{name:"gettext",hash:{username:r(n,"getPartial").call(a,"userSpan",null!=t?r(t,"user"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:43,column:44},end:{line:43,column:72}}})},data:o,loc:{start:{line:43,column:0},end:{line:43,column:74}}}))+"\n</button>\n</div>\n</section>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert error" style="display:none" role="alert">\n<a class="close" data-action="dismiss-alert" title="'+s(l(n,"gettext").call(r,"Dismiss",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:52},end:{line:2,column:73}}}))+'">×</a>\n<span></span>\n</div>\n\n<div class="postbox">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showAvatar"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:0},end:{line:17,column:7}}}))?a:"")+'\n<div class="textarea-wrapper" '+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"showAvatar"):t,{name:"unless",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:30},end:{line:19,column:85}}}))?a:"")+'\ndata-role="textarea" dir="auto">\n<div data-role="drag-drop-placeholder" class="media-drag-hover" style="display: none">\n<div class="drag-text">\n&#11015; '+s(l(n,"gettext").call(r,"Drag and drop your images here to upload them.",{name:"gettext",hash:{},data:o,loc:{start:{line:23,column:9},end:{line:23,column:69}}}))+"\n</div>\n</div>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"displayMediaPreviews"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:0},end:{line:28,column:7}}}))?a:"")+'<div class="edit-alert" role="postbox-alert"></div>\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showSubmitButton"):t,{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:30,column:0},end:{line:50,column:7}}}))?a:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/blacklistErrorMessage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"We are unable to post your comment because %(blocker)s has placed your account in a timeout. You will be able to comment again when your timeout expires.",{name:"gettext",hash:{blocker:null!=t?a(t,"blocker"):t},data:o,loc:{start:{line:2,column:0},end:{line:2,column:183}}}))+"\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"We are unable to post your comment because you have been banned by %(blocker)s.",{name:"gettext",hash:{blocker:null!=t?a(t,"blocker"):t},data:o,loc:{start:{line:4,column:0},end:{line:4,column:110}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(n,"if").call(r,null!=t?s(t,"isTemp"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?a:"")+'<a target="_blank" href="https://help.disqus.com/customer/portal/articles/466223-who-deleted-or-removed-my-comment-">'+e.escapeExpression(s(n,"gettext").call(r,"Find out more.",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:117},end:{line:6,column:146}}}))+"</a>\n"},useData:!0})}),define("home/templates/mustVerifyEmail",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'Disqus.com requires you to\n<a href="#" data-action="verify-email">verify your email address</a> before posting\n'},useData:!0})}),define("home/views/PostReplyView",["jquery","underscore","backbone","core/bus","core/mixins/withAlert","core/mixins/withUploadForm","core/strings","core/views/ContentEditableView","core/views/TextareaView","home/templates/postReply","home/templates/blacklistErrorMessage","home/templates/mustVerifyEmail"],function(e,t,n,i,o,a,r,s,l,c,u,d){"use strict";var h=r.get,m=n.View.extend({tagName:"form",className:"reply-form",events:{"click [data-action=cancel]":"hide",submit:"submitForm"},postboxAlertSelector:"[role=postbox-alert]",initialize:function(e){this.session=e.session,this.thread=e.thread,this.showSubmitButton=!1!==e.showSubmitButton,this.showAvatar=!1!==e.showAvatar,this.placeholderText=e.placeholder,this.canUseContentEditable=e.canUseContentEditable,this.showMediaPreviews=e.showMediaPreviews,this.showMustVerifyAlert=!1!==e.showMustVerifyAlert,this.setAlertSelector(this.postboxAlertSelector),this._isHidden=!1,this.listenTo(this.model,{error:this.onerror}),this.listenTo(this.model,"change:id",function(){this.model.id&&this.textarea.removeDraft()})},redraw:function(){var t=this.$el.hasClass("expanded"),n=this.el,i=this.$el.find("textarea").val();this.render(),this.$el.find("textarea").val(i),t&&this.$el.addClass("expanded"),0!==e(n).parent().length&&n.parentNode.replaceChild(this.el,n)},getPlaceholderText:function(){return this.placeholderText||"Discuss…"},render:function(){var e=this.$el,t=this.showMediaPreviews&&this.thread.forum.get("settings").mediaembedEnabled,n=this.thread.forum.get("settings").gifPickerEnabled,i=t&&this.uploadSupported;return e.html(c({showAvatar:this.showAvatar,showSubmitButton:this.showSubmitButton,user:this.session.toJSON(),displayMediaPreviews:t||n,displayMediaUploadButton:i})),this.model.get("parent")?e.addClass("expanded"):e.removeClass("expanded"),e.addClass("authenticated"),this.initTextarea(),this.initMediaViews({mediaembedEnabled:t,gifPickerEnabled:n,allowUploads:i,textarea:this.textarea}),this.showMustVerifyAlert&&this.constructor.mustVerifyEmailToPost(this.session.user)&&this._alertMustVerify(),this._isHidden&&e.addClass("hidden"),this},initTextarea:function(){var e=this.canUseContentEditable?s:l,n=this.textarea=new e({placeholder:this.getPlaceholderText(),userSuggestions:this.userSuggestions,value:this.model.get("raw_message"),storageKey:this.model.storageKey()});this.$("[data-role=textarea]").prepend(n.render().el),this.listenTo(n,{focus:function(){this.$el.addClass("expanded"),t.delay(t.bind(this.resize,this),200)},blur:function(){this.trigger("blur")}})},resize:function(){this.textarea.resize()},focus:function(){this.textarea.focus()},clear:function(){var e=this;e.textarea.clear(),e.clearMediaPreviews(),e.$el.removeClass("expanded"),e.model.get("parent")&&e.hide()},restore:function(e){var n=this;n.textarea.set(e.get("raw_message")),n.textarea.handleFocusIn(),t.delay(function(){n.resize()},200),n.model.get("parent")&&n.show()},_alertMustVerify:function(e){this.alert(d(),{safe:!0,type:e?"error":"warn",target:e?this.postboxAlertSelector:null})},submitForm:function(e){return e.preventDefault(),this.dismissAlert(),this.createPost()},onerror:function(e,n){var i,o=this,a=this.model;12===n.code&&/temporarily do not have permission to post on this thread/.test(n.response)?(i=u({blocker:this.thread.forum.get("name"),isTemp:!0}),this.alert(i,{type:"error",target:this.postboxAlertSelector,safe:!0})):12===n.code&&/not have permission to post on this thread/.test(n.response)?(i=u({blocker:o.session.user.get("isOnGlobalBlacklist")?"Disqus":o.thread.forum.get("name"),isTemp:!1}),o.alert(i,{type:"error",target:o.postboxAlertSelector,safe:!0})):12===n.code&&/verify/.test(n.response)?o._alertMustVerify(!0):t.isString(n.response)?o.alert(n.response,{type:"error",target:o.postboxAlertSelector}):o.alert(h("Oops! We're having trouble posting your comment. Check your internet connection and try again."),{type:"error",target:o.postboxAlertSelector}),o.restore(a)},createPost:function(){var e=this.model;if(this.dismissAlert(),this.isUploadInProgress())return void this.alert(h("Please wait until your images finish uploading."),{type:"error",target:this.postboxAlertSelector});var t=e.save({raw_message:this.textarea.get()});return t?(t.done(function(){i.trigger("uiCallback:postCreated",e)}),this.clear(),e):void this.alert(e.validationError,{type:"error",target:this.postboxAlertSelector})},toggle:function(){this.isOpen()?this.hide():this.show()},show:function(){var e=this;e._isHidden=!1,e.$el.removeClass("hidden"),e.trigger("show")},hide:function(){var e=this;e._isHidden=!0,e.dismissAlert(),e.$el.addClass("hidden"),e.trigger("hide")},isOpen:function(){return!this._isHidden}},{mustVerifyEmailToPost:function(e){return!e.get("isVerified")}});return o.call(m.prototype),a.call(m.prototype),m}),define("home/ReplyViewManager",["underscore","jquery","backbone","home/utils/features","home/models/Post","home/models/Session","home/views/PostReplyView"],function(e,t,n,i,o,a,r){"use strict";function s(e){this.view=e,this.model=this.view.model,this.listenTo(this.view,"close",function(){this.stopListening()})}return e.extend(s.prototype,{toggleReplyView:function(e){var n=t(e);this.replyView?this.replyView.toggle():(this.replyView=this.createReplyView().render(),n.parent().after(this.replyView.el)),this.replyView._isHidden||this.replyView.focus()},vivifyReply:function(e){var t=new this.view.constructor({model:e,session:a.get()});this.replyView.$el.after(t.render().el),t.trigger("show"),this.replyView.remove(),this.replyView=null},createReplyView:function(){var e=new o({thread:this.model.thread.id,parent:this.model.id,depth:this.model.get("depth")+1,author:a.get().user.id});return this.listenTo(e,"change:id",this.vivifyReply),new r({model:e,thread:e.thread,session:a.get(),canUseContentEditable:i.canUseContentEditable(),showMediaPreviews:!0})}},n.Events),s}),define("core/views/VotersCard",["underscore","core/views/common/HoverCard","core/views/UsersCard","core/utils"],function(e,t,n,i){"use strict";var o=i.preventDefaultHandler,a=n.extend({guestTextPartialName:"cardGuestVoterText",initialize:function(t){this.voteType=t.voteType;var i=t.model,o=1===this.voteType?i.getUpvotersUserCollection():i.getDownvotersUserCollection();e.extend(t,{collection:o,numUsers:i.get(1===this.voteType?"likes":"dislikes")}),n.prototype.initialize.call(this,t),this.model=i,this.session=t.session,this.likes=i.get("likes"),this.dislikes=i.get("dislikes"),this.hadLikes=!!this.likes,this.hadDislikes=!!this.dislikes,this._fetched=!1,this._rendered=!1,this.listenTo(this.model,"change:userScore",this.updateUserSet),1===this.voteType?this.listenTo(this.model,"change:likes",this.updateGuests):this.listenTo(this.model,"change:dislikes",this.updateGuests)},updateGuests:function(){this.numUsers=this.model.get(1===this.voteType?"likes":"dislikes")||0,n.prototype.updateGuests.call(this)},updateUserSet:function(){var e=this.session.user,t=this.likes,n=this.dislikes,i=!1;this.likes=this.model.get("likes"),this.dislikes=this.model.get("dislikes"),this.model.get("userScore")===this.voteType?(this.session.isLoggedIn()&&this.collection.add(e),1===this.voteType&&this.likes&&!t||-1===this.voteType&&this.dislikes&&!n?(this._rendered=!1,this.show()):i=!!this.session.isLoggedOut()||!!((1===this.voteType?this.likes:this.dislikes)-1-this.collection.length)):(this.collection.remove(e),(1===this.voteType&&!this.likes||-1===this.voteType&&!this.dislikes)&&this.hide()),this.updateGuests(),this.moveTo(this.$target,i)},show:function(){if(!(1===this.voteType&&!this.likes||-1===this.voteType&&!this.dislikes||this.isVisible())){if((1===this.voteType&&!this.hadLikes||-1===this.voteType&&!this.hadDislikes)&&(this._fetched=!0),!this._fetched)return void this.collection.fetch({vote:this.voteType}).done(e.bind(function(){this._fetched=!0,this.show()},this));var t=this.session.user;this.model.get("userScore")===this.voteType&&this.session.isLoggedIn()&&!this.collection.contains(t)&&this.collection.add(t),n.prototype.show.call(this)}},handleShowProfile:o(function(e){n.prototype.handleShowProfile.call(this,e)}),
getTemplateData:function(){var t=n.prototype.getTemplateData.apply(this,arguments);return e.extend({},t,{forumId:this.model.get("forum")})},getUserTemplateData:function(){var t=n.prototype.getUserTemplateData.apply(this,arguments);return e.extend({},t,{forumId:this.model.get("forum")})}},{create:function(e){var n=e.model;if(n.has("id"))return t.create(n.get("id")+"-"+e.voteType,e,"VotersCard",a)}});return a}),define("core/views/Tooltip",["jquery","core/views/common/HoverCard"],function(e,t){"use strict";var n=t.extend({className:"tooltip-outer message-card",initialize:function(e){t.prototype.initialize.call(this,e),this.template=e.template,this.message=e.message},render:function(){if(this.template)this.$el.html(this.template());else{if(!this.message)return;this.$el.html(e("<div>").addClass("tooltip").text(this.message))}t.prototype.render.call(this)},moveTo:function(e){if(e){var t=this.constructor.POSITION_OFFSET,n=e.offset();this.$el.css({bottom:this.getContainerPosition().containerOffset.height-n.top+t,top:"inherit",left:n.left-this.$el.width()/2})}}},{create:function(e){return t.create(e.id,e,"Tooltip",n)},POSITION_OFFSET:10});return n}),define("core/views/ClickTooltip",["underscore","core/views/common/HoverCard","core/views/Tooltip"],function(e,t,n){"use strict";var i=n.extend({target:function(t){t.on("click",e.bind(this.targetClicked,this,t)),t.on("mouseleave",e.bind(this.leave,this))},targetClicked:function(e){e&&(this.$target=e),"in"!==this._hoverState&&(this._hoverState="in",this.show(),n.open[this.uid]=this)}},{create:function(e){return t.create(e.id,e,"ClickTooltip",i)}});return i}),define("home/templates/anonUpvoteCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="tooltip">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"You must sign in to up-vote this post.",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:52}}}))+"\n</div>\n"},useData:!0})}),define("home/templates/anonDownvoteCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="tooltip">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"You must sign in to down-vote this post.",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:54}}}))+"\n</div>\n"},useData:!0})}),define("core/constants/voteConstants",["exports"],function(e){"use strict";e.VOTING_TYPES={DETAILED:0,DOWNVOTE_LIMITED:1,DOWNVOTE_DISABLED:2,DISABLED:3},e.DEFAULT_VOTING_TYPE=e.VOTING_TYPES.DETAILED}),define("home/views/PostActionsView",["jquery","backbone-marionette","home/templates/postActions","home/ReplyViewManager","home/models/Session","core/views/VotersCard","core/views/ClickTooltip","home/templates/anonUpvoteCard","home/templates/anonDownvoteCard","core/bus","core/constants/voteConstants","core/utils"],function(e,t,n,i,o,a,r,s,l,c,u,d){"use strict";return t.ItemView.extend({template:n,templateHelpers:function(){return{discussionRoute:this.model.thread.permalink(),sessionUserHasUpvoted:this.model.get("userScore")>0,sessionUserHasDownvoted:this.model.get("userScore")<0,wasAuthoredBySessionUser:this.model.author.isSessionUser(),isLoggedIn:o.get().isLoggedIn(),isWithinEditPeriod:(new Date).toISOString()<this.model.get("editableUntil"),showDownvoteCount:this.model.get("dislikes")&&this.model.thread.forum.get("votingType")!==u.VOTING_TYPES.DOWNVOTE_LIMITED,showDownvote:this.model.thread.forum.get("votingType")!==u.VOTING_TYPES.DOWNVOTE_DISABLED&&this.model.thread.forum.get("votingType")!==u.VOTING_TYPES.DISABLED,showUpvote:this.model.thread.forum.get("votingType")!==u.VOTING_TYPES.DISABLED}},events:{"click [data-action=vote]":"vote","click [data-action=reply]":"toggleReplyView","click [data-action=edit]":"trackEdit"},initialize:function(e){this.session=o.get(),this.initializeReplyViewManager(e)},initializeReplyViewManager:function(e){this.replyViewManager=new i(e.parentPostView)},onRender:function(){this.initVotersCard(),this.initAnonVoteCards()},initAnonVoteCards:function(){if(o.isKnownToBeLoggedOut()&&!this.model.thread.forum.get("settings").allowAnonVotes){this.anonUpvoteCard&&this.anonUpvoteCard.remove();var e=this.$("[data-action=vote][data-vote=1]");e.length&&(this.anonUpvoteCard=r.create({targetElement:e,template:s,id:"anonUpvote"}),this.listenTo(this.anonUpvoteCard,"show",this.closeUpvotersCard),this.anonDownvoteCard&&this.anonDownvoteCard.remove(),e=this.$("[data-action=vote][data-vote=-1]"),e.length&&(this.anonDownvoteCard=r.create({targetElement:e,template:l,id:"anonDownvote"}),this.listenTo(this.anonDownvoteCard,"show",this.closeDownvotersCard)))}},closeUpvotersCard:function(){this.upvoteHoverCard&&this.upvoteHoverCard.hide()},closeDownvotersCard:function(){this.downvoteHoverCard&&this.downvoteHoverCard.hide()},initVotersCard:function(){if(!d.isMobileUserAgent()){this.upvoteHoverCard&&this.upvoteHoverCard.remove(),this.downvoteHoverCard&&this.downvoteHoverCard.remove();var e=this.$("[data-action=vote][data-vote=1]"),t=this.$("[data-action=vote][data-vote=-1]"),n=this.model.thread.forum.get("votingType");e.length&&n!==u.VOTING_TYPES.DISABLED&&(this.upvoteHoverCard=a.create({targetElement:e,model:this.model,session:this.session,voteType:1})),!t.length||null!==n&&void 0!==n&&n!==u.VOTING_TYPES.DETAILED||(this.downvoteHoverCard=a.create({targetElement:t,model:this.model,session:this.session,voteType:-1}))}},vote:function(t){if(t&&(this.model.thread.forum.get("settings").allowAnonVotes||!o.isKnownToBeLoggedOut())){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget),i=parseInt(n.data("vote"),10),a=this.model.get("userScore")===i;a?c.trigger("uiAction:postUnvote",this.model,t):1===i?c.trigger("uiAction:postUpvote",this.model,t):-1===i&&c.trigger("uiAction:postDownvote",this.model,t),this.model.vote(a?0:i),this.$("[data-vote=1]").toggleClass("active",1===this.model.get("userScore")),this.$("[data-vote=-1]").toggleClass("active",-1===this.model.get("userScore"));var r=this.model.thread.forum.get("votingType");r!==u.VOTING_TYPES.DISABLED&&this.$("[data-role=upvotes]").text(this.model.get("likes")||""),null!==r&&void 0!==r&&r!==u.VOTING_TYPES.DETAILED||this.$("[data-role=downvotes]").text(this.model.get("dislikes")||"")}},toggleReplyView:function(e){e&&(e.preventDefault(),e.stopPropagation(),this.replyViewManager.toggleReplyView(e.currentTarget))},trackEdit:function(){c.trigger("uiAction:postStartUpdate",this.model,{forum_id:this.model.thread.forum.attributes.pk,thread_id:this.model.thread.id})}})}),define("core/collections/MediaCollection",["backbone","core/models/Media"],function(e,t){"use strict";return e.Collection.extend({model:t})}),define("core/models/RichMediaViewModel",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{deferred:!0,showButtons:!0,activated:!1,kind:"image",deferredHeight:0,providerExpandMessage:"",providerCollapseMessage:"",providerIcon:"icon-proceed",respectSettings:!0}})}),define("core/mediaConfig",["underscore","backbone"],function(e,t){"use strict";function n(){var t=window.document.body.offsetWidth,n=i,o=n.length;return e.find(n,function(e,i){return i+1===o||Math.abs(n[i+1]-t)>Math.abs(n[i]-t)})}var i=[320,480,600,800],o=new t.Model({collapsed:!1,defaultIframeHeight:300,mediaPersistedWidths:i,loadedThumbnailWidth:n()});return o.findClosestThumbnailSize=n,o}),define("core/templates/postMediaInlineLink",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasUserText"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:5,column:7}}}))?a:""},2:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+r(a(null!=t?s(t,"href"):t,t))+'" rel="nofollow">'+r(a(null!=t?s(t,"text"):t,t))+"</a>\n"},4:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=t?c(t,"href"):t,t))+'" class="post-media-link" data-action="expand-collapse-media" rel="nofollow">'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"model"):t)?c(a,"providerIcon"):a,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:3},end:{line:10,column:74}}}))?a:"")+s(r(null!=t?c(t,"mediaLinkText"):t,t))+(null!=(a=c(n,"if").call(l,null!=t?c(t,"domain"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:3},end:{line:14,column:87}}}))?a:"")+"</a>\n"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<i class="'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"model"):t)?r(a,"providerIcon"):a,t))+'"></i>'},7:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="post-media-link-domain"> &mdash; '+e.escapeExpression(e.lambda(null!=t?a(t,"domain"):t,t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"model"):t)?r(a,"deferred"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:1,column:0},end:{line:16,column:7}}}))?a:""},useData:!0})}),define("core/views/RichMediaLinkView",["backbone","core/utils","core/templates/postMediaInlineLink"],function(e,t,n){"use strict";return e.View.extend({tagName:"span",events:{"click [data-action=expand-collapse-media]":"handleToggle"},initialize:function(e){this.media=e.media;var n=e.$link;this.linkText=n.text(),this.linkHref=n.attr("href"),this.linkDomain=t.getDomain(this.linkHref),this.linkHasUserText=this.isUserText(n),this.hasGenericMessage=!1,this.linkHasUserText?this.mediaLinkText=this.linkText:this.media.get("title")?this.mediaLinkText=t.niceTruncate(this.media.get("title"),60):(this.hasGenericMessage=!0,this.mediaLinkText=this.model.get("providerExpandMessage")),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(this.model,"change:activated",this.onChangeActivated)},isUserText:function(e){if("A"!==e[0].nodeName)return!1;var t=(e.text()||"").toLowerCase();return!!t&&(0!==t.indexOf("http")&&0!==t.indexOf("www")&&(t=t.replace(/\.\.\.$/,""),-1===(e.attr("href")||"").toLowerCase().indexOf(t)))},render:function(){var e=this.mediaLinkText;return this.hasGenericMessage&&this.model.get("activated")&&(e=this.model.get("providerCollapseMessage")),this.$el.html(n({model:this.model.toJSON(),text:this.linkText,href:this.linkHref,mediaLinkText:e,domain:this.linkDomain,hasUserText:this.linkHasUserText})),this},onChangeActivated:function(){this.hasGenericMessage&&this.render()},handleToggle:function(e){this.model.get("deferred")||(this.model.set("activated",!this.model.get("activated")),e&&e.preventDefault&&e.preventDefault())}})}),define("core/templates/postMedia",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"media"):t)?r(a,"providerName"):a,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:26},end:{line:5,column:90}}}))?a:"")+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"media"):t)?r(a,"title"):a,t))},2:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"media"):t)?r(a,"providerName"):a,t))+" &ndash; "},4:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<i class="'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"model"):t)?r(a,"providerIcon"):a,t))+' publisher-background-color"></i>'},6:function(e,t,n,i,o){return"media-video"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n<a class="media-button media-button-expand publisher-color publisher-border-color" href="'+s(r(null!=(a=null!=t?c(t,"media"):t)?c(a,"url"):a,t))+'" rel="nofollow" target="_blank" data-action="expand"\ntitle="'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"media"):t)?c(a,"title"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:7},end:{line:5,column:112}}}))?a:"")+'">\n'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"model"):t)?c(a,"providerIcon"):a,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:6,column:98}}}))?a:"")+"\n"+s(r(null!=(a=null!=t?c(t,"model"):t)?c(a,"providerExpandMessage"):a,t))+'\n</a>\n<a class="media-button media-button-contract publisher-color publisher-border-color" href="#" target="_blank" data-action="contract">\n<i class="icon-cancel publisher-background-color"></i> '+s(r(null!=(a=null!=t?c(t,"model"):t)?c(a,"providerCollapseMessage"):a,t))+'\n</a>\n<div class="media-content-loader" data-role="content-loader"></div>\n<div data-role="content-placeholder" class="media-content-placeholder media-'+s(r(null!=(a=null!=t?c(t,"media"):t)?c(a,"providerName"):a,t))+" "+(null!=(a=c(n,"if").call(l,null!=t?c(t,"isVideo"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:99},end:{line:15,column:132}}}))?a:"")+'"></div>\n'},useData:!0})}),define("core/templates/postMediaPlaceholder",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="media-force-load" data-action="force-load"><i class="'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"model"):t)?r(a,"providerIcon"):a,t))+'"></i></a>\n'},useData:!0})}),define("core/constants/mediaTypeConstants",["exports"],function(e){"use strict";e.VIDEO_CODES=["3","9","12","14"]}),define("core/views/RichMediaView",["jquery","underscore","backbone","core/utils","core/mediaConfig","core/views/RichMediaLinkView","core/templates/postMedia","core/templates/postMediaPlaceholder","core/constants/mediaTypeConstants"],function(e,t,n,i,o,a,r,s,l){"use strict";var c=i.preventDefaultHandler,u=function(e,t,n,i){e[t.get(n)?"addClass":"removeClass"](i)};return n.View.extend({className:"media-container",events:{"click [data-action=expand]":"handleExpand","click [data-action=contract]":"handleContract","click [data-action=force-load]":"handleForceLoad"},template:r,initialize:function(e){this.options=e,this.media=e.media,this.template=e.template||this.template,this.$linkEl=null,this.setupMode(),this.listenTo(this.model,"change:activated",this.applyState),this.listenTo(this.model,"change:deferredHeight",this.onChangeDeferredHeight),this.listenTo(this.model,"change:showButtons",this.updateElementClass),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(o,"change:collapsed",this.setupMode)},getMediaDimensions:function(){return{width:null,height:null}},getAvailableWidth:function(){return this.$el.parent().width()||o.get("loadedThumbnailWidth")},updateDeferredHeight:function(){this.model.set("deferredHeight",this.calculateDeferredHeight())},calculateDeferredHeight:function(){var e=this.getMediaDimensions(),t=e.width,n=e.height;return t&&n?this.getAvailableWidth()*n/t:n},convertToButton:function(e){this.model.set("showButtons",!1),this.linkSubview&&this.linkSubview.remove(),this.linkSubview=new a({model:this.model,media:this.media,$link:e}),e.replaceWith(this.linkSubview.$el),this.linkSubview.render()},applyContentNodeHeight:function(e){this.contentNode.height(e||"auto")},shouldAutoplay:function(){return!this.model.get("deferred")},generateContentHtml:function(){return this.media.get("html")},createContentNode:function(t){return e(t)},insertContentNode:function(e){this.contentNode.html(e)},prepareElementEvents:function(){},displayContent:function(){this.updateDeferredHeight();var e=this.generateContentHtml(),t=this.createContentNode(e);this.prepareElementEvents(t),this.insertContentNode(t),this.applyContentNodeHeight(null)},configureDeferred:function(){this.enterViewport()},configureContentFromActivated:function(){this.model.get("activated")?this.displayContent():this.displayPlaceholder()},displayPlaceholder:function(){this.contentNode.html(s({model:this.model.toJSON()}))},updateElementClass:function(){var e=this.$el,t=this.model;u(e,t,"deferred","media-mode-deferred"),u(e,t,"activated","media-activated"),u(e,t,"showButtons","media-show-buttons")},applyState:function(){this.configureDeferred(),this.configureContentFromActivated(),this.updateElementClass()},render:function(){return this.$el.html(this.template({model:this.model.toJSON(),media:this.media.toJSON(),isVideo:t.contains(l.VIDEO_CODES,this.media.get("mediaType"))})),this.contentNode=this.$el.find("[data-role=content-placeholder]"),this.applyState(),this},remove:function(){this.linkSubview&&this.linkSubview.remove(),n.View.prototype.remove.apply(this,arguments)},enterViewport:function(){this.model.get("deferred")&&this.activate()},activate:function(){this.model.set("activated",!0)},setupMode:function(){if(this.model.get("respectSettings")){this.model.set("activated",!1);o.get("collapsed")?this.model.set("deferred",!1):this.model.set("deferred",!0)}},onChangeDeferredHeight:function(){this.model.get("deferred")&&!this.model.get("activated")&&this.applyContentNodeHeight(this.model.get("deferredHeight"))},handleExpand:c(function(){this.model.set("activated",!0)}),handleContract:c(function(){this.model.set("activated",!1)}),handleForceLoad:c(function(){this.model.get("deferred")&&this.model.set("activated",!0)})})}),define("core/templates/postMediaImage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' height="'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"model"):t)?r(a,"deferredHeight"):a,t))+'" '},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=t?c(t,"imageUrl"):t,t))+'" target="_blank" rel="nofollow">\n<img src="'+s(r(null!=t?c(t,"thumbnailUrl"):t,t))+'" alt="'+s(c(n,"gettext").call(l,"Thumbnail",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:33},end:{line:3,column:56}}}))+'" '+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"model"):t)?c(a,"deferredHeight"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:58},end:{line:3,column:128}}}))?a:"")+">\n</a>\n"},useData:!0})}),define("core/views/ImageRichMediaView",["core/views/RichMediaView","core/utils","core/config","core/mediaConfig","core/templates/postMediaImage"],function(e,t,n,i,o){"use strict";var a=RegExp("(^|\\.)"+t.getDomain(n.urls.media).split(".").slice(-2).join("\\.")+"$");return e.extend({getMediaDimensions:function(){return{width:this.media.get("thumbnailWidth"),height:this.media.get("thumbnailHeight")}},getImageUrl:function(){return this.media.get("resolvedUrlRedirect")||this.media.get("urlRedirect")||this.media.get("thumbnailUrl")},getImageThumbnailUrl:function(){var e=this.media.get("thumbnailUrl");return this.constructor.isOnDisqusCDN(e)&&(e=t.serialize(e,{w:i.get("loadedThumbnailWidth"),h:this.model.get("deferredHeight")})),e},generateContentHtml:function(){return o({model:this.model.toJSON(),media:this.media.toJSON(),thumbnailUrl:this.getImageThumbnailUrl(),imageUrl:this.getImageUrl()})},prepareElementEvents:function(e){var t=this,n=e.find("img");n.on("load.richMediaView error.richMediaView",function(e){t.trigger(e.type),n.off(".richMediaView")})},calculateDeferredHeight:function(){var t=Math.floor(e.prototype.calculateDeferredHeight.apply(this,arguments)),n=this.getMediaDimensions().height;return Math.min(n,t)||null}},{isOnDisqusCDN:function(e){var n=t.getDomain(e);return a.test(n)}})}),define("core/views/IframeRichMediaView",["underscore","core/mediaConfig","core/views/RichMediaView"],function(e,t,n){"use strict";return n.extend({getMediaDimensions:function(){return{width:this.media.get("htmlWidth"),height:this.media.get("htmlHeight")}},_findIframe:function(e){return e.is("iframe")?e:e.find("iframe")},configureContentFromActivated:function(){n.prototype.configureContentFromActivated.apply(this,arguments),this.model.get("activated")||this.$el.removeClass("media-loading")},createContentNode:function(){var e=n.prototype.createContentNode.apply(this,arguments);return e.attr({width:"100%",height:this.model.get("deferredHeight")}),e},insertContentNode:function(e){this.loaderNode=this.$el.find("[data-role=content-loader]"),this.loaderHeight=this.model.get("deferredHeight")||t.get("defaultIframeHeight"),this.loaderNode.height(this.loaderHeight),this.$el.addClass("media-loading"),n.prototype.insertContentNode.call(this,e)},prepareElementEvents:function(t){var n=this._findIframe(t);n.one("load",e.bind(this.finishLoad,this,n))},finishLoad:function(e){this.$el.removeClass("media-loading"),e.height(this.loaderHeight),this.trigger("load")}})}),define("core/views/FacebookPhotoRichMediaView",["core/views/ImageRichMediaView"],function(e){"use strict";return e.extend({getImageThumbnailUrl:function(){return this.media.get("metadata").imageUrl||e.prototype.getImageThumbnailUrl.call(this)}})}),define("core/views/AutoplayRichMediaView",["underscore","jquery","core/utils","core/views/IframeRichMediaView"],function(e,t,n,i){"use strict";return i.extend({createContentNode:function(){var e=i.prototype.createContentNode.apply(this,arguments),t=e.attr("src");return this.shouldAutoplay()&&t&&!this.model.get("playerjs")&&(t=n.serialize(t,{auto_play:!0,autoplay:1}),e.attr("src",t)),e},insertContentNode:function(n){if(this.model.get("playerjs")){var o=this._findIframe(n),a=o.attr("src");"//"===a.substr(0,2)&&(a=window.location.protocol+a);var r=a.split("/");r=r[0]+"//"+r[2],this.playerjs={ready:!1,queue:[],origin:r,$iframe:o},this.model.get("mute")&&this.send("mute"),this.shouldAutoplay()&&this.send("play");var s=e.once(e.bind(function(){this.playerjs.ready=!0;var t=this.playerjs.queue;this.playerjs.queue=[],e.each(t,this.send,this)},this));t(window).on("message",function(e){if(e=e.originalEvent,e.origin===r){var t;try{t=JSON.parse(e.data)}catch(e){return}"ready"===t.event&&t.value&&t.value.src===a&&s()}})}return i.prototype.insertContentNode.apply(this,arguments)},send:function(e){if(this.playerjs){if(!this.playerjs.ready)return void this.playerjs.queue.push(e);var t={context:"player.js",version:"0.0.10",method:e};this.playerjs.$iframe[0].contentWindow.postMessage(JSON.stringify(t),this.playerjs.origin)}}})}),define("core/views/DynamicHeightRichMediaView",["underscore","core/views/RichMediaView"],function(e,t){"use strict";return t.extend({insertContentNode:function(){t.prototype.insertContentNode.apply(this,arguments),this.finishLoad()},finishLoad:function(){var t=this,n=0,i=function(){n+=1,n<20?e.delay(i,150):t.trigger("load")};i()}})}),define("core/templates/postMediaTwitterContent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<meta name="twitter:widgets:csp" content="on">\n<blockquote class="twitter-tweet" data-theme="'+r(a(null!=t?s(t,"theme"):t,t))+'" data-link-color="'+r(a(null!=t?s(t,"linkColor"):t,t))+'" lang="'+r(a(null!=t?s(t,"language"):t,t))+'">\n<a href="'+r(a(null!=t?s(t,"url"):t,t))+'"></a>\n</blockquote>\n<script src="//platform.twitter.com/widgets.js"><\/script>\n'},useData:!0})}),define("core/views/TwitterRichMediaView",["underscore","core/views/DynamicHeightRichMediaView","core/templates/postMediaTwitterContent"],function(e,t,n){"use strict";var i=t.extend({generateContentHtml:function(){var t=window.document.documentElement.lang;t=t&&t.substring(0,2);var o=this.media.get("url");return-1!==this.media.get("resolvedUrl").indexOf("/status")&&(o=this.media.get("resolvedUrl")),n({url:o,theme:e.result(i,"theme"),linkColor:e.result(i,"linkColor"),language:t})}},{theme:"light",linkColor:"#2e9fff"});return i}),define("core/views/SoundCloudRichMediaView",["core/views/AutoplayRichMediaView"],function(e){"use strict";return e.extend({getMediaDimensions:function(){return{width:null,height:this.media.get("htmlHeight")}}})}),define("core/views/VineRichMediaView",["core/views/AutoplayRichMediaView","core/utils"],function(e,t){"use strict";return e.extend({createContentNode:function(){var n=e.prototype.createContentNode.apply(this,arguments),i=n.attr("src");return this.shouldAutoplay()&&i&&(i=t.serialize(i,{audio:1}),n.attr("src",i)),n}})}),define("core/views/IframeGifRichMediaView",["core/views/IframeRichMediaView"],function(e){"use strict";return e.extend({insertContentNode:function(t){e.prototype.insertContentNode.call(this,t),this.loaderNode.width(this.getMediaDimensions().width)},createContentNode:function(){var t=e.prototype.createContentNode.apply(this,arguments);return t.attr(this.getMediaDimensions()),t},calculateDeferredHeight:function(){return this.getMediaDimensions().height},displayPlaceholder:function(){e.prototype.displayPlaceholder.call(this);var t=this.getMediaDimensions();this.contentNode.height(t.height).width(t.width)}})}),define("core/media",["underscore","core/strings","core/models/Media","core/models/RichMediaViewModel","core/views/ImageRichMediaView","core/views/IframeRichMediaView","core/views/FacebookPhotoRichMediaView","core/views/AutoplayRichMediaView","core/views/TwitterRichMediaView","core/views/SoundCloudRichMediaView","core/views/VineRichMediaView","core/views/IframeGifRichMediaView"],function(e,t,n,i,o,a,r,s,l,c,u,d){"use strict";var h=t.get,m={PLAY_HIDE:{kind:"html",providerExpandMessage:h("Play"),providerCollapseMessage:h("Hide")},VIEW_HIDE:{kind:"html",providerExpandMessage:h("View"),providerCollapseMessage:h("Hide")},VIEW_IMAGE:{kind:"image",providerIcon:"icon-images",providerExpandMessage:h("View"),providerCollapseMessage:h("Hide")}},p=function(t){var h=function(t,n){return e.defaults({providerIcon:n},m[t])},p=null,f=null,g=n.MEDIA_TYPES;switch(t.get("mediaType")){case g.IMAGE:case g.IMAGE_UPLOAD:p=m.VIEW_IMAGE;break;case g.FACEBOOK_PHOTO:f=r,p=m.VIEW_IMAGE;break;case g.GIF_VIDEO:f=d,p=m.VIEW_HIDE;break;case g.VIMEO_VIDEO:case g.YOUTUBE_VIDEO:f=s,p=h("PLAY_HIDE","icon-video");break;case g.TWITTER_STATUS:f=l,p=h("VIEW_HIDE","icon-twitter");break;case g.VINE_VIDEO:f=u,p=h("PLAY_HIDE","icon-video");break;case g.FACEBOOK_VIDEO:p=h("VIEW_HIDE","icon-video");break;case g.SOUNDCLOUD_SOUND:f=c,p=h("PLAY_HIDE","icon-music");break;case g.GOOGLE_MAP:p=h("VIEW_HIDE","icon-map");break;default:return null}if(null===f)switch(p.kind){case"webpage":return null;case"html":f=a;break;case"image":f=o}return{Cls:f,mediaViewModel:new i(p)}};return{instantiateRichMediaView:function(e){var t=p(e);return t?new t.Cls({model:t.mediaViewModel,media:e}):null},instantiateRichMediaThumbnail:function(e){return new o({model:new i(m.VIEW_IMAGE),media:e})},getRichMediaViewConfig:p}}),define("core/mixins/withRichMedia",["underscore","jquery","core/collections/MediaCollection","core/media"],function(e,t,n,i){"use strict";function o(e){var n={};return e.length?(e.find("a").each(function(e,i){var o=i.href;n[o]||(n[o]=t(i))}),n):n}function a(){e.extend(this,r)}var r={renderRichMedia:function(e,a,r){return r=r||{},e=e instanceof n?e:new n(e),e.chain().map(function(e){return i.instantiateRichMediaView(e)}).without(null).map(function(e){var n=e.media.get("urlRedirect");r.normalize&&(n=r.normalize.call(this,n));var i=o(this.$("[data-role=message]")),s=i[n];return r.beforeRender&&r.beforeRender.call(this,e),e.render(),s?r.convertLinkToButton?(s.after(e.$el),e.convertToButton(s)):s.replaceWith(e.$el):(a=a||this.$("[data-role=post-media-list]"),a.append(t("<li>").append(e.$el))),e},this).value()}};return a}),define("home/templates/postContent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return"comment-message-hidden"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-message expanded '+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:37},end:{line:1,column:82}}}))?a:"")+'"\ndata-role="message" dir="auto">\n'+(null!=(a=e.lambda(null!=t?l(t,"message"):t,t))?a:"")+'\n<div><ul class="post-media" data-role="post-media-list"></ul></div>\n</div>\n<a  href="#" class="curtain-truncate hidden" title="'+s(l(n,"gettext").call(r,"see more",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:52},end:{line:6,column:74}}}))+'"\ndata-action="expand"\ndata-target=".comment-message">'+s(l(n,"gettext").call(r,"see more",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:31},end:{line:8,column:53}}}))+"</a>\n"},useData:!0})}),define("home/views/PostContentView",["backbone-marionette","core/bus","core/mixins/withRichMedia","home/templates/postContent"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:i,templateHelpers:function(){return{isHidden:"visible"!==this.model.get("state")}},events:{"click a":"trackClickLink"},trackClickLink:function(e){t.trigger("uiAction:clickLink",e,{adjective:"message"})},onRender:function(){this.renderRichMedia(this.model.get("media"))}});return n.call(o.prototype),o}),define("home/mixins/withCollapsing",["underscore","jquery"],function(e,t){"use strict";var n=function(e){return e.collapsibleSelector?this.$(e.collapsibleSelector):this.$el},i={events:{"click [data-action=expand]":"expand","click [data-action=collapse]":"forceCollapse"},collapse:function(i){var o=n.call(this,i),a=o.find("img").map(function(e,n){var i=t.Deferred(),o=t(n);return o.complete?i.resolve():o.one("load",i.resolve),i.promise()});t.when(a).then(e.bind(this.forceCollapse,this,null,i))},expand:function(e,t){e&&e.preventDefault();var i=n.call(this,t),o=i.find("[data-action=expand][data-target]"),a=i.find("[data-action=collapse]"),r=o.data("target"),s=i.find(r),l=this;o.addClass("hidden"),s.addClass("expanded").one("transitionend oTransitionEnd webkitTransitionEnd",function(){l.trigger("expandedComplete")}),a.removeClass("hidden")},forceCollapse:function(e,i){e&&e.preventDefault();var o=n.call(this,i),a=o.find("[data-action=expand]"),r=o.find("[data-action=collapse]"),s=e?t(e.currentTarget).data("target"):".expanded",l=o.find(s)
;a.length&&(l.height()>i.maxHeight&&(l.removeClass("expanded"),a.removeClass("hidden")),r.addClass("hidden"))}};return function(t){var n=this.initialize;this.initialize=function(){n.apply(this,arguments),this.listenTo(this,"show",this.collapse)},this.collapse=function(){i.collapse.call(this,t)},this.expand=function(e){i.expand.call(this,e,t)},this.forceCollapse=function(e){i.forceCollapse.call(this,e,t)},this.events=e.defaults({},this.events,i.events)}}),define("home/views/CollapsingPostContentView",["home/views/PostContentView","home/mixins/withCollapsing"],function(e,t){"use strict";var n=e.extend({});return t.call(n.prototype,{maxHeight:115}),n}),define("home/templates/post",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?a(t,"hiddenExplanation"):t,t))+"</span>\n"},3:function(e,t,n,i,o){return"hidden"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(c(i,"userAvatar"),null!=t?c(t,"author"):t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="comment-body">\n<header class="comment-header">\n'+(null!=(a=e.invokePartial(c(i,"userName"),null!=t?c(t,"author"):t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<a class="link-gray time"\nhref="'+s(r(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+s(r(null!=t?c(t,"id"):t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+s(r(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n\n'+s(r(null!=t?c(t,"relativeTime"):t,t))+"\n</a>\n"+(null!=(a=c(n,"if").call(l,null!=t?c(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:0},end:{line:14,column:7}}}))?a:"")+'</header>\n<div data-role="post-content"></div>\n<footer class="comment-actions '+(null!=(a=c(n,"if").call(l,null!=t?c(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:17,column:31},end:{line:17,column:60}}}))?a:"")+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/PostView",["backbone-marionette","core/strings","home/mixins/withSubviews","home/views/PostActionsView","home/views/PostContentView","home/views/CollapsingPostContentView","home/utils/datetimeUtils","home/templates/post","home/utils/cardUtils"],function(e,t,n,i,o,a,r,s){"use strict";var l=t.get,c=e.ItemView,u=c.extend({className:"card-comment",template:s,templateHelpers:function(){var e=this.model.get("state");return{isHidden:"visible"!==e,hiddenExplanation:{flagged:l("Pending"),pending:l("Pending"),spam:l("Detected as spam"),deleted:l("Removed")}[e],discussionRoute:this.model.thread.permalink(),relativeTime:r.getRelativeDatetime(this.model.get("createdAt"))}},initialize:function(e){e=e||{},this.hideActions=e.hideActions,this.shouldCollapse=e.shouldCollapse},regions:{postContentRegion:"[data-role=post-content]",postActionsRegion:"[data-role=post-actions]"},onRender:function(){this.activateRegion(this.postContentRegion,this.createPostContentView),this.hideActions||this.activateRegion(this.postActionsRegion,this.createPostActionsView)},createPostActionsView:function(){return new i({el:this.postActionsRegion.el,model:this.model,parentPostView:this})},createPostContentView:function(){return new(this.shouldCollapse?a:o)({el:this.postContentRegion.el,model:this.model})}});return n.call(u.prototype),u}),define("home/views/PostCollectionView",["home/views/common/FetchableCollectionView","home/views/PostView"],function(e,t){"use strict";return e.extend({itemView:t})}),define("home/templates/genericCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" no-image"},3:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'">\n</a>\n'},5:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="card-avatar" href="/by/'+s(r(null!=t?l(t,"username"):t,t))+'/" data-link-name="user_avatar">\n<img\nsrc="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'"\nalt="'+(null!=(a=e.invokePartial(l(i,"userNameNoLink"),t,{name:"userNameNoLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'" />\n</a>\n'},7:function(e,t,n,i,o){return'<div class="card-discussion-comments-title">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Recent Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:27,column:44},end:{line:27,column:73}}}))+'</div>\n<div class="card-discussion-comments" data-role="posts"></div>\n'},9:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n'+(null!=(a=e.lambda(null!=t?r(t,"threadDescriptionHTML"):t,t))?a:"")+"\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion'+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"image"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:27},end:{line:1,column:64}}}))?a:"")+'">\n<div class="card-aside">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"image"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:12,column:7}}}))?a:"")+'</div>\n<div class="card-body">\n'+(null!=(a=s(n,"with").call(r,null!=t?s(t,"firstActor"):t,{name:"with",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:0},end:{line:21,column:9}}}))?a:"")+'<div class="card-reason">\n'+e.escapeExpression(s(n,"gettext").call(r,"%(group)s authored",{name:"gettext",hash:{group:s(n,"getPartial").call(r,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:23,column:39},end:{line:23,column:68}}})},data:o,loc:{start:{line:23,column:0},end:{line:23,column:70}}}))+"\n</div>\n"+(null!=(a=e.invokePartial(s(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"recentPostCount"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:26,column:0},end:{line:35,column:7}}}))?a:"")+'<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardCreateView",["backbone-marionette","home/mixins/asGenericCard","home/mixins/withReason","home/mixins/withSubviews","home/views/PostCollectionView","home/templates/genericCardCreate"],function(e,t,n,i,o,a){"use strict";var r=e.ItemView,s=r.extend({template:a,templateHelpers:function(){return{recentPostCount:this.model.thread.recentPosts.length}},regions:{postsRegion:"[data-role=posts]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostsView)},createPostsView:function(){return new o({el:this.postsRegion.el,collection:this.model.thread.recentPosts})}}),l=s.prototype;return t.call(l),n.call(l),i.call(l),s}),define("home/templates/genericCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" no-image"},3:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'">\n</a>\n'},5:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="card-avatar" href="/by/'+s(r(null!=t?l(t,"username"):t,t))+'/" data-link-name="user_avatar">\n<img\nsrc="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'"\nalt="'+(null!=(a=e.invokePartial(l(i,"userNameNoLink"),t,{name:"userNameNoLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'" />\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion'+(null!=(a=c(n,"unless").call(r,null!=t?c(t,"image"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:27},end:{line:1,column:64}}}))?a:"")+'">\n<div class="card-aside">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:12,column:7}}}))?a:"")+'</div>\n<div class="card-body">\n'+(null!=(a=c(n,"with").call(r,null!=t?c(t,"firstActor"):t,{name:"with",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:0},end:{line:21,column:9}}}))?a:"")+'<div class="card-reason">\n'+s(c(n,"gettext").call(r,"%(group)s recommended",{name:"gettext",hash:{group:c(n,"getPartial").call(r,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:23,column:42},end:{line:23,column:71}}})},data:o,loc:{start:{line:23,column:0},end:{line:23,column:73}}}))+'\non\n<a class="name-community"\nhref="/home/forum/'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a)?c(a,"id"):a,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a)?c(a,"pk"):a,t))+'">\n\n'+(null!=(a=e.invokePartial(c(i,"forumName"),null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n</div>\n"+(null!=(a=e.invokePartial(c(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n'+(null!=(a=l(null!=t?c(t,"threadDescriptionHTML"):t,t))?a:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardFavoriteView",["backbone-marionette","home/mixins/asGenericCard","home/mixins/withReason","home/templates/genericCardFavorite"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:i});return t.call(o.prototype),n.call(o.prototype),o}),define("home/templates/genericCardTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" no-image"},3:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'">\n</a>\n'},5:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="card-avatar"\nhref="/home/forum/'+s(r(null!=t?l(t,"id"):t,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n\n<img src="'+s(r(null!=t?l(t,"faviconImage"):t,t))+'" alt="'+(null!=(a=e.invokePartial(l(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'" />\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion'+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"image"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:27},end:{line:1,column:64}}}))?a:"")+'">\n<div class="card-aside">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"image"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:12,column:7}}}))?a:"")+'</div>\n<div class="card-body">\n'+(null!=(a=s(n,"with").call(r,null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a,{name:"with",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:0},end:{line:23,column:9}}}))?a:"")+'<div class="card-reason">\n'+e.escapeExpression(s(n,"gettext").call(r,"%(forum)s recently published",{name:"gettext",hash:{forum:s(n,"getPartial").call(r,"forumLink",null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a,{name:"getPartial",hash:{},data:o,loc:{start:{line:25,column:49},end:{line:25,column:86}}})},data:o,loc:{start:{line:25,column:0},end:{line:25,column:88}}}))+"\n</div>\n"+(null!=(a=e.invokePartial(s(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n'+(null!=(a=e.lambda(null!=t?s(t,"threadDescriptionHTML"):t,t))?a:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardTrendingView",["backbone-marionette","home/mixins/asGenericCard","home/templates/genericCardTrending"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:n});return t.call(i.prototype),i}),define("home/views/GenericCardCollectionView",["underscore","backbone","home/views/common/FetchableCollectionView","home/views/GenericCardCreateView","home/views/GenericCardFavoriteView","home/views/GenericCardTrendingView"],function(e,t,n,i,o,a){"use strict";return n.extend({itemView:function(e){switch(e.model.get("verb")){case"favorite":return new o(e);case"create":return new i(e);case"trending":return new a(e);case"share":return e.model.thread.author?(e.model.actors.length||(e.model.actors=[e.model.thread.author],e.model.set({totalActors:1})),new i(e)):new a(e);default:return new t.View}},itemViewOptions:function(){var t=n.prototype.itemViewOptions;return e.isFunction(t)&&(t=t.apply(this,arguments)),e.defaults({channel:this.channel,hideImage:this.hideImage},t)},initialize:function(e){this.channel=e&&e.channel,this.hideImage=e&&e.hideImage,n.prototype.initialize.apply(this,arguments)}})}),define("home/views/common/ActivityCardView",["backbone-marionette"],function(e){"use strict";var t=e.ItemView,n=t.prototype;return t.extend({constructor:function(e){n.constructor.call(this,e),this.listenTo(this.model,"change:isFromUnreadQueue",this.updateUnreadClass)},updateUnreadClass:function(){this.$el.toggleClass("unread",!!this.model.get("isFromUnreadQueue"))}})}),define("home/templates/channelCardPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?a(t,"hiddenExplanation"):t,t))+"</span>\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"excerpt"):t,t))+"\n"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.lambda(null!=t?r(t,"message"):t,t))?a:"")+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="post-comments">\n<div class="post-comments__origin link-inner-gray">\n'+(null!=(a=e.invokePartial(c(i,"forumLink"),null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a,{name:"forumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="post-comments__reason">\n'+(null!=(a=e.invokePartial(c(i,"userAvatar"),null!=t?c(t,"author"):t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(c(i,"userName"),null!=t?c(t,"author"):t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<a class="time link-gray post-comments__time"\nhref="'+s(r(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+s(r(null!=t?c(t,"id"):t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+s(r(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n\n'+s(r(null!=t?c(t,"relativeTime"):t,t))+"\n</a>\n"+(null!=(a=c(n,"if").call(l,null!=t?c(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:0},end:{line:17,column:7}}}))?a:"")+'</div>\n<div class="post-comment__content">\n<a href="'+s(r(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+s(r(null!=t?c(t,"id"):t,t))+'"\nclass="truncate link-gray-dark post-comments__lnk"\ndata-link-name="message"\ndir="auto"\ndata-truncate-lines="'+s(r(null!=t?c(t,"numLines"):t,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"excerpt"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:26,column:0},end:{line:30,column:7}}}))?a:"")+"</a>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelCardPostView",["jquery","underscore","backbone-marionette","core/strings","core/utils/html","home/mixins/withAllstarPopover","home/mixins/withTruncate","home/mixins/withSubviews","home/utils/datetimeUtils","home/templates/channelCardPost"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=i.get,d=n.ItemView,h=d.extend({className:"post-comments__wrapper",template:c,templateHelpers:function(){var t=this.model.get("state");return{isHidden:"visible"!==t,hiddenExplanation:{flagged:u("Pending"),pending:u("Pending"),spam:u("Detected as spam"),deleted:u("Removed")}[t],message:this.replaceLinks(this.model.get("message")),discussionRoute:this.model.thread.getDiscussionRoute(),relativeTime:l.getRelativeDatetime(this.model.get("createdAt")),numLines:e(window).width()<=875?4:2}},replaceLinks:function(e){var n=t.pluck(this.model.get("media"),"url");return o.replaceAnchors(e,function(e){return'<span class="text-smaller icon-'+(t.contains(n,e.href)?"images":"link")+'"></span>'})}});return a.call(h.prototype),r.call(h.prototype),s.call(h.prototype),h}),define("home/templates/channelCardFooter",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="button__wrapper--recommend -count'+(null!=(a=s(n,"if").call(r,s(n,"gt").call(r,null!=t?s(t,"likes"):t,9,{name:"gt",hash:{},data:o,loc:{start:{line:3,column:50},end:{line:3,column:62}}}),{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:44},end:{line:3,column:77}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"favorited"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:77},end:{line:3,column:116}}}))?a:"")+'" data-action="favorite">\n<a class="button--recommend button-small" href="#">\n<span class="button__heart icon-heart"></span>\n<span class="button__text hidden-md">'+e.escapeExpression(s(n,"gettext").call(r,"Recommend",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:37},end:{line:6,column:60}}}))+"</span>\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"likes"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:0},end:{line:9,column:7}}}))?a:"")+"</a>\n</li>\n"},2:function(e,t,n,i,o){return" -wide"},4:function(e,t,n,i,o){return" is-recommended"},6:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="button__count">'+e.escapeExpression(e.lambda(null!=t?a(t,"likes"):t,t))+"</span>\n"},8:function(e,t,n,i,o){return'<span class="icon icon-lock spacing-right-small"></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="list--layout">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"authenticated"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:12,column:7}}}))?a:"")+'<li>\n<a class="button button-lnk spacing-right-small"\nhref="'+l(s(null!=t?c(t,"discussionRoute"):t,t))+'"\ndata-link-name="view_discussion"\ndata-thread-id="'+l(s(null!=t?c(t,"id"):t,t))+'">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"isClosed"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:0},end:{line:20,column:7}}}))?a:"")+l(c(n,"gettext").call(r,"Comments %(count)s",{name:"gettext",hash:{count:c(n,"tag").call(r,"span",{name:"tag",hash:{text:null!=t?c(t,"posts"):t,class:"label--count"},data:o,loc:{start:{line:22,column:8},end:{line:22,column:52}}})},data:o,loc:{start:{line:21,column:0},end:{line:22,column:54}}}))+'\n</a>\n</li>\n<li class="dropdown" data-dropdown="enabled">\n<a class="button button-link dropdown-toggle" data-toggle="dropdown" href="#">\n'+l(c(n,"gettext").call(r,"Share",{name:"gettext",hash:{},data:o,loc:{start:{line:27,column:0},end:{line:27,column:19}}}))+'\n</a>\n<ul class="dropdown-menu dropdown--share-menu">\n<li>\n<a class="link" data-action="share" data-network="twitter" href="#">\n<span class="icon icon-twitter text-smaller icon__position -inline"></span>\n<strong>'+l(c(n,"gettext").call(r,"Tweet this",{name:"gettext",hash:{},data:o,loc:{start:{line:33,column:8},end:{line:33,column:32}}}))+'</strong>\n</a>\n</li>\n<li>\n<a class="link" data-action="share" data-network="facebook" href="#">\n<span class="icon icon-facebook text-smaller icon__position -inline"></span>\n<strong>'+l(c(n,"gettext").call(r,"Post to Facebook",{name:"gettext",hash:{},data:o,loc:{start:{line:39,column:8},end:{line:39,column:38}}}))+"</strong>\n</a>\n</li>\n</ul>\n</li>\n</ul>\n"},useData:!0})}),define("home/views/ChannelCardFooterView",["home/views/ThreadCardDefaultFooterView","home/templates/channelCardFooter"],function(e,t){"use strict";var n=e,i=n.prototype;return n.extend({template:t,toggleThreadFavorited:function(e){i.toggleThreadFavorited.call(this,e),this.$("[data-action=favorite]").addClass("animate-recommend")}})}),define("home/views/TopicTagView",["backbone-marionette","handlebars"],function(e,t){"use strict";return e.ItemView.extend({template:t.partials.topicTag,className:function(){return"tag__item"+(this.model.get("hidden")?" hidden-topic":"")},events:{"click [data-action=remove-tag]":"removeTag"},initialize:function(e){this.topicRoute=e&&e.baseTopicRoute?e.baseTopicRoute+this.model.id+"/":null},templateHelpers:function(){return{topicRoute:this.topicRoute}},removeTag:function(e){e&&e.preventDefault(),this.trigger("removeTag")}})}),define("home/views/TopicTagCollectionView",["backbone-marionette","home/views/TopicTagView"],function(e,t){"use strict";return e.CollectionView.extend({className:"topic-group__wrapper",itemView:t,itemViewOptions:function(){return{baseTopicRoute:this.baseTopicRoute}},initialize:function(e){e=e||{},!(this.baseTopicRoute=e.baseTopicRoute)&&e.channel&&(this.baseTopicRoute="/home/channel/"+e.channel.id+"/topics/")}})}),define("home/templates/spamAlert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--error -spam align-min-tablet align--between align--middle">\n<div class="spacing-narrow text-medium">\n'+r(s(n,"gettext").call(a,"This discussion might be spam, so it's hidden to other readers.",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:0},end:{line:3,column:77}}}))+'\n</div>\n<div class="spacing-narrow">\n<button class="button button-inverted -hover-opaque button-padding-taller button-wide--mobile text-medium" data-action="mark-approved">\n'+r(s(n,"gettext").call(a,"This isn't spam",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:0},end:{line:7,column:29}}}))+"\n</button>\n</div>\n</div>\n"},useData:!0})}),define("home/views/SpamAlertView",["backbone-marionette","home/templates/spamAlert"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/mixins/asChannelCard",["jquery","underscore","backbone-marionette","handlebars","core/utils/auth","home/models/Session","home/views/ChannelCardPostView","home/views/ChannelCardFooterView","home/views/TopicTagCollectionView","home/views/SpamAlertView","home/mixins/withAllstarPopover","home/mixins/withTruncate","home/mixins/withSubviews"],function(e,t,n,i,o,a,r,s,l,c,u,d,h){"use strict";var m={regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]",topicsRegion:"[data-role=topics]",cardAlertRegion:"[data-role=card-alert]"},events:{"click [data-action=menuitem-click]":"handleMenuItemClick","click [data-action=mark-approved]":"markApproved"},className:function(e){return t.contains(this.options.filterVerbs,this.model.get("verb"))?"hidden":(t.isFunction(e)&&(e=e.apply(this,t.rest(arguments))),e=e||"",["card-wrap card--channel",e].join(" "))},initialize:function(e,t){t=t||{},e.call(this,t),this.session=a.get(),this.channel=t.channel,this.hideImage=t.hideImage,this.listenTo(this.model.thread,"change:content",this.render),this.numTitleLines=t.numTitleLines||3,this.showTopics=this.model.thread.topics.length&&this.channel,this.isChannelFeed=t.isChannelFeed;var n=this.model.thread;n.getEditPermissions(this.session),n.isAuthorSessionUser(this.session),n.getModeratePermissions(this.session),this.listenTo(n,{"change:userSubscription change:isDeleted change:canModerate change:isSpam":this.renderMenu,"change:canEdit":this.render,"change:isSpam":this.updateSpamIndicators}),this.listenTo(this.session,"change:id",this.render)},serializeData:function(e){var n=e.call(this),i=this.model.thread,a=this.model.getPostsPreviewCollection(),r=i.getFriendlySourceUrl()||i.forum.getFriendlyUrl(),s=this.channel||i.forum.channel,l=i.get("isAuthor"),c=i.forum.channel&&i.get("canEdit"),u=c&&(s&&o.getFromCookie().staff||t.contains(this.session.moderatedForums,i.forum.id));return t.defaults(n,{recentPostCount:a.length,discussionRoute:i.getDiscussionRoute(this.channel),threadDescription:i.getPlainDescription(),image:i.getImage(),numTitleLines:this.numTitleLines,threadOverrides:this.model.getThreadOverrides(),forumFriendlyUrl:r,canEdit:c,canDelete:u,canModerate:i.get("canModerate"),channel:s,isChannelFeed:this.isChannelFeed,isSpam:i.get("isSpam"),isAuthor:l})},render:function(e){return e.call(this),this.$(this.postsRegion.selector).length&&this.activateRegion(this.postsRegion,m.createPostsView),this.showTopics&&this.activateRegion(this.topicsRegion,m.createTopicsView),this.activateRegion(this.footerRegion,m.createFooter),this.updateSpamIndicators(),this},removeSpamModTools:function(){this.cardAlertRegion.close(),this.$el.removeClass("is-spam")},showSpamModTools:function(){this.activateRegion(this.cardAlertRegion,m.createSpamAlertView),this.$el.addClass("is-spam")},updateSpamIndicators:function(){this.model.thread.get("isSpam")?this.model.thread.getModeratePermissions(this.session).then(t.bind(function(e){e?this.showSpamModTools():this.removeSpamModTools()},this)):this.removeSpamModTools(),this.renderBadges()},renderBadges:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),this.$("[data-role=badges]").replaceWith(i.partials.badges(e))},renderMenu:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),e.menuOpen=this.$(".dropdown").hasClass("open"),this.$("[data-role=menu]").replaceWith(i.partials.channelCardMenu(e))},createSpamAlertView:function(){return new c},createPostsView:function(){var e=this.model.getPostsPreviewCollection();return new n.CollectionView({itemView:r,collection:e})},createTopicsView:function(){return new l({collection:this.model.thread.topics,channel:this.channel})},_createFooter:function(e){return new s({el:e,model:this.model.thread,channel:this.channel})},createFooter:function(){return m._createFooter.call(this,this.footerRegion.el)},handleMenuItemClick:function(t){if(t){t.preventDefault(),t.stopPropagation();switch(e(t.currentTarget).attr("data-menu-item")){case"toggle-subscription":this.toggleSubscription();break;case"toggle-follow-targetchannel":this.toggleFollowTargetChannel();break;case"delete-thread":this.model.thread.confirmDelete(!0);break;case"restore-thread":this.model.thread.restore();break;case"mark-spam":this.model.thread.toggleIsSpam()}}},markApproved:function(){this.model.thread.markAsSpam(!1)},toggleSubscription:function(){this.model.thread.toggleSubscription()},toggleFollowTargetChannel:function(){var e=this.model.activities[0].targetChannel;e&&e.toggleFollowed()}};return function(){d.apply(this,arguments),h.call(this),u.call(this),this.regions=t.extend({},m.regions,this.regions),this.events=t.extend({},m.events,this.events),this.className=t.wrap(this.className,m.className),this.initialize=t.wrap(this.initialize,m.initialize),this.serializeData=t.wrap(this.serializeData,m.serializeData),this.render=t.wrap(this.render,m.render),t.extend(this,t.pick(m,"handleMenuItemClick","toggleSubscription","toggleFollowTargetChannel","renderMenu","markApproved","updateSpamIndicators","showSpamModTools","removeSpamModTools","renderBadges"))}}),define("home/mixins/withChannelAvatar",["underscore"],function(e){"use strict";function t(e){return{templateHelpers:function(){var t=e.call(this),n=t&&t.get("bannerColor"),i=t&&t.get("name")&&t.get("name").charAt(0);return{channel:t&&t.toJSON(),channelAvatar:t&&(t.get("avatar")||t.get("options").favicon),bannerColorClass:n?"-"+n:"",channelInitial:i}}}}function n(n){var i=n||function(){return this.model},o=t(i);this.templateHelpers=e.wrap(this.templateHelpers,function(t){var n=e.isFunction(t)?t.call(this):t;return e.extend(o.templateHelpers.call(this),n)})}return n}),
define("home/views/ChannelCardView",["home/views/common/ActivityCardView","home/mixins/asChannelCard","home/mixins/withChannelAvatar","home/mixins/withReason"],function(e,t,n,i){"use strict";var o=e.extend({getChannel:function(){return this.channel||this.model.thread.forum.channel}});return t.call(o.prototype),i.call(o.prototype),n.call(o.prototype,o.prototype.getChannel),o}),define("home/templates/channelCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="card-alert"></div>\n<div class="card__header -feed is-recommended">\n<div class="card__reason link-inner-gray-dark">\n<span class="icon-heart icon__position -inline text-smaller text-gray-light"></span>\n'+s(l(n,"gettext").call(r,"%(group)s recommended",{name:"gettext",hash:{group:l(n,"getPartial").call(r,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:6,column:8},end:{line:6,column:37}}})},data:o,loc:{start:{line:5,column:0},end:{line:6,column:39}}}))+'\n\n<time class="bullet text-gray">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+"</time>\n</div>\n"+(null!=(a=e.invokePartial(l(i,"cardReasonForum"),t,{name:"cardReasonForum",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(l(i,"channelCardMenu"),t,{name:"channelCardMenu",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"+(null!=(a=e.invokePartial(l(i,"channelCardContent"),t,{name:"channelCardContent",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")},usePartial:!0,useData:!0})}),define("home/views/ChannelCardFavoriteView",["underscore","home/views/ChannelCardView","home/templates/channelCardFavorite"],function(e,t,n){"use strict";return t.extend({template:n,templateHelpers:function(){var n=t.prototype.templateHelpers.apply(this,arguments);return e.extend(n,{forumHref:"/home/forum/"+this.model.thread.forum.id+"/"})}})}),define("home/templates/channelCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="spacing-right align__item" href="/by/'+s(r(null!=t?l(t,"username"):t,t))+'/" data-link-name="user_avatar">\n<img\nclass="img-round-sm block__item"\nsrc="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'"\nalt="'+(null!=(a=e.invokePartial(l(i,"userNameNoLink"),t,{name:"userNameNoLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'" />\n</a>\n'},3:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"cardReasonForum"),t,{name:"cardReasonForum",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="card-alert"></div>\n<div class="card__inner">\n<div class="card__header -feed">\n<div class="card__reason link-inner-gray-dark align align--middle">\n'+(null!=(a=l(n,"with").call(r,null!=t?l(t,"firstActor"):t,{name:"with",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:0},end:{line:12,column:9}}}))?a:"")+'<div class="align__item">\n'+s(l(n,"gettext").call(r,"%(user)s started a discussion",{name:"gettext",hash:{user:l(n,"getPartial").call(r,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:14,column:49},end:{line:14,column:78}}})},data:o,loc:{start:{line:14,column:0},end:{line:14,column:80}}}))+'\n<time class="bullet text-gray">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+"</time>\n"+(null!=(a=e.invokePartial(l(i,"badges"),t,{name:"badges",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"isChannelFeed"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:0},end:{line:21,column:11}}}))?a:"")+"\n"+(null!=(a=e.invokePartial(l(i,"channelCardMenu"),t,{name:"channelCardMenu",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"+(null!=(a=e.invokePartial(l(i,"channelCardContent"),t,{name:"channelCardContent",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelCardCreateView",["home/views/ChannelCardView","home/templates/channelCardCreate"],function(e,t){"use strict";return e.extend({template:t})}),define("home/templates/channelCardTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" is-recommended"},3:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="spacing-right align__item"\nhref="/home/channel/'+s(r(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"channelAvatar"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:10,column:0},end:{line:16,column:7}}}))?a:"")+"</a>\n"},4:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="img-round-sm block__item" src="'+e.escapeExpression(e.lambda(null!=t?r(t,"channelAvatar"):t,t))+'" alt="'+(null!=(a=e.invokePartial(r(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'">\n'},6:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channel-avatar '+r(a(null!=t?s(t,"bannerColorClass"):t,t))+'">\n<p class="channel-avatar__name">'+r(a(null!=t?s(t,"channelInitial"):t,t))+"</p>\n</div>\n"},8:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"with").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"thread"):t)?r(a,"forum"):a,{name:"with",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:0},end:{line:26,column:9}}}))?a:""},9:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="spacing-right align__item"\nhref="/home/forum/'+s(r(null!=t?l(t,"id"):t,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n<img src="'+s(r(null!=t?l(t,"faviconImage"):t,t))+'" alt="'+(null!=(a=e.invokePartial(l(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'" class="img-round-sm block__item" />\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="card-alert"></div>\n<div class="card__header -feed'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isBestOfDisqus"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:30},end:{line:2,column:74}}}))?a:"")+'">\n'+(null!=(a=e.invokePartial(l(i,"cardReasonDisqusPicks"),t,{name:"cardReasonDisqusPicks",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card__reason align align--middle">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"channel"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(8,o,0),data:o,loc:{start:{line:5,column:0},end:{line:27,column:7}}}))?a:"")+'<div class="align__item link-inner-gray-dark">\n'+s(l(n,"gettext").call(r,"Trending on %(forumLink)s",{name:"gettext",hash:{forumLink:l(n,"getPartial").call(r,"forumLink",null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a,{name:"getPartial",hash:{},data:o,loc:{start:{line:29,column:50},end:{line:29,column:87}}})},data:o,loc:{start:{line:29,column:0},end:{line:29,column:89}}}))+'\n<time class="bullet text-gray">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+"</time>\n</div>\n"+(null!=(a=e.invokePartial(l(i,"badges"),t,{name:"badges",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"+(null!=(a=e.invokePartial(l(i,"channelCardMenu"),t,{name:"channelCardMenu",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"+(null!=(a=e.invokePartial(l(i,"channelCardContent"),t,{name:"channelCardContent",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")},usePartial:!0,useData:!0})}),define("home/views/ChannelCardTrendingView",["home/views/ChannelCardView","home/templates/channelCardTrending"],function(e,t){"use strict";return e.extend({template:t})}),define("home/templates/channelCardShare",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" is-recommended"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="card-alert"></div>\n<div class="card__header -feed'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isBestOfDisqus"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:30},end:{line:2,column:74}}}))?a:"")+'">\n'+(null!=(a=e.invokePartial(r(i,"cardReasonDisqusPicks"),t,{name:"cardReasonDisqusPicks",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(r(i,"cardReasonForum"),t,{name:"cardReasonForum",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(r(i,"channelCardMenu"),t,{name:"channelCardMenu",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"+(null!=(a=e.invokePartial(r(i,"channelCardContent"),t,{name:"channelCardContent",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")},usePartial:!0,useData:!0})}),define("home/views/ChannelCardShareView",["underscore","core/config","home/views/ChannelCardView","home/templates/channelCardShare"],function(e,t,n,i){"use strict";return n.extend({template:i,templateHelpers:function(){var i=n.prototype.templateHelpers.apply(this,arguments);return e.extend(i,{guestAvatar:t.urls.avatar.generic})}})}),define("home/templates/channelFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message card-wrap">\n<img class="empty-message__img" src="'+s(l(n,"urlfor").call(r,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:2,column:37},end:{line:2,column:53}}}))+'/img/empty-states/discussions.png"/>\n<div class="empty-message__content">\n<h2 class="text-larger">'+s(l(n,"gettext").call(r,"This channel doesn't have any discussions yet.",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:24},end:{line:4,column:84}}}))+'</h2>\n<p class="text-gray text-medium">'+s(l(n,"gettext").call(r,"Discussions started by people in this channel will appear here.",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:33},end:{line:5,column:110}}}))+'</p>\n<a href="/home/discuss/'+s(e.lambda(null!=(a=null!=t?l(t,"primaryForum"):t)?l(a,"id"):a,t))+'/" class="button button-outline button-padding-wider text-large">\n'+s(l(n,"gettext").call(r,"Start the first discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:0},end:{line:7,column:40}}}))+"\n</a>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/channelOwnerFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-wrap">\n<div class="card__header">\n<div class="card__reason -large">\n<h1 class="text-gray-darker">\n<span class="icon-checkmark icon__position spacing-right-small text-success"></span>\n'+s(l(n,"gettext").call(r,"Your channel's been created!  Let's kick it off.",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:62}}}))+'\n</h1>\n</div>\n</div>\n<div class="card__content -empty">\n<div class="card-content__body">\n<ol class="list--numbered spacing-narrow text-gray-darker">\n<li>\n<h2 class="text-large spacing-bottom-small">\n'+s(l(n,"gettext").call(r,"Check out the %(exampleChannel)s and read the %(modPlaybook)s.",{name:"gettext",hash:{modPlaybook:l(n,"tag").call(r,"a",{name:"tag",hash:{text:"Mod Playbook",href:"https://media.disquscdn.com/channel-docs/Mod_Playbook.pdf"},data:o,loc:{start:{line:17,column:17},end:{line:17,column:111}}}),exampleChannel:l(n,"tag").call(r,"a",{name:"tag",hash:{text:"example channel",href:"https://disqus.com/home/channel/testchannel/"},data:o,loc:{start:{line:16,column:17},end:{line:16,column:101}}})},data:o,loc:{start:{line:15,column:0},end:{line:17,column:113}}}))+'\n</h2>\n<p class="text-gray">\n'+s(l(n,"gettext").call(r,"These will explain how to set up your channel for success.",{name:"gettext",hash:{},data:o,loc:{start:{line:20,column:0},end:{line:20,column:72}}}))+'</p>\n</li>\n<li>\n<h2 class="text-large spacing-bottom-small">\n'+s(l(n,"gettext").call(r,"Start your first, introductory discussion. Here's an %(exampleDiscussion)s.",{name:"gettext",hash:{exampleDiscussion:l(n,"tag").call(r,"a",{name:"tag",hash:{text:"example discussion",href:"https://disqus.com/home/channel/selectstart/discussion/channel-selectstart/welcome/"},data:o,loc:{start:{line:25,column:20},end:{line:25,column:146}}})},data:o,loc:{start:{line:24,column:0},end:{line:25,column:148}}}))+'\n</h2>\n<p class="text-gray spacing-bottom-narrow">\n'+s(l(n,"gettext").call(r,"Introduce your future audience to what your channel is about. This notice will disappear once you do.",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:0},end:{line:28,column:115}}}))+'</p>\n<p>\n<a class="button button-outline" href="/home/discuss/'+s(e.lambda(null!=(a=null!=t?l(t,"primaryForum"):t)?l(a,"id"):a,t))+'/">\n'+s(l(n,"gettext").call(r,"Start a discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:0},end:{line:31,column:32}}}))+'\n</a>\n</p>\n</li>\n<li>\n<h2 class="text-large spacing-bottom-small">\n'+s(l(n,"gettext").call(r,"Need help? Visit %(channelChat)s for tips on getting started.",{name:"gettext",hash:{channelChat:l(n,"tag").call(r,"a",{name:"tag",hash:{text:"Channel Chat",href:"https://disqus.com/home/channel/channelchat/"},data:o,loc:{start:{line:38,column:14},end:{line:38,column:95}}})},data:o,loc:{start:{line:37,column:0},end:{line:38,column:97}}}))+'\n</h2>\n<p class="text-gray">\n'+s(l(n,"gettext").call(r,"We want your channel to thrive just as much as you do.",{name:"gettext",hash:{},data:o,loc:{start:{line:41,column:0},end:{line:41,column:68}}}))+"\n</p>\n</li>\n</ol>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ChannelFeedEmptyView",["backbone-marionette","home/models/Session","home/templates/channelFeedEmpty","home/templates/channelOwnerFeedEmpty"],function(e,t,n,i){"use strict";return e.ItemView.extend({getTemplate:function(){return this.model.get("owner_id")===this.session.user.get("id")?i:n},initialize:function(){this.session=t.get()}})}),define("home/mixins/withViewFeedTracking",["underscore","core/bus"],function(e,t){"use strict";return function(){var n=this.initialize;this.initialize=function(){n.apply(this,arguments),this.listenTo(this,"renderInitialContent",this.trackView)},this.trackView=function(){t.trigger("viewFeed",this),e.defer(e.bind(function(){this.listenTo(this.collection,"sync",this.trackViewMore)},this))},this.trackViewMore=function(){t.trigger("viewMoreFeed",this.getNumPages())},this.getNumPages=function(){return this.model&&this.model.get("numPages")}}}),define("home/views/ChannelCardCollectionView",["backbone","core/bus","home/views/GenericCardCollectionView","home/views/ChannelCardFavoriteView","home/views/ChannelCardCreateView","home/views/ChannelCardTrendingView","home/views/ChannelCardShareView","home/views/ChannelFeedEmptyView","home/mixins/withViewFeedTracking"],function(e,t,n,i,o,a,r,s,l){"use strict";var c=n.extend({itemView:function(t){switch(t.model.get("verb")){case"favorite":return new i(t);case"create":return new o(t);case"trending":return new a(t);case"share":return new r(t);default:return new e.View}},itemViewOptions:function(e,t){var i=n.prototype.itemViewOptions.call(this,e,t);return i.enableBestOfDisqusCallout=this.enableBestOfDisqusCallout,i.filterVerbs=this.filterVerbs,i.isChannelFeed=this.isChannelFeed,i},emptyView:s,emptyViewOptions:function(){return{model:this.channel}},initialize:function(e){n.prototype.initialize.call(this,e),e=e||{},this.enableBestOfDisqusCallout=e.enableBestOfDisqusCallout,this.filterVerbs=e.filterVerbs,this.isChannelFeed=e.isChannelFeed,this.listenToOnce(this,"showFirstItem",function(){t.trigger("showFirstCard","channel")})}});return l.call(c.prototype),c}),define("core/mixins/withChannelFollowing",["underscore"],function(e){"use strict";function t(e){return{events:{"click [data-action=toggle-follow]":"toggleFollow"},initialize:function(){this.bindToPrimaryForum()},templateHelpers:function(){return{isFollowing:this.getIsFollowing()}},bindToPrimaryForum:function(){var t=e.call(this);if(t)return t.primaryForum?void this.listenTo(t.primaryForum,"change:isFollowing",this.updateFollowedState):void this.listenToOnce(t,"changeRelated:primaryForum",this.bindToPrimaryForum)},updateFollowedState:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.getIsFollowing())},getIsFollowing:function(){var t=e.call(this);return t&&t.primaryForum&&t.primaryForum.get("isFollowing")},toggleFollow:function(t){t&&(t.preventDefault(),t.stopPropagation());var n=e.call(this);n&&n.primaryForum&&(n.primaryForum.toggleFollowed(),this.trigger("toggled:follow",t))}}}function n(n){var i=n||function(){return this.model},o=t(i);this.initialize=e.wrap(this.initialize,function(e,t){e.call(this,t),o.initialize.call(this,t)}),this.templateHelpers=e.wrap(this.templateHelpers,function(t){var n=e.isFunction(t)?t.call(this):t;return e.extend(o.templateHelpers.call(this),n)}),this.bindToPrimaryForum=e.wrap(this.bindToPrimaryForum,function(e){e&&e.call(this),o.bindToPrimaryForum.call(this)}),this.events=e.extend({},o.events,this.events),e.extend(this,e.pick(o,"updateFollowedState","getIsFollowing","toggleFollow"))}return n}),define("home/templates/channelPromotionDiscussion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=t?l(t,"discussionRoute"):t,t))+'" class="channel-item__link">\n<div class="channel-item__heading spacing-bottom-small">\n<h2 class="truncate" data-truncate-lines="2">'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"clean_title"):a,t))+'</h2>\n</div>\n<div class="channel-item__footer">\n<span class="channel-item__count">'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"posts"):a,t))+'</span>\n<span class="channel-item__comment">'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:36},end:{line:7,column:58}}}))+"</span>\n</div>\n</a>\n"},useData:!0})}),define("home/views/ChannelPromotionDiscussionView",["backbone-marionette","home/mixins/withTruncate","home/templates/channelPromotionDiscussion"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:n,templateHelpers:function(){return{discussionRoute:this.model.thread.getDiscussionRoute()}}});return t.call(i.prototype),i}),define("home/templates/channelPromotion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"channel"):t)?r(a,"options"):a)?r(a,"tile"):a,t))+'" class="tile__media" />\n'},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile__overlay">\n<h1 class="tile__name">'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"channel"):t)?r(a,"name"):a,t))+'</h1>\n</div>\n<img src="https://media.disquscdn.com/home/blank_tile.png"\nclass="tile__media" />\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channels-module__inner">\n<a href="/home/channel/'+s(r(null!=(a=null!=t?c(t,"channel"):t)?c(a,"slug"):a,t))+'/" class="tile__wrapper">\n'+(null!=(a=c(n,"if").call(l,null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"options"):a)?c(a,"tile"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:3,column:0},end:{line:11,column:7}}}))?a:"")+'</a>\n<div class="channels-description">\n<p>'+s(r(null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"options"):a)?c(a,"description"):a,t))+'</p>\n</div>\n<div class="channels-metadata">\n<div class="padding-gutter align align--middle" data-role="stats">\n'+(null!=(a=e.invokePartial(c(i,"channelMetadataStats"),t,{name:"channelMetadataStats",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n</div>\n<div class="padding-gutter border-top hidden-lg">\n<h4 class="text-subheading spacing-bottom">'+s(c(n,"gettext").call(l,"Recommended Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:43},end:{line:22,column:80}}}))+'</h4>\n<section data-role="discussions" class="channels-module__discussions"></section>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelPromotionView",["backbone-marionette","core/mixins/withChannelFollowing","home/views/ChannelPromotionDiscussionView","home/views/FetchingView","home/mixins/withSubviews","home/templates/channelPromotion"],function(e,t,n,i,o,a){"use strict";var r=e.ItemView.extend({className:"channels-module__block",template:a,regions:{discussionsRegion:"[data-role=discussions]"},templateHelpers:function(){var e=this.model.channel.primaryForum,t=e.get("numThreads"),n=e.get("numFollowers");return{numThreads:t&&t.toLocaleString(),numFollowers:n&&n.toLocaleString()}},initialize:function(){this.bindToPrimaryForum()},bindToPrimaryForum:function(){var e=this.model.channel;if(!e.primaryForum)return void this.listenToOnce(e,"changeRelated:primaryForum",this.bindToPrimaryForum);this.listenTo(e.primaryForum,"change:numThreads change:numFollowers",this.render)},onRender:function(){this.activateRegion(this.discussionsRegion,this.createDiscussionsRegion)},createDiscussionsRegion:function(){return new e.CollectionView({itemView:n,itemViewOptions:function(e,t){return{className:t>1?"hidden":"channels-module__article"}},collection:this.model.topActivities.items,emptyView:function(){return new i({className:"spinner-small"})}})}}),s=r.prototype;return t.call(s,function(){return this.model.channel}),o.call(s),r}),define("home/views/PromotedChannelsCardView",["backbone-marionette","home/views/ChannelPromotionView"],function(e,t){"use strict";return e.CollectionView.extend({className:"card--interstitial",itemView:t})}),define("home/mixins/withInterstitialChannelCards",["jquery","underscore","backbone","core/UniqueModel","home/models/ChannelProfileFeed","home/models/Session","home/views/PromotedChannelsCardView"],function(e,t,n,i,o,a,r){"use strict";var s={initialize:function(n,i){n.call(this,i),this.lastIntersitialCardIndex=-1;var o=t.bind(this.initializeChannelProfiles,this),r=a.get();r.loadPromise().always(function(){var t=r.getUserProfile(),n=t&&t.forumsFollowing.ensureFetched();e.when(n).then(o)})},initializeChannelProfiles:function(){var e=new i(o,{listName:o.LIST_NAMES.promoted});e.ensureFetched().then(t.bind(function(){this.interstitialChannelProfiles=e.items.chain().reject(function(e){return e.channel.primaryForum.get("isFollowing")}).shuffle().value()},this))},getAdjustedIndex:function(e){var n=0,i=0;return t.each(this.children._views,function(t){i>e||(t instanceof r?n+=1:i+=1)}),e+n},addItemView:function(e,t,n,i){var o=this.getAdjustedIndex(i),a=e.call(this,t,n,o);return o+=1,this.interstitialChannelProfiles&&o-this.lastIntersitialCardIndex>10&&(this.insertChannelCard(o),this.lastIntersitialCardIndex=o),a},insertChannelCard:function(e){var t=new n.Collection(this.interstitialChannelProfiles.splice(0,2));if(!(t.length<2)){t.invoke("ensureFetchedTopActivities");var i=new r({collection:t});this.children.add(i),this.renderItemView(i,e)}}};return function(){this.initialize=t.wrap(this.initialize,s.initialize),this.addItemView=t.wrap(this.addItemView,s.addItemView),t.extend(this,t.pick(s,["insertChannelCard","initializeChannelProfiles","getAdjustedIndex"]))}}),define("home/views/ChannelCardCollectionViewWithChannelPromotion",["home/views/ChannelCardCollectionView","home/mixins/withInterstitialChannelCards"],function(e,t){"use strict";var n=e.extend({});return t.call(n.prototype),n}),define("home/templates/spinner",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="spinner"></div>\n'},useData:!0})}),define("home/templates/moreButton",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<button class="button button-fill button-small button-padding-taller button-wide" data-action="more-feed">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"More",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:18}}}))+"\n</button>\n"},useData:!0})}),define("home/templates/endOfItems",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="feed-end" data-role="end-message">\n'+r(s(n,"gettext").call(a,"That's the end. ",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:30}}}))+'\n\x3c!--    TODO: @taylangocmen restore this with pages link after improvements (1) --\x3e\n\x3c!--    <a href="/home/explore/">'+r(s(n,"gettext").call(a,"Find more interesting discussions »",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:33},end:{line:4,column:82}}}))+"</a>--\x3e\n</div>\n"},useData:!0})}),define("home/templates/loadError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n<img src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:2,column:10},end:{line:2,column:26}}}))+'/img/Pam_Error.png" class="img-responsive" />\n<h2>'+r(s(n,"gettext").call(a,"Darn it!",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:4},end:{line:3,column:26}}}))+'</h2>\n<div class="text-small">\n'+r(s(n,"gettext").call(a,"Something went wrong while trying to load this feed. Try again in a little while.",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:95}}}))+'\n</div>\n<div class="text-small">\n'+r(s(n,"gettext").call(a,"Please visit %(discussDisqus)s to learn more.",{name:"gettext",hash:{discussDisqus:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"Discuss Disqus",href:"//disqus.com/home/discussion/channel-discussdisqus/issues_loading_your_feed_send_us_more_details/"},data:o,loc:{start:{line:9,column:16},end:{line:10,column:22}}})},data:o,loc:{start:{line:8,column:0},end:{line:10,column:24}}}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/views/common/FetchableCollectionFooterView",["underscore","backbone-marionette","home/templates/spinner","home/templates/moreButton","home/templates/endOfItems","home/templates/loadError"],function(e,t,n,i,o,a){"use strict";return t.ItemView.extend({endOfItemsTemplate:o,errorTemplate:a,template:function(e){return e.error?this.errorTemplate(e):this.collection.length?e.fetching?n(e):e.hasNext?i(e):this.endOfItemsTemplate(e):""},className:"more-wrapper",events:{"click [data-action=more-feed]":"moreClicked"},modelEvents:{"change:fetching":"render"},initialize:function(){this.template=e.bind(this.template,this)},moreClicked:function(e){e.preventDefault(),this.model.fetchItems()}})}),define("home/templates/channelFeedEndOfItems",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="feed-end" data-role="end-message">\n<a href="#content-area">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Back to Top",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:24},end:{line:2,column:49}}}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ChannelFeedFooterView",["home/views/common/FetchableCollectionFooterView","home/templates/channelFeedEndOfItems"],function(e,t){"use strict";return e.extend({endOfItemsTemplate:t})}),define("home/templates/unreadCount",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Show One New Item",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:0},end:{line:3,column:31}}}))+"\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"Show %(x)s New Items",{name:"gettext",hash:{x:null!=t?a(t,"numUnread"):t},data:o,loc:{start:{line:5,column:0},end:{line:5,column:48}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button button-padding-taller button-wide button-fill--brand text-medium">\n'+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"numUnread"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:2,column:6},end:{line:2,column:22}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:0},end:{line:6,column:7}}}))?a:"")+"</button>\n"},useData:!0})}),
define("home/views/UnreadCountView",["backbone-marionette","home/templates/unreadCount"],function(e,t){"use strict";var n=e.ItemView,i=n.prototype;return n.extend({className:"feed-new",events:{click:"handleAddUnread"},handleAddUnread:function(){this.collection.addUnread(),this.close()},template:t,serializeData:function(){return{numUnread:this.collection.unreadQueue.length}},render:function(){return this.serializeData().numUnread<=0?this:i.render.call(this)}})}),define("home/templates/fetchableCollectionLayout",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div data-role="header-area"></div>\n<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/common/FetchableCollectionLayout",["underscore","backbone-marionette","home/views/common/FetchableCollectionView","home/views/common/FetchableCollectionFooterView","home/views/FetchingView","home/views/UnreadCountView","home/templates/fetchableCollectionLayout"],function(e,t,n,i,o,a,r){"use strict";return t.Layout.extend({itemViewEventPrefix:"collectionview",template:r,regions:{headerRegion:"[data-role=header-area]",contentRegion:"[data-role=content-area]",footerRegion:"[data-role=footer-area]"},fetchableCollectionFooterView:i,initialize:function(e){if(e.fetchableCollectionView&&(this.fetchableCollectionView=e.fetchableCollectionView),!this.fetchableCollectionView||!(this.fetchableCollectionView===n||this.fetchableCollectionView.prototype instanceof n))throw Error("A FetchableCollectionLayout must define a fetchableCollectionView");if(e.fetchableCollectionFooterView&&(this.fetchableCollectionFooterView=e.fetchableCollectionFooterView),!this.contentRegion||!this.footerRegion)throw Error("A template for a FetchableCollectionLayout must define a content region and a footer region");this.listenTo(this.collection,"unreadItemsReady",this.updateHeader),this.options=e},updateHeader:function(){this.headerRegion.show(new a({collection:this.collection}))},onDomRefresh:function(){this.contentRegion.currentView&&this.stopListening(this.contentRegion.currentView);var n=new this.fetchableCollectionView(e.clone(this.options)),i=n.collection;i.updateUnreadCount&&i.updateUnreadCount(),n.listenable.ensureFetched&&n.listenable.ensureFetched(),t.CollectionView.prototype.addChildViewEventForwarding.call(this,n),this.contentRegion.show(new o),e.defer(e.bind(function(){this.isClosed||(this.contentRegion.show(n),this.trigger("showCollection",n),this.footerRegion.show(new this.fetchableCollectionFooterView({model:this.model,collection:this.collection})))},this))},getItemEvents:t.CollectionView.prototype.getItemEvents})}),define("home/mixins/asCollapsibleCard",["underscore"],function(e){"use strict";return function(){this.events=e.extend({"click [data-action=toggle-collapsed]":"toggleCollapsed"},this.events),this.toggleCollapsed=function(e){e&&e.preventDefault(),this.$(".card-collapsed, .card-expanded").addBack(".card-collapsed, .card-expanded").toggleClass("card-collapsed card-expanded")}}}),define("home/mixins/withReasonOld",["underscore","home/views/ActivityActorsHoverCard","core/utils"],function(e,t,n){"use strict";var i=function(){if(!n.isMobileUserAgent()){var e=this.$("[data-role=actors]");e.length&&(this.hoverCard&&this.hoverCard.remove(),this.hoverCard=t.create({targetElement:e,activityFeedItem:this.model,activityId:this.model.id,numShownActors:o.call(this).length}))}},o=function(){return this.model.actors?this.model.get("totalActors")<4?this.model.toJSON().actors:this.model.toJSON().actors.slice(0,2):[]},a=function(){if(!this.model.actors||1!==this.model.actors.length)return 0;var e=this.model.get("totalActivities");return e>1?e:0};return function(){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this.listenTo(this,"render",i)});var t=this.templateHelpers;this.templateHelpers=function(){var n=o.call(this);return e.extend({relativeTime:this.model.getRelativeTimestamp(),shownActors:n,numRemainingActors:this.model.get("totalActors")-n.length,numOccurrences:a.call(this)},t?t.apply(this,arguments):{})}}}),define("home/views/common/ActivityFooterView",["backbone-marionette","home/models/Session"],function(e,t){"use strict";return e.ItemView.extend({templateHelpers:function(){var e=t.get();return{favorited:this.model.thread.get("userScore")>0,discussionRoute:this.model.thread.getDiscussionRoute(),authenticated:!e.isAnonymous()}},events:{"click [data-action=favorite]":"toggleThreadFavorited"},initialize:function(){this.listenTo(this.model.thread,"change:userScore",this.render)},toggleThreadFavorited:function(e){e&&e.preventDefault(),this.model.thread.toggleFavorited()}})}),define("home/templates/activityFooterFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<ul class="actions">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"activityFooterDefaultActions"),t,{name:"activityFooterDefaultActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterFavoriteView",["home/views/common/ActivityFooterView","home/templates/activityFooterFavorite"],function(e,t){"use strict";return e.extend({template:t})}),define("home/templates/activityCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(group)s recommended %(numOccurance)s times",{name:"gettext",hash:{numOccurance:null!=t?r(t,"numOccurance"):t,group:r(n,"getPartial").call(a,"userGroup",{name:"getPartial",hash:{},data:o,loc:{start:{line:3,column:65},end:{line:3,column:89}}})},data:o,loc:{start:{line:3,column:0},end:{line:3,column:119}}}))+"\n"},3:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(group)s recommended",{name:"gettext",hash:{group:r(n,"getPartial").call(a,"userGroup",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:42},end:{line:5,column:66}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:68}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-reason">\n'+(null!=(a=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"numOccurances"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:0},end:{line:6,column:7}}}))?a:"")+'<span class="time">'+e.escapeExpression(r(null!=t?s(t,"relativeTime"):t,t))+"</span>\n</div>\n"+(null!=(a=e.invokePartial(s(i,"cardTitle"),t,{name:"cardTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n'+(null!=(a=r(null!=t?s(t,"threadDescriptionHTML"):t,t))?a:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardFavoriteView",["backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterFavoriteView","home/templates/activityCardFavorite"],function(e,t,n,i,o){"use strict";var a=e.ItemView,r=a.extend({template:o,templateHelpers:function(){return{discussionRoute:this.model.thread.getDiscussionRoute(),threadDescriptionHTML:this.model.thread.getDefaultDescription()}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.footerRegion,this.createFooterView)},createFooterView:function(){return new i({el:this.footerRegion.el,model:this.model})}}),s=r.prototype;return t.call(s),n.call(s),r}),define("home/templates/truncatedPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?a(t,"hiddenExplanation"):t,t))+"</span>\n"},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"plaintext"):t,t))+"\n"},5:function(e,t,n,i,o){return'<span class="icon-images"></span>\n'},7:function(e,t,n,i,o){return"hidden"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(c(i,"userAvatar"),null!=t?c(t,"author"):t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="comment-body">\n<header class="comment-header">\n'+(null!=(a=e.invokePartial(c(i,"userName"),null!=t?c(t,"author"):t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<a class="link-gray time"\nhref="'+s(r(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+s(r(null!=t?c(t,"id"):t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+s(r(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n\n'+s(r(null!=t?c(t,"relativeTime"):t,t))+"\n</a>\n"+(null!=(a=c(n,"if").call(l,null!=t?c(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:0},end:{line:14,column:7}}}))?a:"")+'</header>\n<a href="'+s(r(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+s(r(null!=t?c(t,"id"):t,t))+'"\nclass="card-comment-truncated truncate-line"\ndata-link-name="message"\ndir="auto"\ndata-thread-id="'+s(r(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n\n'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"plaintext"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:22,column:0},end:{line:26,column:7}}}))?a:"")+'</a>\n\n<footer class="comment-actions '+(null!=(a=c(n,"if").call(l,null!=t?c(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:29,column:31},end:{line:29,column:60}}}))?a:"")+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/TruncatedPostView",["home/views/PostView","home/templates/truncatedPost"],function(e,t){"use strict";return e.extend({template:t})}),define("home/templates/replyActivity",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div data-role="parent-post" class="parent"></div>\n<div data-role="child-post" class="child"></div>\n'},useData:!0})}),define("home/views/ReplyActivityView",["backbone-marionette","home/mixins/withSubviews","home/views/PostView","home/views/TruncatedPostView","home/templates/replyActivity"],function(e,t,n,i,o){"use strict";var a=e.ItemView,r=a.extend({className:"card-reply",template:o,regions:{inReplyToRegion:"[data-role=parent-post]",replyRegion:"[data-role=child-post]"},initialize:function(e){this.shouldCollapse=e&&e.shouldCollapse},onRender:function(){this.activateRegion(this.inReplyToRegion,this.createParentPostView),this.activateRegion(this.replyRegion,this.createChildPostView)},createParentPostView:function(){return new i({model:this.model.target})},createChildPostView:function(){return new n({model:this.model.object,shouldCollapse:this.shouldCollapse})}});return t.call(r.prototype),r}),define("home/views/PostActivityCollectionView",["underscore","backbone-marionette","home/views/PostView","home/views/ReplyActivityView"],function(e,t,n,i){"use strict";return t.CollectionView.extend({initialize:function(e){this.collapsePosts=!e||!1!==e.collapsePosts},getItemView:function(e){return"reply"===e.get("verb")?i:n},itemViewOptions:function(t,n){var i=t;"post"===t.get("verb")&&(i=t.object);var o=this.getItemView(t).prototype.className;o=e.isFunction(o)?o.call({model:t}):o||"";var a=o;return n>0&&(a+=" collapsible"),{model:i,className:a,shouldCollapse:this.collapsePosts}}})}),define("home/views/common/ActivityCardPostBaseView",["backbone","backbone-marionette","home/mixins/withSubviews","home/views/PostActivityCollectionView"],function(e,t,n,i){"use strict";var o=t.ItemView.extend({regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]"},buildPostsView:function(){return new i({el:this.postsRegion.el,collection:new e.Collection(this.model.activities)})},createFooterView:void 0,onRender:function(){this.activateRegion(this.postsRegion,this.buildPostsView),this.activateRegion(this.footerRegion,this.createFooterView)}});return n.call(o.prototype),o}),define("home/templates/activityFooterPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<ul class="actions">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"activityFooterDefaultActions"),t,{name:"activityFooterDefaultActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterPostView",["underscore","home/views/common/ActivityFooterView","home/templates/activityFooterPost"],function(e,t,n){"use strict";return t.extend({template:n,templateHelpers:function(){return e.defaults({hasMultiplePosts:this.model.activities.length>1},t.prototype.templateHelpers.apply(this,arguments))}})}),define("home/templates/activityCardPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(group)s commented %(numOccurance)s times",{name:"gettext",hash:{numOccurance:null!=t?r(t,"numOccurance"):t,group:r(n,"getPartial").call(a,"userGroup",{name:"getPartial",hash:{},data:o,loc:{start:{line:3,column:63},end:{line:3,column:87}}})},data:o,loc:{start:{line:3,column:0},end:{line:3,column:117}}}))+"\n"},3:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(group)s commented",{name:"gettext",hash:{group:r(n,"getPartial").call(a,"userGroup",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:40},end:{line:5,column:64}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:66}}}))+"\n"},5:function(e,t,n,i,o){return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"See More",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:0},end:{line:15,column:22}}}))+"\n</a>\n</div>\n</div>\n"},7:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="collapsible">\n<div class="card-grouped-actions">\n<a class="collapsible button button-outline button-small" href="'+a(e.lambda(null!=t?r(t,"discussionRoute"):t,t))+'" data-link-name="view_comment">\n'+a(r(n,"gettext").call(null!=t?t:e.nullContext||{},"See All Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:0},end:{line:24,column:30}}}))+"\n</a>\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-reason">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"numOccurances"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:0},end:{line:6,column:7}}}))?a:"")+'<span class="time">'+e.escapeExpression(e.lambda(null!=t?s(t,"relativeTime"):t,t))+"</span>\n</div>\n"+(null!=(a=e.invokePartial(s(i,"cardTitle"),t,{name:"cardTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div data-role="posts"></div>\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"shouldCollapse"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:0},end:{line:19,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"hasOverflowPosts"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:0},end:{line:28,column:7}}}))?a:"")+'<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardPostView",["home/mixins/withReasonOld","home/views/common/ActivityCardPostBaseView","home/views/ActivityFooterPostView","home/templates/activityCardPost"],function(e,t,n,i){"use strict";var o=t,a=o.extend({template:i,templateHelpers:function(){return{hasOverflowPosts:this.model.get("totalActivities")>this.model.activities.length,shouldCollapse:this.shouldCollapse(),discussionRoute:this.model.thread.getDiscussionRoute()}},createFooterView:function(){return new n({el:this.footerRegion.el,model:this.model})},shouldCollapse:function(){return this.model.activities.length>1}});return e.call(a.prototype),a}),define("home/templates/activityFooterReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<ul class="actions">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"activityFooterDefaultActions"),t,{name:"activityFooterDefaultActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterReplyView",["home/views/common/ActivityFooterView","home/templates/activityFooterReply"],function(e,t){"use strict";return e.extend({template:t})}),define("home/templates/activityCardReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-reason">\n'+(null!=(a=e.invokePartial(r(i,"userGroup"),t,{name:"userGroup",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<span class="icon-forward"></span>'+(null!=(a=e.invokePartial(r(i,"userPreview"),null!=(a=null!=t?r(t,"target"):t)?r(a,"author"):a,{name:"userPreview",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+' <span class="time">'+e.escapeExpression(e.lambda(null!=t?r(t,"relativeTime"):t,t))+"</span>\n</div>\n"+(null!=(a=e.invokePartial(r(i,"cardTitle"),t,{name:"cardTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-reply" data-role="posts"></div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardReplyView",["home/mixins/withReasonOld","home/views/common/ActivityCardPostBaseView","home/views/ActivityFooterReplyView","home/templates/activityCardReply"],function(e,t,n,i){"use strict";var o=t,a=o.extend({template:i,templateHelpers:function(){return{target:this.model.activities[0].target.toJSON()}},createFooterView:function(){return new n({el:this.footerRegion.el,model:this.model})}});return e.call(a.prototype),a}),define("home/templates/activityFooterTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<ul class="actions">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"activityFooterDefaultActions"),t,{name:"activityFooterDefaultActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterTrendingView",["home/views/common/ActivityFooterView","home/templates/activityFooterTrending"],function(e,t){"use strict";return e.extend({template:t})}),define("home/templates/activityCardTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/forum/'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"forum"):a)?r(a,"id"):a,t))+'/" class="community link-gray-darker" data-link-name="forum_name">'+(null!=(a=e.invokePartial(r(i,"forumName"),null!=(a=null!=t?r(t,"target"):t)?r(a,"forum"):a,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(r(i,"forumAvatarLink"),null!=(a=null!=t?r(t,"target"):t)?r(a,"forum"):a,{name:"forumAvatarLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+' <a href="/home/forum/'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"forum"):a)?r(a,"id"):a,t))+'/" class="community link-gray-darker" data-link-name="forum_name">'+(null!=(a=e.invokePartial(r(i,"forumName"),null!=(a=null!=t?r(t,"target"):t)?r(a,"forum"):a,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-reason">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"hideForumFavicon"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:0},end:{line:6,column:7}}}))?a:"")+'<span class="time">'+s(c(n,"gettext").call(r,"Recent activity",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:19},end:{line:7,column:48}}}))+" "+s(l(null!=t?c(t,"relativeTime"):t,t))+"</span>\n</div>\n"+(null!=(a=e.invokePartial(c(i,"cardTitle"),t,{name:"cardTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n'+(null!=(a=l(null!=t?c(t,"threadDescriptionHTML"):t,t))?a:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardTrendingView",["underscore","backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterTrendingView","home/templates/activityCardTrending"],function(e,t,n,i,o,a){"use strict";var r=t.ItemView,s=r.extend({template:a,templateHelpers:function(){var t=this.model.thread.forum.get("favicon")&&this.model.thread.forum.get("favicon").cache;return e.extend({},{commenter:this.model.thread.getMostRecentCommenter(),target:this.model.activities[0].target.toJSON(),discussionRoute:this.model.thread.getDiscussionRoute(),threadDescriptionHTML:this.model.thread.getDefaultDescription(),hideForumFavicon:!t||/favicon-default/.test(t)})},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.footerRegion,this.createFooterView)},createFooterView:function(){return new o({el:this.footerRegion.el,model:this.model})}}),l=s.prototype;return n.call(l),i.call(l),s}),define("home/templates/activityFooterCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<ul class="actions">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"activityFooterDefaultActions"),t,{name:"activityFooterDefaultActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterCreateView",["home/views/common/ActivityFooterView","home/templates/activityFooterCreate"],function(e,t){"use strict";return e.extend({template:t})}),define("home/templates/activityCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion-comments-title">'+e.escapeExpression(s(n,"gettext").call(r,"Recent Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:44},end:{line:8,column:73}}}))+'</div>\n<div class="card-discussion-comments" data-role="posts"></div>\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"shouldCollapse"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:0},end:{line:19,column:7}}}))?a:"")},2:function(e,t,n,i,o){return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"See More",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:0},end:{line:15,column:22}}}))+"\n</a>\n</div>\n</div>\n"},4:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n'+(null!=(a=e.lambda(null!=t?r(t,"threadDescriptionHTML"):t,t))?a:"")+"\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-reason">\n'+s(l(n,"gettext").call(r,"%(group)s authored",{name:"gettext",hash:{group:l(n,"getPartial").call(r,"userGroup",{name:"getPartial",hash:{},data:o,loc:{start:{line:2,column:39},end:{line:2,column:63}}})},data:o,loc:{start:{line:2,column:0},end:{line:2,column:65}}}))+'\n<span class="time">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+"</span>\n</div>\n"+(null!=(a=e.invokePartial(l(i,"cardTitle"),t,{name:"cardTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"recentPostCount"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:7,column:0},end:{line:26,column:7}}}))?a:"")+'\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardCreateView",["underscore","backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterCreateView","home/views/PostCollectionView","home/templates/activityCardCreate"],function(e,t,n,i,o,a,r){"use strict";var s=t.ItemView,l=s.extend({template:r,templateHelpers:function(){var e=this.model.thread.forum.get("favicon")&&this.model.thread.forum.get("favicon").cache;return{target:this.model.activities[0].target.toJSON(),discussionRoute:this.model.thread.getDiscussionRoute(),threadDescriptionHTML:this.model.thread.getDefaultDescription(),recentPostCount:this.model.thread.recentPosts.length,shouldCollapse:this.shouldCollapse(),hideForumFavicon:!e||/favicon-default/.test(e)}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostsView),this.activateRegion(this.footerRegion,this.createFooterView)},createPostsView:function(){return new a({el:this.postsRegion.el,collection:this.model.thread.recentPosts,itemViewOptions:function(t,n){var i=this.getItemView(t).prototype.className;i=e.isFunction(i)?i.call({model:t}):i||"";var o=i;return n>0&&(o+=" collapsible"),{className:o}}})},createFooterView:function(){var e=new o({el:this.footerRegion.el,model:this.model});return this.listenTo(e,"toggle:collapsed",function(){this.trigger("toggle:collapsed")}),e},shouldCollapse:function(){return this.model.thread.recentPosts.length>1}}),c=l.prototype;return n.call(c),i.call(c),l}),define("home/templates/activityCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"threadImage"),t,{name:"threadImage",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion">\n<div class="card-aside" data-role="thread-image">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canShowThreadImage"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:5,column:7}}}))?a:"")+'</div>\n<div class="card-body">\n<div data-role="card-content"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardWrapperView",["handlebars","home/utils/layoutUtils","home/views/common/ActivityCardView","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/views/ActivityCardFavoriteView","home/views/ActivityCardPostView","home/views/ActivityCardReplyView","home/views/ActivityCardTrendingView","home/views/ActivityCardCreateView","home/templates/activityCard"],function(e,t,n,i,o,a,r,s,l,c,u){"use strict";var d=n,h=d.extend({className:function(){return"card card-"+this.model.get("verb")},template:u,templateHelpers:function(){return{canShowThreadImage:!t.isNarrowLayout(),discussionRoute:this.model.thread.getDiscussionRoute(),image:this.model.thread.getImage()}},initialize:function(){t.isNarrowLayout()||this.listenTo(this.model.thread,"change:content",this.renderThreadImage),this.contentRegion=this.addRegion("[data-role=card-content]")},getContentView:function(){var e;switch(this.model.get("verb")){case"favorite":e=a;break;case"post":e=r;break;case"reply":e=s;break;case"trending":e=l;break;case"create":e=c}return new e({el:this.contentRegion.el,model:this.model})},renderThreadImage:function(){if(!t.isNarrowLayout()){var n=this.serializeData();n=this.mixinTemplateHelpers(n),this.$("[data-role=thread-image]").html(e.partials.threadImage(n))}},onRender:function(){var e=this.contentRegion;this.activateRegion(e,this.getContentView);var t=e.currentView;t.shouldCollapse&&t.shouldCollapse()&&this.$el.addClass("card-collapsed")}}),m=h.prototype;return i.call(m),o.call(m),h}),define("home/templates/feedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Woops, nothing is happening here.",{
name:"gettext",hash:{},data:o,loc:{start:{line:1,column:0},end:{line:1,column:47}}}))+"\n"},useData:!0})}),define("home/views/FeedEmptyView",["backbone-marionette","home/templates/feedEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/views/ActivityCardCollectionView",["underscore","home/views/ActivityCardWrapperView","home/views/common/FetchableCollectionView","home/views/FeedEmptyView","home/mixins/withViewFeedTracking","home/mixins/withClickLinkTracking"],function(e,t,n,i,o,a){"use strict";var r=n.extend({className:"cards",emptyView:i,itemView:t,events:e.defaults({"click a[data-link-name]":function(e){this.isShowingNonItemView()||this.trackClickLink(e)}},n.prototype.events)});return o.call(r.prototype),a.call(r.prototype),r}),define("home/templates/commentCardPostActions",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="vote-up'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"sessionUserHasUpvoted"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:26},end:{line:2,column:69}}}))?a:"")+'" data-action="vote" data-vote="1">\n<span class="vote__count text-gray text-small" data-role="upvotes">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"likes"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:4,column:29}}}))?a:"")+'\n</span>\n<span class="icon-arrow-up icon-tiny"></span>\n</a>\n'},2:function(e,t,n,i,o){return" active"},4:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"likes"):t,t))},6:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="vote-down'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"sessionUserHasDownvoted"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:28},end:{line:11,column:73}}}))?a:"")+'" data-action="vote" data-vote="-1">\n<span class="icon-arrow-down icon-tiny"></span>\n<span class="vote__count text-gray text-small" data-role="downvotes">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"showDownvoteCount"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:14,column:44}}}))?a:"")+"\n</span>\n</a>\n"},7:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"dislikes"):t,t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=c(n,"if").call(r,null!=t?c(t,"showUpvote"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:8,column:7}}}))?a:"")+"\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"showDownvote"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:0},end:{line:17,column:7}}}))?a:"")+"\n"+(null!=(a=e.invokePartial(c(i,"replyOrEditLink"),t,{name:"replyOrEditLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\n<a href="'+l(s(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+l(s(null!=t?c(t,"id"):t,t))+'"\nclass="view-comment link-gray"\ndata-link-name="view_comment"\ndata-thread-id="'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n\n<span class="visible-md">'+l(c(n,"gettext").call(r,"View",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:25},end:{line:26,column:43}}}))+'</span>\n<span class="hidden-md">'+l(c(n,"gettext").call(r,"View in discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:27,column:24},end:{line:27,column:56}}}))+"</span>\n</a>\n"},usePartial:!0,useData:!0})}),define("home/views/CommentCardPostActionsView",["jquery","home/views/PostActionsView","home/templates/commentCardPostActions"],function(e,t,n){"use strict";return t.extend({template:n,initializeReplyViewManager:e.noop,toggleReplyView:e.noop})}),define("home/templates/commentCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-comment comment-card__wrap">\n<div\nclass="card-link__wrapper '+(null!=(a=c(n,"unless").call(r,null!=t?c(t,"image"):t,{name:"unless",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:26},end:{line:4,column:63}}}))?a:"")+' align"\ndata-role="thread-link"\ndata-link-name="thread_preview"\ndata-thread-id="'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:11,column:7}}}))?a:"")+'<div class="card-link__body">\n<div>\n<div class="truncate" data-truncate-lines="2" dir="auto">\n<h3 class="text-large">'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"clean_title"):a,t))+"</h3>\n</div>\n</div>\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"threadDescription"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:0},end:{line:27,column:7}}}))?a:"")+'</div>\n</div>\n<div data-role="posts" class="card-link__comments"></div>\n<button class="comment-card__more text-small pull-right">\n<span class="visible-md">'+l(c(n,"gettext").call(r,"Less",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:25},end:{line:32,column:43}}}))+'</span>\n<span class="hidden-md">'+l(c(n,"gettext").call(r,"Less Information",{name:"gettext",hash:{},data:o,loc:{start:{line:33,column:24},end:{line:33,column:54}}}))+"</span>\n</button>\n</div>\n"},2:function(e,t,n,i,o){return" no-image"},4:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="card-link__img" src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'">\n'},6:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n<div class="card-link__description truncate" data-truncate-lines="2" dir="auto">\n'+e.escapeExpression(e.lambda(null!=t?r(t,"threadDescription"):t,t))+"\n</div>\n</div>\n"+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"forumFriendlyUrl"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:24,column:0},end:{line:26,column:7}}}))?a:"")},7:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-link-forum-url">('+e.escapeExpression(e.lambda(null!=t?a(t,"forumFriendlyUrl"):t,t))+")</div>\n"},9:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-comment comment-card__wrap">\n<div class="comment-body">\n<div class="comment-header comment-card__header text-small text-gray">\n'+(null!=(a=c(n,"with").call(r,null!=t?c(t,"postActivity"):t,{name:"with",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:40,column:0},end:{line:46,column:9}}}))?a:"")+'<time class="time">'+l(s(null!=t?c(t,"relativeTime"):t,t))+'</time>\n</div>\n<div class="comment-card__title link-inner-gray text-small">\n<strong class="link-gray-dark">\n'+(null!=(a=e.invokePartial(c(i,"channelAwareForumLink"),null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a,{name:"channelAwareForumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</strong>\n<span class="bullet"></span>\n<span class="truncate" data-truncate-lines="2" dir="auto">\n'+(null!=(a=e.invokePartial(c(i,"threadLink"),t,{name:"threadLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</span>\n</div>\n<div class="card-content__summary">\n<div class="truncate" data-truncate-lines="30" data-role="message">\n'+(null!=(a=s(null!=(a=null!=(a=null!=t?c(t,"postActivity"):t)?c(a,"object"):a)?c(a,"message"):a,t))?a:"")+'\n</div>\n</div>\n<div class="card-comment-action comment-card__action" data-role="actions"></div>\n</div>\n<button class="comment-card__more text-gray-light text-small pull-right">\n<span class="visible-md">'+l(c(n,"gettext").call(r,"More",{name:"gettext",hash:{},data:o,loc:{start:{line:66,column:25},end:{line:66,column:43}}}))+'</span>\n<span class="hidden-md">'+l(c(n,"gettext").call(r,"More Information",{name:"gettext",hash:{},data:o,loc:{start:{line:67,column:24},end:{line:67,column:54}}}))+"</span>\n</button>\n\n</div>\n"},10:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(s(i,"userPreview"),null!=t?s(t,"actor"):t,{name:"userPreview",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"verb"):t,"reply",{name:"eq",hash:{},data:o,loc:{start:{line:42,column:6},end:{line:42,column:23}}}),{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:42,column:0},end:{line:45,column:7}}}))?a:"")},11:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="icon-forward"></span>\n<span class="link-inner-gray">'+(null!=(a=e.invokePartial(r(i,"userName"),null!=(a=null!=t?r(t,"target"):t)?r(a,"author"):a,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"expanded"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:1,column:0},end:{line:71,column:7}}}))?a:""},usePartial:!0,useData:!0})}),define("home/views/CommentCardView",["jquery","underscore","backbone","core/mixins/withRichMedia","home/utils/navigationUtils","home/mixins/withAllstarPopover","home/mixins/withSubviews","home/mixins/withTruncate","home/views/common/ActivityCardView","home/views/CommentCardPostActionsView","home/views/PostActivityCollectionView","home/templates/commentCard"],function(e,t,n,i,o,a,r,s,l,c,u,d){"use strict";var h=l.extend({className:"card-wrap is-expandable",template:d,templateHelpers:function(){var e=this.getPostActivity();return{expanded:this.expanded,discussionRoute:this.model.thread.getDiscussionRoute(),postActivity:e.toJSON(),relativeTime:e.getRelativeCreatedAt(),forumFriendlyUrl:this.model.thread.forum.getFriendlyUrl(),threadDescription:this.model.thread.getPlainDescription(),image:this.model.thread.getImage()}},regions:{actionsRegion:"[data-role=actions]",postsRegion:"[data-role=posts]"},events:{click:"handleClick",mouseover:"beginHover",mouseout:"endHover","mouseover a":"endHover","mouseout a":"beginHover","mouseover [data-role=thread-link]":"endHover","mouseout [data-role=thread-link]":"beginHover"},initialize:function(){this.boundRenderPostMedia=t.bind(this.renderPostMedia,this)},onRender:function(){this.activateRegion(this.actionsRegion,this.createDefaultActionsView),this.expanded?this.activateRegion(this.postsRegion,this.createPostCollectionView):this._isShown?this.boundRenderPostMedia():this.listenToOnce(this,"truncate:complete",this.boundRenderPostMedia)},renderPostMedia:function(){this.renderRichMedia(this.getPostActivity().object.get("media"))},getPostActivity:function(){return this.model.activities[0]},createDefaultActionsView:function(){return new c({model:this.getPostActivity().object})},createPostCollectionView:function(){return new u({el:this.postsRegion.el,collection:new n.Collection(this.model.activities),collapsePosts:!1})},handleClick:function(t){if(e(t.target).closest("[data-role=thread-link]").length)return o.navigate(this.model.thread.getDiscussionRoute(),{trigger:!0}),!1;this.toggleExpanded(t)},toggleExpanded:function(n){e(n.target).closest("a, form",this.$el).length||(this.expanded=!this.expanded,this.render(),t.delay(t.bind(this.checkHovered,this)))},checkHovered:function(){this.$el.toggleClass("is-hovered",this.$el.is(":hover")&&!this.$el.find("a:hover").length&&!this.$el.find("[data-role=thread-link]:hover").length)},beginHover:function(t){var n=e(t.target);n.closest("a",this.$el).length||n.closest("[data-role=thread-link]",this.$el).length||this.$el.addClass("is-hovered")},endHover:function(){this.$el.removeClass("is-hovered")}});return a.call(h.prototype),s.call(h.prototype),r.call(h.prototype),i.call(h.prototype),h}),define("home/views/CommentCardCollectionView",["home/views/ActivityCardCollectionView","home/views/CommentCardView"],function(e,t){"use strict";return e.extend({itemView:t})}),define("home/templates/homepageUserModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" is-allstar"},3:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"userAvatar"),t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},5:function(e,t,n,i,o){return'<a href="/home/settings/profile/" class="avatar avatar__add button-outline text-semibold">\n<span class="icon-plus"></span>'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Avatar",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:31},end:{line:18,column:51}}}))+"\n</a>\n"},7:function(e,t,n,i,o){return'<a href="/home/settings/profile/" class="button button-small button-wide button-outline spacing-left spacing-right">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Complete your profile",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:0},end:{line:28,column:35}}}))+"\n</a>\n"},9:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="align__item">\n<a href="/by/'+s(r(null!=t?c(t,"username"):t,t))+'/" class="link-gray-darker" data-link-name="comment_count">\n'+(null!=(a=c(n,"unless").call(l,c(n,"eq").call(l,null!=t?c(t,"numPosts"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:33,column:10},end:{line:33,column:25}}}),{name:"unless",hash:{},fn:e.program(10,o,0),inverse:e.program(12,o,0),data:o,loc:{start:{line:33,column:0},end:{line:39,column:11}}}))?a:"")+'</a>\n</div>\n<div class="align__item">\n<a href="/by/'+s(r(null!=t?c(t,"username"):t,t))+'/following/" class="link-gray-darker" data-link-name="following_count">\n'+s(c(n,"gettext").call(l,"%(num)s Following",{name:"gettext",hash:{num:c(n,"tag").call(l,"h3",{name:"tag",hash:{text:null!=t?c(t,"numTotalFollowing"):t,class:"text-medium"},data:o,loc:{start:{line:45,column:6},end:{line:45,column:59}}})},data:o,loc:{start:{line:44,column:0},end:{line:45,column:61}}}))+'\n</a>\n</div>\n<div class="align__item">\n<a href="/by/'+s(r(null!=t?c(t,"username"):t,t))+'/followers/" class="link-gray-darker" data-link-name="followers_count">\n'+(null!=(a=c(n,"unless").call(l,c(n,"eq").call(l,null!=t?c(t,"numFollowers"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:50,column:10},end:{line:50,column:29}}}),{name:"unless",hash:{},fn:e.program(14,o,0),inverse:e.program(16,o,0),data:o,loc:{start:{line:50,column:0},end:{line:56,column:11}}}))?a:"")+"</a>\n</div>\n"},10:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(num)s Comments",{name:"gettext",hash:{num:r(n,"tag").call(a,"h3",{name:"tag",hash:{text:null!=t?r(t,"numPosts"):t,class:"text-medium"},data:o,loc:{start:{line:35,column:6},end:{line:35,column:50}}})},data:o,loc:{start:{line:34,column:0},end:{line:35,column:52}}}))+"\n"},12:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(num)s Comment",{name:"gettext",hash:{num:r(n,"tag").call(a,"h3",{name:"tag",hash:{text:"1",class:"text-medium"},data:o,loc:{start:{line:38,column:6},end:{line:38,column:45}}})},data:o,loc:{start:{line:37,column:0},end:{line:38,column:47}}}))+"\n"},14:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(num)s Followers",{name:"gettext",hash:{num:r(n,"tag").call(a,"h3",{name:"tag",hash:{text:null!=t?r(t,"numFollowers"):t,class:"text-medium"},data:o,loc:{start:{line:52,column:6},end:{line:52,column:54}}})},data:o,loc:{start:{line:51,column:0},end:{line:52,column:56}}}))+"\n"},16:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"%(num)s Follower",{name:"gettext",hash:{num:r(n,"tag").call(a,"h3",{name:"tag",hash:{text:"1",class:"text-medium"},data:o,loc:{start:{line:55,column:6},end:{line:55,column:45}}})},data:o,loc:{start:{line:54,column:0},end:{line:55,column:47}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside-user__header'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"isPowerContributor"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:30},end:{line:1,column:74}}}))?a:"")+'">\n<div class="avatar-circle-bg__wrapper">\n<div class="avatar-circle-bg">\n<div class="avatar-circle-bg">\n<div class="avatar-circle-bg">\n<div class="avatar-circle-bg">\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="aside-user__avatar align align--column">\n'+(null!=(a=s(n,"if").call(r,null!=(a=null!=t?s(t,"avatar"):t)?s(a,"isCustom"):a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:14,column:0},end:{line:20,column:7}}}))?a:"")+'</div>\n<div class="aside-user__name">\n'+(null!=(a=e.invokePartial(s(i,"userName"),t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="aside-user__body align">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"promptForProfileCompletion"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:26,column:0},end:{line:59,column:7}}}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/HomepageUserModuleView",["underscore","backbone-marionette","home/mixins/withAllstarPopover","home/templates/homepageUserModule"],function(e,t,n,i){"use strict";var o=t.ItemView.extend({template:i,className:"aside__wrap",templateHelpers:function(){return{numTotalFollowing:this.model.getNumTotalFollowing(),promptForProfileCompletion:this.shouldPromptForProfileCompletion()}},shouldPromptForProfileCompletion:function(){var t=this.model.get("avatar").isCustom&&e.chain(this.model.attributes).pick(["name","about","url","location"]).every().value();return this.model.registeredToday()&&!t},modelEvents:{"change:numChannelsFollowing":"render"}});return n.call(o.prototype),o}),define("home/templates/homepageCommentsModuleEmptyView",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<p><a href="/home/explore/people/">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Find interesting users to follow",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:35},end:{line:6,column:81}}}))+"</a></p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="post-comments__wrapper">\n<div class="empty-message post-comments">\n<span class="icon-empty-comment text-gray-light icon-huge"></span>\n<p>'+e.escapeExpression(s(n,"gettext").call(r,"Follow other %(disqus)s users to see their latest comments appear here.",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:4,column:3},end:{line:4,column:106}}}))+"</p>\n"+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"onboardingWithoutChannels"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:0},end:{line:7,column:11}}}))?a:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/HomepageCommentsModuleEmptyView",["backbone-marionette","home/templates/homepageCommentsModuleEmptyView","core/switches"],function(e,t,n){"use strict";return e.ItemView.extend({template:t,templateHelpers:{onboardingWithoutChannels:n.isFeatureActive("onboarding_without_channels")}})}),define("home/templates/homepageCommentsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header class="module-header text-center">\n<div class="module-header__icon">\n<span class="icon icon-latest-comments text-brand"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+r(s(n,"gettext").call(a,"Latest Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:35},end:{line:6,column:64}}}))+'</h2>\n<p class="module-header__subheading">'+r(s(n,"gettext").call(a,"Comments by people you follow and replies to you.",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:37},end:{line:7,column:100}}}))+'</p>\n</div>\n</header>\n\n<div data-role="posts" class="module-body"></div>\n\n<footer data-action="switch-tab" data-tab="comments" class="module-footer">\n<a href="/home/comments/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+r(s(n,"gettext").call(a,"See All Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:26},end:{line:15,column:56}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})}),define("home/views/HomepageCommentsModuleView",["backbone-marionette","home/views/ChannelCardPostView","home/views/FetchingView","home/views/HomepageCommentsModuleEmptyView","home/templates/homepageCommentsModule"],function(e,t,n,i,o){"use strict";return e.CompositeView.extend({template:o,className:"aside__wrap -padded",emptyView:function(){return new n({className:"spinner-small"})},itemView:t,itemViewContainer:"[data-role=posts]",initialize:function(e){e=e||{},this.commentsPromise=e.commentsPromise},itemViewOptions:function(e,t){if(t>2)return{className:"hidden"}},onDomRefresh:function(){if(this.commentsPromise){var e=this;this.commentsPromise.then(function(){0===e.collection.length&&e.createEmptyView()})}},createEmptyView:function(){this._emptyViewCreated||(this.emptyView=i,this.render(),this._emptyViewCreated=!0)}})}),define("home/templates/channelsModuleItem",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"options"):t)?r(a,"tile"):a,t))+'" class="tile__media border-radius-sm" />\n'},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile__overlay">\n<h1 class="tile__name">'+e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))+'</h1>\n</div>\n<img src="https://media.disquscdn.com/home/blank_tile.png"\nclass="tile__media border-radius-sm" />\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-bottom-large">\n<a href="/home/channel/'+s(r(null!=t?c(t,"slug"):t,t))+'/" class="tile__wrapper -plain link-gray-dark">\n'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"options"):t)?c(a,"tile"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:3,column:0},end:{line:11,column:7}}}))?a:"")+'</a>\n<div class="channels-description -with-button align">\n<p class="align__item spacing-right">'+s(r(null!=(a=null!=t?c(t,"options"):t)?c(a,"description"):a,t))+'</p>\n<div class="channels-description__button align__item">\n<a class="button button-outline text-medium"\nhref="/home/channel/'+s(r(null!=t?c(t,"slug"):t,t))+'/">\n'+s(c(n,"gettext").call(l,"Visit",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:0},end:{line:18,column:19}}}))+"\n</a>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ChannelsModuleItemView",["backbone-marionette","home/templates/channelsModuleItem"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/channelsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<div class="module--plain">\n<header class="module-header -no-border">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"channelsModuleHeader"),t,{name:"channelsModuleHeader",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</header>\n<div data-role="channels" class="module-body"></div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelsModuleView",["backbone-marionette","home/views/FetchingView","home/views/ChannelsModuleItemView","home/templates/channelsModule"],function(e,t,n,i){"use strict";return e.CompositeView.extend({template:i,itemView:n,itemViewContainer:"[data-role=channels]",itemViewOptions:function(e){return{model:e.channel||e}},addItemView:function(t,n,i){if(!(i>this.constructor.CHANNELS_MAX-1))return e.CompositeView.prototype.addItemView.call(this,t,n,i)},emptyView:function(){return new t({className:"spinner-small"})}},{CHANNELS_MAX:3})}),define("home/templates/channelSuggestion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"channelAvatarWithDefault"),t,{name:"channelAvatarWithDefault",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="forum-favicon" src="'+e.escapeExpression(e.lambda(null!=t?r(t,"favicon"):t,t))+'" alt="'+(null!=(a=e.invokePartial(r(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'">\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="recommended__item">\n<a href="/home/channel/'+s(r(null!=t?l(t,"slug"):t,t))+'/"\nclass="avatar"\ndata-link-name="channel_avatar"\ndata-channel-slug="'+s(r(null!=t?l(t,"slug"):t,t))+'">\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"channel"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:6,column:0},end:{line:10,column:7}}}))?a:"")+'</a>\n<h3 class="recommended__name truncate-line">\n<a href="/home/channel/'+s(r(null!=t?l(t,"slug"):t,t))+'/"\ndata-link-name="channel_name"\ndata-channel-slug="'+s(r(null!=t?l(t,"slug"):t,t))+'">\n\n'+(null!=(a=e.invokePartial(l(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n</h3>\n"+(null!=(a=e.invokePartial(l(i,"genericFollowButton"),null!=t?l(t,"primaryForum"):t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="recommended__reason"><em>'+s(r(null!=(a=null!=t?l(t,"options"):t)?l(a,"description"):a,t))+"</em></div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelSuggestionView",["backbone-marionette","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/templates/channelSuggestion"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:i,className:"recommended__item",templateHelpers:function(){return{favicon:this.model.get("options").favicon||this.model.primaryForum.get("favicon").cache}}});return n.call(o.prototype,function(){return this.model}),t.call(o.prototype),o}),define("home/templates/homepageChannelsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n<header class="module-header">\n'+(null!=(a=e.invokePartial(r(i,"channelsModuleHeader"),t,{name:"channelsModuleHeader",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</header>\n<div data-role="channels" class="module-body"></div>\n'+(null!=(a=e.invokePartial(r(i,"channelsModuleMoreFooter"),t,{name:"channelsModuleMoreFooter",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/HomepageChannelsModuleView",["underscore","core/strings","home/views/ChannelsModuleView","home/views/ChannelSuggestionView","home/templates/homepageChannelsModule"],function(e,t,n,i,o){"use strict";return n.extend({className:"aside__wrap -padded",template:o,templateHelpers:{moduleTitle:(0,t.get)("Lively Channels")},itemView:i,itemViewOptions:function(t,i){var o=n.prototype.itemViewOptions;return e.isFunction(o)&&(o=o.call(this,t,i)),e.defaults({className:"recommended-wrap"},o)}})}),define("home/templates/homepageOnboardingModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Discussions from communities and people you follow will appear here in your feed.",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:95}}}))+"\n"},3:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"numShown"):t,0,{name:"eq",hash:{},data:o,loc:{start:{line:6,column:14},end:{line:6,column:29}}}),{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:6,column:8},
end:{line:35,column:28}}}))?a:""},4:function(e,t,n,i,o){return"\n"+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Discussions from channels and people you follow will appear here in your feed.",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:0},end:{line:7,column:92}}}))+"\n"},6:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"numShown"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:8,column:14},end:{line:8,column:29}}}),{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:8,column:8},end:{line:35,column:21}}}))?a:""},7:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+e.escapeExpression(r(n,"gettext").call(a,"Voila, discussions from %(channel0)s now appear here in your feed.",{name:"gettext",hash:{channel0:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel0"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:10,column:11},end:{line:10,column:44}}})},data:o,loc:{start:{line:9,column:0},end:{line:11,column:2}}}))+"\n"},9:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"numShown"):t,2,{name:"eq",hash:{},data:o,loc:{start:{line:12,column:14},end:{line:12,column:29}}}),{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.program(15,o,0),data:o,loc:{start:{line:12,column:8},end:{line:35,column:14}}}))?a:""},10:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"overflowCount"):t,{name:"unless",hash:{},fn:e.program(11,o,0),inverse:e.program(13,o,0),data:o,loc:{start:{line:13,column:0},end:{line:28,column:11}}}))?a:"")},11:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"Voila, discussions from %(channel0)s and %(channel1)s now appear here in your feed",{name:"gettext",hash:{channel1:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel1"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:16,column:21},end:{line:16,column:54}}}),channel0:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel0"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:15,column:11},end:{line:16,column:9}}})},data:o,loc:{start:{line:14,column:0},end:{line:17,column:2}}}))+"\n"},13:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(a,"Voila, discussions from %(channel0)s, %(channel1)s, and %(overflowText)s now appear here in your feed",{name:"gettext",hash:{overflowText:r(n,"getPartial").call(a,"strongTag",r(n,"gettext").call(a,"%(overflowCount)s more channels",{name:"gettext",hash:{overflowCount:null!=t?r(t,"overflowCount"):t},data:o,loc:{start:{line:26,column:39},end:{line:26,column:110}}}),{name:"getPartial",hash:{},data:o,loc:{start:{line:26,column:15},end:{line:26,column:111}}}),channel1:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel1"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:25,column:11},end:{line:25,column:44}}}),channel0:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel0"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:24,column:11},end:{line:24,column:44}}})},data:o,loc:{start:{line:23,column:0},end:{line:27,column:2}}}))+"\n"},15:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"numShown"):t,3,{name:"eq",hash:{},data:o,loc:{start:{line:29,column:14},end:{line:29,column:29}}}),{name:"if",hash:{},fn:e.program(16,o,0),inverse:e.noop,data:o,loc:{start:{line:29,column:8},end:{line:35,column:7}}}))?a:""},16:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+e.escapeExpression(r(n,"gettext").call(a,"Voila, discussions from %(channel0)s, %(channel1)s, and %(channel2)s now appear here in your feed",{name:"gettext",hash:{channel2:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel2"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:33,column:11},end:{line:33,column:44}}}),channel1:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel1"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:32,column:11},end:{line:32,column:44}}}),channel0:r(n,"getPartial").call(a,"strongTag",null!=t?r(t,"channel0"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:31,column:11},end:{line:31,column:44}}})},data:o,loc:{start:{line:30,column:0},end:{line:34,column:2}}}))+"\n"},18:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a data-role="complete-onboarding" href="/home/explore/" class="button button-inverted text-medium link-inverted"><span class="hidden-md">'+r(s(n,"gettext").call(a,"Explore more channels and discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:138},end:{line:42,column:189}}}))+'</span><span class="visible-md">'+r(s(n,"gettext").call(a,"Explore more discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:221},end:{line:42,column:259}}}))+"</span></a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--brand padding-double align align--column align--center">\n<p class="spacing-bottom text-center">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"onboardingWithoutChannels"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:4,column:0},end:{line:35,column:35}}}))?a:"")+'\n</p>\n\n<div class="align align--center">\n<button data-role="hide-onboarding" class="button button-outline -border-light text-medium spacing-right-small">'+e.escapeExpression(s(n,"gettext").call(r,"Got it!",{name:"gettext",hash:{},data:o,loc:{start:{line:39,column:112},end:{line:39,column:133}}}))+"</button>\n\n"+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"onboardingWithoutChannels"):t,{name:"unless",hash:{},fn:e.program(18,o,0),inverse:e.noop,data:o,loc:{start:{line:41,column:0},end:{line:43,column:11}}}))?a:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/HomepageOnboardingModuleView",["underscore","backbone-marionette","home/models/Session","home/mixins/withOnboarding","home/templates/homepageOnboardingModule"],function(e,t,n,i,o){"use strict";var a=t.ItemView.extend({template:o,templateHelpers:function(){var t=this.getChannelsFollowing(),n=t.length<=this.constructor.MAX_CHANNELS_SHOWN?t.length:this.constructor.MAX_CHANNELS_SHOWN-1,i=Math.max(t.length-n,0),o=e.chain(t).first(n).map(function(e,t){return["channel"+t,e.get("name")]}).object().value();return e.extend({numShown:n,overflowCount:i,onboardingWithoutChannels:this.onboardingWithoutChannels},o)},events:{"click [data-role=complete-onboarding]":"markOnboardingComplete","click [data-role=hide-onboarding]":"hideOnboarding"},initialize:function(t){this.onboardingWithoutChannels=t.onboardingWithoutChannels,this.session=n.get(),this.session.loadPromise().then(e.bind(function(){this.listenTo(this.session.getUserProfile().forumsFollowing.items,"add remove reset",this.render)},this))},markOnboardingComplete:function(){this.session.user.updateFlags({homeFeedOnboardingComplete:!0})},hideOnboarding:function(){this.markOnboardingComplete(),this.trigger("hideOnboarding")}},{MAX_CHANNELS_SHOWN:3});return i.call(a.prototype),a}),define("home/templates/moderatedForumsModuleItem",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="recommended-wrap">\n<div data-role="recommended-object">\n<div class="recommended__item">\n'+(null!=(a=e.invokePartial(l(i,"forumAvatarLink"),t,{name:"forumAvatarLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<h3 class="recommended__name truncate-line spacing-top-narrow">\n<a href="/home/forums/'+s(r(null!=t?l(t,"id"):t,t))+'">'+s(r(null!=t?l(t,"name"):t,t))+'</a>\n</h3>\n<a href="https://'+s(r(null!=t?l(t,"id"):t,t))+'.disqus.com/admin/" class="button button-outline button-small pull-right">'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Manage",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:97},end:{line:10,column:117}}}))+"</a>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ModeratedForumsModuleItemView",["backbone-marionette","home/templates/moderatedForumsModuleItem"],function(e,t){"use strict";return e.ItemView.extend({template:t,initialize:function(){this.model.shouldFetch()&&this.model.fetch(),this.listenTo(this.model,"sync",this.render)}})}),define("home/templates/moderatedForumsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<footer class="module-footer">\n<a href="/admin/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Manage All",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:26},end:{line:16,column:50}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="module--aside">\n<div class="aside__wrap -padded">\n<header class="module-header -has-button">\n<div class="module-header__title">\n<h2 class="module-header__heading pull-left spacing-top-narrow">\n'+s(l(n,"gettext").call(r,"Your Sites",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:24}}}))+'\n<span class="text-gray">('+s(e.lambda(null!=t?l(t,"moderatedForumsCount"):t,t))+')</span>\n</h2>\n<a href="/admin/" class="button button-fill--brand button-small pull-right module-header__button">'+s(l(n,"gettext").call(r,"View Admin",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:98},end:{line:9,column:122}}}))+'</a>\n</div>\n</header>\n<div data-role="moderated-forums" class="module-body"></div>\n'+(null!=(a=l(n,"unless").call(r,l(n,"eq").call(r,null!=t?l(t,"moderatedForumsCount"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:13,column:10},end:{line:13,column:37}}}),{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:0},end:{line:22,column:11}}}))?a:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/ModeratedForumsModuleView",["backbone-marionette","home/views/FetchingView","home/views/ModeratedForumsModuleItemView","home/templates/moderatedForumsModule"],function(e,t,n,i){"use strict";return e.CompositeView.extend({template:i,itemView:n,itemViewContainer:"[data-role=moderated-forums]",templateHelpers:function(){return{moderatedForumsCount:this.collection.length}},addItemView:function(t,n,i){if(!(i>this.constructor.FORUMS_MAX-1))return e.CompositeView.prototype.addItemView.call(this,t,n,i)},emptyView:function(){return new t({className:"spinner-small"})}},{FORUMS_MAX:3})}),define("home/templates/followingCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="aside-list__blk align text-gray"\nhref="/home/channel/'+s(r(null!=(a=null!=t?l(t,"channelInfo"):t)?l(a,"slug"):a,t))+'/"\ndata-link-name="channel-name"\ndata-channel-slug="'+s(r(null!=(a=null!=t?l(t,"channelInfo"):t)?l(a,"slug"):a,t))+'">\n'},3:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="aside-list__blk align text-gray"\nhref="/home/forum/'+r(a(null!=t?s(t,"id"):t,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+r(a(null!=t?s(t,"pk"):t,t))+'">\n'},5:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"channelAvatarWithDefault"),t,{name:"channelAvatarWithDefault",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},7:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"forumAvatar"),t,{name:"forumAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(n,"if").call(r,null!=t?s(t,"channelInfo"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:11,column:7}}}))?a:"")+'\n<div class="align__item avatar">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"channel"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:14,column:0},end:{line:18,column:7}}}))?a:"")+'</div>\n<div class="align__item aside-list__name">\n<strong>'+(null!=(a=e.invokePartial(s(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</strong>\n</div>\n</a>\n"},usePartial:!0,useData:!0})}),define("home/views/FollowingCardView",["backbone-marionette","home/mixins/withChannelAvatar","home/templates/followingCard"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:n,className:"aside-list__item"});return t.call(i.prototype,function(){return this.model.channel}),i}),define("home/templates/homepageFollowingModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__subheadings">\n<h2 class="text-subheading">'+r(s(n,"gettext").call(a,"Following",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:28},end:{line:2,column:51}}}))+'</h2>\n</div>\n<div class="aside__wrap">\n<div data-role="forums"></div>\n<a href="/home/channels/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">'+r(s(n,"gettext").call(a,"See All Following",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:26},end:{line:7,column:57}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</div>\n'},useData:!0})}),define("home/views/HomepageFollowingModuleView",["backbone-marionette","home/models/Session","home/views/FollowingCardView","home/templates/homepageFollowingModule"],function(e,t,n,i){"use strict";return e.CompositeView.extend({template:i,templateHelpers:function(){return{sessionUsername:t.fromCookie().username}},itemViewContainer:"[data-role=forums]",itemView:n,addItemView:function(t,n,i){if(!(i>4))return e.CompositeView.prototype.addItemView.call(this,t,n,i)},initialize:function(){this.session=t.get()}})}),define("home/templates/homepageFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card--empty text-center">\n<h2>'+a(e.lambda(null!=t?r(t,"feedMessage"):t,t))+'</h2>\n<p class="text-gray spacing-top-small">'+a(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Until you do that, here are the latest %(number)s trending discussions on %(disqus)s.",{name:"gettext",hash:{disqus:"Disqus",number:null!=t?r(t,"numItemsShown"):t},data:o,loc:{start:{line:4,column:39},end:{line:4,column:175}}}))+"\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(n,"if").call(r,null!=t?s(t,"isLoggedIn"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:6,column:7}}}))?a:"")+'<div data-role="items"></div>\n<div class="spacing-bottom spacing-top">\n<a href="/home/explore/" class="button button-fill--brand button-padding-taller button-wide text-medium">\n'+e.escapeExpression(s(n,"gettext").call(r,"Explore channels to follow",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:0},end:{line:10,column:40}}}))+"\n</a>\n</div>\n"},useData:!0})}),define("home/templates/homepageNoChannelsFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lambda,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card--empty text-center">\n<div class="empty-message">\n\n<img class="empty-message__img" src="'+a(s(n,"urlfor").call(null!=t?t:e.nullContext||{},"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:5,column:37},end:{line:5,column:53}}}))+"/img/empty-states/"+a(r(null!=t?s(t,"emptyImage"):t,t))+'"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">\n'+a(r(null!=t?s(t,"mainText"):t,t))+'\n</h2>\n<p class="text-gray text-medium">\n'+a(r(null!=t?s(t,"subText"):t,t))+'\n</p>\n<a href="'+a(r(null!=t?s(t,"followButtonUrl"):t,t))+'" class="button button-outline button-padding-wider text-large">\n'+a(r(null!=t?s(t,"followText"):t,t))+"\n</a>\n</div>\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isLoggedIn"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:20,column:7}}}))?a:""},useData:!0})}),define("home/views/HomepageFeedEmptyView",["underscore","backbone-marionette","home/mixins/withSubviews","home/models/Session","home/views/ChannelCardCollectionView","home/templates/homepageFeedEmpty","home/templates/homepageNoChannelsFeedEmpty","home/templates/spinner"],function(e,t,n,i,o,a,r,s){"use strict";var l=t.ItemView.extend({initialize:function(e){this.session=i.get(),this.maxItemsText=e.maxItemsText,this.onboardingWithoutChannels=e.onboardingWithoutChannels,this.model.ensureFetched().then(this.render)},getTemplate:function(){var e=this.onboardingWithoutChannels?r:a;return this.model.get("fetched")?e:s},templateHelpers:function(){return e.defaults(this.noChannelEmptyViewTexts,{numItemsShown:this.maxItemsText,feedMessage:this.feedMessage,isLoggedIn:this.session.isLoggedIn()})},regions:{feedRegion:"[data-role=items]"},onRender:function(){this.activateRegion(this.feedRegion,this.createFeedView)},createFeedView:function(){return new o({model:this.model,collection:this.collection,emptyView:null})}});return n.call(l.prototype),l}),define("home/views/HomepageRecommendedFeedEmptyView",["core/strings","home/views/HomepageFeedEmptyView"],function(e,t){"use strict";return t.extend({feedMessage:(0,e.get)("Follow channels and people to see their recommended discussions here."),noChannelEmptyViewTexts:{mainText:"See recent discussions by following communities.",subText:"Following communities helps you keep up with what their latest discussions.",followText:"Find interesting communities to follow »",followButtonUrl:"https://help.disqus.com/community-tips/building-identity-and-audience/site-profiles",emptyImage:"following-communities.png"}})});define("home/views/HomepageCommentsFeedEmptyView",["core/strings","home/views/HomepageFeedEmptyView"],function(e,t){"use strict";return t.extend({feedMessage:(0,e.get)("Follow people to see their latest comments here."),noChannelEmptyViewTexts:{mainText:"See recent discussions by following people.",subText:"Following people helps you keep up with what their latest discussions.",followText:"Find interesting people to follow »",followButtonUrl:"https://help.disqus.com/commenting/following-other-users",emptyImage:"following-people.png"}})}),define("home/views/HomepageDiscussionsFeedEmptyView",["core/strings","home/views/HomepageFeedEmptyView"],function(e,t){"use strict";return t.extend({feedMessage:(0,e.get)("Follow channels and people to see their latest discussions here."),noChannelEmptyViewTexts:{mainText:"See recent discussions by following communities and people.",subText:"Following communities and people helps you keep up with what their latest discussions.",followText:"Find interesting communities to follow »",followButtonUrl:"https://help.disqus.com/community-tips/building-identity-and-audience/site-profiles",emptyImage:"following-communities.png"}})}),define("home/templates/motdAlert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"persistentAlert"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:2,column:0},end:{line:30,column:7}}}))?a:""},2:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert--success">\n<div class="padding-default">\n<div class="text-center spacing-narrow">\n<span class="icon icon-megaphone icon__position spacing-right-small"></span>\n<strong class="spacing-right">'+r(a(null!=t?s(t,"motdTitle"):t,t))+'</strong>\n<a\nhref="'+r(a(null!=t?s(t,"motdLink"):t,t))+'"\nclass="button button-inverted -hover-opaque text-medium"\ntarget="_blank"\nrel="noopener noreferrer"\n>Learn more &raquo;</a>\n</div>\n</div>\n</div>\n'},4:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert--brand">\n<div class="padding-default">\n<div class="text-center spacing-narrow">\n<span class="icon icon-megaphone icon__position spacing-right-small"></span>\n<strong class="spacing-right">'+r(a(null!=t?s(t,"motdTitle"):t,t))+'</strong>\n<a href="'+r(a(null!=t?s(t,"motdLink"):t,t))+'" class="button button-inverted -hover-opaque text-medium">Learn more &raquo;</a>\n<button class="link-inverted spacing-left" data-action="close-alert">\n<span class="icon-cancel"></span>\n</button>\n</div>\n</div>\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hideAlert"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:31,column:11}}}))?a:""},useData:!0})}),define("home/views/MotdAlertView",["backbone-marionette","core/utils/storage","remote/config","home/templates/motdAlert"],function(e,t,n,i){"use strict";var o=n.lounge||{},a=o.motd_home_title,r=o.motd_home_url,s=t.get("motd")||{};return e.ItemView.extend({template:i,className:"motd-alert__wrapper",templateHelpers:function(){var e=s[r];return{motdTitle:a,motdLink:r,hideAlert:!(!e||this.persistent)&&e,persistentAlert:this.persistent}},events:{"click [data-action=close-alert]":"closeAlert"},initialize:function(e){this.persistent=e&&e.persistent},closeAlert:function(){s[r]=!0,t.set("motd",s),this.$el.remove()}})}),define("core/mixins/withEmailVerifyLink",["jquery","underscore","core/config","core/utils"],function(e,t,n,i){"use strict";var o=i.preventDefaultHandler,a={events:{"click [data-action=verify-email]":"showVerifyEmailPopup"},showVerifyEmailPopup:o(function(t){var o=e(t.target).attr("data-forum"),a=n.urls.verifyEmail;return o&&(a=a+"?f="+o),i.openWindow(a,"_blank",{width:460,height:355})})};return function(){this.events=t.defaults({},this.events,a.events),t.extend(this,t.pick(a,"showVerifyEmailPopup"))}}),define("home/templates/emailVerificationAlert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--warning text-medium">\n'+s(l(n,"gettext").call(r,"The email address for your account %(email)s still needs to be verified.",{name:"gettext",hash:{email:l(n,"tag").call(r,"strong",{name:"tag",hash:{text:null!=(a=null!=t?l(t,"user"):t)?l(a,"email"):a},data:o,loc:{start:{line:3,column:93},end:{line:3,column:125}}})},data:o,loc:{start:{line:3,column:0},end:{line:3,column:128}}}))+'\n<a href="/verify" data-action="verify-email">'+s(l(n,"gettext").call(r,"Resend confirmation email »",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:45},end:{line:4,column:86}}}))+"</a>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"shouldShowEmailVerificationAlert"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:6,column:7}}}))?a:""},useData:!0})}),define("home/views/EmailVerificationAlertView",["underscore","backbone-marionette","core/mixins/withEmailVerifyLink","home/models/Session","home/templates/emailVerificationAlert"],function(e,t,n,i,o){"use strict";var a=t.ItemView.extend({template:o,templateHelpers:function(){return{user:this.session.user.toJSON(),shouldShowEmailVerificationAlert:this.shouldShowEmailVerificationAlert()}},initialize:function(){this.session=i.get(),this.session.loadPromise().then(e.bind(this.render,this))},shouldShowEmailVerificationAlert:function(){return this.session.isLoggedIn()&&!this.session.user.get("isVerified")&&this.session.user.get("homeFeedOnboardingComplete")}});return n.call(a.prototype),a}),define("home/mixins/withEmailVerificationAlert",["underscore","core/advice","home/views/EmailVerificationAlertView"],function(e,t,n){"use strict";return function(){t.withAdvice.call(this),this.before("onDomRefresh",function(){this.activateRegion?this.activateRegion(this.emailVerificationAlertRegion,function(){return new n}):this.emailVerificationAlertRegion.show(new n)}),this.regions=e.defaults({emailVerificationAlertRegion:"[data-role=email-verification-alert]"},this.regions)}}),define("core/utils/url/parseQueryString",["core/utils/collection/each"],function(e){"use strict";return function(t){void 0===t&&(t=window.location.search);var n={};return e(t.substr(1).split("&"),function(e){var t=e.split("=").map(function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))});t[0]&&(n[t[0]]=t[1])}),n}}),define("home/models/common/BaseSettings",["underscore","backbone","home/models/Session"],function(e,t,n){"use strict";return t.Model.extend({shouldFetch:function(){return!this.fetched&&!this.fetching},ensureFetched:function(){if(this.shouldFetch()){var e=this;e.fetching=!0,e.fetch({success:function(){e.fetched=!0,e.fetching=!1},error:function(){e.fetched=!1,e.fetching=!1}})}},toFormData:function(t){return t=t||this.toJSON(),e.reduce(t,function(t,n,i){return t.append(i,e.isString(n)?n.trim():n),t},new window.FormData)},useMultiPartForm:!1,save:function(e,n){return e=e||this.toJSON(),n=n||{},this.useMultiPartForm&&(n.data=this.toFormData(e),n.contentType=!1),n.beforeSend=this.setCSRFHeader,t.Model.prototype.save.call(this,e,n)},setCSRFHeader:function(e,t){var i=n.get().getCsrfToken();/^(GET|HEAD|OPTIONS|TRACE)$/.test(t.type)||e.setRequestHeader("X-CSRFToken",i)},destroy:function(e){return e=e||{},e.beforeSend=this.setCSRFHeader,t.Model.prototype.destroy.call(this,e)}})}),define("home/models/SettingsSocialAccount",["core/config","home/models/common/BaseSettings"],function(e,t){"use strict";return t.extend({url:function(){return e.urls.oauthStatus(this.id)},destroyUrl:function(){return e.urls.oauthDestroy(this.id)},destroy:function(e){return e=e||{},e.method="POST",e.url=this.destroyUrl(),t.prototype.destroy.call(this,e)},toJSON:function(){return{display_name:this.get("display_name"),url:this.get("url")}}})}),define("home/collections/SettingsSocialAccountCollection",["backbone","underscore","home/models/SettingsSocialAccount"],function(e,t,n){"use strict";return e.Collection.extend({model:n,toJSON:function(){return t.reduce(this.models,function(e,t){return e[t.id]=t.toJSON(),e},{})}})}),define("home/models/SettingsAccount",["underscore","core/config","home/collections/SettingsSocialAccountCollection","home/models/common/BaseSettings","core/UniqueModel"],function(e,t,n,i,o){"use strict";var a=i.extend({url:t.urls.apiSettings+"account/",initialize:function(){this.socialAccounts=new n},parse:function(t){return this.socialAccounts.reset(e.map(t.social_accounts,function(e,t){return e.id=t,e})),delete t.social_accounts,i.prototype.parse.call(this,t)},toJSON:function(){return{username:this.get("username"),email:this.get("email"),password:this.get("password"),old_password:this.get("old_password"),email_verified:this.get("email_verified")}}});return o.addType("SettingsAccount",a),a}),define("home/mixins/asModal",["underscore","home/utils/confirmModal"],function(e,t){"use strict";var n={initialize:function(t,n){t.apply(this,e.rest(arguments)),this.modal=this.getModal(n)},onRender:function(t){t&&t.apply(this,e.rest(arguments)),this.modal.find("[data-role=content]").append(this.$el)},showModal:function(e){e&&this.modal.modal(e),this.modal.modal("show")},closeModal:function(){this.remove(),this.modal.modal("hide")}};return function(i){this.initialize=e.wrap(this.initialize,n.initialize),this.onRender=e.wrap(this.onRender,n.onRender),this.getModal=t.getModal,this.showModal=e.partial(n.showModal,i),this.closeModal=n.closeModal}}),define("home/templates/emailConfirmedModalContent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lambda,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form>\n<div class="form__header">\n<h1 class="form-heading">\n<span class="icon-checkmark text-success icon__position spacing-right-small"></span>\n'+r(l(n,"gettext").call(a,"Email Verified",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:28}}}))+'\n</h1>\n<p class="form-description text-gray text-medium">'+r(l(n,"gettext").call(a,"Now choose a unique username before someone else grabs it!",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:50},end:{
line:7,column:122}}}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<label for="settings-username" class="fieldset__label padding-left-right align__item text-gray">'+r(l(n,"gettext").call(a,"Username",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:96},end:{line:11,column:118}}}))+'</label>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--text">\n'+r(s(null!=t?l(t,"username"):t,t))+'\n</div>\n<p class="fieldset__description text-gray text-small">\nhttp://disqus.com/by/<strong data-role="username-placeholder">'+r(s(null!=t?l(t,"username"):t,t))+"</strong>\n<br/>\n"+r(l(n,"gettext").call(a,"This will be used as your profile address and for logging in.",{name:"gettext",hash:{},data:o,loc:{start:{line:19,column:0},end:{line:19,column:75}}}))+"\n"+r(l(n,"gettext").call(a,"You can change your username by going to %(profileSettings)s",{name:"gettext",hash:{profileSettings:l(n,"tag").call(a,"a",{name:"tag",hash:{text:l(n,"gettext").call(a,"Profile settings",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:108},end:{line:21,column:136}}}),"data-action":"dismiss-form",href:"https://disqus.com/home/settings/profile/"},data:o,loc:{start:{line:21,column:18},end:{line:21,column:137}}})},data:o,loc:{start:{line:20,column:0},end:{line:22,column:2}}}))+'.\n</p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" data-tag="dismiss">'+r(l(n,"gettext").call(a,"Done",{name:"gettext",hash:{},data:o,loc:{start:{line:30,column:144},end:{line:30,column:162}}}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/templates/settingsAccountForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return"is-error"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"username"):a,{name:"each",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:0},end:{line:21,column:9}}}))?a:""},4:function(e,t,n,i,o){return'<p class="fieldset__description fieldset__description--error text-small">'+e.escapeExpression(e.lambda(t,t))+"</p>\n"},6:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"email"):a,{name:"each",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:37,column:0},end:{line:39,column:9}}}))?a:""},8:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="fieldset__description fieldset__description--pending text-small">\n'+r(s(n,"gettext").call(a,"Your email address hasn't been verified yet. Please request a new verification email, if you haven't yet received one.",{name:"gettext",hash:{},data:o,loc:{start:{line:43,column:0},end:{line:43,column:133}}}))+'\n<a href="/verify" data-action="verify-email">'+r(s(n,"gettext").call(a,"Request »",{name:"gettext",hash:{},data:o,loc:{start:{line:44,column:45},end:{line:44,column:68}}}))+"</a>\n</p>\n"},10:function(e,t,n,i,o){return'<p class="fieldset__description text-gray text-small">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Changing your email requires you to verify it. Just click on the big button in the email we send to the new email address.",{name:"gettext",hash:{},data:o,loc:{start:{line:48,column:0},end:{line:48,column:136}}}))+"\n</p>\n"},12:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"__all__"):a,{name:"each",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:66,column:0},end:{line:68,column:9}}}))?a:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+s(c(n,"gettext").call(r,"Account",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:25}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+s(c(n,"gettext").call(r,"Account",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:35},end:{line:7,column:56}}}))+'</h1>\n<p class="form-description text-gray text-medium">'+s(c(n,"gettext").call(r,"Change your basic account information.",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:50},end:{line:8,column:102}}}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<label for="settings-username" class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Username",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:77},end:{line:13,column:99}}}))+'</label>\n<div class="fieldset__block align__item '+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"username"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:40},end:{line:14,column:78}}}))?a:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-username" class="input--textbox" name="username" value="'+s(l(null!=t?c(t,"username"):t,t))+'">\n</div>\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"username"):a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:0},end:{line:22,column:7}}}))?a:"")+'<p class="fieldset__description text-gray text-small">\nhttp://disqus.com/by/<strong data-role="username-placeholder">'+s(l(null!=t?c(t,"username"):t,t))+"</strong>\n<br/>\n"+s(c(n,"gettext").call(r,"This will be used as your profile address and for logging in.",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:0},end:{line:26,column:75}}}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-email" class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Email",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:74},end:{line:31,column:93}}}))+'</label>\n<div class="fieldset__block align__item '+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"email"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:32,column:40},end:{line:32,column:75}}}))?a:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-email" class="input--textbox" name="email" value="'+s(l(null!=t?c(t,"email"):t,t))+'">\n</div>\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"email"):a,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:36,column:0},end:{line:40,column:7}}}))?a:"")+(null!=(a=c(n,"unless").call(r,null!=t?c(t,"email_verified"):t,{name:"unless",hash:{},fn:e.program(8,o,0),inverse:e.program(10,o,0),data:o,loc:{start:{line:41,column:0},end:{line:50,column:11}}}))?a:"")+'</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-password" class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Password",{name:"gettext",hash:{},data:o,loc:{start:{line:54,column:77},end:{line:54,column:99}}}))+'</label>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--text">\n<input type="password" placeholder="'+s(c(n,"gettext").call(r,"Current password",{name:"gettext",hash:{},data:o,loc:{start:{line:57,column:36},end:{line:57,column:66}}}))+'" id="settings-password" name="old_password" class="input--textbox">\n</div>\n<p class="fieldset__description text-gray text-small">\n'+s(c(n,"gettext").call(r,"Forgot your password?",{name:"gettext",hash:{},data:o,loc:{start:{line:60,column:0},end:{line:60,column:35}}}))+' <a href="/forgot" target="_blank">'+s(c(n,"gettext").call(r,"Request a password recovery email.",{name:"gettext",hash:{},data:o,loc:{start:{line:60,column:70},end:{line:60,column:118}}}))+'</a>\n</p>\n<div class="fieldset__block--text">\n<input type="password" placeholder="'+s(c(n,"gettext").call(r,"New password",{name:"gettext",hash:{},data:o,loc:{start:{line:63,column:36},end:{line:63,column:62}}}))+'" name="password" class="input--textbox">\n</div>\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"__all__"):a,{name:"if",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:65,column:0},end:{line:69,column:7}}}))?a:"")+'</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+s(c(n,"gettext").call(r,"Save",{name:"gettext",hash:{},data:o,loc:{start:{line:76,column:134},end:{line:76,column:152}}}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/mixins/withFetchingView",["underscore","home/views/FetchingView"],function(e,t){"use strict";return function(){this.render=e.wrap(this.render,function(n){return this.isDoneFetching()?n.apply(this,e.rest(arguments)):(this.$el.html((new t).render().el),this)})}}),define("home/views/common/BaseSettingsView",["underscore","backbone-marionette","core/utils/html/nodeTypes","home/mixins/withFetchingView","home/models/Session"],function(e,t,n,i,o){"use strict";var a=t.ItemView.extend({events:{"submit form":"submitHandler","change input[type=checkbox], input[type=radio], select":"changeHandler","keyup input[type=text], input[type=password]":"changeHandler"},initialize:function(){this.model.ensureFetched(),this.session=o.get(),this.listenTo(this.model,"invalid sync",this.render),this.listenTo(this.model,"error",this.handleValidationError)},onRender:function(){this.$form=this.$("form"),this.$saveStatus=this.$("[data-role=save-status]"),this.saveBtn=this.$("[data-role=save-btn]")[0],this.model.set(this.getFormData())},handleValidationError:function(e,t){e.validationError=t.responseJSON,this.render()},isDoneFetching:function(){return this.model.fetched},serializeData:function(){var e=t.ItemView.prototype.serializeData.call(this,arguments);return e.errors=this.model.validationError||{},e},changeHandler:e.debounce(function(){this.updateButtonState(this.model.changedAttributes(this.getFormData()))},100),updateButtonState:function(e){this.saveBtn.disabled=!e},saveFormData:function(){this.model.set(this.getFormData())},submitHandler:function(t){if(t.preventDefault(),this.$saveStatus.addClass("is-saving"),this.clearErrors(),this.updateStatus("is-saving"),this.saveFormData(t),t.currentTarget&&t.currentTarget[0]&&n.isButton(t.currentTarget[0])&&"dismiss"===t.currentTarget[0].getAttribute("data-tag"))return this.updateStatus("is-saved");var i={};i.success=e.bind(function(){this.session.user.set("username",this.model.get("username"))},this),this.model.save(null,i).done(e.bind(this.updateStatus,this,"is-saved"))},updateStatus:function(e){this.$saveStatus.removeClass("is-saving is-saved").addClass(e)},getFormData:function(){return e.reduce(this.$form.serializeArray(),function(e,t){return e[t.name]=t.value,e},{})},clearErrors:function(){this.$el.find(".is-error").removeClass("is-error"),this.$el.find(".fieldset__description--error").hide(),this.model.validationError=null}});return i.call(a.prototype),a}),define("home/views/SettingsAccountFormView",["underscore","core/mixins/withEmailVerifyLink","home/templates/settingsAccountForm","home/views/common/BaseSettingsView"],function(e,t,n,i){"use strict";var o=i.extend({template:n,events:e.defaults({"keyup input[name=username]":"handleKeyup"},i.prototype.events),onRender:function(){this.$usernamePlaceholder=this.$("[data-role=username-placeholder]"),i.prototype.onRender.apply(this,arguments)},handleKeyup:e.debounce(function(e){this.$usernamePlaceholder.text(e.currentTarget.value||this.model.get("username"))},300)});return t.call(o.prototype),o}),define("home/views/EmailConfirmedModalContentView",["underscore","core/utils","home/mixins/asModal","home/templates/emailConfirmedModalContent","home/views/SettingsAccountFormView"],function(e,t,n,i,o){"use strict";var a=o.extend({template:i,events:{"click [data-action=dismiss-form]":"dismissHandler"},dismissHandler:function(){this.saveFormData(),this.closeModal()},updateStatus:function(n){if(o.prototype.updateStatus.apply(this,arguments),"is-saved"===n){var i=t.animationEndEvent,a=e.bind(this.closeModal,this);i?this.$saveStatus.one(i,".icon-checkmark",a):e.delay(a,1500)}},getFormData:function(){var t=o.prototype.getFormData.call(this);return e.defaults(t,{password:"",old_password:""})}});return n.call(a.prototype),a}),define("home/mixins/withEmailConfirmedModal",["underscore","core/advice","core/UniqueModel","core/utils/url/parseQueryString","home/models/Session","home/models/SettingsAccount","home/views/EmailConfirmedModalContentView"],function(e,t,n,i,o,a,r){"use strict";var s={showEmailVerifiedModal:function(){if(this.shouldShowEmailVerifiedModal()){var t=o.get();t.loadPromise().then(e.bind(function(){if(!t.isLoggedOut()){var e=new n(a,{id:t.user.id});new r({model:e}).showModal()}},this))}},shouldShowEmailVerifiedModal:function(){return!!i().email_verified}};return function(){t.withAdvice.call(this),this.showEmailVerifiedModal=s.showEmailVerifiedModal,this.shouldShowEmailVerifiedModal=s.shouldShowEmailVerifiedModal,this.after("initialize",function(){this.showEmailVerifiedModal()})}}),define("home/templates/homepage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<div data-role="recommend-module" data-recommend-type="channel" data-jester-area="recommended-channels"\nclass="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="user" data-jester-area="recommended-users"\nclass="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="forum" data-jester-area="recommended-forums"\nclass="module--aside"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="motd-alert"></div>\n<div class="section-contained">\n<div class="layout">\n<div class="layout__main-with-aside">\n<nav class="layout__nav module__wrapper" data-role="left-rail">\n<div data-role="user-card" class="hidden-lg" data-jester-area="profile_module"></div>\n<div data-role="homepage-nav"></div>\n<div data-role="following-module" class="hidden-lg module__wrapper" data-jester-area="following_module"></div>\n</nav>\n<section class="layout__content homepage-feed">\n<div data-role="onboarding-module" class="homepage-onboard__note"></div>\n<div data-role="email-verification-alert"></div>\n<div data-role="content-area" data-jester-area="feed"></div>\n</section>\n</div>\n<aside data-role="right-rail" class="layout__aside hidden-md module__wrapper">\n<div data-role="create-channel-module" data-jester-area="create-channel-module"></div>\n<div data-role="moderated-forums-module" data-jester-area="moderated-forums-module"></div>\n<div data-role="comments-module" data-jester-area="comments-module" class="module--aside"></div>\n'+(null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"onboardingWithoutChannels"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:0},end:{line:27,column:11}}}))?a:"")+'<div class="text-smaller text-gray">\n'+(null!=(a=e.invokePartial(r(i,"homeFooter"),t,{name:"homeFooter",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/homepageTabs",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__subheadings hidden-lg">\n<h2 class="text-subheading">'+r(s(n,"gettext").call(a,"Your Feed",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:28},end:{line:2,column:51}}}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li data-action="switch-tab" data-tab="popular" class="nav__item">\n<a href="/home/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-popular"></span>\n<span class="button__text">'+r(s(n,"gettext").call(a,"Recommended",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:27},end:{line:9,column:52}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="comments" class="nav__item">\n<a href="/home/comments/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-comments"></span>\n<span class="button__text">'+r(s(n,"gettext").call(a,"Latest Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:20,column:27},end:{line:20,column:56}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="discussions" class="nav__item">\n<a href="/home/discussions/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-discussions"></span>\n<span class="button__text">'+r(s(n,"gettext").call(a,"Latest Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:27},end:{line:31,column:59}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li class="nav__item visible-md">\n<a href="/about/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-brand-square"></span>\n<span class="button__text">'+r(s(n,"gettext").call(a,"About %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:42,column:27},end:{line:42,column:75}}}))+"</span>\n</div>\n</a>\n</li>\n</ul>\n"},useData:!0})}),define("home/views/HomepageView",["jquery","underscore","backbone","backbone-marionette","core/strings","home/models/Session","home/collections/ForumCollection","home/views/common/TabbedView","home/views/RecommendationsModuleView","home/views/ChannelCardCollectionViewWithChannelPromotion","home/views/ChannelFeedFooterView","home/views/common/FetchableCollectionLayout","home/views/CommentCardCollectionView","home/views/HomepageUserModuleView","home/views/HomepageCommentsModuleView","home/views/HomepageChannelsModuleView","home/views/HomepageOnboardingModuleView","home/views/ModeratedForumsModuleView","home/views/HomepageFollowingModuleView","home/views/HomepageRecommendedFeedEmptyView","home/views/HomepageCommentsFeedEmptyView","home/views/HomepageDiscussionsFeedEmptyView","home/views/MotdAlertView","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert","home/mixins/withEmailConfirmedModal","home/templates/homepage","home/templates/homepageTabs"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v,b,y,w,x,k,C,_,P,T,O){"use strict";var S=o.get,E=s.extend({defaultTab:"popular",template:T,templateHelpers:function(){return{onboardingWithoutChannels:this.onboardingWithoutChannels}},events:t.defaults({"click a[data-link-name]":"trackClickLink"},s.prototype.events),regions:t.defaults({userCardRegion:"[data-role=user-card]",commentsModuleRegion:"[data-role=comments-module]",followingModuleRegion:"[data-role=following-module]",recommendedChannelsModuleRegion:"[data-role=recommend-module][data-recommend-type=channel]",recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedForumsModuleRegion:"[data-role=recommend-module][data-recommend-type=forum]",rightRailRegion:"[data-role=right-rail]",leftRailRegion:"[data-role=left-rail]",onboardingModuleRegion:"[data-role=onboarding-module]",homepageTabsRegion:"[data-role=homepage-nav]",moderatedForumsRegion:"[data-role=moderated-forums-module]",motdAlertRegion:"[data-role=motd-alert]"},s.prototype.regions),initialize:function(e){s.prototype.initialize.call(this,e),this.session=a.get(),this.showOnboarding=!1,this.onboardingWithoutChannels=e.onboardingWithoutChannels,this.session.loadPromise().then(t.bind(function(){(this.showOnboarding=this.session.isLoggedIn()&&!this.session.user.get("homeFeedOnboardingComplete"))&&this.toggleOnboardingModules()},this)),this.listenTo(this,"change:activeTab",this.updateTabSpecificModules)},onDomRefresh:function(){s.prototype.onDomRefresh.call(this);var n,i=this.model.interestingChannels.ensureFetched(),o=t.bind(this.showChannelsModule,this);this.listenTo(this.session.user,"unfollowed:curationchannel",this.refreshRecommendedFeed),this.session.loadPromise().then(t.bind(this.showLoggedInModules,this)),n=this.session.userProfile.forumsFollowing.ensureFetched(),n.done(t.bind(this.showFollowingModule,this)),e.when(n,i).done(o),this.toggleOnboardingModules()},showFollowingModule:function(){var e=this.session.userProfile.forumsFollowing;e.items.length&&this.followingModuleRegion.show(new b({collection:e.items}))},showMotdAlertView:function(){this.motdAlertRegion.show(new k)},showLoggedInModules:function(){this.recommendedUsersModuleRegion.show(l.createUserRecommendedModuleView({model:this.model.interestingUsers})),this.userCardRegion.show(new m({model:this.session.user})),this.homepageTabsRegion.show(new i.ItemView({template:O})),this.updateTabClasses(),this.showModeratedForums()},showModeratedForums:function(){this.session.loadModeratedForums().then(t.bind(function(){var e=t.chain(this.session.moderatedForums).reject(function(e){return 0===e.indexOf("channel-")}).sortBy().map(function(e){return{id:e}}).value();t.isEmpty(e)||(this.moderatedForumsRegion.show(new v({collection:new r(e)})),this.showMotdAlertView())},this))},showChannelsModule:function(){var e=this.model.interestingChannels.items.chain().reject(function(e){return e.channel.primaryForum.get("isFollowing")}).pluck("channel").shuffle().value();e.length?this.recommendedChannelsModuleRegion.show(new f({collection:new n.Collection(e)})):(this.model.initializeAndFetchInterestingForums(),this.recommendedForumsModuleRegion.show(l.createForumRecommendedModuleView({model:this.model.interestingForums})))},refreshRecommendedFeed:function(){this.model.popular.fetchItems({reset:!0})},updateTabSpecificModules:function(e){"comments"===e?this.hideRegion(this.commentsModuleRegion):a.isKnownToBeLoggedOut()||(this.commentsModuleRegion.currentView||this.commentsModuleRegion.show(this.createHomepageCommentsModuleView()),this.showRegion(this.commentsModuleRegion))},toggleOnboardingModules:function(){if(t.each(["leftRailRegion","rightRailRegion"],function(e){this[e].ensureEl(),this[e].$el.toggleClass("is-disabled",this.showOnboarding)},this),this.showOnboarding){var e=new g({onboardingWithoutChannels:this.onboardingWithoutChannels});this.listenTo(e,"hideOnboarding",function(){this.showOnboarding=!1,this.toggleOnboardingModules()}),this.onboardingModuleRegion.show(e),this.hideRegion(this.emailVerificationAlertRegion)}else this.onboardingModuleRegion.$el&&this.hideRegion(this.onboardingModuleRegion)},createHomepageCommentsModuleView:function(){var e=new n.Collection([]),t=this;return this.model.commentsPromise.then(function(){e.reset(t.model.comments.items.map(function(e){return e.activities[0].object}))}),new p({collection:e,commentsPromise:this.model.commentsPromise})},hideRegion:function(e){e.$el&&e.$el.addClass("is-hidden")},showRegion:function(e){e.$el&&e.$el.removeClass("is-hidden")},getTrackingSection:function(e){return e},getTabView:function(e){var t={model:this.model.spotlightProfile.topActivities,collection:this.model.spotlightProfile.topActivities.items,maxItemsText:this.model.constructor.MAX_SPOTLIGHT_ITEMS.TEXT,onboardingWithoutChannels:this.onboardingWithoutChannels};switch(e){case"popular":return new d({model:this.model.popular,collection:this.model.popular.items,fetchableCollectionView:c,fetchableCollectionFooterView:u,infiniteScroll:!0,enableBestOfDisqusCallout:!0,emptyView:y,emptyViewOptions:t});case"comments":return new d({model:this.model.comments,collection:this.model.comments.items,fetchableCollectionView:h,infiniteScroll:!0,emptyView:w,emptyViewOptions:t});case"discussions":return new d({model:this.model.discussions,collection:this.model.discussions.items,fetchableCollectionView:c,infiniteScroll:!0,emptyView:x,emptyViewOptions:t})}},getMetaAttrs:function(){switch(this.activeTab){case"popular":return S("Recommended Discussions");case"comments":return S("Latest Comments");case"discussions":return S("Latest Discussions")}}});return C.call(E.prototype),_.call(E.prototype),P.call(E.prototype),E}),define("home/templates/activityFeed",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="section-contained">\n<div class="cover" data-role="cover-area"></div>\n</div>\n<div class="section-contained" data-role="header-area"></div>\n<div class="section-contained" id="container-content" data-role="content-area"></div>\n<div class="section-contained" data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ActivityFeedView",["underscore","home/views/ActivityCardCollectionView","home/views/common/FetchableCollectionLayout","home/templates/activityFeed"],function(e,t,n,i){"use strict";return n.extend({template:i,regions:e.defaults({coverRegion:"[data-role=cover-area]"},n.prototype.regions),fetchableCollectionView:t,initialize:function(e){n.prototype.initialize.apply(this,arguments),e.coverView&&(this.coverView=e.coverView)},onDomRefresh:function(){if(n.prototype.onDomRefresh.apply(this,arguments),this.coverView){this.coverRegion.show(new this.coverView({model:this.coverView.getModel?this.coverView.getModel(this.model):this.model}))}},getMetaAttrs:function(){var e=this.coverRegion.currentView;return e&&e.getMetaAttrs&&e.getMetaAttrs()||""}})}),define("home/mixins/asNotificationCard",["jquery","underscore","core/utils","core/analytics/jester","home/utils/navigationUtils","home/mixins/withAllstarPopover"],function(e,t,n,i,o,a){"use strict";var r=/#.*$/,s={className:"card-wrap card--notification",initialize:function(e,t){e.call(this,t),this.listenTo(this.model,"change:isUnread",this.updateUnreadClass),this.updateUnreadClass()},updateUnreadClass:function(){this.$el.toggleClass("unread",!!this.model.get("isUnread"))},serializeData:function(e){var n=e.apply(this,arguments);return t.defaults(n,{discussionRoute:this.model.thread&&this.model.thread.getDiscussionRoute()})},trackView:function(){this.model.get("isUnread")&&i.client.emit(this.getAnalyticsPayload("view"))},trackClick:function(n){var o=e(n.currentTarget);if(this.shouldTrackClick(n,o)){var a=i.client.emit(this.getAnalyticsPayload("click"));if(a&&this.shouldDelayNavigation(n,o)){n.preventDefault(),n.stopPropagation();var r=t.once(function(){window.top.location=o[0].href});t.delay(r,1e3),a.always(r)}}},shouldTrackClick:function(e,t){return!e.isDefaultPrevented()&&!!(t.attr("href")||"").replace(r,"")},shouldDelayNavigation:function(e,t){return!(o.isInbound(e.target)||n.willOpenNewWindow(e,t))}};return function(){a.call(this),this.className=t.wrap(this.className,function(e){return t.isFunction(e)&&(e=e.call(this)),e=e||"",s.className+" "+e}),this.initialize=t.wrap(this.initialize,s.initialize),this.serializeData=t.wrap(this.serializeData,s.serializeData),this.getAnalyticsPayload&&(t.extend(this,t.pick(s,["trackView","trackClick","shouldTrackClick","shouldDelayNavigation"])),this.events=t.extend({"click a":"trackClick"},this.events),this.onRender=t.wrap(this.onRender,function(e){e&&e.call(this),this.trackView()})),t.extend(this,t.pick(s,["updateUnreadClass"]))}}),define("home/views/common/NotificationCardPostView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withSubviews","home/views/TruncatedPostView"],function(e,t,n,i,o){"use strict";var a=e,r=a.extend({className:function(){return this.childClassName},regions:{postRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postRegion,this.createPostView)},createPostView:function(){var e=this.getPost(this.model.activities[0]);return new o({model:e})}}),s=r.prototype;return t.call(s),n.call(s),i.call(s),r}),define("home/templates/notificationCardChannelPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -reply">\n<span class="icon-notification-response text-brand icon__position text-smaller"></span>\n</div>'+r(s(n,"gettext").call(a,"%(userName)s responded to your discussion %(thread)s",{name:"gettext",hash:{thread:s(n,"getPartial").call(a,"threadLink",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:122},end:{line:5,column:147}}}),userName:s(n,"getPartial").call(a,"userName",null!=t?s(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:78},end:{line:5,column:112}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:149}}}))+'\n\n<span class="time text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card-comment" data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardChannelPostView",["home/views/common/NotificationCardPostView","home/templates/notificationCardChannelPost"],function(e,t){"use strict";return e.extend({childClassName:"card-notif-channel-post",template:t,getPost:function(e){return e.object}})}),define("home/templates/notificationCardUpvote",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -upvote text-brand">\n<span class="icon-arrow-up text-smaller"></span>\n</div>'+r(s(n,"gettext").call(a,"%(userNames)s upvoted you on %(thread)s",{name:"gettext",hash:{thread:s(n,"getPartial").call(a,"threadLink",{name:"getPartial",hash:{},data:o,loc:{start:{line:6,column:105},end:{line:6,column:130}}}),userNames:s(n,"getPartial").call(a,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:6,column:66},end:{line:6,column:95}}})},data:o,loc:{start:{line:6,column:0},end:{line:6,column:132}}}))+'\n\n<span class="time text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div data-role="post"></div>\n</div>\n'},useData:!0})}),
define("home/views/NotificationCardUpvoteView",["home/views/common/NotificationCardPostView","home/templates/notificationCardUpvote"],function(e,t){"use strict";return e.extend({childClassName:" card-notif-upvote",template:t,getPost:function(e){return e.target}})}),define("home/templates/notificationCardChannelRecommend",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason  -recommendation">\n<div class="notification__icon">\n<span class="icon-heart text-error text-smaller icon__position"></span>\n</div>'+r(s(n,"gettext").call(a,"%(userNames)s recommended your discussion %(thread)s",{name:"gettext",hash:{thread:s(n,"getPartial").call(a,"threadLink",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:118},end:{line:5,column:143}}}),userNames:s(n,"getPartial").call(a,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:79},end:{line:5,column:108}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:145}}}))+'\n\n<span class="time text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+"</span>\n</div>\n"},useData:!0})}),define("home/views/NotificationCardChannelRecommendView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/templates/notificationCardChannelRecommend"],function(e,t,n,i){"use strict";var o=e,a=o.extend({className:"card-notif-recommend",template:i}),r=a.prototype;return t.call(r),n.call(r),a}),define("home/templates/notificationCardReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -reply">\n<span class="icon-notification-reply text-success icon-small"></span>\n</div>'+r(s(n,"gettext").call(a,"%(userName)s replied to you on %(thread)s",{name:"gettext",hash:{thread:s(n,"getPartial").call(a,"threadLink",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:111},end:{line:5,column:136}}}),userName:s(n,"getPartial").call(a,"userName",null!=t?s(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:67},end:{line:5,column:101}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:138}}}))+'\n\n<span class="time text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card-comment" data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardReplyView",["backbone","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withSubviews","home/views/PostActivityCollectionView","home/templates/notificationCardReply"],function(e,t,n,i,o,a,r){"use strict";var s=t.extend({className:"card-notif-reply",template:r,regions:{postsRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostCollectionView)},createPostCollectionView:function(){return new a({collection:new e.Collection(this.model.activities)})}}),l=s.prototype;return n.call(l),i.call(l),o.call(l),s}),define("home/templates/userCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(a=e.invokePartial(r(i,"userCardBody"),t,{name:"userCardBody",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="user-card__button">\n'+(null!=(a=e.invokePartial(r(i,"userFollowButton"),t,{name:"userFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/UserCardView",["backbone-marionette","home/mixins/withAllstarPopover","home/templates/userCard","core/bus"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:n,templateHelpers:function(){return{isSessionUser:this.model.isSessionUser()}},className:"card",events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:isFollowing":"handleFollowedClass"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.get("isFollowing")?i.trigger("uiAction:unfollowUser",this.model,e):i.trigger("uiAction:followUser",this.model,e),this.model.toggleFollowed()}});return t.call(o.prototype),o}),define("home/templates/followerCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button button-outline -border-muted text-error spacing-right-small"\ntitle="'+a(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Remove Follower",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:7},end:{line:11,column:36}}}))+'"\ndata-action="remove-follower"\ndata-user="'+a(e.lambda(null!=t?r(t,"id"):t,t))+'">\n<span class="icon-cancel icon__position"></span>\n</button>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(a=e.invokePartial(r(i,"userAvatar"),t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="user-info">\n'+(null!=(a=e.invokePartial(r(i,"userName"),t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n</div>\n<div class="user-card__button">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showRemoveButton"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:16,column:7}}}))?a:"")+(null!=(a=e.invokePartial(r(i,"userFollowButton"),t,{name:"userFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/FollowerCardView",["home/views/UserCardView","home/templates/followerCard"],function(e,t){"use strict";return e.extend({initialize:function(t){e.prototype.initialize.call(this,t),this.showRemoveButton=t.showRemoveButton},template:t,templateHelpers:function(){var t=e.prototype.templateHelpers.call(this);return t.showRemoveButton=this.showRemoveButton,t}})}),define("home/views/FollowerCollectionView",["underscore","jquery","core/strings","core/bus","home/views/FollowerCardView","home/views/common/FetchableCollectionView"],function(e,t,n,i,o,a){"use strict";var r=n.get;return a.extend({initialize:function(e){a.prototype.initialize.call(this,e),this.user=e.user},events:e.defaults({"click [data-action=remove-follower]":"removeFollower"},a.prototype.events),itemView:o,itemViewOptions:function(){return{showRemoveButton:this.user.isSessionUser()}},removeFollower:function(e){if(this.user.isSessionUser()){e.preventDefault();var o=t(e.currentTarget),a=o.attr("data-user"),s=this.collection.findWhere({id:a});if(window.confirm(n.interpolate(r("Remove %(follower)s as a follower?"),{follower:s.getDisplayName()})))return this.collection.remove(s),i.trigger("removeFollower",s),this.user.removeFollower(s)}}})}),define("home/templates/notificationCardFollow",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<div class="expandable">\n<div class="followers__expand">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"See More",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:0},end:{line:15,column:22}}}))+"\n</a>\n</div>\n</div>\n"},3:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="collapsible">\n<div class="followers__collapse">\n<a class="button button-outline" href="/by/'+a(e.lambda(null!=t?r(t,"sessionUsername"):t,t))+'/followers/">\n'+a(r(n,"gettext").call(null!=t?t:e.nullContext||{},"See All Followers",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:0},end:{line:24,column:31}}}))+"\n</a>\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon">\n<span class="icon-notification-follow icon__position text-small"></span>\n</div>'+s(l(n,"gettext").call(r,"%(userNames)s followed you",{name:"gettext",hash:{userNames:l(n,"getPartial").call(r,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:53},end:{line:5,column:82}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:84}}}))+'\n<span class="time text-gray">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+'</span>\n</div>\n<div data-role="users"></div>\n\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"shouldCollapse"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:0},end:{line:19,column:7}}}))?a:"")+(null!=(a=l(n,"if").call(r,null!=t?l(t,"hasOverflowActors"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:0},end:{line:28,column:7}}}))?a:"")},useData:!0})}),define("home/views/NotificationCardFollowView",["underscore","backbone","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/models/Session","home/views/FollowerCollectionView","home/templates/notificationCardFollow"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=n,d=u.extend({className:function(){return"card-notif-follow"+(this.shouldCollapse()?" card-collapsed":"")},initialize:function(){this.session=s.get(),this.initializeShownActors()},initializeShownActors:function(){this.shownActors||(this.shownActors=e.pluck(this.model.activities,"actor"))},shouldCollapse:function(){return this.initializeShownActors(),this.shownActors.length>3},template:c,templateHelpers:function(){return{hasOverflowActors:this.model.get("totalActors")>this.model.actors.length,sessionUsername:this.session.user.get("username"),shouldCollapse:this.shouldCollapse()}},regions:{usersRegion:"[data-role=users]"},onRender:function(){this.activateRegion(this.usersRegion,this.createUsersView)},createUsersView:function(){return new l({user:this.session.user,el:this.usersRegion.el,itemViewOptions:function(e,t){return{className:"followers__wrap"+(t>2?" collapsible":""),showRemoveButton:!0}},collection:new t.Collection(this.shownActors)})}}),h=d.prototype;return i.call(h),o.call(h),a.call(h),r.call(h),d}),define("home/templates/notificationCardAnnouncement",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" has-image"},3:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="card-content__media">\n'+(null!=(a=s(n,"if").call(r,null!=(a=null!=t?s(t,"announcement"):t)?s(a,"link"):a,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:0},end:{line:14,column:7}}}))?a:"")+'<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"announcement"):t)?s(a,"image"):a,t))+')" class="img-cards"></div>\n'+(null!=(a=s(n,"if").call(r,null!=(a=null!=t?s(t,"announcement"):t)?s(a,"link"):a,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:0},end:{line:18,column:7}}}))?a:"")+"</span>\n"},4:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"announcement"):t)?l(a,"link"):a,t))+s(r(null!=t?l(t,"linkArgDelimiter"):t,t))+"utm_campaign="+s(r(null!=t?l(t,"activityId"):t,t))+'&utm_content=img&utm_source=note"\ndata-link-name="image">\n'},6:function(e,t,n,i,o){return"</a>\n"},8:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"announcement"):t)?l(a,"link"):a,t))+s(r(null!=t?l(t,"linkArgDelimiter"):t,t))+"utm_campaign="+s(r(null!=t?l(t,"activityId"):t,t))+'&utm_content=title&utm_source=note"\nclass="link-gray-darker truncate"\ndata-truncate-lines="'+s(r(null!=t?l(t,"numTitleLines"):t,t))+'"\ndata-link-name="title">\n'},10:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="spacing-narrow spacing-top ">\n<a href="'+s(r(null!=(a=null!=t?l(t,"announcement"):t)?l(a,"link"):a,t))+s(r(null!=t?l(t,"linkArgDelimiter"):t,t))+"utm_campaign="+s(r(null!=t?l(t,"activityId"):t,t))+'&utm_content=btn&utm_source=note"\nclass="button button-outline text-medium">\n'+s(r(null!=(a=null!=t?l(t,"announcement"):t)?l(a,"callToAction"):a,t))+"\n</a>\n</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -invite">\n<span class="icon-notification-invite text-brand icon-small"></span>\n</div>\n'+s(r(null!=(a=null!=t?c(t,"announcement"):t)?c(a,"subject"):a,t))+'\n<span class="time text-gray">'+s(r(null!=t?c(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"announcement"):t)?c(a,"image"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:39},end:{line:8,column:82}}}))?a:"")+'">\n'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"announcement"):t)?c(a,"image"):a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:20,column:7}}}))?a:"")+'\n<div class="card-content__body">\n<h2 class="discussion-title" dir="auto">\n'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"announcement"):t)?c(a,"link"):a,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:24,column:0},end:{line:29,column:7}}}))?a:"")+s(r(null!=(a=null!=t?c(t,"announcement"):t)?c(a,"title"):a,t))+"\n"+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"announcement"):t)?c(a,"link"):a,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:0},end:{line:33,column:7}}}))?a:"")+'</h2>\n\n<div class="card-content__summary text-medium">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+s(r(null!=(a=null!=t?c(t,"announcement"):t)?c(a,"body"):a,t))+"\n</div>\n</div>\n\n"+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"announcement"):t)?c(a,"callToAction"):a,{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:42,column:0},end:{line:49,column:7}}}))?a:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/NotificationCardAnnouncementView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/templates/notificationCardAnnouncement"],function(e,t,n,i){"use strict";var o=e,a=o.extend({template:i,templateHelpers:function(){var e=this.getAnnouncement(),t=e.get("link")&&e.get("link").indexOf("?")>0?"&":"?";return{announcement:e.toJSON(),linkArgDelimiter:t,activityId:this.model.activities[0].get("backendId")}},className:"card-notif-announcement",getAnnouncement:function(){return this.model.activities[0].object},getAnalyticsPayload:function(e){var t=this.getAnnouncement();return{verb:e,object_type:"note",object_id:this.model.activities[0].get("backendId"),note_template_id:t.get("templateId"),note_template_name:t.get("templateName")}}});return t.call(a.prototype),n.call(a.prototype),a}),define("home/templates/notificationCardThreadInvite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" has-image"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -invite">\n<span class="icon-notification-invite text-brand icon-small"></span>\n</div>'+s(c(n,"gettext").call(r,"%(userName)s invited you to a new discussion on %(parent)s",{name:"gettext",hash:{parent:c(n,"getPartial").call(r,"channelAwareForumLink",null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:128},end:{line:5,column:177}}}),userName:c(n,"getPartial").call(r,"userName",null!=t?c(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:84},end:{line:5,column:118}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:179}}}))+'\n<span class="time text-gray">'+s(l(null!=t?c(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:39},end:{line:8,column:69}}}))?a:"")+'">\n'+(null!=(a=e.invokePartial(c(i,"cardContentImage"),t,{name:"cardContentImage",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-content__body">\n'+(null!=(a=e.invokePartial(c(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-content__summary text-medium">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+s(l(null!=t?c(t,"threadDescription"):t,t))+'\n</div>\n</div>\n<p class="spacing-narrow spacing-top ">\n<a href="'+s(l(null!=t?c(t,"discussionRoute"):t,t))+'"\nclass="button button-outline text-medium"\ndata-thread-id="'+s(l(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\nJoin Discussion\n</a>\n</p>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/NotificationCardThreadInviteView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withTruncate","home/templates/notificationCardThreadInvite"],function(e,t,n,i,o){"use strict";var a=e,r=a.extend({className:"card-notif-invite card-notif-note",template:o,templateHelpers:function(){return{threadDescription:this.model.thread.getPlainDescription(),image:this.model.thread.getImage(),numTitleLines:3}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},getAnalyticsPayload:function(e){var t=this.model.thread,n=this.model.activities[0].get("backendId");return{verb:e,object_type:"note",object_id:n,note_template_id:n,note_template_name:["thread invite",t.forum.id,t.get("slug")].join(" ")}}});return t.call(r.prototype),n.call(r.prototype),i.call(r.prototype),r}),define("home/templates/forumCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/channel/'+s(r(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n'+(null!=(a=e.invokePartial(l(i,"channelAvatarWithDefault"),t,{name:"channelAvatarWithDefault",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</a>\n"},3:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"forumAvatarLink"),t,{name:"forumAvatarLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},5:function(e,t,n,i,o){return'<span class="label--default -inline">Creator</span>\n'},7:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"sessionUserIsModerator"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:0},end:{line:23,column:7}}}))?a:""},8:function(e,t,n,i,o){return'<span class="label--default -inline">Moderator</span>\n'},10:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"channelDescription"):t,t))+"\n"},12:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+r(a(null!=t?s(t,"url"):t,t))+'"\ndata-link-out="'+r(a(null!=t?s(t,"signedUrl"):t,t))+'"\nclass="link-gray"\ndata-link-name="forum_description"\ndata-forum-pk="'+r(a(null!=t?s(t,"pk"):t,t))+'">'+r(a(null!=t?s(t,"url"):t,t))+"</a>\n"},14:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if_all").call(null!=t?t:e.nullContext||{},null!=t?r(t,"sessionUserIsModerator"):t,null!=t?r(t,"channel"):t,{name:"if_all",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o,loc:{start:{line:45,column:0},end:{line:51,column:11}}}))?a:""},15:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button button-outline -border-muted text-error button-small spacing-right-small"\ntitle="'+r(s(n,"gettext").call(a,"Remove Moderator",{name:"gettext",hash:{},data:o,loc:{start:{line:47,column:7},end:{line:47,column:37}}}))+'"\ndata-action="remove-moderator">\n<span class="icon-tiny icon-cancel spacing-right-small"></span>'+r(s(n,"gettext").call(a,"Resign",{name:"gettext",hash:{},data:o,loc:{start:{line:49,column:63},end:{line:49,column:83}}}))+"\n</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"channel"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:3,column:0},end:{line:12,column:7}}}))?a:"")+'<div class="forum-info">\n'+(null!=(a=e.invokePartial(s(i,"channelAwareForumLink"),t,{name:"channelAwareForumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"sessionUserIsOwner"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:16,column:0},end:{line:24,column:7}}}))?a:"")+'<p class="description truncate-line text-medium">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"channelDescription"):t,{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.program(12,o,0),data:o,loc:{start:{line:26,column:0},end:{line:37,column:7}}}))?a:"")+'</p>\n</div>\n</div>\n<div class="user-card__button btn-follow--mobile">\n'+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"sessionUserIsOwner"):t,{name:"unless",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:44,column:0},end:{line:52,column:11}}}))?a:"")+(null!=(a=e.invokePartial(s(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/confirmResignModerator",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">'+r(s(n,"gettext").call(a,"Resign as moderator of %(name)s",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:2,column:24},end:{line:2,column:81}}}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+r(s(n,"gettext").call(a,"You will no longer have moderator priveleges on %(name)s.",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:5,column:3},end:{line:5,column:86}}}))+"</p>\n</div>\n"},useData:!0})}),define("home/views/ForumCardView",["underscore","backbone-marionette","home/utils/confirmModal","home/mixins/withChannelAvatar","home/models/Session","home/templates/forumCard","home/templates/confirmResignModerator"],function(e,t,n,i,o,a,r){"use strict";var s=t.ItemView.extend({template:a,templateHelpers:function(){var e=this.model.channel;return{sessionUserIsOwner:this.sessionUserIsOwner,sessionUserIsModerator:this.sessionUserIsModerator,channelDescription:e&&e.get("options").description}},className:"card",events:{"click [data-action=toggle-follow]":"toggleFollow","click [data-action=remove-moderator]":"confirmRemoveModerator"},modelEvents:{"change:isFollowing":"handleFollowedClass"},initialize:function(){this.session=o.get(),this.session.loadPromise().then(e.bind(this.renderIfOwner,this)),this.session.loadModeratedForums().then(e.bind(this.renderModeratorStatus,this))},renderIfOwner:function(){(this.sessionUserIsOwner=(this.model.channel&&this.model.channel.get("owner_id"))===this.session.user.get("id"))&&this.render()},renderModeratorStatus:function(){var t=!!this.sessionUserIsModerator,n=this.session.user.get("moderatedForums");this.sessionUserIsModerator=e.contains(n,this.model.get("id")),t!==this.sessionUserIsModerator&&this.render()},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()},confirmRemoveModerator:function(t){t&&t.preventDefault();var i=this.model.channel;n.confirmationPromise(n.TYPES.CONFIRM_CANCEL,r(i.toJSON())).then(e.bind(function(t){t&&this.session.user.moderateChannel(i,!1).then(e.bind(this.renderModeratorStatus,this))},this))}});return i.call(s.prototype,function(){return this.model.channel}),s}),define("home/templates/notificationCardChannelInvite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -invite">\n<span class="icon-notification-invite text-brand icon-small"></span>\n</div>'+r(s(n,"gettext").call(a,"%(userName)s invited you to check out the channel %(channel)s",{name:"gettext",hash:{channel:s(n,"getPartial").call(a,"channelLink",null!=t?s(t,"channel"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:132},end:{line:5,column:166}}}),userName:s(n,"getPartial").call(a,"userName",null!=t?s(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:87},end:{line:5,column:121}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:168}}}))+'\n<span class="time text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification" data-role="content">\n</div>\n'},useData:!0})}),define("home/views/NotificationCardChannelInviteView",["home/views/ForumCardView","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/withSubviews","home/mixins/asNotificationCard","home/mixins/withTruncate","home/mixins/withChannelAvatar","home/templates/notificationCardChannelInvite"],function(e,t,n,i,o,a,r,s){"use strict";var l=t,c=function(){return this.model.activities[0].channel},u=l.extend({className:"card-notif-channel-invite card-notif-note",regions:{contentRegion:"[data-role=content]"},template:s,templateHelpers:function(){return{channel:c.call(this).toJSON()}},onRender:function(){this.activateRegion(this.contentRegion,this.createContentView)},createContentView:function(){return new e({model:c.call(this).primaryForum,className:""})},getAnalyticsPayload:function(e){var t=c.call(this),n=this.model.activities[0].get("backendId");return{verb:e,object_type:"note",object_id:n,note_template_id:n,note_template_name:["channel invite",t.id].join(" ")}}});return n.call(u.prototype),o.call(u.prototype),a.call(u.prototype),r.call(u.prototype,c),i.call(u.prototype),u}),define("home/templates/notificationCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" has-image"},3:function(e,t,n,i,o){return'<button\nclass="button button-outline -border-muted text-error text-medium spacing-right-small"\ndata-action="delete">\n<span class="icon-tiny icon-cancel spacing-right-small"></span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Delete",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:0},end:{line:26,column:20}}}))+"\n</button>\n"},5:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="text-small text-gray">\n'+r(s(n,"gettext").call(a,"This discussion was deleted.",{name:"gettext",hash:{},data:o,loc:{start:{line:30,column:0},end:{line:30,column:42}}}))+'\n<a href="#" data-action="restore">'+r(s(n,"gettext").call(a,"Undo",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:34},end:{line:31,column:52}}}))+"</a>\n</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -new-discussion">\n<span class="icon-create-discussion text-smaller"></span>\n</div>'+s(c(n,"gettext").call(r,"%(userName)s started a discussion on %(parent)s",{name:"gettext",hash:{parent:c(n,"getPartial").call(r,"channelAwareForumLink",null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a,{name:"getPartial",hash:{},data:o,loc:{start:{line:6,column:55},end:{line:6,column:104}}}),userName:c(n,"getPartial").call(r,"userName",null!=t?c(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:6,column:11},end:{line:6,column:45}}})},data:o,loc:{start:{line:5,column:0},end:{line:6,column:106}}}))+'\n\n<span class="time text-gray">'+s(l(null!=t?c(t,"relativeTime"):t,t))+'</span>\n</div>\n\n<div class="card__content -notification'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:39},end:{line:11,column:69}}}))?a:"")+'">\n'+(null!=(a=e.invokePartial(c(i,"cardContentImage"),t,{name:"cardContentImage",data:o,helpers:n,partials:i,decorators:e.decorators
}))?a:"")+'<div class="card-content__body">\n'+(null!=(a=e.invokePartial(c(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-content__summary text-medium">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+s(l(null!=t?c(t,"threadDescription"):t,t))+'\n</div>\n</div>\n<div class="spacing-top spacing-narrow align">\n'+(null!=(a=c(n,"unless").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isDeleted"):a,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:21,column:0},end:{line:33,column:11}}}))?a:"")+"</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/NotificationCardCreateView",["home/models/Session","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withTruncate","home/templates/notificationCardCreate"],function(e,t,n,i,o,a){"use strict";var r=t,s=r.extend({className:"card-notif-create card-notif-invite card-notif-note",template:a,templateHelpers:function(){return{threadDescription:this.model.thread.getPlainDescription(),image:this.model.thread.getImage(),numTitleLines:3}},events:{"click [data-action=delete]":"deleteThread","click [data-action=restore]":"restoreThread"},initialize:function(){this.session=e.get(),this.listenTo(this.model.thread,"change:content",this.render),this.listenTo(this.model.thread,"change:isDeleted",this.render)},deleteThread:function(){this.model.thread.confirmDelete(!0)},restoreThread:function(){this.model.thread.restore()}}),l=s.prototype;return n.call(l),i.call(l),o.call(l),s}),define("core/mixins/withForumFollowing",["underscore"],function(e){"use strict";function t(e){return{events:{"click [data-action=toggle-follow]":"toggleFollow"},initialize:function(){this.bindToForum()},templateHelpers:function(){return{isFollowing:this.getIsFollowing()}},bindToForum:function(){var t=e.call(this);t&&this.listenTo(t,"change:isFollowing",this.updateFollowedState)},getIsFollowing:function(){var t=e.call(this);return t&&t.get("isFollowing")},updateFollowedState:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.getIsFollowing())},toggleFollow:function(t){t&&(t.preventDefault(),t.stopPropagation());var n=e.call(this);n&&(n.toggleFollowed(),this.trigger("toggled:follow",t))}}}function n(n){var i=n||function(){return this.model},o=t(i);this.bindToForum=e.wrap(this.bindToForum,function(e){e&&e.call(this),o.bindToForum.call(this)}),this.initialize=e.wrap(this.initialize,function(e,t){e.call(this,t),o.initialize.call(this,t)}),this.templateHelpers=e.wrap(this.templateHelpers,function(t){var n=e.isFunction(t)?t.call(this):t;return e.extend(o.templateHelpers.call(this),n)}),this.events=e.extend({},o.events,this.events),e.extend(this,e.pick(o,"toggleFollow","updateFollowedState","getIsFollowing"))}return n}),define("home/templates/notificationCardAddMod",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/channel/'+s(r(null!=(a=null!=(a=null!=t?l(t,"forum"):t)?l(a,"channelInfo"):a)?l(a,"slug"):a,t))+'/"\nclass="avatar"\ndata-link-name="channel_avatar"\ndata-channel-slug="'+s(r(null!=(a=null!=(a=null!=t?l(t,"forum"):t)?l(a,"channelInfo"):a)?l(a,"slug"):a,t))+'">\n'+(null!=(a=e.invokePartial(l(i,"channelAvatarWithDefault"),t,{name:"channelAvatarWithDefault",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</a>\n<div class="forum-info truncate-line">\n<a class="name"\nhref="/home/channel/'+s(r(null!=(a=null!=(a=null!=t?l(t,"forum"):t)?l(a,"channelInfo"):a)?l(a,"slug"):a,t))+'/"\ndata-link-name="channel_name"\ndata-channel-slug="'+s(r(null!=(a=null!=(a=null!=t?l(t,"forum"):t)?l(a,"channelInfo"):a)?l(a,"slug"):a,t))+'">\n\n'+(null!=(a=e.invokePartial(l(i,"channelAwareForumName"),null!=t?l(t,"forum"):t,{name:"channelAwareForumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</a>\n<p class="description truncate-line">\n'+s(r(null!=(a=null!=(a=null!=(a=null!=t?l(t,"forum"):t)?l(a,"channelInfo"):a)?l(a,"options"):a)?l(a,"description"):a,t))+"\n</p>\n</div>\n"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(r(i,"forumAvatarLink"),null!=t?r(t,"forum"):t,{name:"forumAvatarLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="forum-info truncate-line">\n'+(null!=(a=e.invokePartial(r(i,"forumLink"),null!=t?r(t,"forum"):t,{name:"forumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},5:function(e,t,n,i,o){return'<span class="button button-small text-gray-dark">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"You've been removed.",{name:"gettext",hash:{},data:o,loc:{start:{line:40,column:0},end:{line:40,column:34}}}))+"\n</span>\n"},7:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button button-outline -border-muted text-error button-small spacing-right-small"\ntitle="'+r(s(n,"gettext").call(a,"Resign as moderator",{name:"gettext",hash:{},data:o,loc:{start:{line:44,column:7},end:{line:44,column:40}}}))+'"\ndata-action="remove-moderator">\n<span class="icon-tiny icon-cancel spacing-right-small"></span>\n'+r(s(n,"gettext").call(a,"Resign",{name:"gettext",hash:{},data:o,loc:{start:{line:47,column:0},end:{line:47,column:20}}}))+"\n</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon">\n<span class="icon-checkmark icon__position text-small text-success"></span>\n</div>'+s(l(n,"gettext").call(r,"%(userNames)s added you as a moderator to %(forum)s",{name:"gettext",hash:{forum:l(n,"getPartial").call(r,"channelAwareForumLink",null!=t?l(t,"forum"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:116},end:{line:5,column:158}}}),userNames:l(n,"getPartial").call(r,"userGroupNames",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:78},end:{line:5,column:107}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:160}}}))+'\n<span class="time text-gray">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card--user">\n<div class="user-card__block -add-mod">\n'+(null!=(a=l(n,"if").call(r,null!=(a=null!=t?l(t,"forum"):t)?l(a,"channelInfo"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:11,column:0},end:{line:35,column:7}}}))?a:"")+'</div>\n<div data-role="channel-actions" class="user-card__button btn-follow--mobile">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"resigned"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:38,column:0},end:{line:49,column:7}}}))?a:"")+(null!=(a=e.invokePartial(l(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/NotificationCardAddModView",["underscore","home/models/Session","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withChannelAvatar","core/mixins/withForumFollowing","home/utils/confirmModal","home/templates/notificationCardAddMod","home/templates/confirmResignModerator"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=n,d=u.extend({className:"card-notif-add-mod",events:{"click [data-action=remove-moderator]":"confirmRemoveModerator"},initialize:function(){this.session=t.get(),this.forum=this.getForum(),this.channel=this.forum.channel,this.session.loadModeratedForums().then(e.bind(this.render,this))},template:l,templateHelpers:function(){return{forum:this.forum.toJSON(),resigned:!this.sessionUserIsModerator()}},sessionUserIsModerator:function(){return e.contains(this.session.user.get("moderatedForums"),this.forum.id)},confirmRemoveModerator:function(t){t&&t.preventDefault(),s.confirmationPromise(s.TYPES.CONFIRM_CANCEL,c({name:this.channel&&this.channel.attributes.name||this.forum.attributes.name})).then(e.bind(this.removeModerator,this))},removeModerator:function(t){t&&(this.channel?this.session.user.moderateChannel(this.channel,!1).then(e.bind(this.render,this)):this.session.user.moderateForum(this.forum,!1).then(e.bind(this.render,this)))},getForum:function(){return this.model.activities[0].target}}),h=d.prototype;i.call(h),o.call(h);var m=function(){return this.forum&&this.forum.channel},p=function(){return this.forum};return a.call(h,m),r.call(h,p),d}),define("home/templates/notificationCardHighlightPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon text-brand">\n<span class="icon-trophy text-smaller text-warning"></span>\n</div>'+r(s(n,"gettext").call(a,"%(name)s featured your comment on %(thread)s",{name:"gettext",hash:{thread:s(n,"getPartial").call(a,"threadLink",{name:"getPartial",hash:{},data:o,loc:{start:{line:6,column:110},end:{line:6,column:135}}}),name:s(n,"getPartial").call(a,"cardTitleInlineName",{name:"getPartial",hash:{},data:o,loc:{start:{line:6,column:66},end:{line:6,column:100}}})},data:o,loc:{start:{line:6,column:0},end:{line:6,column:137}}}))+'\n\n<span class="time text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardHighlightPostView",["home/views/common/NotificationCardPostView","home/templates/notificationCardHighlightPost"],function(e,t){"use strict";return e.extend({childClassName:"card-notif-highlight",template:t,getPost:function(e){return e.target}})}),define("home/templates/notificationCardMention",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card__reason">\n<div class="notification__icon -reply">\n<span class="icon-mention text-brand icon-small"></span>\n</div>'+r(s(n,"gettext").call(a,"%(userName)s mentioned you on %(thread)s",{name:"gettext",hash:{thread:s(n,"getPartial").call(a,"threadLink",{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:110},end:{line:5,column:135}}}),userName:s(n,"getPartial").call(a,"userName",null!=t?s(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:5,column:66},end:{line:5,column:100}}})},data:o,loc:{start:{line:5,column:0},end:{line:5,column:137}}}))+'\n\n<span class="time text-gray">'+r(e.lambda(null!=t?s(t,"relativeTime"):t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card-comment" data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardMentionView",["home/views/common/NotificationCardPostView","home/templates/notificationCardMention"],function(e,t){"use strict";return e.extend({childClassName:"card-notif-channel-post",template:t,getPost:function(e){return e.target}})}),define("home/templates/notificationFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n\n<svg class="art-empty-notifications" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 164.8 50" enable-background="new 0 0 164.8 50" xml:space="preserve"><path d="M0 11h13.7v3.6H0V11z" class="arm"/><path d="M15.4 11h4.2l18.1 37h-4.2L15.4 11z" class="arm"/><path d="M39 44.2h24.2V48H39V44.2z" class="arm"/><path d="M101.6 44.2h24.2V48h-24.2V44.2z" class="arm"/><path d="M145 11h4.2l-18.1 37h-4.2L145 11z" class="arm"/><path d="M151.1 11h13.7v3.6h-13.7V11z" class="arm"/><path d="M57.9 25c0-13.8 11.2-25 25-25s25 11.2 25 25s-11.2 25-25 25 S57.9 38.8 57.9 25z" class="body"/><path d="M71.1 20.7C71.8 26.5 76.8 31 82.9 31s11-4.5 11.8-10.3c-2.3 2.2-6.7 3-11.8 3S73.4 22.9 71.1 20.7z" class="mouth"/><path d="M63.3 16c0-2.1 1.8-3.9 4-3.9c2.2 0 4 1.7 4 3.9s-1.8 3.9-4 3.9 C65.1 19.9 63.3 18.1 63.3 16z" class="eye"/><path d="M94.4 15.6c0-2.1 1.8-3.8 4-3.8c2.2 0 4 1.7 4 3.8 c0 2.1-1.8 3.8-4 3.8C96.2 19.5 94.4 17.8 94.4 15.6z" class="eye"/></svg>\n\n<div class="notifications-empty-headline">'+r(s(n,"gettext").call(a,"No Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:42},end:{line:7,column:72}}}))+"</div>\n"+r(s(n,"gettext").call(a,"You must be new. Or quiet.",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:0},end:{line:8,column:40}}}))+"\n</div>\n"},useData:!0})}),define("home/views/NotificationFeedEmptyView",["backbone-marionette","home/templates/notificationFeedEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/views/NotificationCardCollectionView",["underscore","core/bus","home/views/ActivityCardCollectionView","home/views/NotificationCardChannelPostView","home/views/NotificationCardUpvoteView","home/views/NotificationCardChannelRecommendView","home/views/NotificationCardReplyView","home/views/NotificationCardFollowView","home/views/NotificationCardAnnouncementView","home/views/NotificationCardThreadInviteView","home/views/NotificationCardChannelInviteView","home/views/NotificationCardCreateView","home/views/NotificationCardAddModView","home/views/NotificationCardHighlightPostView","home/views/NotificationCardMentionView","home/views/NotificationFeedEmptyView"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f){"use strict";var g=n.extend({itemView:function(e){var t=g.ITEM_VIEWS[e.model.get("verb")];if(t)return new t({model:e.model})},emptyView:f,initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this,"after:item:added",this.onShowNotification),this.listenTo(this,"after:item:added",e.debounce(e.bind(t.trigger,t,"after:render"),100)),this.listenToOnce(this,"showFirstItem",function(){t.trigger("showFirstCard","notifications")})},onShowNotification:function(e){e.model&&e.model===this.collection.at(0)&&this.model.trigger("clearUnreadCount")}},{ITEM_VIEWS:{favorite:o,reply:r,follow:s,send:l,threadInvite:c,channelInvite:u,create:d,recommend:a,"channel-post":i,"add-mod":h,highlight:m,mention:p}});return g}),define("home/templates/notifications",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="nav-notifs-settings dropdown" data-action="toggle-dropdown" data-dropdown="notif-settings">\n<a href="/home/settings/web/" title="'+r(s(n,"gettext").call(a,"Control what notifications you see from %(Disqus)s.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:50,column:37},end:{line:50,column:120}}}))+'">\n<span class="icon-cog"></span>\n</a>\n<div class="dropdown-menu dropdown-notifs-settings">\n<header class="dropdown-notifs-settings-header">\n<h6>'+r(s(n,"gettext").call(a,"Control Your Inbox",{name:"gettext",hash:{},data:o,loc:{start:{line:55,column:4},end:{line:55,column:36}}}))+"</h6>\n<p>"+r(s(n,"gettext").call(a,"Use these settings to control what notifications you see from %(disqus)s. To change email notifications click %(here)s.",{name:"gettext",hash:{here:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"here",{name:"gettext",hash:{},data:o,loc:{start:{line:56,column:219},end:{line:56,column:235}}}),"data-action":"notification-settings",href:"#"},data:o,loc:{start:{line:56,column:160},end:{line:56,column:236}}}),disqus:"Disqus"},data:o,loc:{start:{line:56,column:3},end:{line:56,column:238}}}))+'</a></p>\n</header>\n<ul class="dropdown-notifs-settings-options">\n<li class="dropdown-notifs-settings-option">\n<label><input data-action="filter-toggle" data-filter="likepost" type="checkbox" name="upvotes" value="upvotes">'+r(s(n,"gettext").call(a,"Hide upvotes",{name:"gettext",hash:{},data:o,loc:{start:{line:60,column:112},end:{line:60,column:138}}}))+'</label>\n</li>\n<li class="dropdown-notifs-settings-option">\n<label><input data-action="filter-toggle" data-filter="invite" type="checkbox" name="invite" value="invite">'+r(s(n,"gettext").call(a,"Hide invitations",{name:"gettext",hash:{},data:o,loc:{start:{line:63,column:108},end:{line:63,column:138}}}))+"</label>\n</li>\n</ul>\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="motd-alert"></div>\n<div class="section-contained">\n<div class="layout layout--tablet-no-aside">\n<div class="layout__main-with-aside">\n<div class="layout__nav">\n<ul class="nav--no-aside">\n<li data-action="switch-tab" data-tab="all" class="nav__item active">\n<a href="/home/inbox/" class="nav-lnk -color-muted truncate-line">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-recent"></span>\n<span class="button__text">'+s(l(n,"gettext").call(r,"Most Recent",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:27},end:{line:11,column:52}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="replies" class="nav__item">\n<a href="/home/inbox/replies/" class="nav-lnk -color-muted truncate-line">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-replies"></span>\n<span class="button__text">'+s(l(n,"gettext").call(r,"Replies",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:27},end:{line:22,column:48}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li class="nav__spacing hidden-md"></li>\n<li class="nav__item">\n<a href="/home/settings/web/" class="nav-lnk -color-muted truncate-line">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-settings"></span>\n<span class="button__text">'+s(l(n,"gettext").call(r,"Settings",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:27},end:{line:34,column:49}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n<div class="layout__content">\n<div data-role="email-verification-alert"></div>\n<div class="nav-notifs sidebar-fixed notifs-fixed visible-sidebar">\n<div class="nav-notifs-body">\n<h2 class="nav-notifs-title">'+s(l(n,"gettext").call(r,"Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:47,column:29},end:{line:47,column:56}}}))+"</h2>\n"+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"isLoggedOut"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:48,column:0},end:{line:68,column:11}}}))?a:"")+'<div class="nav-notifs-refresh">\n<a class="nav-refresh" data-action="refresh-drawer" href="#">\n<svg class="icon-refresh" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="338.2 -95.3 790.6 790.6" enable-background="new 338.2 -95.3 790.6 790.6" xml:space="preserve"><path d="M976.8 454.2l152-172.8h-98.9c-4.7-74.4-35.9-143.6-88.7-195.9C885.7 30.3 812.4 0 734.8 0 C571.7 0 439.1 134.5 439.1 300s132.6 300 295.7 300c66.2 0 131-22.5 182.5-63.4l9.3-7.4l-63.9-69.6l-8 6.1 c-34.7 26.3-76.1 40.2-119.8 40.2c-111.8 0-202.6-92.4-202.6-206S623 94.2 734.8 94.2c52.5 0 102.3 20.6 140.3 57.8 c35.3 34.7 56.6 80.3 60.6 129.4H823.5L976.8 454.2z"/></svg>\n</a>\n</div>\n</div>\n<ul class="nav-tabs">\n<li class="active" data-action="switch-tab" data-tab="all">\n<a class="truncate-line" href="/home/inbox/">\n'+s(l(n,"gettext").call(r,"Most Recent",{name:"gettext",hash:{},data:o,loc:{start:{line:78,column:0},end:{line:78,column:25}}}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="replies">\n<a class="truncate-line" href="/home/inbox/replies/"><span class="icon-forward"></span>\n'+s(l(n,"gettext").call(r,"Replies",{name:"gettext",hash:{},data:o,loc:{start:{line:83,column:0},end:{line:83,column:21}}}))+'\n</a>\n</li>\n</ul>\n</div>\n<div class="sidebar-scrollable notifs-scrollable scrollable-measure-selector"\ndata-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-lg">\n<div data-role="recommend-module" data-recommend-type="user" data-jester-area="recommended-users" class="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="forum" data-jester-area="recommended-forums" class="module--aside"></div>\n<div class="text-smaller text-gray">\n'+(null!=(a=e.invokePartial(l(i,"homeFooter"),t,{name:"homeFooter",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/NotificationsView",["underscore","home/utils/sidebarUtils","home/views/common/TabbedView","home/views/common/FetchableCollectionLayout","home/views/NotificationCardCollectionView","home/views/MotdAlertView","home/views/RecommendationsModuleView","home/templates/notifications","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=n.extend({defaultTab:"all",template:s,events:e.defaults({"click a[data-link-name]":"trackClickLink"},n.prototype.events),regions:e.defaults({recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedForumsModuleRegion:"[data-role=recommend-module][data-recommend-type=forum]",motdAlertRegion:"[data-role=motd-alert]"},n.prototype.regions),onDomRefresh:function(){n.prototype.onDomRefresh.call(this),this.options.onboardingWithoutChannels||(this.recommendedUsersModuleRegion.show(r.createUserRecommendedModuleView({model:this.model.interestingUsers})),this.recommendedForumsModuleRegion.show(r.createForumRecommendedModuleView({model:this.model.interestingForums}))),this.options.disableMOTD||this.motdAlertRegion.show(new a)},getTrackingSection:function(e){return"replies"===e&&e},getMetaAttrs:function(){return"Notifications"},getTabView:function(e){var t=this.model[e];if(t)return new i({model:t,collection:t.get("items"),fetchableCollectionView:o,infiniteScroll:!0})}});return l.call(u.prototype),t.isSidebar()||c.call(u.prototype),u}),define("home/templates/notificationCardLogin",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-wrap card--notification">\n<div class="card__reason">\n<div class="notification__icon">\n<span class="icon icon-megaphone icon__position"></span>\n</div>\n'+r(s(n,"gettext").call(a,"%(disqus)s Announcement",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:6,column:0},end:{line:6,column:55}}}))+'\n</div>\n\n<div class="card__content -notification has-image">\n<a href="#" class="card-content__media" data-action="login">\n<div style="background-image: url('+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:11,column:34},end:{line:11,column:50}}}))+'/img/notifications_logged_out.png)" class="img-cards"></div>\n</a>\n\n<div class="card-content__body">\n<h2 class="discussion-title" dir="auto">\n<a href="#" data-action="login" class="link-gray-darker truncate">\n'+r(s(n,"gettext").call(a,"Get more with a %(disqus)s account!",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:17,column:0},end:{line:17,column:67}}}))+'\n</a>\n</h2>\n<div class="card-content__summary">\n'+r(s(n,"gettext").call(a,"Signing up means that you'll now be able to find old comments, discover new discussions, and get notified when someone replies to you.",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:0},end:{line:21,column:148}}}))+'\n</div>\n<div class="spacing-top spacing-bottom">\n<button data-action="login" class="button button-fill--brand text-medium">\n'+r(s(n,"gettext").call(a,"Log In or Sign Up",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:0},end:{line:25,column:31}}}))+"\n</button>\n</div>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/NotificationCardLoginView",["backbone-marionette","home/templates/notificationCardLogin","home/utils/navigationUtils"],function(e,t,n){"use strict";return e.ItemView.extend({className:"card-notif-invite card-notif-note",events:{"click [data-action=login]":"navigateToLogin"},template:t,navigateToLogin:function(e){e&&e.preventDefault(),n.navigateToLogin()}})}),define("home/views/NotificationsLoggedOutView",["underscore","home/views/NotificationsView","home/views/NotificationCardLoginView"],function(e,t,n){"use strict";return t.extend({templateHelpers:function(){var n=t.prototype.templateHelpers;return e.defaults({isLoggedOut:!0},e.isFunction(n)?n.call(this):n)},getTabView:function(){return new n}})}),define("home/templates/forumView",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section-expanded sidebar-fixed">\n<div class="cover cover-forum" data-role="cover-area"></div>\n</div>\n<div class="section-contained">\n<div class="layout">\n<div class="layout__main-with-aside">\n<div class="layout__nav hidden-sidebar">\n<ul class="nav--aside">\n<li data-action="switch-tab" data-tab="recent" class="nav__item">\n<a title="'+s(c(n,"gettext").call(r,"Latest Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:10},end:{line:10,column:42}}}))+'" class="truncate-line nav-lnk -color-muted"\nhref="/home/forum/'+s(l(null!=t?c(t,"id"):t,t))+'/">\n<div class="nav-lnk__blk">\n<span class="button__text">'+s(c(n,"gettext").call(r,"Latest Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:27},end:{line:13,column:59}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n\n</a>\n</li>\n<li data-action="switch-tab" data-tab="commenters" class="nav__item">\n<a title="'+s(c(n,"gettext").call(r,"Top Commenters",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:10},end:{line:22,column:38}}}))+'" class="truncate-line nav-lnk -color-muted"\nhref="/home/forum/'+s(l(null!=t?c(t,"id"):t,t))+'/commenters/">\n<div class="nav-lnk__blk">\n<span class="button__text">'+s(c(n,"gettext").call(r,"Top Commenters",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:27},end:{line:25,column:55}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n<div class="layout__content">\n<div class="sidebar-scrollable forum-scrollable scrollable-measure-selector"\ndata-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-md">\n<div data-role="sign-up-module"></div>\n<div data-role="recommend-module" data-recommend-type="forum" data-jester-area="recommended-forums" class="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="user" data-jester-area="recommended-users" class="module--aside"></div>\n<div class="text-smaller text-gray">\n'+(null!=(a=e.invokePartial(c(i,"homeFooter"),t,{name:"homeFooter",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/mixins/asForumProfileCard",["underscore","home/utils/layoutUtils","home/mixins/withTruncate","home/mixins/withThreadCardDefaultFooter"],function(e,t,n,i){"use strict";return function(){n.apply(this,arguments),i.apply(this,arguments),this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this.listenTo(this.model.thread||this.model,"change:content",this.render),this.numTitleLines=3}),this.serializeData=e.wrap(this.serializeData,function(n){var i=n.apply(this,e.rest(arguments)),o=this.model.thread||this.model;return e.defaults(i,{image:o.getImage(),canShowThreadImage:!t.isNarrowLayout(),thread:o.toJSON(),numTitleLines:this.numTitleLines})})}}),define("home/templates/forumProfileCardRecent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" no-image"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"image"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:13,column:7}}}))?a:""},4:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'">\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion'+(null!=(a=c(n,"unless").call(r,null!=t?c(t,"image"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:27},end:{line:1,column:64}}}))?a:"")+'">\n<div class="card-aside">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"canShowThreadImage"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:14,column:7}}}))?a:"")+'</div>\n<div class="card-body">\n<div class="card-reason">\n'+s(c(n,"gettext").call(r,"Recent activity",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:0},end:{line:18,column:29}}}))+" "+s(l(null!=t?c(t,"relativeTime"):t,t))+"\n</div>\n"+(null!=(a=e.invokePartial(c(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="2" dir="auto">\n'+(null!=(a=l(null!=t?c(t,"threadDescriptionHTML"):t,t))?a:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),
define("home/views/ForumProfileCardRecentView",["underscore","home/views/common/ActivityCardView","home/mixins/asForumProfileCard","home/templates/forumProfileCardRecent"],function(e,t,n,i){"use strict";var o=t,a=o.prototype,r=o.extend({className:"card card-profile card-profile-forum",template:i,serializeData:function(){var t=a.serializeData.apply(this,arguments),n=this.model.thread;return e.defaults(t,{relativeTime:this.model.getRelativeTimestamp(),target:this.model.activities[0].target.toJSON(),threadDescriptionHTML:n.getDefaultDescription()})}});return n.call(r.prototype),r}),define("home/views/ForumProfileCardCollectionView",["home/views/common/FetchableCollectionView","home/views/ForumProfileCardRecentView","home/mixins/withViewFeedTracking"],function(e,t,n){"use strict";var i=e.extend({className:"cards",itemView:t});return n.call(i.prototype),i}),define("home/templates/forumCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="cover-description">\n'+e.escapeExpression(e.lambda(null!=t?a(t,"plainDescription"):t,t))+"\n</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section-contained">\n<div class="cover-body">\n<div class="cover-body-left">\n<div class="cover-profile-content" dir="auto">\n<div class="cover-profile-name-wrapper">\n<a href="'+s(r(null!=t?c(t,"url"):t,t))+'" data-link-out="'+s(r(null!=t?c(t,"signedUrl"):t,t))+'"><img class="cover-favicon" src="'+s(r(null!=t?c(t,"faviconImage"):t,t))+'" alt="'+(null!=(a=e.invokePartial(c(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'"></a>\n<a href="'+s(r(null!=t?c(t,"url"):t,t))+'" data-link-out="'+s(r(null!=t?c(t,"signedUrl"):t,t))+'"><h1 class="cover-profile-name truncate-line">'+(null!=(a=e.invokePartial(c(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</h1></a>\n<div class="cover-profile-action">\n'+(null!=(a=e.invokePartial(c(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"+(null!=(a=c(n,"if").call(l,null!=t?c(t,"plainDescription"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:0},end:{line:16,column:7}}}))?a:"")+'<ul class="cover-attributes">\n<li class="cover-attribute">\n<a href="'+s(r(null!=t?c(t,"url"):t,t))+'" data-link-out="'+s(r(null!=t?c(t,"signedUrl"):t,t))+'">'+s(r(null!=t?c(t,"friendlyUrl"):t,t))+'</a>\n</li>\n</ul>\n<div class="cover-profile-action-mobile">\n'+(null!=(a=e.invokePartial(c(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n</div>\n</div>\n</div>\n</div>\n<div class="cover-nav-wrapper visible-sidebar">\n<div class="section-contained">\n<nav class="cover-nav cover-nav-profile-user">\n<ul class="cover-nav-options">\n<li class="cover-nav-option active" data-action="switch-tab" data-tab="recent">\n<a title="'+s(c(n,"gettext").call(l,"Latest Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:10},end:{line:34,column:42}}}))+'" class="truncate-line" href="/home/forum/'+s(r(null!=t?c(t,"id"):t,t))+'/">\n<span class="hidden-md">'+s(c(n,"gettext").call(l,"Latest Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:35,column:24},end:{line:35,column:56}}}))+'</span>\n<span class="visible-md">'+s(c(n,"gettext").call(l,"Latest",{name:"gettext",hash:{},data:o,loc:{start:{line:36,column:25},end:{line:36,column:45}}}))+'</span>\n</a>\n</li>\n<li class="cover-nav-option" data-action="switch-tab" data-tab="commenters">\n<a title="'+s(c(n,"gettext").call(l,"Top Commenters",{name:"gettext",hash:{},data:o,loc:{start:{line:40,column:10},end:{line:40,column:38}}}))+'" class="truncate-line" href="/home/forum/'+s(r(null!=t?c(t,"id"):t,t))+'/commenters/">\n<span class="hidden-md">'+s(c(n,"gettext").call(l,"Top Commenters",{name:"gettext",hash:{},data:o,loc:{start:{line:41,column:24},end:{line:41,column:52}}}))+'</span>\n<span class="visible-md">'+s(c(n,"gettext").call(l,"Commenters",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:25},end:{line:42,column:49}}}))+"</span>\n</a>\n</li>\n</ul>\n</nav>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ForumCoverView",["backbone-marionette","home/models/Session","home/templates/forumCover"],function(e,t,n){"use strict";return e.ItemView.extend({template:n,templateHelpers:function(){return{friendlyUrl:this.model.getFriendlyUrl(),plainDescription:this.model.getPlainDescription()}},events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:name":"render","change:isFollowing":"handleFollowedClass"},initialize:function(){this.session=t.get(),this.listenTo(this.session,"setModeratedForums",this.render)},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()}},{getModel:function(e){return e.forum||e}})}),define("home/templates/forumProfileRecentEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n\n<svg class="art-empty-community" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 94 128" enable-background="new 0 0 94 128" xml:space="preserve"><path class="house" d="M61 118.4l-9.8-10c-0.5-0.5-1.3-0.5-1.8 0l-9.8 10c-0.5 0.5-0.3 1 0.4 1h2v7.7c0 0.6 0 1 1 1h4.8v-7.7h5 v7.7h5c0.8 0 0.8-0.4 0.8-1v-7.7h2C61.3 119.3 61.5 118.9 61 118.4z" /><path class="bubble-top" d="M75.2 21C75.2 9.4 66.2 0 55 0C43.8 0 34.8 9.4 34.8 21c0 3.1 0.7 6.1 1.8 8.7l-3.4 8.5l8.7-1.2 c3.5 3.1 8.1 5 13.1 5C66.2 42 75.2 32.6 75.2 21z M56.4 26.6h-1.9V22h-5.1v4.5h-1.9V15.8h1.9v4.5h5.1v-4.5h1.9V26.6z M60.9 26.6 h-1.9v-8.1h1.9V26.6z M61 17.2h-2v-1.8h2V17.2z"/><path class="bubble-left" d="M79.3 47c-8 0-14.5 6.7-14.5 15c0 2.2 0.5 4.3 1.3 6.2l-2.4 6.1l6.2-0.9c2.5 2.2 5.8 3.6 9.3 3.6 c8 0 14.5-6.7 14.5-15S87.3 47 79.3 47z M80.5 66.6H79v-3.7h-4.2v3.7h-1.6v-8.9h1.6v3.7H79v-3.7h1.6V66.6z M84.3 66.6h-1.5v-6.7h1.5 V66.6z M84.3 58.9h-1.6v-1.5h1.6V58.9z" /><path class="bubble-right" d="M48.4 72c0-13.8-10.8-25-24.1-25C11 47 0.2 58.2 0.2 72S11 97 24.3 97c5.9 0 11.4-2.2 15.6-5.9l10.3 1.5 l-4-10.2C47.7 79.2 48.4 75.7 48.4 72z M26.4 78.6h-2.2v-5.3h-6v5.3H16V66h2.2v5.3h6V66h2.2V78.6z M31.7 78.6h-2.2v-9.5h2.2V78.6z M31.8 67.6h-2.3v-2.1h2.3V67.6z"/></svg>\n\n'+r(s(n,"gettext").call(a,"This community hasn't been busy recently.",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:55}}}))+'</br><a href="/">'+r(s(n,"gettext").call(a,"Head back home to find interesting discussions »",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:72},end:{line:6,column:134}}}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ForumProfileRecentEmptyView",["backbone-marionette","home/templates/forumProfileRecentEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/forumProfileTopCommentersEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n\n<svg class="art-empty-community" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 94 128" enable-background="new 0 0 94 128" xml:space="preserve"><path class="house" d="M61 118.4l-9.8-10c-0.5-0.5-1.3-0.5-1.8 0l-9.8 10c-0.5 0.5-0.3 1 0.4 1h2v7.7c0 0.6 0 1 1 1h4.8v-7.7h5 v7.7h5c0.8 0 0.8-0.4 0.8-1v-7.7h2C61.3 119.3 61.5 118.9 61 118.4z" /><path class="bubble-top" d="M75.2 21C75.2 9.4 66.2 0 55 0C43.8 0 34.8 9.4 34.8 21c0 3.1 0.7 6.1 1.8 8.7l-3.4 8.5l8.7-1.2 c3.5 3.1 8.1 5 13.1 5C66.2 42 75.2 32.6 75.2 21z M56.4 26.6h-1.9V22h-5.1v4.5h-1.9V15.8h1.9v4.5h5.1v-4.5h1.9V26.6z M60.9 26.6 h-1.9v-8.1h1.9V26.6z M61 17.2h-2v-1.8h2V17.2z"/><path class="bubble-left" d="M79.3 47c-8 0-14.5 6.7-14.5 15c0 2.2 0.5 4.3 1.3 6.2l-2.4 6.1l6.2-0.9c2.5 2.2 5.8 3.6 9.3 3.6 c8 0 14.5-6.7 14.5-15S87.3 47 79.3 47z M80.5 66.6H79v-3.7h-4.2v3.7h-1.6v-8.9h1.6v3.7H79v-3.7h1.6V66.6z M84.3 66.6h-1.5v-6.7h1.5 V66.6z M84.3 58.9h-1.6v-1.5h1.6V58.9z" /><path class="bubble-right" d="M48.4 72c0-13.8-10.8-25-24.1-25C11 47 0.2 58.2 0.2 72S11 97 24.3 97c5.9 0 11.4-2.2 15.6-5.9l10.3 1.5 l-4-10.2C47.7 79.2 48.4 75.7 48.4 72z M26.4 78.6h-2.2v-5.3h-6v5.3H16V66h2.2v5.3h6V66h2.2V78.6z M31.7 78.6h-2.2v-9.5h2.2V78.6z M31.8 67.6h-2.3v-2.1h2.3V67.6z"/></svg>\n\n'+r(s(n,"gettext").call(a,"Darn. No one comments in this community.",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:54}}}))+'</br><a href="/">'+r(s(n,"gettext").call(a,"Head back home to find interesting discussions »",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:71},end:{line:6,column:133}}}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ForumProfileTopCommentersEmptyView",["backbone-marionette","home/templates/forumProfileTopCommentersEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/mixins/withItemRemovalSkipped",[],function(){"use strict";return function(){var e=this.addItemView;this.addItemView=function(t){if(!this.children.findByModel(t))return e.apply(this,arguments)};var t=this.removeItemView;this.removeItemView=function(){if(this.isShowingNonItemView&&this.isShowingNonItemView())return t.apply(this,arguments)}}}),define("home/views/UserCollectionView",["home/mixins/withItemRemovalSkipped","home/views/UserCardView","home/views/common/FetchableCollectionView","home/mixins/withViewFeedTracking"],function(e,t,n,i){"use strict";var o=n.extend({itemView:t,className:"cards",emptyViewOptions:function(){return{model:this.options.user}}});return e.call(o.prototype),i.call(o.prototype),o}),define("core/views/common/LoginFormView",["underscore","backbone","core/strings"],function(e,t,n){"use strict";var i=n.get;return t.View.extend({initialize:function(){this.model=new this.User},parseRegistrationErrorResponse:function(e){if(e.responseJSON){var t=e.responseJSON.response;return window.grecaptcha&&window.grecaptcha.reset(),/Unable to create user/i.test(t)?{email:[i("That email address is already registered with a Disqus account. Log in or enter another email.")]}:/The e-mail address you specified is already in use./i.test(t)?{email:[i("The e-mail address you specified is already in use.")+'<br><a class="link" href="#" data-action="auth:disqus">'+i("Try logging in.")+"</a>"]}:(/You must re-submit this request with a response to the captcha challenge/i.test(t)&&this.showCaptcha&&this.showCaptcha(null,!0),{all:[t]})}},getPassword:function(){var e=this.$el.find("input[name=password]");return e.length?e.val():null},getDisplayName:function(){return this.$el.find("input[name=display_name]").val()},getEmail:function(){return this.$el.find("input[name=email]").val()},disableForm:function(){this.$("[data-role=submit-btn-container]").addClass("is-submitting")},enableForm:function(){this.$("[data-role=submit-btn-container]").removeClass("is-submitting")},handleRegistrationErrorResponse:function(e){this.handleRegistrationError(this.parseRegistrationErrorResponse(e))},registerUser:function(){if(this.model.set({display_name:this.$el.find("input[name=display_name]").val(),email:this.$el.find("input[name=email]").val(),password:this.getPassword()}),!this.model.isValid())return void this.handleRegistrationError(this.model.validationError);this.disableForm(),this.model.register({gRecaptchaResponse:this.captchaShown&&window.grecaptcha&&window.grecaptcha.getResponse(),error:e.bind(this.handleRegistrationErrorResponse,this),success:e.bind(this.handleRegistrationSuccess,this)}).always(e.bind(this.enableForm,this))}})}),define("home/views/common/LoginFormView",["jquery","underscore","core/bus","core/utils","core/views/common/LoginFormView","home/models/Session","home/models/User"],function(e,t,n,i,o,a,r){"use strict";var s=i.preventDefaultHandler;return o.extend({events:{"click [data-action~=change-step]":"changeStep","click [data-action~=auth]":"handleAuth","submit [data-role=disqus-signup]":"attemptSignup"},User:r,initialize:function(e){o.prototype.initialize.call(this,e),this.listenTo(n.frame,"!auth:success",this.handleRegistrationSuccess),this.session=a.get()},close:function(){this.stopListening(n.frame,"!auth:success"),this.remove()},handleAuth:s(function(t){this.session.authenticate(e(t.target).attr("data-network"))}),attemptSignup:s(function(){this.clearRegistrationErrors(),this.registerUser()}),clearRegistrationErrors:function(){this.$(".form-attribute-input.is-error").removeClass("is-error")},handleRegistrationError:function(e){this.enableForm(),t.each(e,function(e,t){this.$(".form-attribute-input[data-attribute*="+t+"]").addClass("is-error").find("[data-role=attribute-error]").text(e[0])},this)},handleRegistrationSuccess:function(){window.location.reload()},changeStep:function(t){var n=e(t.target).attr("data-target");this.$("[data-step]").addClass("is-hidden").filter("[data-step="+n+"]").removeClass("is-hidden").find("input").first().focus()},render:function(){var e=this.templateHelpers;return t.isFunction(e)&&(e=e.call(this)),this.$el.html(this.template(t.extend({},this.model&&this.model.toJSON(),e))),this}})}),define("home/templates/loginOverlay",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"prompt"):t,t))+"\n"},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Sign up to join great discussions or start your own.",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:66}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="login-overlay__content text-center text-light" id="explore-overlay">\n<h2 class="text-large text-bold">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"prompt"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:3,column:0},end:{line:7,column:7}}}))?a:"")+'</h2>\n<section data-step="networks" class="spacing-bottom login-overlay__container">\n<div class="spacing-top spacing-bottom-narrow align">\n<button class="button button-fill -dark-hover -facebook text-medium align__item--grow spacing-right" data-action="auth" data-network="facebook">Facebook</button>\n<button class="button button-fill -dark-hover -twitter text-medium align__item--grow spacing-right" data-action="auth" data-network="twitter">Twitter</button>\n<button class="button button-fill -dark-hover -email text-medium align__item--grow" data-action="change-step show-login-overlay" data-target="disqus-signup">'+s(l(n,"gettext").call(r,"Email",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:157},end:{line:13,column:176}}}))+'</button>\n</div>\n<div>\n<button data-action="auth" data-network="disqus" class="button button-inline text-medium">'+s(l(n,"gettext").call(r,"Have an account? Log in.",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:90},end:{line:16,column:128}}}))+'</button>\n</div>\n</section>\n\n<section data-step="disqus-signup" class="is-hidden spacing-top-double login-overlay__container">\n<form data-role="disqus-signup">\n<div class="spacing-top spacing-bottom form-attribute-input" data-attribute="display_name">\n<input type="text" class="input--textbox -padded" placeholder="'+s(l(n,"gettext").call(r,"Name",{name:"gettext",hash:{},data:o,loc:{start:{line:23,column:63},end:{line:23,column:81}}}))+'" name="display_name">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="email">\n<input type="text" class="input--textbox -padded" placeholder="'+s(l(n,"gettext").call(r,"Email",{name:"gettext",hash:{},data:o,loc:{start:{line:27,column:63},end:{line:27,column:82}}}))+'" name="email">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="password">\n<input type="password" class="input--textbox -padded" placeholder="'+s(l(n,"gettext").call(r,"Password",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:67},end:{line:31,column:89}}}))+'" name="password">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<p class="spacing-bottom text-small">\n'+s(l(n,"gettext").call(r,"By signing up you agree to the %(disqus)s %(rules)s, %(tos)s, and %(privacyPolicy)s.",{name:"gettext",hash:{privacyPolicy:l(n,"tag").call(r,"a",{name:"tag",hash:{class:"text-semibold link-inverted",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/466259-privacy-policy",text:l(n,"gettext").call(r,"Privacy Policy",{name:"gettext",hash:{},data:o,loc:{start:{line:39,column:30},end:{line:39,column:56}}})},data:o,loc:{start:{line:39,column:16},end:{line:39,column:187}}}),tos:l(n,"tag").call(r,"a",{name:"tag",hash:{class:"text-semibold link-inverted",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/466260-terms-of-service",text:l(n,"gettext").call(r,"Terms of Service",{name:"gettext",hash:{},data:o,loc:{start:{line:38,column:20},end:{line:38,column:48}}})},data:o,loc:{start:{line:38,column:6},end:{line:38,column:181}}}),rules:l(n,"tag").call(r,"a",{name:"tag",hash:{class:"text-semibold link-inverted",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions",text:l(n,"gettext").call(r,"Basic Rules",{name:"gettext",hash:{},data:o,loc:{start:{line:37,column:22},end:{line:37,column:45}}})},data:o,loc:{start:{line:37,column:8},end:{line:37,column:218}}}),disqus:"Disqus"},data:o,loc:{start:{line:35,column:0},end:{line:40,column:2}}}))+'\n</p>\n<div class="form-submit spacing-bottom" data-role="submit-btn-container">\n<button class="button button-fill -dark-gray button-wide button-large text-bold">'+s(l(n,"gettext").call(r,"Sign up",{name:"gettext",hash:{},data:o,loc:{start:{line:43,column:81},end:{line:43,column:102}}}))+'</button>\n<div class="spinner-small spinner--centered"></div>\n</div>\n</form>\n<div>\n<button data-action="auth" data-network="disqus" class="link-inverted text-medium">'+s(l(n,"gettext").call(r,"Have an account? Log in.",{name:"gettext",hash:{},data:o,loc:{start:{line:48,column:83},end:{line:48,column:121}}}))+'</button>\n</div>\n</section>\n</div>\n<div class="login-overlay__transparency"></div>'},useData:!0})}),define("home/views/LoginOverlayView",["underscore","home/views/common/LoginFormView","home/templates/loginOverlay"],function(e,t,n){"use strict";return t.extend({events:e.defaults({"click [data-action~=show-login-overlay]":"showAsOverlay"},t.prototype.events),template:n,templateHelpers:function(){return{prompt:this.prompt}},className:"login-overlay__wrapper hidden-sidebar",initialize:function(e){t.prototype.initialize.call(this,e),this.prompt=e&&e.prompt},showAsOverlay:function(){this.$el.removeClass("is-footer").addClass("is-overlay"),this.trigger("shown:overlay")},showAsFooter:function(e){this.$el.removeClass("is-overlay").toggleClass("is-footer",!!e)}})}),define("home/templates/signUpAsideModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__wrap -brand text-center" data-role="login-prompt-module">\n<h2 class="text-large text-bold">'+r(s(n,"gettext").call(a,"There's more to talk about...",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:33},end:{line:2,column:76}}}))+"</h2>\n<p>"+r(s(n,"gettext").call(a,"Great discussions are happening here on %(disqus)s. You'll never be bored.",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:3,column:3},end:{line:3,column:109}}}))+'</p>\n<p>\n<button class="button button-outline -border-light text-medium button-wide" data-action="show-login-overlay">\n'+r(s(n,"gettext").call(a,"Join %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:6,column:0},end:{line:6,column:47}}}))+"\n</button>\n</p>\n</div>\n"},useData:!0})}),define("home/mixins/withLoginOverlay",["jquery","underscore","backbone-marionette","home/models/Session","home/views/LoginOverlayView","home/templates/signUpAsideModule","home/utils/layoutUtils"],function(e,t,n,i,o,a,r){"use strict";var s={regions:{loginModuleRegion:"[data-role=sign-up-module]"},events:{"click [data-action~=show-login-overlay]":"showLoginOverlay"},initialize:function(n,i){n.call(this,i),this.boundEnsureLoginPromptInViewport=t.bind(this.ensureLoginPromptInViewport,this),e(window).scroll(this.boundEnsureLoginPromptInViewport)},onClose:function(){this.unbindScrollHandler(),this.loginOverlayView&&this.loginOverlayView.close()},onRender:function(e){t.isFunction(e)&&e.call(this);var i=function(){return new n.ItemView({template:a})};this.activateRegion?this.activateRegion(this.loginModuleRegion,i):this.loginModuleRegion.show(i())},ensureLoginPromptInViewport:t.debounce(function(){var e=this.$("[data-role=login-prompt-module]");this.showLoginFooter(!e.length||!r.isElementInViewport(e))},200),unbindScrollHandler:function(){e(window).off("scroll",this.boundEnsureLoginPromptInViewport)},showLoginOverlay:function(){this.loginOverlayView.showAsOverlay()},showLoginFooter:function(e){this.loginOverlayView.showAsFooter(e)},onDomRefresh:function(e,n){t.isFunction(n)&&n.call(this),this.loginOverlayView||(this.loginOverlayView=new o(e),this.listenTo(this.loginOverlayView,"shown:overlay",this.unbindScrollHandler),this.$el.after(this.loginOverlayView.render().$el))}};return function(e){i.isKnownToBeLoggedOut()&&(this.regions=t.extend({},s.regions,this.regions),this.events=t.extend({},s.events,this.events),this.initialize=t.wrap(this.initialize,s.initialize),this.onRender=t.wrap(this.onRender,s.onRender),this.onDomRefresh=t.wrap(this.onDomRefresh,t.partial(s.onDomRefresh,{prompt:e})),t.extend(this,t.pick(s,["showLoginFooter","showLoginOverlay","ensureLoginPromptInViewport","unbindScrollHandler"])))}}),define("home/views/ForumProfileView",["underscore","core/strings","home/templates/forumView","home/views/common/FetchableCollectionLayout","home/views/common/TabbedView","home/models/Session","home/utils/backboneUtils","home/views/RecommendationsModuleView","home/views/ForumProfileCardCollectionView","home/views/ForumCoverView","home/views/ForumProfileRecentEmptyView","home/views/ForumProfileTopCommentersEmptyView","home/views/UserCollectionView","home/mixins/withClickLinkTracking","home/mixins/withLoginOverlay"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p){"use strict";var f=t.get,g=o.extend({defaultTab:"recent",template:n,regions:e.defaults({coverRegion:"[data-role=cover-area]",recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedForumsModuleRegion:"[data-role=recommend-module][data-recommend-type=forum]"},o.prototype.regions),events:e.defaults({"click a[data-link-name]":"trackClickLink"},o.prototype.events),initialize:function(e){o.prototype.initialize.apply(this,arguments);var t=a.get();t.loadPromise().then(function(){t.userProfile.forumsFollowing.ensureFetched()}),this.onboardingWithoutChannels=e.onboardingWithoutChannels},getTabView:function(e){var t;switch(e){case"recent":return t=new i({model:this.model.recent,collection:this.model.recent.get("items"),fetchableCollectionView:l,emptyView:u,infiniteScroll:!0});case"commenters":return t=new i({user:this.model.user,model:this.model.mostLikedUsers,collection:this.model.mostLikedUsers.get("items"),fetchableCollectionView:h,emptyView:d,infiniteScroll:!0}),t.$el.attr({class:"card-wrap"}),t}},getTrackingSection:function(e){switch(e){case"recent":return"recent_threads";case"commenters":return"top_commenters"}},renderCover:function(){var t=new c({model:this.model.forum});t.listenTo(t,"dom:refresh",e.bind(this.updateTabClasses,this)),this.coverRegion.show(t)},onDomRefresh:function(){return this.$(this.coverRegion.el).length&&this.renderCover(),this.onboardingWithoutChannels||(this.recommendedUsersModuleRegion.show(s.createUserRecommendedModuleView({model:this.model.interestingUsers})),this.recommendedForumsModuleRegion.show(s.createForumRecommendedModuleView({model:this.model.interestingForums}))),o.prototype.onDomRefresh.apply(this,arguments)},getPageTitle:function(){return r.getPromiseFor(this.model.forum,"name").then(function(e){return t.interpolate(f("%(forum)s · Conversations"),{forum:e})})},getMetaAttrs:function(){var e=this.model.forum;return this.getPageTitle().then(function(t){return{title:t,description:e.get("description"),image:e.has("favicon")&&e.get("favicon").cache,type:"article"}})},getPageTrackingParams:function(){var e=this.model.forum;return this.getPageTitle().then(function(t){return{forum:e.id,title:t}})},refreshRecommendedFeed:function(){this.model.popular.fetchItems({reset:!0})}});return m.call(g.prototype),p.call(g.prototype),g}),define("home/templates/profileCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="hidden-sidebar cover-profile-reputation">\n<span class="badge -reputation">'+e.escapeExpression(e.lambda(null!=t?a(t,"userReputationLabel"):t,t))+"</span>\n</div>\n"},3:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+s(r(null!=(a=null!=t?l(t,"avatar"):t)?l(a,"cache"):a,t))+'" alt="'+s(r(null!=t?l(t,"username"):t,t))+'" />\n'},5:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+e.escapeExpression(e.lambda(null!=t?a(t,"CDN_ROOT"):t,t))+'/img/avatar-default.png" />\n'},7:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cover-profile-action">\n'+(null!=(a=e.invokePartial(s(i,"userFollowButton"),t,{name:"userFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"isSessionUser"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:0},end:{line:30,column:7}}}))?a:"")+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"isSessionUser"):t,{name:"unless",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:0},end:{line:33,column:11}}}))?a:"")+"</div>\n"},8:function(e,t,n,i,o){return'<a href="/home/settings/profile/" class="button button-fill button-small cover-profile-action-edit">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Edit Profile",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:0},end:{line:28,column:26}}}))+"\n</a>\n"},10:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"profileCoverDropdown"),t,{name:"profileCoverDropdown",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},12:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cover-profile-action-mobile">'+(null!=(a=e.invokePartial(r(i,"userFollowButton"),t,{name:"userFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSessionUser"):t,{name:"unless",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:45,column:0},end:{line:47,column:11}}}))?a:"")+"</div>\n"},14:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cover-nav-wrapper">\n<div class="section-contained">\n<nav class="cover-nav cover-nav-profile-user">\n<ul class="cover-nav-options">\n<li class="cover-nav-option" data-action="switch-tab" data-tab="comments">\n<a title="'+s(c(n,"gettext").call(r,"Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:60,column:10},end:{line:60,column:32}}}))+'" class="truncate-line" href="/by/'+s(l(null!=t?c(t,"username"):t,t))+'/comments/">\n'+s(c(n,"gettext").call(r,"Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:61,column:0},end:{line:61,column:22}}}))+"\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"showNumPosts"):t,{name:"if",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o,loc:{start:{line:62,column:0},end:{line:64,column:7}}}))?a:"")+'</a>\n</li>\n<li class="cover-nav-option hidden-sidebar" data-action="switch-tab" data-tab="discussions">\n<a title="'+s(c(n,"gettext").call(r,"Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:68,column:10},end:{line:68,column:35}}}))+'" class="truncate-line" href="/by/'+s(l(null!=t?c(t,"username"):t,t))+'/discussions/">\n'+s(c(n,"gettext").call(r,"Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:69,column:0},end:{line:69,column:25}}}))+'\n</a>\n</li>\n<li class="cover-nav-option" data-action="switch-tab" data-tab="favorites">\n<a title="'+s(c(n,"gettext").call(r,"Recommends",{name:"gettext",hash:{},data:o,loc:{start:{line:73,column:10},end:{line:73,column:34}}}))+'" class="truncate-line" href="/by/'+s(l(null!=t?c(t,"username"):t,t))+'/favorites/">\n'+s(c(n,"gettext").call(r,"Recommends",{name:"gettext",hash:{},data:o,loc:{start:{line:74,column:0},end:{line:74,column:24}}}))+'\n</a>\n</li>\n<li class="cover-nav-option hidden-md" data-action="switch-tab" data-tab="followers">\n<a title="'+s(c(n,"gettext").call(r,"Followers",{name:"gettext",hash:{},data:o,loc:{start:{line:78,column:10},end:{line:78,column:33}}}))+'" class="truncate-line" href="/by/'+s(l(null!=t?c(t,"username"):t,t))+'/followers/">\n'+s(c(n,"gettext").call(r,"Followers",{name:"gettext",hash:{},data:o,loc:{start:{line:79,column:0},end:{line:79,column:23}}}))+"\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"showNumFollowers"):t,{name:"if",hash:{},fn:e.program(17,o,0),inverse:e.noop,data:o,loc:{start:{line:80,column:0},end:{line:82,column:7}}}))?a:"")+'</a>\n</li>\n<li class="cover-nav-option visible-sidebar-md" data-action="switch-tab" data-tab="following">\n<a title="'+s(c(n,"gettext").call(r,"Following",{name:"gettext",hash:{},data:o,loc:{
start:{line:86,column:10},end:{line:86,column:33}}}))+'" class="truncate-line" href="/by/'+s(l(null!=t?c(t,"username"):t,t))+'/following/">\n'+s(c(n,"gettext").call(r,"Following",{name:"gettext",hash:{},data:o,loc:{start:{line:87,column:0},end:{line:87,column:23}}}))+"\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"showNumTotalFollowing"):t,{name:"if",hash:{},fn:e.program(19,o,0),inverse:e.noop,data:o,loc:{start:{line:88,column:0},end:{line:90,column:7}}}))?a:"")+"</a>\n</li>\n</ul>\n</nav>\n</div>\n</div>\n"},15:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="cover-nav-option-count">'+e.escapeExpression(e.lambda(null!=t?a(t,"numPosts"):t,t))+"</span>\n"},17:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="cover-nav-option-count hidden-md" data-role="num-followers">'+e.escapeExpression(e.lambda(null!=t?a(t,"numFollowers"):t,t))+"</span>\n"},19:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="cover-nav-option-count hidden-md" data-role="num-following">'+e.escapeExpression(e.lambda(null!=t?a(t,"numTotalFollowing"):t,t))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section-contained">\n<div class="cover-body">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"isGlobalAdmin"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:7,column:7}}}))?a:"")+'\n<div class="cover-body-left">\n<div class="cover-profile-avatar-wrapper">\n<a href="/by/'+l(s(null!=t?c(t,"username"):t,t))+'/" class="cover-profile-avatar">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"avatar"):t)?c(a,"cache"):a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:13,column:0},end:{line:17,column:7}}}))?a:"")+'</a>\n</div>\n<div class="cover-profile-content" dir="auto">\n<div class="cover-profile-name-wrapper">\n<h1 class="cover-profile-name text-largest truncate-line">'+l(s(null!=t?c(t,"name"):t,t))+"</h1>\n"+(null!=(a=c(n,"unless").call(r,null!=t?c(t,"isBlocked"):t,{name:"unless",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:0},end:{line:35,column:11}}}))?a:"")+'</div>\n<div class="cover-attribute-details">\n'+(null!=(a=e.invokePartial(c(i,"profileCoverAttributes"),t,{name:"profileCoverAttributes",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n\n"+(null!=(a=c(n,"unless").call(r,null!=t?c(t,"isBlocked"):t,{name:"unless",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:42,column:0},end:{line:49,column:11}}}))?a:"")+"</div>\n</div>\n</div>\n</div>\n"+(null!=(a=c(n,"unless").call(r,null!=t?c(t,"isBlocked"):t,{name:"unless",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:54,column:0},end:{line:97,column:11}}}))?a:"")},usePartial:!0,useData:!0})}),define("home/templates/spinnerTall",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="spinner-wrapper tall">\n<div class="spinner tall"></div>\n</div>\n'},useData:!0})}),define("home/templates/reportUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">'+r(s(n,"gettext").call(a,"Report %(user)s?",{name:"gettext",hash:{user:null!=t?s(t,"user"):t},data:o,loc:{start:{line:2,column:24},end:{line:2,column:66}}}))+'</h4>\n</div>\n<div class="modal-body">\n<h2 class="text-gray">'+r(s(n,"gettext").call(a,"Choose why you're reporting this user",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:22},end:{line:5,column:73}}}))+'</h2>\n<form class="fieldset" role="group">\n<div class="fieldset__block align__item">\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="6" checked>\n<strong>'+r(s(n,"gettext").call(a,"I disagree with this user",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:8},end:{line:10,column:47}}}))+'</strong>\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="0">\n<strong>'+r(s(n,"gettext").call(a,"Harassment",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:8},end:{line:14,column:32}}}))+"</strong> &mdash; "+r(s(n,"gettext").call(a,"posted or encouraged others to post harassing comments or hate speech targeting me, other individuals, or groups",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:50},end:{line:14,column:176}}}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="1">\n<strong>'+r(s(n,"gettext").call(a,"Spam",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:8},end:{line:18,column:26}}}))+"</strong> &mdash; "+r(s(n,"gettext").call(a,"posted spam comments or discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:44},end:{line:18,column:93}}}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="2">\n<strong>'+r(s(n,"gettext").call(a,"Inappropriate profile",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:8},end:{line:22,column:43}}}))+"</strong> &mdash; "+r(s(n,"gettext").call(a,"profile contains inappropriate images or text",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:61},end:{line:22,column:120}}}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="3">\n<strong>'+r(s(n,"gettext").call(a,"Threatening content",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:8},end:{line:26,column:41}}}))+"</strong> &mdash; "+r(s(n,"gettext").call(a,"posted directly threatening content",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:59},end:{line:26,column:108}}}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="4">\n<strong>'+r(s(n,"gettext").call(a,"Impersonation",{name:"gettext",hash:{},data:o,loc:{start:{line:30,column:8},end:{line:30,column:35}}}))+"</strong> &mdash; "+r(s(n,"gettext").call(a,"misrepresents themselves as yourself",{name:"gettext",hash:{},data:o,loc:{start:{line:30,column:53},end:{line:30,column:103}}}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="5">\n<strong>'+r(s(n,"gettext").call(a,"Private information",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:8},end:{line:34,column:41}}}))+"</strong> &mdash; "+r(s(n,"gettext").call(a,"posted your personally identifiable information",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:59},end:{line:34,column:120}}}))+'\n</label>\n</div>\n</form>\n<p class="form-description text-gray text-small spacing-top">\n'+r(s(n,"gettext").call(a,"Before reporting, review the %(basicRules)s that apply to all %(disqus)s users. Keep in mind that %(disqus)s does not moderate communities. If you see something, report it first to the moderators or block the user.",{name:"gettext",hash:{basicRules:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"Basic Rules",{name:"gettext",hash:{},data:o,loc:{start:{line:41,column:127},end:{line:41,column:150}}}),target:"_blank",href:"//help.disqus.com/customer/en/portal/articles/1753105-basic-rules-for-disqus"},data:o,loc:{start:{line:41,column:13},end:{line:41,column:151}}}),disqus:"Disqus"},data:o,loc:{start:{line:39,column:0},end:{line:42,column:2}}}))+"\n</p>\n</div>\n"},useData:!0})}),define("home/templates/completeReportUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">'+r(s(n,"gettext").call(a,"Report sent",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:24},end:{line:2,column:49}}}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+r(s(n,"gettext").call(a,"Thank you for reporting this user. This helps moderators remove inappropriate comments and profiles. Disqus will take action against their account if they have violated our policies.",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:3},end:{line:5,column:199}}}))+"</p>\n</div>\n"},useData:!0})}),define("home/views/ProfileCoverView",["jquery","backbone-marionette","home/utils/confirmModal","home/mixins/withAllstarPopover","home/mixins/withTruncate","home/models/Session","home/templates/profileCover","home/templates/spinnerTall","home/templates/reportUser","home/templates/completeReportUser"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=t.ItemView.extend({template:function(e){return e.name?r(e):s(e)},templateHelpers:function(){var e=a.get().user,t={sessionUserName:e.get("username"),isSessionUser:this.model.isSessionUser(),isGlobalAdmin:e.isGlobalAdmin(),numTotalFollowing:this.model.getNumTotalFollowing(),showNumPosts:this.model.has("numPosts"),showNumFollowers:this.model.has("numFollowers"),userReputationLabel:this.model.getUserReputationLabel(),numLines:3,showNumTotalFollowing:this.model.has("numFollowing")&&this.model.has("numForumsFollowing")};return this.model.get("isBlocked")&&(t.avatar=this.model.defaults.avatar),t},events:{"click [data-action=toggle-follow]":"toggleFollow","click [data-action=block-user]":"blockUser","click [data-action=prompt-report-user]":"promptReportUser"},modelEvents:{"change:name":"render","change:isBlocked":"render","change:isFlagged":"render","change:isFollowing":"handleFollowedClass","change:numFollowers":"updateNumFollowers","change:numFollowing":"updateNumFollowing","change:numForumsFollowing":"updateNumFollowing","change:numChannelsFollowing":"updateNumFollowing"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},updateNumFollowers:function(){this.$("[data-role=num-followers]").text(this.model.get("numFollowers"))},updateNumFollowing:function(){this.$("[data-role=num-following]").text(this.model.getNumTotalFollowing())},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()},promptReportUser:function(e){e&&e.preventDefault(),n.confirmationPromise(n.TYPES.CONFIRM_CANCEL,l({user:this.model.get("username")})).then(function(e,t){e&&this.reportUser(t.find("input[name=reason]:checked").val())}.bind(this))},reportUser:function(e){this.model.report(e).success(n.confirmationPromise.bind(this,n.TYPES.CLOSE,c())).fail(this.model.trigger.bind(this.model,"reportError"))},blockUser:function(e){e&&e.preventDefault();var t=this.model;t.block().fail(t.trigger.bind(t,"blockError"))},onDomRefresh:function(){e(".tooltipped").tooltip()}});return o.call(u.prototype),i.call(u.prototype),u}),define("home/mixins/asProfileCard",["underscore","home/models/Session","home/utils/layoutUtils","home/mixins/withAllstarPopover","home/mixins/withTruncate"],function(e,t,n,i,o){"use strict";return function(){o.apply(this,arguments),i.call(this),this.initialize=e.wrap(this.initialize,function(n){n.apply(this,e.rest(arguments)),this.session=t.get(),this.model.thread.isAuthorSessionUser(this.session),this.listenTo(this.model.thread,"change:content change:isAuthor",this.render),this.listenTo(this.session,"change:id",this.render),this.numTitleLines=3}),this.serializeData=e.wrap(this.serializeData,function(t){var i=t.apply(this,e.rest(arguments)),o=this.model.thread;return e.defaults(i,{discussionRoute:o&&o.getDiscussionRoute(),canShowThreadImage:!n.isNarrowLayout(),image:o&&o.getImage(),numTitleLines:this.numTitleLines,relativeTime:this.model.getRelativeTimestamp(),firstActor:this.model.actors[0]&&this.model.actors[0].toJSON(),isSpam:o.get("isSpam"),isAuthor:o.get("isAuthor")})})}}),define("home/templates/profileCardPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="icon-forward"></span>\n'+(null!=(a=e.invokePartial(r(i,"userName"),null!=t?r(t,"replyAuthor"):t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-bottom-small">\n<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?r(t,"hiddenExplanation"):t,t))+"</span>\n"+(null!=(a=e.invokePartial(r(i,"spamActions"),t,{name:"spamActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},5:function(e,t,n,i,o){return"hidden"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=e.invokePartial(c(i,"userAvatar"),null!=t?c(t,"author"):t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="comment-body">\n<header class="comment-header">\n<div class="align-min-tablet">\n<div class="spacing-right">\n'+(null!=(a=e.invokePartial(c(i,"userName"),null!=t?c(t,"author"):t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=c(n,"if").call(r,null!=t?c(t,"replyAuthor"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:0},end:{line:10,column:7}}}))?a:"")+'<a class="link-gray time"\nhref="'+l(s(null!=t?c(t,"discussionRoute"):t,t))+"#comment-"+l(s(null!=t?c(t,"id"):t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"id"):a,t))+'">\n'+l(s(null!=t?c(t,"relativeTime"):t,t))+"\n</a>\n</div>\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:0},end:{line:23,column:7}}}))?a:"")+'</div>\n</header>\n<div data-role="post-content"></div>\n<footer class="comment-actions '+(null!=(a=c(n,"if").call(r,null!=t?c(t,"isHidden"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:31},end:{line:27,column:60}}}))?a:"")+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ProfilePostView",["underscore","handlebars","home/views/PostView","home/templates/profileCardPost"],function(e,t,n,i){"use strict";return n.extend({template:i,events:{"click [data-action=request-spam-review]":"requestSpamReview"},ui:{spamActions:"[data-role=spam-actions]"},initialize:function(e){e=e||{},e.shouldCollapse=!1,n.prototype.initialize.apply(this,arguments),this.replyAuthor=e.replyAuthor,this.bindToAuthor()},bindToAuthor:function(){if(!this.model.author)return void this.listenToOnce(this.model,"changeRelated:author",this.bindToAuthor);this.listenTo(this.model.author,"change:flaggedForSpamReview",this.renderSpamAlert)},renderSpamAlert:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),this.ui.spamActions.html(t.partials.spamActions(e))},templateHelpers:function(){var t=n.prototype.templateHelpers.apply(this,arguments);return t=e.defaults({isAuthor:this.model.author.isSessionUser(),authorPendingSpamReview:this.model.author.get("flaggedForSpamReview"),replyAuthor:this.replyAuthor&&this.replyAuthor.toJSON()},t)},requestSpamReview:function(){this.model.author.requestSpamReview()}})}),define("home/views/ProfilePostCollectionView",["backbone-marionette","home/views/ProfilePostView"],function(e,t){"use strict";return e.CollectionView.extend({getItemView:function(){return t},itemViewOptions:function(e){var t=e.object,n={model:t};return"reply"===e.get("verb")&&(n.replyAuthor=e.target.author),n}})}),define("home/templates/profileCardComments",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion no-image">\n<div class="card-body">\n'+(null!=(a=e.invokePartial(r(i,"profileCardReason"),t,{name:"profileCardReason",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(r(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-comment" data-role="post"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ProfileCardCommentsView",["backbone","home/views/common/ActivityCardView","home/mixins/asProfileCard","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/views/ProfilePostCollectionView","home/templates/profileCardComments"],function(e,t,n,i,o,a,r){"use strict";var s=t,l=s.extend({className:"card card-profile card-profile-post",template:r,regions:{postsRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostCollectionView)},createPostCollectionView:function(){return new a({el:this.postsRegion.el,collection:new e.Collection(this.model.activities)})}}),c=l.prototype;return i.call(c),n.call(c),o.call(c),l}),define("home/templates/profileCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" no-image"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"image"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:13,column:7}}}))?a:""},4:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'">\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"image"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:27},end:{line:1,column:64}}}))?a:"")+'">\n<div class="card-aside">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"canShowThreadImage"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:14,column:7}}}))?a:"")+'</div>\n<div class="card-body">\n'+(null!=(a=e.invokePartial(l(i,"profileCardReason"),t,{name:"profileCardReason",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(l(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-profile-activity">\n'+(null!=(a=e.invokePartial(l(i,"userAvatar"),null!=t?l(t,"firstActor"):t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+s(l(n,"gettext").call(r,"%(userName)s recommended",{name:"gettext",hash:{userName:l(n,"getPartial").call(r,"userName",null!=t?l(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:21,column:48},end:{line:21,column:82}}})},data:o,loc:{start:{line:21,column:0},end:{line:21,column:84}}}))+' <span class="bullet">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+"</span>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCardFavoriteView",["home/views/common/ActivityCardView","home/mixins/asProfileCard","home/templates/profileCardFavorite"],function(e,t,n){"use strict";var i=e,o=i.extend({className:"card card-profile card-profile-favorite",template:n});return t.call(o.prototype),o}),define("home/templates/profileCardCreateDiscussion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-discussion no-image">\n<div class="card-body">\n'+(null!=(a=e.invokePartial(l(i,"profileCardReason"),t,{name:"profileCardReason",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(l(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div class="card-profile-activity">\n'+(null!=(a=e.invokePartial(l(i,"userAvatar"),null!=t?l(t,"firstActor"):t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+s(l(n,"gettext").call(r,"%(userName)s started a discussion",{name:"gettext",hash:{userName:l(n,"getPartial").call(r,"userName",null!=t?l(t,"firstActor"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:7,column:57},end:{line:7,column:91}}})},data:o,loc:{start:{line:7,column:0},end:{line:7,column:93}}}))+' <span class="bullet">'+s(e.lambda(null!=t?l(t,"relativeTime"):t,t))+"</span>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCardCreateDiscussionView",["home/views/common/ActivityCardView","home/mixins/asProfileCard","home/templates/profileCardCreateDiscussion"],function(e,t,n){"use strict";var i=e,o=i.extend({className:"card card-profile card-profile-discussion",template:n});return t.call(o.prototype),o}),define("home/views/ProfileCardCollectionView",["backbone","core/bus","home/views/common/FetchableCollectionView","home/views/ProfileCardCommentsView","home/views/ProfileCardFavoriteView","home/views/ProfileCardCreateDiscussionView","home/mixins/withViewFeedTracking"],function(e,t,n,i,o,a,r){"use strict";var s=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenToOnce(this,"showFirstItem",function(){t.trigger("showFirstCard","profile")})},itemView:function(t){switch(t.model.get("verb")){case"reply":case"post":return new i(t);case"favorite":return new o(t);case"create":return new a(t);default:return new e.View}},emptyViewOptions:function(){return{model:this.options.user}}});return r.call(s.prototype),s}),define("home/templates/profileCommentsEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message card-wrap">\n\n<img class="empty-message__img" src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:4,column:37},end:{line:4,column:53}}}))+'/img/empty-states/comments.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+r(s(n,"gettext").call(a,"%(name)s hasn't commented yet",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:7,column:24},end:{line:7,column:79}}}))+'</h2>\n<p class="text-gray text-medium">'+r(s(n,"gettext").call(a,"Comments %(name)s leaves on discussions will appear here.",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:8,column:33},end:{line:8,column:116}}}))+'</p>\n<a href="/home/explore/discussions/" class="button button-outline button-padding-wider text-large">'+r(s(n,"gettext").call(a,"Find interesting discussions to join »",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:99},end:{line:9,column:151}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileCommentsEmptyView",["backbone-marionette","home/templates/profileCommentsEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/profileFavoritesEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message card-wrap">\n\n<img class="empty-message__img" src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:4,column:37},end:{line:4,column:53}}}))+'/img/empty-states/recommends.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+r(s(n,"gettext").call(a,"%(name)s hasn't recommended a discussion yet",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:7,column:24},end:{line:7,column:94}}}))+'</h2>\n<p class="text-gray text-medium">'+r(s(n,"gettext").call(a,"Recommending a discussion shares it with people that follow you. Just click the heart!",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:33},end:{line:8,column:133}}}))+'</p>\n<a href="/home/explore/discussions/" class="button button-outline button-padding-wider text-large">'+r(s(n,"gettext").call(a,"Find interesting discussions »",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:99},end:{line:9,column:143}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFavoritesEmptyView",["backbone-marionette","home/templates/profileFavoritesEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/profileFollowersEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n\n<img class="empty-message__img" src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:4,column:37},end:{line:4,column:53}}}))+'/img/empty-states/followers.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+r(s(n,"gettext").call(a,"Nobody is following",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:7,column:24},end:{line:7,column:69}}}))+'</h2>\n<p class="text-gray text-medium">'+r(s(n,"gettext").call(a,"Following people helps you keep up with what they’re saying and recommending.",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:33},end:{line:8,column:124}}}))+'</p>\n<a href="/home/explore/people/" class="button button-outline button-padding-wider text-large">'+r(s(n,"gettext").call(a,"Find interesting people to follow »",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:94},end:{line:9,column:143}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowersEmptyView",["backbone-marionette","home/templates/profileFollowersEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/profileRecentEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message card-wrap">\n\n<img class="empty-message__img" src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:4,column:37},end:{line:4,column:53}}}))+'/img/empty-states/discussions.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+r(s(n,"gettext").call(a,"%(name)s hasn't started any discussions yet",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:7,column:24},end:{line:7,column:93}}}))+'</h2>\n<p class="text-gray text-medium">'+r(s(n,"gettext").call(a,"Discussions started by %(name)s will appear here. Anyone can start one on channels!",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:8,column:33},end:{line:8,column:143}}}))+'</p>\n<a href="/home/explore/" class="button button-outline button-padding-wider text-large">'+r(s(n,"gettext").call(a,"Find a channel to start discussions on »",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:87},end:{line:9,column:141}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileRecentEmptyView",["backbone-marionette","home/templates/profileRecentEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/profileUserModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__subheadings">\n<h2 class="text-subheading">Moderation Links</h2>\n</div>\n<ul class="nav--aside">\n<li class="nav__item">\n<a href="https://disqus.com/admin/moderate/all/search/user:'+s(r(null!=t?l(t,"username"):t,t))+'" class="nav-lnk -color-muted text-small" target="_blank">\nView User in Mod Panel\n</a>\n</li>\n<li class="nav__item">\n<a href="https://disqus.com/disqus-admin/?action=user_lookup&username='+s(r(null!=t?l(t,"username"):t,t))+'" class="nav-lnk -color-muted text-small" target="_blank">\nLookup User in Admin Panel\n</a>\n</li>\n<li class="nav__spacing hidden-md"></li>\n<li class="nav__item">\n<a href="#" data-action="toggle-blacklist" class="nav-lnk -color-muted text-small">\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isOnGlobalBlacklist"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:25,column:0},end:{line:29,column:7}}}))?a:"")+'</a>\n</li>\n<li class="nav__item">\n<a href="https://disqus.com/disqus-admin/blacklists/" class="nav-lnk -color-muted text-small">\nView Global Blacklist\n</a>\n</li>\n</ul>\n'},2:function(e,t,n,i,o){return"Remove from Global Blacklist\n"},4:function(e,t,n,i,o){return"Add to Global Blacklist\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__wrap">\n<div class="aside__content text-gray-dark">\n'+(null!=(a=e.invokePartial(r(i,"profileCoverAttributes"),t,{name:"profileCoverAttributes",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isGlobalAdmin"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:38,column:7}}}))?a:"")},usePartial:!0,useData:!0})}),define("home/views/ProfileUserModuleView",["backbone-marionette","moment","home/mixins/withTruncate","home/templates/profileUserModule","home/models/Session"],function(e,t,n,i,o){"use strict";var a=e.ItemView.extend({template:i,events:{
"click [data-action=toggle-blacklist]":"toggleBlacklist"},templateHelpers:function(){return{joinDate:t(this.model.get("joinedAt")).format("ll"),numLines:9,isGlobalAdmin:o.get().user.isGlobalAdmin()}},toggleBlacklist:function(){this.model.get("isOnGlobalBlacklist")?this.model.removeFromBlacklist():this.model.confirmBlacklist({notes:"Added via user profile",retroactive:!0})}});return n.call(a.prototype),a}),define("home/templates/profileModerationDetailsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__subheadings">\n<h2 class="text-subheading">Comment Moderation</h2>\n</div>\n<div class="aside__wrap">\n<div class="aside-user__body align text-small text-center padding-default">\n<div class="align__item truncate-line">\n<h3 class="text-large text-gray-darker">'+s(r(null!=(a=null!=(a=null!=t?l(t,"counts"):t)?l(a,"global"):a)?l(a,"approved"):a,t))+'</h3>\nApproved\n</div>\n<div class="align__item truncate-line">\n<h3 class="text-large text-gray-darker">'+s(r(null!=(a=null!=(a=null!=t?l(t,"counts"):t)?l(a,"global"):a)?l(a,"spam"):a,t))+'</h3>\nSpam\n</div>\n<div class="align__item truncate-line">\n<h3 class="text-large text-gray-darker">'+s(r(null!=(a=null!=(a=null!=t?l(t,"counts"):t)?l(a,"global"):a)?l(a,"flagged"):a,t))+"</h3>\nFlagged\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileModerationDetailsModuleView",["backbone-marionette","home/templates/profileModerationDetailsModule"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/views/ForumCardCollectionView",["home/mixins/withItemRemovalSkipped","home/mixins/withViewFeedTracking","home/models/Session","home/views/ForumCardView","home/views/common/FetchableCollectionView"],function(e,t,n,i,o){"use strict";var a=o.extend({itemView:i,className:"cards",initialize:function(){o.prototype.initialize.apply(this,arguments);var e=n.get();e.loadPromise().then(function(){e.userProfile.forumsFollowing.ensureFetched()})},itemViewOptions:function(e){if(e.primaryForum)return{model:e.primaryForum}},emptyViewOptions:function(){return{model:this.options.user}}});return e.call(a.prototype),t.call(a.prototype),a}),define("home/templates/profileFollowingPeopleEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n\n<img class="empty-message__img" src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:4,column:37},end:{line:4,column:53}}}))+'/img/empty-states/following-people.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+r(s(n,"gettext").call(a,"%(name)s isn't following anyone",{name:"gettext",hash:{name:null!=t?s(t,"name"):t},data:o,loc:{start:{line:7,column:24},end:{line:7,column:81}}}))+'</h2>\n<p class="text-gray text-medium">'+r(s(n,"gettext").call(a,"Following people helps you keep up with what they’re saying and recommending.",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:33},end:{line:8,column:124}}}))+'</p>\n<a href="/home/explore/people/" class="button button-outline button-padding-wider text-large">'+r(s(n,"gettext").call(a,"Find interesting people to follow »",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:94},end:{line:9,column:143}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowingPeopleEmptyView",["backbone-marionette","home/templates/profileFollowingPeopleEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/profileFollowingCommunitiesEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"You aren't following any communities",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:50}}}))},3:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(a(n,"gettext").call(null!=t?t:e.nullContext||{},"%(name)s isn't following any communities",{name:"gettext",hash:{name:null!=t?a(t,"name"):t},data:o,loc:{start:{line:11,column:0},end:{line:11,column:66}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n\n<img class="empty-message__img" src="'+s(l(n,"urlfor").call(r,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:4,column:37},end:{line:4,column:53}}}))+'/img/empty-states/following-communities.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isSessionUser"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:8,column:0},end:{line:12,column:9}}}))?a:"")+'</h2>\n<p class="text-gray text-medium">'+s(l(n,"gettext").call(r,"Following communities and channels helps you keep up with what their latest discussions.",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:33},end:{line:14,column:135}}}))+'</p>\n<a href="/home/explore/" class="button button-outline button-padding-wider text-large">'+s(l(n,"gettext").call(r,"Find interesting communities to follow »",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:87},end:{line:15,column:141}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowingCommunitiesEmptyView",["backbone-marionette","home/templates/profileFollowingCommunitiesEmpty"],function(e,t){"use strict";return e.ItemView.extend({template:t,templateHelpers:function(){return{isSessionUser:this.model.isSessionUser()}}})}),define("home/templates/profileFollowing",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="nav-tabs">\n<li class="active" data-action="switch-tab" data-tab="people">\n<a href="/by/'+r(a(null!=t?l(t,"username"):t,t))+'/following/">\n'+r(l(n,"gettext").call(s,"People %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:l(n,"tag").call(s,"span",{name:"tag",hash:{text:null!=t?l(t,"numFollowing"):t,"data-role":"num-following",class:"nav-tab-stat"},data:o,loc:{start:{line:4,column:57},end:{line:4,column:134}}})},data:o,loc:{start:{line:4,column:0},end:{line:4,column:136}}}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="sites">\n<a href="/by/'+r(a(null!=t?l(t,"username"):t,t))+'/following/sites/">\n'+r(l(n,"gettext").call(s,"Communities %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:l(n,"tag").call(s,"span",{name:"tag",hash:{text:null!=t?l(t,"numCommunitiesFollowing"):t,"data-role":"num-forums-following",class:"nav-tab-stat"},data:o,loc:{start:{line:9,column:62},end:{line:9,column:157}}})},data:o,loc:{start:{line:9,column:0},end:{line:9,column:159}}}))+'\n</a>\n</li>\n</ul>\n<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ProfileFollowingView",["underscore","home/views/common/TabbedView","home/views/UserCollectionView","home/views/ForumCardCollectionView","home/views/common/FetchableCollectionFooterView","home/views/ProfileFollowingPeopleEmptyView","home/views/ProfileFollowingCommunitiesEmptyView","home/templates/profileFollowing"],function(e,t,n,i,o,a,r,s){"use strict";return t.extend({defaultTab:"people",template:s,templateHelpers:function(){return{numCommunitiesFollowing:this.model.getNumCommunitiesFollowing()}},regions:e.defaults({footerRegion:"[data-role=footer-area]"},t.prototype.regions),modelEvents:{"change:numFollowing":"updateNumFollowing","change:numForumsFollowing":"updateNumForumsFollowing","change:numChannelsFollowing":"updateNumForumsFollowing"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.userProfile=e.userProfile},getDefaultOptions:function(e){var t="sites"===e?this.userProfile.forumsFollowing:this.userProfile.following;return{user:this.model,model:t,collection:t.items,emptyView:"people"===e?a:r,infiniteScroll:!0}},updateTabContent:function(e){t.prototype.updateTabContent.call(this,e),this.footerRegion.show(new o(this.getDefaultOptions(this.activeTab)))},updateNumFollowing:function(){this.$("[data-role=num-following]").text(this.model.get("numFollowing"))},updateNumForumsFollowing:function(){this.$("[data-role=num-forums-following]").text(this.model.getNumCommunitiesFollowing())},getTrackingSection:function(e){return"sites"===e?"following-communities":"following-default"},getTabView:function(e){var t,o=this.getDefaultOptions(e);switch(e){case"people":t=new n(o);break;case"sites":t=new i(o);break;default:return}return t.model.ensureFetched(),t}})}),define("home/templates/discussionsModuleItem",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" no-image"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"image"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:12,column:7}}}))?a:""},4:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"link"):a,t))+'"\ndata-link-name="image"\ndata-link-out="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"signedLink"):a,t))+'"\ndata-thread-id="'+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"id"):a,t))+'">\n\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" alt="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"title"):a,t))+'" class="img-fit-sm" />\n</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="post-comments clearfix'+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"image"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:34},end:{line:1,column:71}}}))?a:"")+'">\n<div class="pull-right spacing-left-small">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"canShowThreadImage"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:13,column:7}}}))?a:"")+'</div>\n<div class="card-body">\n<div class="text-medium spacing-bottom-narrow">\n'+(null!=(a=e.invokePartial(s(i,"threadTitle"),t,{name:"threadTitle",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="text-small text-gray link-inner-gray">\n'+(null!=(a=e.invokePartial(s(i,"channelAwareForumLink"),null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a,{name:"channelAwareForumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<time class="time">'+e.escapeExpression(e.lambda(null!=t?s(t,"relativeTime"):t,t))+"</time>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/DiscussionsModuleItemView",["backbone-marionette","home/utils/layoutUtils","home/templates/discussionsModuleItem"],function(e,t,n){"use strict";return e.ItemView.extend({className:"post-comments__wrapper",template:n,templateHelpers:function(){var e=this.model.thread;return{image:e&&e.getImage(),numTitleLines:3,canShowThreadImage:!t.isNarrowLayout()}}})}),define("home/views/common/EnclosedDiscussionsModuleView",["backbone-marionette","home/views/DiscussionsModuleItemView"],function(e,t){"use strict";return e.CompositeView.extend({className:"aside__wrap -padded",itemView:t,itemViewContainer:"[data-role=posts]",addItemView:function(t,n,i){if(!(this.constructor.ITEMS_MAX&&i>this.constructor.ITEMS_MAX-1))return e.CompositeView.prototype.addItemView.call(this,t,n,i)}})}),define("home/templates/profileRecommendedModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header class="module-header text-center">\n<div class="module-header__icon">\n<span class="icon icon-latest-recommendation text-brand"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+r(s(n,"gettext").call(a,"Latest Recommendations",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:35},end:{line:6,column:71}}}))+'</h2>\n</div>\n</header>\n\n<div data-role="posts" class="module-body"></div>\n\n<footer data-action="switch-tab" data-tab="favorites" class="module-footer">\n<a href="/by/'+r(e.lambda(null!=t?s(t,"username"):t,t))+'/favorites/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+r(s(n,"gettext").call(a,"See All Recommendations",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:26},end:{line:14,column:63}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})}),define("home/views/ProfileRecommendedModuleView",["home/views/common/EnclosedDiscussionsModuleView","home/templates/profileRecommendedModule"],function(e,t){"use strict";return e.extend({template:t},{ITEMS_MAX:3})}),define("home/templates/profileCommentsModulePost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="post-comments">\n<div class="spacing-bottom-narrow">\n<a href="'+s(r(null!=t?l(t,"discussionRoute"):t,t))+"#comment-"+s(r(null!=(a=null!=(a=null!=t?l(t,"postActivity"):t)?l(a,"object"):a)?l(a,"id"):a,t))+'" class="link-gray-dark truncate" data-truncate-lines="2">\n'+s(r(null!=t?l(t,"message"):t,t))+'\n</a>\n</div>\n<div class="link-gray text-gray text-small">\n'+(null!=(a=e.invokePartial(l(i,"channelAwareForumLink"),null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a,{name:"channelAwareForumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<time class="time">'+s(r(null!=t?l(t,"relativeTime"):t,t))+"</time>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCommentsModulePostView",["backbone-marionette","core/utils/html","home/templates/profileCommentsModulePost","home/mixins/withTruncate"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:n,className:"post-comments__wrapper",templateHelpers:function(){var e=this.getPostActivity();return{discussionRoute:this.model.thread.getDiscussionRoute(),postActivity:e.toJSON(),relativeTime:e.getRelativeCreatedAt(),message:t.stripTags(e.object.get("message"))}},getPostActivity:function(){return this.model.activities[0]}});return i.call(o.prototype),o}),define("home/templates/profileCommentsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header class="module-header text-center">\n<div class="module-header__icon">\n<span class="icon icon-latest-comments text-brand"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+r(s(n,"gettext").call(a,"Latest Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:35},end:{line:6,column:64}}}))+'</h2>\n</div>\n</header>\n\n<div data-role="posts" class="module-body"></div>\n\n<footer data-action="switch-tab" data-tab="comments" class="module-footer">\n<a href="/by/'+r(e.lambda(null!=t?s(t,"username"):t,t))+'/comments/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+r(s(n,"gettext").call(a,"See All Comments",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:26},end:{line:14,column:56}}}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})}),define("home/views/ProfileCommentsModuleView",["backbone-marionette","home/views/ProfileCommentsModulePostView","home/templates/profileCommentsModule"],function(e,t,n){"use strict";return e.CompositeView.extend({template:n,className:"aside__wrap -padded",itemView:t,itemViewContainer:"[data-role=posts]",itemViewOptions:function(e,t){if(t>2)return{className:"hidden"}}})}),define("home/templates/profileModuleActiveForums",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="aside__subheadings">\n<h2 class="text-subheading">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Frequented Communities",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:28},end:{line:2,column:64}}}))+'</h2>\n</div>\n<div class="aside__wrap">\n<div data-role="forums"></div>\n</div>\n'},useData:!0})}),define("home/views/UserActiveForumsModuleView",["backbone-marionette","home/views/FollowingCardView","home/templates/profileModuleActiveForums"],function(e,t,n){"use strict";return e.CompositeView.extend({template:n,itemView:t,itemViewContainer:"[data-role=forums]"})}),define("home/templates/blockedProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message empty-message-private">\n<div class="empty-message-private-face-wrapper">\n<svg width="123" height="122" viewBox="0 0 123 122" xmlns="http://www.w3.org/2000/svg">\n<g fill="none" fill-rule="evenodd">\n<path d="M0 61C0 27.312 27.543 0 61.5 0S123 27.312 123 61s-27.543 61-61.5 61S0 94.688 0 61" fill="#FFF"/>\n<path d="M39 28.507C39 26.017 41.015 24 43.493 24 45.983 24 48 26.017 48 28.507 48 30.982 45.984 33 43.493 33 41.015 33 39 30.982 39 28.507M75 28.5c0-2.485 2.015-4.5 4.507-4.5C81.984 24 84 26.015 84 28.5S81.984 33 79.507 33C77.015 33 75 30.985 75 28.5" fill="#164B78"/>\n<path d="M83 40c0-6.62 5.38-12 12-12s12 5.38 12 12c0 6.622-5.38 12-12 12s-12-5.378-12-12M15 40c0-6.62 5.38-12 12-12s12 5.38 12 12c0 6.622-5.38 12-12 12s-12-5.378-12-12" fill="#CCE9FF"/>\n<path d="M93 38c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M87 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M97 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M21 38c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M15 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M25 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2" fill="#2E9FFF"/>\n<g opacity=".5" stroke="#EF675D" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">\n<path d="M54.333 37.333L69.57 52.57M54.333 52.667L69.57 37.43"/>\n</g>\n</g>\n</svg>\n</div>\n<div class="empty-message__content">\n<p class="text-red text-large">'+r(s(n,"gettext").call(a,"You've blocked this user.",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:31},end:{line:16,column:70}}}))+'</p>\n<p class="text-gray text-medium">'+r(s(n,"gettext").call(a,"You won't see any comments from this user on Disqus in discussions, notifications, and more.",{name:"gettext",hash:{},data:o,loc:{start:{line:17,column:33},end:{line:17,column:139}}}))+'</p>\n<a href="/home/settings/blocking" class="button button-fill--brand button-medium">'+r(s(n,"gettext").call(a,"Manage blocked users",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:82},end:{line:18,column:116}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/profileView",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<div data-role="email-verification-alert"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section-expanded sidebar-fixed">\n<div class="cover cover-profile" data-role="cover-area"></div>\n</div>\n<div class="section-contained">\n<div class="layout -top-narrow">\n<div class="layout__main-with-aside">\n<div class="layout__nav hidden-lg">\n<div data-role="user-module"></div>\n<div data-role="moderation-module"></div>\n<div data-role="active-forums-module" data-jester-area="active-forums-module"></div>\n</div>\n<div class="layout__content">\n<div class="hidden-sidebar" data-role="alert-message"></div>\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSessionUser"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:7}}}))?a:"")+'<div class="sidebar-scrollable profile-scrollable scrollable-measure-selector"\ndata-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-md">\n<div data-role="sign-up-module"></div>\n<div data-role="comments-module" data-jester-area="comments-module" class="module--aside"></div>\n<div data-role="recommended-module" data-jester-area="recommended-module" class="module--aside"></div>\n<div class="text-smaller text-gray">\n'+(null!=(a=e.invokePartial(r(i,"homeFooter"),t,{name:"homeFooter",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/privateProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="empty-message empty-message-private">\n<div class="empty-message-private-face-wrapper">\n<svg class="art-private-sunglasses"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 150.5 25" enable-background="new 0 0 150.5 25" xml:space="preserve">\n<polygon points="10.5,0 10.5,5 31.5,5 31.5,10 35.5,10 35.5,15 40.5,15 40.5,20 45.5,20 45.5,25 80.5,25 80.5,20 85.5,20 85.5,15 90.5,15 90.5,10 100.5,10 100.5,15 105.5,15 105.5,20 140.5,20 140.5,15 145.5,15 145.5,10 150.5,10 150.5,5 150.5,0"/>\n<rect x="0.5" y="5" width="10" height="5"/>\n<rect x="40.5" y="5" width="5" height="5" class="shading"/>\n<rect x="45.5" y="10" width="5" height="5" class="shading"/>\n<rect x="50.5" y="15" width="5" height="5" class="shading"/>\n<rect x="60.5" y="15" width="5" height="5" class="shading"/>\n<rect x="55.5" y="10" width="5" height="5" class="shading"/>\n<rect x="110.5" y="10" width="5" height="5" class="shading"/>\n<rect x="120.5" y="10" width="5" height="5" class="shading"/>\n<rect x="50.5" y="5" width="5" height="5" class="shading"/>\n<rect x="105.5" y="5" width="5" height="5" class="shading"/>\n<rect x="115.5" y="5" width="5" height="5" class="shading"/>\n</svg>\n<svg class="art-private-face" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 130 130" enable-background="new 0 0 130 130" xml:space="preserve"><circle cx="65" cy="65" r="65"/><path d="M14 41.6c0-5.5 4.7-10 10.5-10S35 36.1 35 41.6s-4.7 10-10.5 10 S14 47.2 14 41.6z"/><path d="M95 40.6c0-5.5 4.7-10 10.5-10s10.5 4.5 10.5 10s-4.7 10-10.5 10 S95 46.2 95 40.6z"/><rect x="51" y="62.6" width="46" height="4"/></svg>\n</div>\n<div> \n<svg class="art-private-text" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 240 35" enable-background="new 0 0 240 35" xml:space="preserve">\n<rect x="80" width="5" height="35"/>\n<polygon points="165,0 160,0 160,10 155,10 155,15 160,15 160,35 165,35 165,15 170,15 170,10 165,10"/>\n<polygon points="180,10 180,0 175,0 175,35 180,35 180,15 190,15 190,10"/>\n<rect x="190" y="15" width="5" height="20"/>\n<polygon points="5,30 5,5 20,5 20,0 0,0 0,35 20,35 20,30"/>\n<polygon points="45,20 35,20 35,15 30,15 30,30 35,30 35,25 50,25 50,15 45,15"/>\n<rect x="35" y="10" width="10" height="5"/>\n<polygon points="60,10 60,15 70,15 70,30 60,30 60,35 75,35 75,10"/>\n<rect x="105" y="10" width="5" height="20"/>\n<rect x="120" y="10" width="5" height="20"/>\n<rect x="135" y="10" width="5" height="20"/>\n<rect x="145" y="10" width="5" height="25"/>\n<rect x="145" width="5" height="5"/>\n<polygon points="235,10 235,0 230,0 230,10 225,10 225,15 230,15 230,35 235,35 235,15 240,15 240,10"/>\n<rect x="215" y="10" width="5" height="25"/>\n<rect x="215" width="5" height="5"/>\n<rect x="110" y="30" width="10" height="5"/>\n<rect x="125" y="30" width="10" height="5"/>\n<rect x="35" y="30" width="10" height="5"/>\n<rect x="55" y="15" width="5" height="15"/>\n<rect x="20" y="5" width="5" height="25"/>\n</svg>\n</div>\n<div class="empty-message__content">\n<p class="text-gray text-medium">This user\'s activity is private <span class="icon-lock icon__position -inline-swap"></span></span></p>\n<a href="/home/explore/people/" class="button button-fill--brand button-padding-wider text-large">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Find other interesting people »",{name:"gettext",hash:{},data:o,loc:{start:{line:46,column:98},end:{line:46,column:143}}}))+"</a>\n</div>\n\n</div>\n"},useData:!0})}),define("home/templates/profileAlertBlockError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Unfortunately this user could not be blocked; you have reached the limit for number of users blocked.",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:0},end:{line:4,column:115}}}))+"\n"},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Something went wrong while trying to block this user. Please try again later.",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:91}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--error text-small">\n<span class="icon-warning icon-tiny icon__position -inline"></span>\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isLimitError"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:3,column:0},end:{line:7,column:7}}}))?a:"")+"</div>\n"},useData:!0})}),define("home/templates/profileAlertPrivate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="alert alert--brand text-small">\n<span class="icon-lock icon-tiny icon__position -inline"></span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"This user's profile has been set to private.",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:0},end:{line:3,column:58}}}))+"\n</div>\n"},useData:!0})}),define("home/views/ProfileView",["underscore","backbone-marionette","core/api","core/strings","home/utils/backboneUtils","home/views/common/TabbedView","home/views/ProfileCoverView","home/views/ProfileCardCollectionView","home/views/ProfileCommentsEmptyView","home/views/ProfileFavoritesEmptyView","home/views/ProfileFollowersEmptyView","home/views/ProfileRecentEmptyView","home/views/ProfileUserModuleView","home/views/ProfileModerationDetailsModuleView","home/views/common/FetchableCollectionLayout","home/views/ProfileFollowingView","home/views/FollowerCollectionView","home/views/ProfileRecommendedModuleView","home/views/ProfileCommentsModuleView","home/views/ProfileModuleEmptyView","home/views/UserActiveForumsModuleView","home/templates/blockedProfile","home/templates/profileView","home/templates/spinnerTall","home/templates/privateProfile","home/templates/profileAlertBlockError","home/templates/profileAlertPrivate","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert","home/mixins/withLoginOverlay","home/models/Session"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v,b,y,w,x,k,C,_,P,T,O,S,E,F){"use strict";var M=i.get,A=a.extend({defaultTab:"comments",template:function(e){return e.user.name?k(e):C},templateHelpers:function(){return{isSessionUser:this.model.user.isSessionUser()}},regions:e.defaults({coverRegion:"[data-role=cover-area]",userModuleRegion:"[data-role=user-module]",recommendedModuleRegion:"[data-role=recommended-module]",commentsModuleRegion:"[data-role=comments-module]",alertRegion:"[data-role=alert-message]",activeForumsModuleRegion:"[data-role=active-forums-module]",moderationModuleRegion:"[data-role=moderation-module]"},a.prototype.regions),events:e.defaults({"click a[data-link-name]":"trackClickLink"},a.prototype.events),initialize:function(e){a.prototype.initialize.apply(this,arguments),this.listenTo(this.model.user,"change:isBlocked sync",this.render),this.subTab=e&&e.subTab,this.session=F.get(),this.listenTo(this,"change:activeTab",this.updateTabSpecificModules),this.listenTo(this.model,"moderationDetailsReady",this.onDomRefresh),this.listenTo(this.model.user,"blockError",this.onUserBlockError),this.listenTo(this.model.user,"reportError",this.onUserReportError)},getMetaAttrs:function(){var t=this.model.user;return o.getPromiseFor(t,"name").then(function(n){return{type:"profile",title:i.interpolate(M("%(name)s · Profile"),{name:n}),description:e.escape(t.get("about")),image:t.has("avatar")&&t.get("avatar").cache}})},updateTabContent:function(){if(this.model.isBlocked())this.contentRegion.show(new t.ItemView({template:x}));else if(this.model.isPrivate()&&!this.session.user.isGlobalAdmin()){this.contentRegion.show(new t.ItemView({template:_}));var n=this;e.defer(function(){n.$(".empty-message-private").addClass("loaded")})}else a.prototype.updateTabContent.apply(this,arguments)},updateTabSpecificModules:function(e){this.model.isPrivate()||this.model.isBlocked()||("comments"===e?(this.hideRegion(this.commentsModuleRegion),this.recommendedModuleRegion.$el.show()):("favorites"===e?this.hideRegion(this.recommendedModuleRegion):this.recommendedModuleRegion.$el.show(),this.commentsModuleRegion.$el.show(),this.commentsModuleRegion.currentView.render()))},hideRegion:function(e){e.$el&&e.$el.hide()},showProfileModerationModule:function(){this.moderationModuleRegion.show(new m({model:this.model.moderationDetails}))},onDomRefresh:function(){if(this.$(this.coverRegion.el).length&&this.coverRegion.show(new r({
model:this.model.user})),!this.model.isBlocked()){var e=this.session.user.isGlobalAdmin();this.userModuleRegion.show(new h({model:this.model.user})),this.model.isPrivate()&&!e||(this.recommendedModuleRegion.show(new v({model:this.model.user,collection:this.model.favorites.items,emptyView:y})),this.commentsModuleRegion.show(new b({model:this.model.user,collection:this.model.posts.items,emptyView:y})),this.activeForumsModuleRegion.show(new w({model:this.model.mostActiveForums,collection:this.model.mostActiveForums.items,emptyView:y}))),this.model.isPrivate()&&e&&this.alertRegion.show(new t.ItemView({model:this.model.user,template:T})),e&&this.showProfileModerationModule()}a.prototype.onDomRefresh.apply(this,arguments)},onUserBlockError:function(e){this.alertRegion.show(new t.ItemView({model:this.model.user,templateHelpers:{isLimitError:(e&&e.responseJSON&&e.responseJSON.code)===n.ERROR_CODES.MAX_ITEMS_REACHED},template:P}))},onUserReportError:function(){this.alertRegion.show(new t.ItemView({template:P}))},getTrackingSection:function(e){switch(e){case"following":return"following";case"followers":return"followers";case"comments":return"comments";case"favorites":return"favorites";case"discussions":return"discussions"}},getTabView:function(t){var n;switch(t){case"following":return n=new f({model:this.model.user,userProfile:this.model,activeTab:this.subTab}),n.$el.attr({class:"card-wrap"}),this.listenTo(n,"badTab",e.bind(this.trigger,this,"badTab")),n;case"followers":return n=new p({user:this.model.user,model:this.model.followers,collection:this.model.followers.get("items"),fetchableCollectionView:g,emptyView:u,infiniteScroll:!0}),n.$el.attr({class:"card-wrap"}),n;case"comments":return this.getProfileCardCollectionView(this.model.user,this.model.posts,l);case"favorites":return this.getProfileCardCollectionView(this.model.user,this.model.favorites,c);case"discussions":return this.getProfileCardCollectionView(this.model.user,this.model.threads,d);case"recent":return this.getProfileCardCollectionView(this.model.user,this.model.profileFeed,d)}},getProfileCardCollectionView:function(e,t,n){return new p({model:t,collection:t.get("items"),user:e,fetchableCollectionView:s,emptyView:n,infiniteScroll:!0})}});return O.call(A.prototype),S.call(A.prototype),E.call(A.prototype,i.interpolate(M("Join %(disqus)s to get your own profile like this."),{disqus:"Disqus"})),A}),define("home/templates/discussionCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Starting a discussion:",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:36}}}))+"\n"},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Edit your discussion:",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:0},end:{line:11,column:35}}}))+"\n"},5:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="spacing-narrow">\n'+e.escapeExpression(r(n,"gettext").call(a,"%(emailMods)s to channel mods if you have concerns.",{name:"gettext",hash:{emailMods:r(n,"tag").call(a,"a",{name:"tag",hash:{text:r(n,"gettext").call(a,"Send an email",{name:"gettext",hash:{},data:o,loc:{start:{line:29,column:7},end:{line:29,column:32}}}),href:null!=t?r(t,"emailHref"):t,class:"link-inverted text-semibold"},data:o,loc:{start:{line:26,column:12},end:{line:30,column:1}}})},data:o,loc:{start:{line:25,column:0},end:{line:30,column:3}}}))+"\n</li>\n"},7:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(r,s(n,"gt").call(r,null!=(a=null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a)?s(a,"daysThreadAlive"):a,0,{name:"gt",hash:{},data:o,loc:{start:{line:37,column:6},end:{line:37,column:41}}}),{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:37,column:0},end:{line:47,column:7}}}))?a:""},8:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="spacing-narrow">\n'+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=(a=null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a)?s(a,"daysThreadAlive"):a,1,{name:"eq",hash:{},data:o,loc:{start:{line:39,column:6},end:{line:39,column:41}}}),{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.program(11,o,0),data:o,loc:{start:{line:39,column:0},end:{line:45,column:7}}}))?a:"")+"</li>\n"},9:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Discussions automatically close after 1 day.",{name:"gettext",hash:{},data:o,loc:{start:{line:40,column:0},end:{line:40,column:58}}}))+"\n"},11:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Discussions automatically close after %(numDays)s days.",{name:"gettext",hash:{numDays:null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"forum"):a)?r(a,"daysThreadAlive"):a},data:o,loc:{start:{line:42,column:0},end:{line:44,column:2}}}))+"\n"},13:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--brand align-min-tablet align--between align--middle text-medium spacing-bottom">\n<div class="align__item">\n<strong>'+r(s(n,"gettext").call(a,"First time creating a discussion?",{name:"gettext",hash:{},data:o,loc:{start:{line:56,column:8},end:{line:56,column:55}}}))+"</strong>\n"+r(s(n,"gettext").call(a,"Checkout these %(formatTips)s to make sure it's the best it can be.",{name:"gettext",hash:{formatTips:s(n,"tag").call(a,"button",{name:"tag",hash:{text:s(n,"gettext").call(a,"formatting tips",{name:"gettext",hash:{},data:o,loc:{start:{line:61,column:5},end:{line:61,column:32}}}),"data-action":"show-formatting",class:"button-link-inverted text-medium"},data:o,loc:{start:{line:58,column:13},end:{line:61,column:33}}})},data:o,loc:{start:{line:57,column:0},end:{line:62,column:2}}}))+'\n</div>\n<div class="align__item button--formatting">\n<button class="button button-wide button-outline text-medium" data-action="show-formatting">\n'+r(s(n,"gettext").call(a,"Formatting",{name:"gettext",hash:{},data:o,loc:{start:{line:66,column:0},end:{line:66,column:24}}}))+' <span class="icon-formatting text-gray-dark">A</span>\n</button>\n</div>\n</div>\n'},15:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-bottom">\n<div class="alert -warning text-medium">\n'+e.escapeExpression(s(n,"gettext").call(r,"%(channelName)s requires you to %(verifyEmail)s before starting a discussion.",{name:"gettext",hash:{channelName:null!=t?s(t,"channelName"):t,verifyEmail:s(n,"tag").call(r,"a",{name:"tag",hash:{text:s(n,"gettext").call(r,"verify your email address",{name:"gettext",hash:{},data:o,loc:{start:{line:78,column:5},end:{line:78,column:42}}}),"data-forum":null!=(a=null!=(a=null!=t?s(t,"thread"):t)?s(a,"forum"):a)?s(a,"id"):a,"data-action":"verify-email",href:"#"},data:o,loc:{start:{line:75,column:14},end:{line:78,column:43}}})},data:o,loc:{start:{line:74,column:0},end:{line:80,column:2}}}))+"\n</div>\n</div>\n"},17:function(e,t,n,i,o){return" disabled"},19:function(e,t,n,i,o){return' class="disabled"'},21:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="media spacing-bottom">\n<div class="media-left">\n<input id="dicussion-form-invite-checkbox" type="checkbox" name="invite-active-users">\n</div>\n<label for="dicussion-form-invite-checkbox" class="text-small text-gray-dark media-body media-heading">\n'+r(s(n,"gettext").call(a,"Invite most active users",{name:"gettext",hash:{},data:o,loc:{start:{line:127,column:0},end:{line:127,column:38}}}))+'\n<p class="text-gray">\n'+r(s(n,"gettext").call(a,"This will invite the most active users on %(channelName)s when you submit this discussion. Do this ONLY when the thread is final and ready for publishing.",{name:"gettext",hash:{channelName:null!=t?s(t,"channelName"):t},data:o,loc:{start:{line:129,column:0},end:{line:129,column:194}}}))+"\n</p>\n</label>\n</div>\n"},23:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Create Discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:145,column:0},end:{line:145,column:31}}}))+"\n"},25:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Update Discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:147,column:0},end:{line:147,column:31}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="banner"></div>\n<div class="section-contained form--discussion">\n<div class="layout">\n<div class="layout__main-with-aside">\n<div class="layout__nav">\n<div class="aside__wrap -brand">\n<h2 class="text-large spacing-bottom-narrow">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:8,column:0},end:{line:12,column:7}}}))?a:"")+'</h2>\n<ul class="list-bullet spacing-narrow text-medium">\n<li class="spacing-narrow">\n'+s(l(n,"gettext").call(r,"Stay on topic for %(channelLink)s.",{name:"gettext",hash:{channelLink:l(n,"tag").call(r,"a",{name:"tag",hash:{text:null!=t?l(t,"channelName"):t,href:null!=t?l(t,"channelUrl"):t,class:"link-inverted text-semibold"},data:o,loc:{start:{line:17,column:14},end:{line:21,column:1}}})},data:o,loc:{start:{line:16,column:0},end:{line:21,column:3}}}))+"\n</li>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"emailHref"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:0},end:{line:32,column:7}}}))?a:"")+'<li class="spacing-narrow">\n'+s(l(n,"gettext").call(r,"Follow the %(channel)s Rules.",{name:"gettext",hash:{channel:"Channel"},data:o,loc:{start:{line:34,column:0},end:{line:34,column:63}}}))+"\n</li>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isNew"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:36,column:0},end:{line:48,column:7}}}))?a:"")+'</ul>\n</div>\n</div>\n<section class="layout__content">\n'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"sessionUserNumPosts"):t,{name:"unless",hash:{},fn:e.program(13,o,0),inverse:e.noop,data:o,loc:{start:{line:53,column:0},end:{line:70,column:11}}}))?a:"")+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o,loc:{start:{line:71,column:0},end:{line:83,column:11}}}))?a:"")+'<form>\n<div class="card-wrap">\n<div class="card__body">\n<div class="form-attribute-input" data-role="channel-categories" data-attribute="category"></div>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="title">\n<h3 class="spacing-default text-gray-darker">\n'+s(l(n,"gettext").call(r,"Title",{name:"gettext",hash:{},data:o,loc:{start:{line:91,column:0},end:{line:91,column:19}}}))+'\n<span class="text-gray text-small">'+s(l(n,"gettext").call(r,"(Required)",{name:"gettext",hash:{},data:o,loc:{start:{line:92,column:35},end:{line:92,column:59}}}))+'</span>\n</h3>\n<input class="input--textbox -text-large text-semibold" name="title" type="text"\nplaceholder="'+s(l(n,"gettext").call(r,"Headline for your discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:95,column:13},end:{line:95,column:55}}}))+'" value="'+s(e.lambda(null!=t?l(t,"title"):t,t))+'"'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(17,o,0),inverse:e.noop,data:o,loc:{start:{line:95,column:74},end:{line:95,column:125}}}))?a:"")+' />\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n</div>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="topics displayName" data-role="topic-input"></div>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="message">\n<h3 class="spacing-default text-gray-darker">'+s(l(n,"gettext").call(r,"Describe your discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:104,column:45},end:{line:104,column:83}}}))+'</h3>\n<div data-role="postbox"'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(19,o,0),inverse:e.noop,data:o,loc:{start:{line:105,column:24},end:{line:105,column:83}}}))?a:"")+'></div>\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n<div class="align align--between spacing-top-narrow" data-role="toolbar"></div>\n</div>\n</div>\n</div>\n<div class="align-min-tablet align--between spacing-bottom">\n<div class="align__item discussion-form__input-block">\n<div class="media spacing-bottom">\n<div class="media-left">\n<label class="text-small text-gray-dark media-body media-heading">\n<input type="checkbox" name="subscribe" checked>\n'+s(l(n,"gettext").call(r,"Subscribe for email updates to this discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:117,column:0},end:{line:117,column:60}}}))+"\n</label>\n</div>\n</div>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"canInviteActiveUsers"):t,{name:"if",hash:{},fn:e.program(21,o,0),inverse:e.noop,data:o,loc:{start:{line:121,column:0},end:{line:133,column:7}}}))?a:"")+'</div>\n<div class="align__item clearfix">\n<div class="align-max-mobile">\n<div class="align__item--swap-first discussion-form__loading">\n<div class="spinner-small"></div>\n</div>\n<button type="button" id="cancel-button" data-action="cancel-create" class="button text-medium align__item--swap-first">\n'+s(l(n,"gettext").call(r,"Cancel",{name:"gettext",hash:{},data:o,loc:{start:{line:141,column:0},end:{line:141,column:20}}}))+'\n</button>\n<button type="submit" id="submit-button" class="button button-fill--brand button--discussion-form text-medium align__item--swap-last"'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(17,o,0),inverse:e.noop,data:o,loc:{start:{line:143,column:133},end:{line:143,column:184}}}))?a:"")+">\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"isNew"):t,{name:"if",hash:{},fn:e.program(23,o,0),inverse:e.program(25,o,0),data:o,loc:{start:{line:144,column:0},end:{line:148,column:7}}}))?a:"")+'</button>\n</div>\n</div>\n</div>\n</form>\n</section>\n</div>\n<aside class="layout__aside">\n<div class="card-wrap">\n<div class="card__header -default">\n<h3 class="text-gray-darker">\n'+s(l(n,"gettext").call(r,"Basic Rules",{name:"gettext",hash:{},data:o,loc:{start:{line:160,column:0},end:{line:160,column:25}}}))+'\n</h3>\n</div>\n<div class="text-medium text-gray-darker card__body spacing-inner rules__wrapper -discussion">\n'+(null!=(a=e.invokePartial(l(i,"homeRules"),t,{name:"homeRules",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n</div>\n<div class="text-smaller text-gray hidden-md">\n'+(null!=(a=e.invokePartial(l(i,"homeFooter"),t,{name:"homeFooter",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/editDiscussionCategory",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o,a,r){var s,l=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<label class="align spacing-narrow">\n<div class="align__item spacing-right">\n<input type="radio" name="category" value="'+c(l(o&&d(o,"key"),t))+'" alt="'+c(l(t,t))+'" '+(null!=(s=d(n,"if").call(u,d(n,"eq").call(u,o&&d(o,"key"),null!=r[1]?d(r[1],"category"):r[1],{name:"eq",hash:{},data:o,loc:{start:{line:12,column:74},end:{line:12,column:95}}}),{name:"if",hash:{},fn:e.program(2,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:12,column:68},end:{line:12,column:111}}}))?s:"")+' />\n</div>\n<div class="spacing-bottom-small align__item text-medium text-gray-darker">\n'+c(l(o&&d(o,"key"),t))+'\n<p class="text-gray">\n'+c(l(t,t))+"\n</p>\n</div>\n</label>\n"},2:function(e,t,n,i,o){return"checked"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o,a,r){var s,l=null!=t?t:e.nullContext||{},c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h3 class="text-gray-darker">\n'+c(u(n,"gettext").call(l,"Choose Category",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:29}}}))+'\n<span data-toggle="tooltip" data-placement="bottom"\ntitle="'+c(u(n,"gettext").call(l,"%(channelTitle)s requires that you choose a category to guide your discussion. This helps maintain a common theme throughout discussions on this channel.",{name:"gettext",hash:{channelTitle:null!=t?u(t,"name"):t},data:o,loc:{start:{line:4,column:7},end:{line:4,column:192}}}))+'">\n<span class="icon-questions icon__position icon-tiny text-gray"></span>\n</span>\n</h3>\n<div data-role="attribute-error" class="form-message-error text-small spacing-default"></div>\n'+(null!=(s=u(n,"each").call(l,null!=t?u(t,"categories"):t,{name:"each",hash:{},fn:e.program(1,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:21,column:9}}}))?s:"")},useData:!0,useDepths:!0})}),define("home/views/EditDiscussionCategoryView",["jquery","backbone-marionette","home/templates/editDiscussionCategory"],function(e,t,n){"use strict";return t.ItemView.extend({template:n,className:"discussion-form__categories",templateHelpers:function(){return{categories:this.model.thread.forum.channel.getCategories(),existingCategory:this.existingCategory}},initialize:function(){this.existingCategory=this.model.topics.getCategoryTopics()[0]},events:{"change input[name=category]":"categoryChanged"},onDomRefresh:function(){this.$("[data-toggle=tooltip]").tooltip()},categoryChanged:function(t){this.model.set({category:e(t.currentTarget).val()})}})}),define("home/templates/topicInput",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h3 class="spacing-default text-gray-darker">\n'+r(s(n,"gettext").call(a,"Topics",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:20}}}))+'\n</h3>\n\n<div data-attribute="topics" class="input-group">\n<div data-role="topics"></div>\n<input class="input-group__text" name="topics" type="text"\nplaceholder="'+r(s(n,"gettext").call(a,"Add topics here, separate with commas.",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:13},end:{line:8,column:65}}}))+'" />\n</div>\n\n<div data-role="attribute-error" class="form-message-error text-small spacing-default"></div>\n'},useData:!0})}),define("home/views/TopicInputView",["underscore","backbone-marionette","home/models/Topic","home/templates/topicInput","home/views/TopicTagView"],function(e,t,n,i,o){"use strict";var a=t.CompositeView.extend({className:"topic-group__wrapper",template:i,itemView:o,itemViewContainer:"[data-role=topics]",initialize:function(){this.listenTo(this,"itemview:removeTag",this.handleRemoveTopicByTag)},events:{"keydown [name=topics]":"handleTopicInputKeydown","blur input[name=topics]":"handleTopicInputBlur"},ui:{topics:"[name=topics]"},handleTopicInputKeydown:function(t){if(e.contains(a.TOPIC_INSERTION_KEYS,t.keyCode)&&!t.shiftKey)t.preventDefault(),this.parseTopicInput();else if(8===t.keyCode){var n=this.ui.topics.val().length;if(!n){var i=e.last(this.collection.filter(function(e){return!e.get("hidden")}));i&&this.collection.remove(i)}}},handleTopicInputBlur:function(){this.parseTopicInput()},parseTopicInput:function(){var t=this.ui.topics.val();if(t){var i=t.split(",");e.each(i,function(e){var t=n.getOrCreateTopic(e);t&&this.collection.add(t)},this),this.clearTopicInput()}},clearTopicInput:function(){this.ui.topics.val("")},handleRemoveTopicByTag:function(e){this.collection.remove(e.model)}},{TOPIC_INSERTION_KEYS:[9,188,13,186]});return a}),define("home/mixins/withChannelBanner",["underscore","home/models/Channel"],function(e,t){"use strict";var n=e.chain(t.BANNER_COLORS).keys().map(function(e){return"-"+e}).value().join(" "),i={ui:{bannerWrapper:"[data-role=banner]"},initialize:function(e,t){e.call(this,t),this.listenTo(this.model,"change:bannerColor change:banner change:options",this.updateBanner)},onRender:function(t){t&&t.apply(this,e.rest(arguments)),this.updateBanner()},updateBanner:function(){this.ui.bannerWrapper.removeClass(n).removeClass("-image-background").css({"background-image":""});var e=this.model.get("bannerColor"),t=this.model.get("banner")||this.model.get("options").alertBackground;t instanceof window.File&&(t="//media.disquscdn.com/home/channels/banner-image-upload.png"),t&&this.ui.bannerWrapper.addClass("-image-background").css({"background-image":"url("+t+")","background-position":"0 0;"}),e&&this.ui.bannerWrapper.addClass("-"+e.toLowerCase())}};return function(){this.ui=e.extend({},i.ui,this.ui),this.initialize=e.wrap(this.initialize,i.initialize),this.onRender=e.wrap(this.onRender,i.onRender),e.defaults(this,e.pick(i,["updateBanner"]))}}),define("home/templates/channelBanner",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="banner__wrapper" data-role="banner">\n<a href="/home/channel/'+e.escapeExpression(e.lambda(null!=t?r(t,"slug"):t,t))+'/" class="link-inverted">\n<div class="channel-cover section-contained align align--middle">\n'+(null!=(a=e.invokePartial(r(i,"channelCoverLogo"),t,{name:"channelCoverLogo",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</a>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelBannerView",["backbone-marionette","home/mixins/withChannelBanner","home/mixins/withClickLinkTracking","home/templates/channelBanner"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:i,events:{"click a":"trackClickLink"}}),a=o.prototype;return n.call(a,"channel_top_banner"),t.call(a),o}),define("home/models/formatting/LinkPopover",["backbone"],function(e){"use strict";var t=function(e){return!(e&&e.trim())};return e.Model.extend({defaults:{originalText:"",text:"",url:""},validate:function(e){return t(e.text)?{attrName:"text",message:"Link text is required."}:t(e.url)?{attrName:"url",message:"Link URL is required."}:void 0}})}),define("home/templates/linkInsertTooltip",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form data-role="link-form">\n<div class="spacing-bottom-narrow form-attribute-input" data-attribute="text">\n<input name="text" class="input--textbox" placeholder="Link text" value="'+r(a(null!=t?s(t,"text"):t,t))+'">\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n</div>\n<div class="spacing-bottom-narrow form-attribute-input" data-attribute="url">\n<input name="url" class="input--textbox" placeholder="Link URL" value="'+r(a(null!=t?s(t,"url"):t,t))+'">\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n</div>\n<div class="text-center">\n<button type="submit" data-action="insert-link" class="button button-outline button-wide button-small">\nAdd Link\n</button>\n</div>\n</form>\n'},useData:!0})}),define("home/views/BasePopoverView",["jquery","backbone"],function(e,t){"use strict";return t.View.extend({className:"popover notch-up notch--mobile-hidden",initialize:function(e){this.$target=e.$target},move:function(){this.$el.detach().appendTo(".viewport"),this.render(),this.delegateEvents(),this.updatePosition(this.$target,".viewport")},updatePosition:function(t,n){var i=t.offset().top,o=t.offset().left,a=t.height(),r=t.width(),s=this.$el.width(),l=e(window),c=l.width(),u=e(n).offset().top,d=this.constructor.calculateHorizontalAlignment(o,r,s,c);this.$el.toggleClass("-right","right"===d.position),this.$el.toggleClass("-left","left"===d.position),this.$el.css({top:i+a+this.constructor.TOP_MARGIN-u,left:d.left,bottom:"inherit","z-index":this.constructor.Z_INDEX})},show:function(){this.move(),this.$el.addClass("open")},hide:function(){this.$el.removeClass("open")},onBodyClick:function(t){var n=e(t.target);n.closest(this.$target).length||n.closest(this.$el).length||this.hide()}},{TOP_MARGIN:20,Z_INDEX:550,calculateHorizontalAlignment:function(e,t,n,i){var o,a,r=e-(n-t)/2,s=e+t-n,l=e,c=r+n>i&&s>0,u=r<0&&l+n<i,d=r+n<i&&r>0;return d?(a="centered",o=r):c?(a="right",o=s):u?(a="left",o=l):(a="leftEdge",o=0),{position:a,left:o}}})}),define("home/views/formatting/LinkPopoverView",["jquery","underscore","core/utils","home/templates/linkInsertTooltip","home/views/BasePopoverView"],function(e,t,n,i,o){"use strict";var a=n.preventDefaultHandler,r=o,s=r.prototype;return r.extend({events:{"blur input":"saveModel","submit [data-role=link-form]":"insertLink"},template:i,initialize:function(){s.initialize.apply(this,arguments),this.listenTo(this.model,{"change:text":function(e,t){this.$("[name=text]").val(t)},"change:url":function(e,t){this.$("[name=url]").val(t)}}),this._open=!1,this.onBodyClick=t.bind(this.onBodyClick,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},remove:function(){this.removeBodyEvent(),s.remove.apply(this,arguments)},attachBodyEvent:function(){e("body").on("click",this.onBodyClick)},removeBodyEvent:function(){e("body").off("click",this.onBodyClick)},show:function(){t.delay(t.bind(function(){this.$("input").eq(0).focus()},this),50),this._open||(this._open=!0,this.attachBodyEvent(),s.show.apply(this,arguments))},hide:function(){s.hide.apply(this,arguments),this._open&&(this._open=!1,this.removeBodyEvent(),this.saveModel(),this.trigger("hide"))},saveModel:function(){this.model.set({url:this.$("[name=url]").val().trim(),text:this.$("[name=text]").val()})},insertLink:a(function(){this.saveModel(),this.model.isValid()?this.trigger("submit",this.model.toJSON()):this.displayError(this.model.validationError)}),displayError:function(e){this.$(".form-attribute-input").removeClass("is-error"),this.$("[data-attribute="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)}})}),define("home/templates/formattingButtons",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<button type="button" data-action="toggle-formatting" data-formatting="bold" class="button link-gray text-smaller">\n<strong title="Bold">B</strong>\n</button>\n<button type="button" data-action="toggle-formatting" data-formatting="italics" class="button link-gray text-smaller">\n<em title="Italic">I</em>\n</button>\n<button type="button" data-action="toggle-formatting" data-formatting="underline" class="button link-gray text-smaller">\n<u title="Underline">U</u>\n</button>\n<button type="button" data-action="toggle-formatting" data-formatting="blockquote" class="button link-gray text-smaller">\n❛❛\n</button>\n<button type="button" data-action="insert-link" class="button link-gray text-smaller">\n<span class="icon icon-link icon__position -inline icon-small" title="Link"></span>\n</button>\n'},useData:!0})}),define("home/views/formatting/FormattingButtonsView",["underscore","backbone","home/models/formatting/LinkPopover","home/views/formatting/LinkPopoverView","home/templates/formattingButtons"],function(e,t,n,i,o){"use strict";var a=t.View,r=a.prototype,s=a.extend({template:o,events:{"click [data-action=toggle-formatting]":"onFormattingClick","click [data-action=insert-link]":"onInsertLinkClick"},initialize:function(e){this.getPostbox=e.getPostbox,this.linkModel=new n},render:function(){return this.$el.html(this.template()),this._popoverView?this:(this._popoverView=new i({$target:this.$("[data-action=insert-link]"),model:this.linkModel}),this.listenTo(this._popoverView,{hide:function(){var e=window.document.activeElement;e&&"INPUT"===e.tagName||this.getPostbox().textarea.restoreSelection()},submit:function(e){this.insertFormattingTags("link",{url:e.url,text:e.text}),this._popoverView.hide(),this.linkModel.clear()}}),this)},remove:function(){this._popoverView&&this._popoverView.remove(),r.remove.apply(this,arguments)},insertFormattingTags:function(t,n){var i=this.getPostbox().textarea;if("link"===t){i.insertAtCursor('<a href="'+e.escape(n.url)+'">'+this.constructor.escapeCommentHtml(n.text)+"</a>")}else{var o=s.FORMATTING_TAGS[t];if(!o)throw Error("Invalid formatting operation: "+t);i.insertAroundSelection("<"+o+">","</"+o+">")}},onFormattingClick:function(e){this.insertFormattingTags(e.currentTarget.getAttribute("data-formatting"))},onInsertLinkClick:function(){var e=this.getPostbox().textarea,t=e.getSelected(),n={originalText:t},i=this.linkModel.get("text");i&&i!==this.linkModel.get("originalText")||(n.text=t),this.linkModel.set(n),this._popoverView.show()}},{FORMATTING_TAGS:{bold:"strong",blockquote:"blockquote",italics:"em",underline:"u"},escapeCommentHtml:function(e){return e.replace(/&(?=\S)/g,"&amp;").replace(/<(?=\S)/g,"&lt;")}});return s}),define("home/templates/discussionCreateToolbar",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="input--formatting-region">\n<span data-role="formatting-buttons"></span>\n<span data-role="upload-button"></span>\n</div>\n\n<div class="align__item hidden-md">\n<button data-action="show-formatting" type="button" class="button text-smaller link-gray">\n<span class="icon-formatting">A</span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Formatting Help",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:29}}}))+"\n</button>\n</div>\n"},useData:!0})}),define("home/templates/formatting",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'<div class="modal-formatting">\n<div class="modal-body text-medium">\n<h1 class="text-larger spacing-bottom-narrow">\n<span class="icon-formatting">A</span> '+r(s(n,"gettext").call(a,"Formatting Tips",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:39},end:{line:4,column:68}}}))+'\n</h1>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><a>'+r(s(n,"gettext").call(a,"Linking text",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:42},end:{line:7,column:68}}}))+'</a></label>\n<textarea class="modal-formatting__textarea">&lt;a href="https://www.website.com/"&gt;'+r(s(n,"gettext").call(a,"This is a link",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:86},end:{line:8,column:114}}}))+'&lt;/a&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label">'+r(s(n,"gettext").call(a,"Line Break",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:39},end:{line:11,column:63}}}))+'</label>\n<textarea class="modal-formatting__textarea">&lt;br&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><strong>'+r(s(n,"gettext").call(a,"Bold",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:47},end:{line:15,column:65}}}))+'</strong></label>\n<textarea class="modal-formatting__textarea">&lt;strong&gt;'+r(s(n,"gettext").call(a,"Defines bold text",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:59},end:{line:16,column:90}}}))+'&lt;/strong&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><blockquote>'+r(s(n,"gettext").call(a,"Block Quote",{name:"gettext",hash:{},data:o,loc:{start:{line:19,column:51},end:{line:19,column:76}}}))+'</blockquote></label>\n<textarea class="modal-formatting__textarea">&lt;blockquote&gt;'+r(s(n,"gettext").call(a,"Defines a long quotation",{name:"gettext",hash:{},data:o,loc:{start:{line:20,column:63},end:{line:20,column:101}}}))+'&lt;/blockquote&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><em>'+r(s(n,"gettext").call(a,"Italic",{name:"gettext",hash:{},data:o,loc:{start:{line:23,column:43},end:{line:23,column:63}}}))+'</em></label>\n<textarea class="modal-formatting__textarea">&lt;em&gt;'+r(s(n,"gettext").call(a,"Defines italic text",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:55},end:{line:24,column:88}}}))+'&lt;/em&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><strike>'+r(s(n,"gettext").call(a,"Strikethrough",{name:"gettext",hash:{},data:o,loc:{start:{line:27,column:47},end:{line:27,column:74}}}))+'</strike></label>\n<textarea class="modal-formatting__textarea">&lt;strike&gt;'+r(s(n,"gettext").call(a,"Defines strikethrough text",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:59},end:{line:28,column:99}}}))+'&lt;/strike&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><u>'+r(s(n,"gettext").call(a,"Underlined",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:42},end:{line:31,column:66}}}))+'</u></label>\n<textarea class="modal-formatting__textarea">&lt;u&gt;'+r(s(n,"gettext").call(a,"Defines underlined text",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:54},end:{line:32,column:91}}}))+"&lt;/u&gt;</textarea>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/uploadButton",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<button type="button" class="button text-smaller link-gray" data-action="attach" title="Upload Images">\n<span class="icon-photo icon__position -inline"></span>\n</button>\n<input type="file" class="hidden" data-role="media-upload" tabindex="-1" accept="image/*">\n'},useData:!0})}),define("home/views/DiscussionCreateToolbarView",["backbone-marionette","core/views/media/UploadButtonView","home/mixins/withSubviews","home/utils/confirmModal","home/views/formatting/FormattingButtonsView","home/templates/discussionCreateToolbar","home/templates/formatting","home/templates/uploadButton"],function(e,t,n,i,o,a,r,s){"use strict";var l=e.ItemView,c=l.prototype,u=l.extend({template:a,events:{"click [data-action=show-formatting]":"showFormatting"},regions:{formattingButtonsRegion:"[data-role=formatting-buttons]",uploadButtonRegion:"[data-role=upload-button]"},initialize:function(e){this.getPostbox=e.getPostbox},render:function(){return c.render.call(this),this.activateRegion(this.uploadButtonRegion,this.createUploadButton),this.activateRegion(this.formattingButtonsRegion,this.createFormattingButtons),this},createUploadButton:function(){var e=new t({el:this.uploadButtonRegion.el,template:s});return this.listenTo(e,"uploader:attachMedia",function(){var e=this.getPostbox();e.handleUploadViaButton.apply(e,arguments)}),e},createFormattingButtons:function(){return new o({el:this.formattingButtonsRegion.el,getPostbox:this.getPostbox})},showFormatting:function(){i.confirmationPromise(i.TYPES.CLOSE,r(this.model.thread.forum.channel.toJSON()))}});return n.call(u.prototype),u}),define("home/templates/discussionChannelInfo",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="favicon" src="'+s(r(null!=(a=null!=t?l(t,"options"):t)?l(a,"favicon"):a,t))+'" alt="'+s(r(null!=t?l(t,"name"):t,t))+'"/>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="discussion-origin-name truncate-line" href="/home/channel/'+s(r(null!=t?l(t,"slug"):t,t))+'/">\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?l(t,"options"):t)?l(a,"favicon"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:4,column:7}}}))?a:"")+s(r(null!=t?l(t,"name"):t,t))+"\n</a>\n"},useData:!0})}),define("home/templates/threadSubmitError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">'+r(s(n,"gettext").call(null!=t?t:e.nullContext||{},"Uh oh, we weren't unable to save your discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:24},end:{line:2,column:86}}}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+r(e.lambda(null!=(a=null!=t?s(t,"responseJSON"):t)?s(a,"response"):a,t))+"</p>\n</div>\n"},useData:!0})}),define("home/views/DiscussionCreateView",["underscore","backbone-marionette","core/mixins/withEmailVerifyLink","core/strings","home/mixins/withSubviews","home/models/Thread","home/templates/discussionCreate","home/utils/features","home/utils/backboneUtils","home/utils/confirmModal","home/utils/trackingUtils","home/views/PostReplyView","home/views/EditDiscussionCategoryView","home/views/TopicInputView","home/views/ChannelBannerView","home/views/DiscussionCreateToolbarView","home/templates/discussionChannelInfo","home/templates/threadSubmitError"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v){"use strict";var b=i.get,y=t.ItemView,w=y.prototype,x=y.extend({template:r,templateHelpers:function(){var t=this.model.thread.forum.channel.get("options").modEmail,n=e.contains(this.session.moderatedForums,this.model.thread.forum.id);return{isNew:this.isNew,sessionUserNumPosts:this.session.user.get("numPosts"),sessionUserVerified:this.session.user.get("isVerified"),emailHref:t?"mailto:"+t:"",channelName:this.model.thread.forum.channel.get("name"),channelUrl:"/home/channel/"+this.model.thread.forum.channel.get("slug")+"/",canInviteActiveUsers:n,canModifyTopics:this.canModifyTopics}},events:{submit:"submitThread","click [data-action=cancel-create]":"navigateBack","blur input[name=title]":"updateTitle"},ui:{title:"[name=title]",subscribe:"[name=subscribe]",inviteActiveUsers:"[name=invite-active-users]"},initialize:function(e){this.isNew=this.model.thread.isNew(),u.setSection(this.isNew?"create":"edit"),this.listenTo(this.model,"change:category",this.categoryChanged),this.listenTo(this.model,"change",this.updateValidationErrors),this.listenTo(this.model.topics,"add remove reset",this.updateValidationErrors),this.listenTo(this.model,"invalid",this.handleValidationError),this.session=e.session},regions:{postboxRegion:"[data-role=postbox]",channelInfoRegion:"[data-role=channel-info]",categoriesRegion:"[data-role=channel-categories]",topicInputRegion:"[data-role=topic-input]",bannerRegion:"[data-role=banner]",toolbarRegion:"[data-role=toolbar]"},getThread:function(){return this.model.thread},getForum:function(){return this.model.thread.forum},getMetaAttrs:function(){return l.getPromiseFor(this.model.thread.forum,"name").then(function(e){return i.interpolate(b("Create new discussion on %(name)s"),{name:e})})},render:function(){if(w.render.call(this),!this.session.fetched)return void this.session.fetch().then(e.bind(this.render,this));this.activateRegion(this.postboxRegion,this.createPostbox),this.activateRegion(this.toolbarRegion,this.createToolbarView);var t=this.model.thread.forum.channel;if(t){this.activateRegion(this.channelInfoRegion,this.createChannelView),this.activateRegion(this.bannerRegion,this.createBanner),this.activateRegion(this.topicInputRegion,this.createTopicInput);t.getCategories()&&this.activateRegion(this.categoriesRegion,this.createCategoriesView)}return this},createToolbarView:function(){return new f({el:this.toolbarRegion.el,model:this.model,getPostbox:e.bind(function(){return this.postboxRegion.currentView},this)})},createBanner:function(){return new p({el:this.bannerRegion.el,model:this.model.thread.forum.channel})},createChannelView:function(){return new t.ItemView({el:this.channelInfoRegion.el,model:this.model.thread.forum.channel,template:g})},createCategoriesView:function(){var e=new h({model:this.model});return this.bindTitleCategoryHandlers(),e},categoryChanged:function(e,t){var n=this.ui.title,i=this.model._previousAttributes.category;if(i){var o=n.val().match(RegExp(i+a.CATEGORY_TITLE_SEPARATOR+"(.*)"));o&&n.val(o[1])}n.val(t+a.CATEGORY_TITLE_SEPARATOR+n.val()),this.updateTitle()},bindTitleCategoryHandlers:function(){if(!this.titleCategoryHandlerBound){this.ui.title.on("keydown",e.partial(function(t,n){var i=t.get("category"),o=i&&(i+a.CATEGORY_TITLE_SEPARATOR).length;if(!e.contains(x.NON_EDITING_KEYS,n.which)&&(this.selectionStart<o||this.selectionStart===o&&8===n.which))return!1},this.model)),this.titleCategoryHandlerBound=!0}},submitThread:function(t){t.preventDefault();var n,i;!this._submitLocked&&this.model.isValid()&&(n=this.postboxRegion.currentView,i=n.textarea.get(),this._oldMessage||this._oldRawMessage||(this._oldMessage=this.model.thread.get("message"),this._oldRawMessage=this.model.thread.get("raw_message")),(this._submitLocked=this.model.thread.save({title:this.ui.title.val(),message:i,shouldSanitizeMessage:!0},{success:e.bind(this.handleThreadCreate,this),error:e.bind(this.handleSaveError,this)}))&&(this.$el.find("form").addClass("is-submitting"),this.$el.find("#submit-button").prop("disabled",!0),this.$el.find("#cancel-button").prop("disabled",!0)))},createPostbox:function(){var e=new d({model:this.model.thread,thread:this.model.thread,placeholder:b("Tell people what you want your discussion to be about.  Use gifs and images too."),session:this.session,canUseContentEditable:s.canUseContentEditable(),showSubmitButton:!1,showAvatar:!1,showMediaPreviews:!0,showMustVerifyAlert:!1});return this.listenTo(e,"blur",this.updateMessage),e},createTopicInput:function(){return new m({collection:this.model.topics})},handleThreadCreate:function(){if(this.model.thread.set("shouldSanitizeMessage",!1),"object"==typeof this.ui.subscribe&&"object"==typeof this.ui.inviteActiveUsers){this.ui.subscribe.prop("checked")&&this.model.thread.subscribe();this.ui.inviteActiveUsers.prop("checked")&&this.model.thread.inviteUserGroup("good_forum_commenters"),this.model.saveVisibleTopics(),this.isNew&&this.model.thread.set("isNew",!0),this.trigger("createThread")}},updateTitle:function(){this.model.set({title:this.ui.title.val()})},updateMessage:function(){this.model.set({message:this.postboxRegion.currentView.textarea.get()})},updateValidationErrors:function(){this.$(".form-attribute-input").removeClass("is-error"),this.model.isValid()},handleValidationError:function(t,n){e.each(n,function(e){this.$(".form-attribute-input[data-attribute*="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)},this)},handleSaveError:function(e,t){this._submitLocked=!1,this.$("form").removeClass("is-submitting"),this.$("#cancel-button").prop("disabled",!1),this.$("#submit-button").prop("disabled",!1),c.confirmationPromise(c.TYPES.CLOSE,v(t))},navigateBack:function(){this.model.thread.id?(this._oldMessage&&this._oldRawMessage&&this.model.thread.set({message:this._oldMessage,raw_message:this._oldRawMessage,shouldSanitizeMessage:!1}),this.trigger("createThread")):this.trigger("cancelThread")},getPageTrackingParams:function(){return{forum:this.model.thread.forum.id}}},{NON_EDITING_KEYS:[37,39,36,35,9,13]});return o.call(x.prototype),n.call(x.prototype),x}),define("home/templates/discussionBanner",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="banner__wrapper grad-overlay__wrapper" data-role="banner">\n<div class="grad-overlay">\n<a href="/home/channel/'+e.escapeExpression(e.lambda(null!=t?r(t,"slug"):t,t))+'/">\n<div class="channel-cover section-contained align align--middle align--between">\n<div class="spacing-right truncate-line text-light">\n'+(null!=(a=e.invokePartial(r(i,"channelCoverLogo"),t,{name:"channelCoverLogo",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="visible-lg btn-follow--inverted btn-follow--plain">\n'+(null!=(a=e.invokePartial(r(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n</a>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/DiscussionBannerView",["backbone-marionette","home/mixins/withChannelBanner","core/mixins/withChannelFollowing","home/mixins/withClickLinkTracking","home/templates/discussionBanner"],function(e,t,n,i,o){"use strict";var a=e.ItemView.extend({template:o,events:{"click a":"trackClickLink"},initialize:function(e){this.app=e.app,this.session=e.session,this.listenTo(this,"toggled:follow",this.render)}}),r=a.prototype;return i.call(r,"discussion_top_banner"),t.call(r),n.call(r,function(){return this.model}),a}),define("home/templates/discussionCoverActions",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" -wide"},3:function(e,t,n,i,o){return" is-recommended"},5:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="button__count">'+e.escapeExpression(e.lambda(null!=t?a(t,"likes"):t,t))+"</span>\n"},7:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="dropdown" data-role="menu">\n<a href="#" class="button icon__rotate--right" data-toggle="dropdown">\n<span class="icon icon-show-more text-smaller"></span>\n</a>\n<ul class="dropdown-menu dropdown--cards dropdown--discussion" role="menu" aria-labeledby="drop-discover">\n<li>\n<a href="#" class="link text-semibold" data-action="toggle-subscription">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"userSubscription"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.program(10,o,0),data:o,loc:{start:{line:39,column:0},end:{line:43,column:7}}}))?a:"")+"</a>\n</li>\n</ul>\n</li>\n"},8:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Unsubscribe from discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:40,column:0},end:{line:40,column:41}}}))+"\n"},10:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Subscribe to discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:0},end:{line:42,column:37}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="list--inline">\n<li class="button__wrapper--recommend -count'+(null!=(a=l(n,"if").call(r,l(n,"gt").call(r,null!=t?l(t,"likes"):t,9,{name:"gt",hash:{},data:o,loc:{start:{line:2,column:50},end:{line:2,column:62}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:44},end:{line:2,column:77}}}))?a:"")+(null!=(a=l(n,"if").call(r,null!=t?l(t,"favorited"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:77},end:{line:2,column:116}}}))?a:"")+'" data-action="favorite">\n<a class="button--recommend text-medium" href="#">\n<span class="button__heart icon-heart"></span>\n<span class="button__text hidden-md">'+s(l(n,"gettext").call(r,"Recommend",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:37},end:{line:5,column:60}}}))+"</span>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"likes"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?a:"")+'</a>\n</li>\n<li class="dropdown" data-dropdown="enabled">\n<a class="button text-medium -share-discussion dropdown-toggle" data-toggle="dropdown" href="#">\n<span class="icon-share-discussion text-smaller icon__position"></span><span class="spacing-left-small hidden-md">'+s(l(n,"gettext").call(r,"Share",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:114},end:{line:14,column:133}}}))+'</span>\n</a>\n<ul class="dropdown-menu dropdown--cards dropdown--share-discussion">\n<li>\n<a class="link" data-action="share" data-network="twitter" href="#">\n<span class="icon icon-twitter text-smaller icon__position -inline"></span>\n<strong>'+s(l(n,"gettext").call(r,"Tweet this",{name:"gettext",hash:{},data:o,loc:{start:{line:20,column:8},end:{line:20,column:32}}}))+'</strong>\n</a>\n</li>\n<li>\n<a class="link" data-action="share" data-network="facebook" href="#">\n<span class="icon icon-facebook text-smaller icon__position -inline"></span>\n<strong>'+s(l(n,"gettext").call(r,"Post to Facebook",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:8},end:{line:26,column:38}}}))+"</strong>\n</a>\n</li>\n</ul>\n</li>\n"+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"isDeleted"):t,{name:"unless",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:0},end:{line:48,column:11}}}))?a:"")+"</ul>\n"},useData:!0})}),define("home/views/DiscussionCoverActionsView",["home/views/ThreadCardDefaultFooterView","home/templates/discussionCoverActions"],function(e,t){"use strict";var n=e,i=n.prototype;return n.extend({template:t,toggleThreadFavorited:function(e){i.toggleThreadFavorited.call(this,e),this.$("[data-action=favorite]").addClass("animate-recommend")}})}),define("home/views/common/DiscussionCoverBaseView",["backbone-marionette","core/strings","core/bus","home/models/Session","home/views/DiscussionBannerView","home/views/DiscussionCoverActionsView","home/views/TopicTagCollectionView","home/mixins/withLoginOverlay","home/mixins/withTruncate","home/mixins/withSubviews"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=e.ItemView,d=t.get,h=u.extend({events:{"click [data-role=message] a":"trackClickLink"},trackClickLink:function(e){n.trigger("uiAction:clickLink",e,{adjective:"message"})},templateHelpers:function(){var e=this.model.thread,t=this.model.channel;return{relativeTime:e.getRelativeCreatedAt(),channel:t&&t.toJSON(),image:e.getImage(),discussionRoute:e.getDiscussionRoute(this.channel)}},initialize:function(e){this.app=e.app,this.session=i.get(),this.channel=this.model.channel,this.channel&&this.listenTo(this.channel,"change",this.render),this.listenTo(this.model.thread,{sync:this.render,"change:extending":this.render})},regions:{bannerRegion:"[data-role=banner]",topicsRegion:"[data-role=topics]",threadActionsRegion:"[data-role=thread-actions]"},onRender:function(){this.model.channel&&(this.activateRegion(this.bannerRegion,this.createBanner),this.activateRegion(this.topicsRegion,this.createTopicsView)),this.activateRegion(this.threadActionsRegion,this.createThreadActions)},createBanner:function(){return new o({model:this.model.channel,app:this.app,session:this.session})},createThreadActions:function(){return new a({el:this.threadActionsRegion.el,model:this.model.thread,channel:this.model.channel})},createTopicsView:function(){return new r({collection:this.model.thread.topics,channel:this.model.channel})}}),m=h.prototype;return s.call(m,t.interpolate(d("Join %(disqus)s to discover more great discussions like these."),{disqus:"Disqus"})),l.call(m),c.call(m),h}),define("home/templates/networkDiscussionCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" is-deleted"},3:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="spacing-right" href="/home/forum/'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"id"):a,t))+'/"\ndata-role="publisher-link">\n<img class="img-round-sm block__item" src="'+s(r(null!=(a=null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"favicon"):a)?l(a,"cache"):a,t))+'" alt="'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"name"):a,t))+'"/>\n</a>\n'},5:function(e,t,n,i,o){return" has-image"},7:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-content__media">\n<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"image"):t)?r(a,"src"):a,t))+')" class="img-cards"></div>\n</div>\n'},9:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-bottom-small">\n<p class="truncate" data-truncate-lines="2" dir="auto">\n'+e.escapeExpression(e.lambda(null!=t?a(t,"description"):t,t))+"\n</p>\n</div>\n"},11:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="text-smaller link-inner-gray spacing-bottom-narrow">\n<span class="icon icon-communities icon__position -inline icon-tiny"></span>\n'+e.escapeExpression(e.lambda(null!=t?a(t,"forumFriendlyUrl"):t,t))+"\n</div>\n"},13:function(e,t,n,i,o){return'<span class="icon icon-lock icon-tiny spacing-right-small"></span>\n'},15:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 Comment",{name:"gettext",hash:{},data:o,loc:{start:{line:56,column:0},end:{line:56,column:23}}}))+"\n"},17:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"%(number)s Comments",{name:"gettext",hash:{number:null!=(a=null!=t?r(t,"thread"):t)?r(a,"posts"):a},data:o,loc:{start:{line:58,column:0},end:{line:58,column:55}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="discussion-page--network">\n<header data-role="banner"></header>\n<div class="section-contained">\n<div class="layout layout--tablet-no-aside'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isDeleted"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:42},end:{line:4,column:84}}}))?a:"")+'">\n<div class="layout__main-with-aside">\n<div class="layout__content -centered">\n<header class="align align--middle spacing-bottom">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"hasFavicon"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:0},end:{line:13,column:7}}}))?a:"")+'<div class="discussion__byline truncate-line">\n<a href="/home/forum/'+l(s(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a)?c(a,"id"):a,t))+'/">\n<strong>'+l(s(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a)?c(a,"name"):a,t))+'</strong>\n</a>\n<time class="bullet text-gray">'+l(s(null!=t?c(t,"relativeTime"):t,t))+'</time>\n</div>\n</header>\n<section class="discussion__content">\n<a href="'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"link"):a,t))+'"\nclass="card-wrap -link"\ndata-role="article-link"\ndata-link-out="'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"signedLink"):a,t))+'">\n<div class="card__content -network'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:34},end:{line:26,column:64}}}))?a:"")+'">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:0},end:{line:31,column:7}}}))?a:"")+'<div class="card-content__body">\n<h2 class="discussion-title text-brand link-default-hover" dir="auto">\n'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"clean_title"):a,t))+'\n</h2>\n<div class="card-content__summary">\n'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"description"):t,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:37,column:0},end:{line:43,column:7}}}))?a:"")+(null!=(a=c(n,"if").call(r,null!=t?c(t,"forumFriendlyUrl"):t,{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:44,column:0},end:{line:49,column:7}}}))?a:"")+'<div class="text-medium text-gray-darker">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isClosed"):a,{name:"if",hash:{},fn:e.program(13,o,0),inverse:e.noop,data:o,loc:{start:{line:51,column:0},end:{line:53,column:7}}}))?a:"")+"<strong>\n"+(null!=(a=c(n,"if").call(r,c(n,"eq").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"posts"):a,1,{name:"eq",hash:{},data:o,loc:{start:{line:55,column:6},end:{line:55,column:25}}}),{name:"if",hash:{},fn:e.program(15,o,0),inverse:e.program(17,o,0),data:o,loc:{start:{line:55,column:0},end:{line:59,column:7}}}))?a:"")+"</strong>\n</div>\n</div>\n</div>\n</div>\n</a>\n</section>\n"+(null!=(a=e.invokePartial(c(i,"threadPostActivity"),t,{name:"threadPostActivity",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n</div>\n<div class="layout__aside hidden-lg">\n<div class="absolute__wrapper -aside">\n<div data-role="sign-up-module"></div>\n<div data-role="channel-module" data-jester-area="channel_sidebar" class="module--aside"></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/NetworkDiscussionCoverView",["underscore","backbone","home/views/ChannelsModuleView","home/views/common/DiscussionCoverBaseView","home/templates/networkDiscussionCover"],function(e,t,n,i,o){"use strict";var a=i,r=i.prototype;return a.extend({template:o,templateHelpers:function(){var t=i.prototype.templateHelpers.apply(this,arguments),n=this.model.thread;return e.defaults({hasFavicon:n.forum.hasFavicon(),forumFriendlyUrl:n.forum.getFriendlyUrl(),description:n.getPlainDescription()},t)},regions:e.defaults({channelRegion:"[data-role=channel-module]"},r.regions),onRender:function(){r.onRender.call(this),this.activateRegion(this.channelRegion,this.createChannelsView)},createChannelsView:function(){var i=new t.Collection;return this.model.channels.ensureFetched().then(e.bind(function(){i.reset(e.shuffle(this.model.channels.items.models))},this)),new n({collection:i})}})}),define("core/WindowBus",["jquery","underscore","backbone","modernizr"],function(e,t,n,i){"use strict";return n.Model.extend({initialize:function(){i.localstorage&&e(window).on("storage",t.bind(this.onStorageEvent,this))},broadcast:function(e,t){if(i.localstorage){var n=JSON.stringify({name:e,data:t,time:(new Date).getTime()});try{window.localStorage.setItem(this.constructor.STORAGE_KEY,n)}catch(e){}}},onStorageEvent:function(e){var t=e.originalEvent.key,n=e.originalEvent.newValue;if(n&&t===this.constructor.STORAGE_KEY)try{n=JSON.parse(n),this.trigger(n.name,n.data)}catch(e){}}},{STORAGE_KEY:"disqus.bus"})}),define("home/templates/relatedDiscussion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="module-recent__media">\n<a href="'+s(r(null!=t?l(t,"discussionRoute"):t,t))+'">\n<img src="'+s(r(null!=(a=null!=t?l(t,"image"):t)?l(a,"src"):a,t))+'" class="img-fit-sm" />\n</a>\n</div>\n'},3:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 Comment",{name:"gettext",hash:{},data:o,loc:{start:{line:17,column:0},end:{line:17,column:23}}}))+"\n"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"%(number)s Comments",{name:"gettext",hash:{number:null!=(a=null!=t?r(t,"thread"):t)?r(a,"posts"):a},data:o,loc:{start:{line:19,column:0},end:{line:19,column:55}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=c(n,"if").call(r,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:7,column:7}}}))?a:"")+'<div class="media-body">\n<a href="'+l(s(null!=t?c(t,"discussionRoute"):t,t))+'" class="module-recent__title spacing-bottom-small">\n<div class="spacing-bottom-narrow">\n<h2 class="truncate" data-truncate-lines="2" dir="auto">\n'+l(s(null!=(a=null!=t?c(t,"thread"):t)?c(a,"clean_title"):a,t))+'\n</h2>\n</div>\n<p class="text-small text-gray">\n'+(null!=(a=c(n,"if").call(r,c(n,"eq").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"posts"):a,1,{name:"eq",hash:{},data:o,loc:{start:{line:16,column:6},end:{line:16,column:25}}}),{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:16,column:0},end:{line:20,column:7}}}))?a:"")+"</p>\n</a>\n</div>\n"},useData:!0})}),define("home/views/RelatedDiscussionView",["backbone-marionette","home/templates/relatedDiscussion","home/mixins/withTruncate"],function(e,t,n){"use strict";var i=e.ItemView.extend({
template:t,className:"module-recent__item",initialize:function(e){this.hideImage=e&&e.hideImage},templateHelpers:function(){var e=this.model.thread;return{image:!this.hideImage&&this.model.thread.getImage(),discussionRoute:e.getDiscussionRoute()}}});return n.call(i.prototype),i}),define("home/templates/relatedDiscussionsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header class="module-header -plain">\n<div class="module-header__title">\n<h2 class="text-gray-darker">\n'+e.escapeExpression(r(n,"gettext").call(a,"More from %(source)s",{name:"gettext",hash:{source:r(n,"getPartial").call(a,"channelAwareForumLink",null!=t?r(t,"forum"):t,{name:"getPartial",hash:{},data:o,loc:{start:{line:4,column:42},end:{line:4,column:84}}})},data:o,loc:{start:{line:4,column:0},end:{line:4,column:86}}}))+'\n</h2>\n</div>\n</header>\n<div data-role="discussions" class="module-body"></div>\n'},useData:!0})}),define("home/views/RelatedDiscussionsModuleView",["backbone-marionette","home/views/RelatedDiscussionView","home/views/ProfileModuleEmptyView","home/templates/relatedDiscussionsModule"],function(e,t,n,i){"use strict";return e.CompositeView.extend({template:i,itemView:t,itemViewContainer:"[data-role=discussions]",emptyView:n})}),define("home/templates/discussionPageChannelInfo",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+e.escapeExpression(e.lambda(null!=t?a(t,"channelAvatar"):t,t))+'" class="img-round-sm block__item" />\n'},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"options"):t)?r(a,"favicon"):a,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:8,column:0},end:{line:12,column:7}}}))?a:""},4:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"options"):t)?r(a,"favicon"):a,t))+'" class="img-round-sm block__item" />\n'},6:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"defaultChannelAvatar"),t,{name:"defaultChannelAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},8:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="spacing-narrow spacing-top">\n<a href="'+s(r(null!=(a=null!=(a=null!=t?l(t,"channel"):t)?l(a,"options"):a)?l(a,"aboutUrlPath"):a,t))+'"\ndata-link-name="about"\ndata-channel-slug="'+s(r(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'"\nclass="button button-outline button-wide text-medium">\n'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Community Guidelines",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:0},end:{line:28,column:34}}}))+"\n</a>\n</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__wrap">\n<div class="aside__header padding-gutter -border-bottom ">\n<div class="align align--middle truncate-line text-medium--discussion">\n<a href="/home/channel/'+s(r(null!=t?c(t,"slug"):t,t))+'/" class="spacing-right">\n'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"channelAvatar"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:5,column:0},end:{line:13,column:7}}}))?a:"")+'</a>\n<a href="/home/channel/'+s(r(null!=t?c(t,"slug"):t,t))+'/" class="link-gray-darker truncate-line">\n<strong>'+s(r(null!=t?c(t,"name"):t,t))+'</strong>\n</a>\n</div>\n<p class="text-gray-dark spacing-top-narrow">\n'+s(r(null!=(a=null!=t?c(t,"options"):t)?c(a,"description"):a,t))+"\n</p>\n"+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"options"):t)?c(a,"aboutUrlPath"):a,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:0},end:{line:31,column:7}}}))?a:"")+'</div>\n<div class="padding-gutter align align--middle">\n'+(null!=(a=e.invokePartial(c(i,"channelMetadataStats"),t,{name:"channelMetadataStats",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n</div>\n<div class="aside__wrap" data-role="guidelines-section">\n<div class="aside__header -padded -border-bottom text-gray-darker">\n<h2>'+s(c(n,"gettext").call(l,"Basic Rules",{name:"gettext",hash:{},data:o,loc:{start:{line:39,column:4},end:{line:39,column:29}}}))+'</h2>\n</div>\n<div class="padding-gutter">\n<div class="guidelines" data-role="guidelines">\n'+(null!=(a=e.invokePartial(c(i,"homeRules"),t,{name:"homeRules",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<a data-link-name="guidelines"\nclass="curtain-truncate text-small"\ndata-action="expand" data-target="[data-role=guidelines]"\nhref="#"\ndata-channel-slug="'+s(r(null!=(a=null!=t?c(t,"channel"):t)?c(a,"slug"):a,t))+'">\n\n'+s(c(n,"gettext").call(l,"Show guidelines",{name:"gettext",hash:{},data:o,loc:{start:{line:51,column:0},end:{line:51,column:29}}}))+'\n<span class="icon__position -inline icon-arrow icon"></span>\n</a>\n<a data-action="collapse" data-target="[data-role=guidelines]" class="hidden text-small" href="#">\n<span class="icon__position -inline icon-arrow-2 icon"></span>\n'+s(c(n,"gettext").call(l,"Collapse guidelines",{name:"gettext",hash:{},data:o,loc:{start:{line:56,column:0},end:{line:56,column:33}}}))+"\n</a>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/DiscussionPageChannelInfoView",["backbone-marionette","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/mixins/withCollapsing","home/templates/discussionPageChannelInfo"],function(e,t,n,i,o){"use strict";var a=e.ItemView.extend({template:o,templateHelpers:function(){var e=this.model.primaryForum,t=e.get("numThreads"),n=e.get("numFollowers");return{numThreads:t&&t.toLocaleString(),numFollowers:n&&n.toLocaleString(),previouslyFollowing:this.previouslyFollowing}},initialize:function(e){this.app=e.app,this.session=e.session,this.previouslyFollowing=this.getIsFollowing(),this.bindToPrimaryForum(),this.listenTo(this,"toggled:follow",this.render)},bindToPrimaryForum:function(){if(!this.model.primaryForum)return void this.listenToOnce(this.model,"changeRelated:primaryForum",this.bindToPrimaryForum);this.listenTo(this.model.primaryForum,"change:numFollowers change:numThreads",this.render)}});return n.call(a.prototype,function(){return this.model}),t.call(a.prototype,function(){return this.model}),i.call(a.prototype,{maxHeight:200,collapsibleSelector:"[data-role=guidelines-section]"}),a}),define("home/mixins/withExpiration",["underscore","modernizr"],function(e,t){"use strict";var n=t.localstorage,i={templateHelpers:function(t){return e.isFunction(t)&&(t=t.call(this)),e.extend({viewExpired:!n||this.getRemainingViews()<=0},t)},events:{"click [data-action=force-expiration]":"forceExpire"},onShow:function(t){e.isFunction(t)&&t.call(this),this.decrementRemainingViews()},forceExpire:function(e){e&&e.preventDefault(),this.setRemainingViews(-1),this.remove()},decrementRemainingViews:e.once(function(){var e=this.getRemainingViews();e>0&&this.setRemainingViews(e-1)}),getRemainingViews:function(){if(n){var e=parseInt(window.localStorage.getItem(this.getExpirationKey()),10);if(!isNaN(e))return e}return this.getNumberOfViews()},getNumberOfViews:function(){return this.defaultViews||5},setRemainingViews:function(e){n&&window.localStorage.setItem(this.getExpirationKey(),e)},getExpirationKey:function(){return e.result(this,"expirationKey")}};return function(){this.templateHelpers=e.wrap(this.templateHelpers,i.templateHelpers),this.onShow=e.wrap(this.onShow,i.onShow),this.events=e.defaults({},this.events,i.events),e.extend(this,e.pick(i,"forceExpire","decrementRemainingViews","getRemainingViews","getNumberOfViews","setRemainingViews","getExpirationKey"))}}),define("home/templates/followChannelPrompt",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"viewExpired"):t,{name:"unless",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:25,column:11}}}))?a:""},2:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="follow-prompt__wrapper">\n<div class="alert -outline spacing-narrow">\n<div class="media">\n'+(null!=(a=l(n,"if").call(r,null!=(a=null!=t?l(t,"options"):t)?l(a,"favicon"):a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:12,column:7}}}))?a:"")+'<div class="media-right">\n<p class="text-larger">\n'+s(l(n,"gettext").call(r,"Enjoy %(channelName)s?",{name:"gettext",hash:{channelName:l(n,"tag").call(r,"strong",{name:"tag",hash:{text:null!=t?l(t,"name"):t},data:o,loc:{start:{line:15,column:49},end:{line:15,column:75}}})},data:o,loc:{start:{line:15,column:0},end:{line:15,column:78}}}))+'\n</p>\n<p class="spacing-narrow">\n'+s(l(n,"gettext").call(r,"It's easy to keep up with %(channelName)s. Just follow and you'll start seeing the latest updates in your home feed. You can follow other channels too!",{name:"gettext",hash:{channelName:null!=t?l(t,"name"):t},data:o,loc:{start:{line:18,column:0},end:{line:18,column:185}}}))+"\n</p>\n"+(null!=(a=e.invokePartial(l(i,"genericFollowButton"),t,{name:"genericFollowButton",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n</div>\n</div>\n"},3:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="media-left spacing-right">\n<a href="/home/channel/'+s(r(null!=t?l(t,"slug"):t,t))+'/">\n<img src="'+s(r(null!=(a=null!=t?l(t,"options"):t)?l(a,"favicon"):a,t))+'" alt="'+s(r(null!=t?l(t,"name"):t,t))+'" class="img-avatar-lg">\n</a>\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"shouldShowAlert"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:26,column:7}}}))?a:""},usePartial:!0,useData:!0})}),define("home/views/FollowChannelPromptView",["backbone-marionette","remote/config","core/mixins/withChannelFollowing","home/mixins/withExpiration","home/models/Session","home/templates/followChannelPrompt"],function(e,t,n,i,o,a){"use strict";var r=e.ItemView.extend({template:a,templateHelpers:function(){return{shouldShowAlert:this.session.isLoggedIn()&&!this.model.primaryForum.get("isFollowing")}},initialize:function(){this.session=o.get(),this.expirationKey="followChannelPrompt-"+this.model.get("slug"),this.defaultViews=t.lounge.follow_channel_prompt_views,this.listenTo(this.session,"change:id",this.render)}});return n.call(r.prototype),i.call(r.prototype),r}),define("home/templates/userGeneratedDiscussionCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" is-deleted"},3:function(e,t,n,i,o){return" is-spam"},5:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--brand spacing-bottom-double align-min-tablet align--between align--middle text-center">\n<div class="text-semibold">'+r(s(n,"gettext").call(a,"Share your discussion to get comments!",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:27},end:{line:18,column:79}}}))+'</div>\n<div class="spacing-narrow">\n<button class="button button-inverted -border-light text-small" data-action="share" data-network="facebook">\n'+r(s(n,"gettext").call(a,"Share on %(facebook)s",{name:"gettext",hash:{facebook:"Facebook"},data:o,loc:{start:{line:21,column:0},end:{line:21,column:57}}}))+'\n</button>\n<button class="button button-inverted -border-light text-small spacing-left" data-action="share" data-network="twitter">\n'+r(s(n,"gettext").call(a,"Share on %(twitter)s",{name:"gettext",hash:{twitter:"Twitter"},data:o,loc:{start:{line:24,column:0},end:{line:24,column:54}}}))+"\n</button>\n</div>\n</div>\n"},7:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--warning text-medium">\n<strong>'+r(s(n,"gettext").call(a,"This discussion has been removed.",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:8},end:{line:32,column:55}}}))+"</strong>\n"+r(s(n,"gettext").call(a,"Seem wrong? Contact %(support)s.",{name:"gettext",hash:{support:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"%(disqus)s Support",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:35,column:5},end:{line:35,column:51}}}),href:"http://disqus.com/support"},data:o,loc:{start:{line:34,column:10},end:{line:35,column:52}}})},data:o,loc:{start:{line:33,column:0},end:{line:35,column:54}}}))+"\n</div>\n"},9:function(e,t,n,i,o){return'<span class="icon-lock icon-small spacing-right-small"></span>\n'},11:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"1 Comment",{name:"gettext",hash:{},data:o,loc:{start:{line:51,column:0},end:{line:51,column:23}}}))+"\n"},13:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"%(number)s Comments",{name:"gettext",hash:{number:null!=(a=null!=t?r(t,"thread"):t)?r(a,"posts"):a},data:o,loc:{start:{line:53,column:0},end:{line:53,column:55}}}))+"\n"},15:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/edit/'+s(r(null!=(a=null!=(a=null!=t?l(t,"thread"):t)?l(a,"forum"):a)?l(a,"id"):a,t))+"/"+s(r(null!=(a=null!=t?l(t,"thread"):t)?l(a,"slug"):a,t))+'/" class="spacing-left text-semibold">\n<span class="icon-cog icon-small spacing-right-small"></span>'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Edit",{name:"gettext",hash:{},data:o,loc:{start:{line:58,column:61},end:{line:58,column:79}}}))+"\n</a>\n"},17:function(e,t,n,i,o){return'<a href="#"\nclass="tooltipped icon__position -inline -allstar"\ndata-action="show-allstar-modal"\ndata-toggle="tooltip"\ndata-placement="top"\ntitle="'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"All-Star",{name:"gettext",hash:{},data:o,loc:{start:{line:76,column:7},end:{line:76,column:29}}}))+'"><span class="icon-allstar allstar__icon"></span></a>'},19:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="reading-block" data-role="message">\n'+(null!=(a=e.lambda(null!=t?r(t,"description"):t,t))?a:"")+"\n</div>\n"},21:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+e.escapeExpression(e.lambda(null!=t?s(t,"embedlyLink"):t,t))+'"\nclass="card-wrap -link card-wrap--sm link-gray-dark"\ndata-role="article-link">\n<div class="card__content'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"image"):t,{name:"if",hash:{},fn:e.program(22,o,0),inverse:e.noop,data:o,loc:{start:{line:97,column:25},end:{line:97,column:55}}}))?a:"")+'">\n'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"image"):t,{name:"if",hash:{},fn:e.program(24,o,0),inverse:e.noop,data:o,loc:{start:{line:98,column:0},end:{line:102,column:7}}}))?a:"")+'<div class="card-content__body text-medium">\n'+(null!=(a=s(n,"if").call(r,null!=(a=null!=(a=null!=t?s(t,"thread"):t)?s(a,"content"):a)?s(a,"title"):a,{name:"if",hash:{},fn:e.program(26,o,0),inverse:e.noop,data:o,loc:{start:{line:104,column:0},end:{line:108,column:7}}}))?a:"")+(null!=(a=s(n,"if").call(r,null!=(a=null!=(a=null!=t?s(t,"thread"):t)?s(a,"content"):a)?s(a,"description"):a,{name:"if",hash:{},fn:e.program(28,o,0),inverse:e.noop,data:o,loc:{start:{line:109,column:0},end:{line:113,column:7}}}))?a:"")+"</div>\n</div>\n</a>\n"},22:function(e,t,n,i,o){return" has-image"},24:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-content__media">\n<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"image"):t)?r(a,"src"):a,t))+')" class="img-cards"></div>\n</div>\n'},26:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h3 class="spacing-bottom-small text-brand link-default-hover" dir="auto">\n'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"content"):a)?r(a,"title"):a,t))+"\n</h3>\n"},28:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="truncate-line link-default-hover" dir="auto">\n'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"thread"):t)?r(a,"content"):a)?r(a,"description"):a,t))+"\n</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header data-role="banner"></header>\n<div class="section-contained">\n<div class="layout -top-spacing layout--tablet-no-aside'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isDeleted"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:55},end:{line:3,column:97}}}))?a:"")+'">\n<div class="layout__main-with-aside">\n<div class="layout__content -centered">\n<div class="alert alert--error spacing-bottom-double spam-hidden'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"showSpamAlert"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:64},end:{line:6,column:100}}}))?a:"")+'" data-role="spam-alert">\n<div class="align-min-tablet align--between align--middle">\n<div class="spacing-narrow">\n'+s(c(n,"gettext").call(r,"This discussion has been marked as spam.",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:54}}}))+'\n</div>\n<div>\n<button data-action="mark-spam" class="button button-small button-inverted -hover-opaque">'+s(c(n,"gettext").call(r,"This isn't spam",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:90},end:{line:12,column:119}}}))+"</button>\n</div>\n</div>\n</div>\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"showSharePrompt"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:0},end:{line:28,column:7}}}))?a:"")+"\n"+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isDeleted"):a,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:30,column:0},end:{line:37,column:7}}}))?a:"")+'<div class="spacing-bottom">\n<header class="spacing-bottom-small" data-role="title-area">\n<div data-role="topics" class="topics--small topics--discussion"></div>\n<h1 class="text-title text-gray-darker">\n'+s(l(null!=(a=null!=t?c(t,"thread"):t)?c(a,"clean_title"):a,t))+'\n</h1>\n</header>\n<div class="padding-top-bottom">\n<a href="#disqus_thread" class="spacing-right text-semibold">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"isClosed"):a,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:47,column:0},end:{line:49,column:7}}}))?a:"")+(null!=(a=c(n,"if").call(r,c(n,"eq").call(r,null!=(a=null!=t?c(t,"thread"):t)?c(a,"posts"):a,1,{name:"eq",hash:{},data:o,loc:{start:{line:50,column:6},end:{line:50,column:25}}}),{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.program(13,o,0),data:o,loc:{start:{line:50,column:0},end:{line:54,column:7}}}))?a:"")+"</a>\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"canEdit"):t,{name:"if",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o,loc:{start:{line:56,column:0},end:{line:60,column:7}}}))?a:"")+'</div>\n</div>\n<section class="discussion__content">\n<div class="align">\n<a class="spacing-right" href="/by/'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"username"):a,t))+'/">\n<img class="img-avatar-md block__item"\nsrc="'+s(l(null!=(a=null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"avatar"):a)?c(a,"cache"):a,t))+'" alt="'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"name"):a,t))+'" />\n</a>\n<div class="discussion__byline">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"isPowerContributor"):a,{name:"if",hash:{},fn:e.program(17,o,0),inverse:e.noop,data:o,loc:{start:{line:70,column:0},end:{line:77,column:9}}}))?a:"")+'<a href="/by/'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"username"):a,t))+'/">\n<strong>'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"name"):a,t))+'</strong>\n</a>\n<br>\n<a href="/by/'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"username"):a,t))+'/" class="link-gray-dark">\n@'+s(l(null!=(a=null!=(a=null!=t?c(t,"thread"):t)?c(a,"author"):a)?c(a,"username"):a,t))+'\n</a>\n<time class="bullet text-gray">'+s(l(null!=t?c(t,"relativeTime"):t,t))+"</time>\n</div>\n</div>\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"description"):t,{name:"if",hash:{},fn:e.program(19,o,0),inverse:e.noop,data:o,loc:{start:{line:88,column:0},end:{line:92,column:7}}}))?a:"")+(null!=(a=c(n,"if").call(r,null!=t?c(t,"hasEmbedlyData"):t,{name:"if",hash:{},fn:e.program(21,o,0),inverse:e.noop,data:o,loc:{start:{line:93,column:0},end:{line:117,column:7}}}))?a:"")+'</section>\n<div class="visible-lg">\n'+(null!=(a=e.invokePartial(c(i,"discussionModerationActions"),t,{name:"discussionModerationActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"+(null!=(a=e.invokePartial(c(i,"threadPostActivity"),t,{name:"threadPostActivity",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div data-role="follow-channel-prompt"></div>\n</div>\n</div>\n<div class="layout__aside hidden-lg">\n<div class="absolute__wrapper -aside" data-role="right-module">\n<div data-role="sign-up-module"></div>\n'+(null!=(a=e.invokePartial(c(i,"discussionModerationActions"),t,{name:"discussionModerationActions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'<div data-role="channel-info" class="module--plain" data-jester-area="channel_info"></div>\n<div data-role="related-stories" data-jester-area="related_sidebar"></div>\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/templates/guidelines",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="padding-double">\n<h4 class="text-larger">'+e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"%(disqus)s Basic Rules",{name:"gettext",hash:{disqus:"Disqus"},data:o,loc:{start:{line:2,column:24},end:{line:2,column:78}}}))+'</h4>\n<div class="spacing-inner -medium spacing-top text-medium">'+(null!=(a=e.invokePartial(r(i,"homeRules"),t,{name:"homeRules",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/UserGeneratedDiscussionCoverView",["underscore","core/mixins/withRichMedia","core/WindowBus","core/UniqueModel","home/mixins/withAllstarPopover","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/mixins/withThreadSharing","home/models/UserProfile","home/views/RelatedDiscussionsModuleView","home/views/common/DiscussionCoverBaseView","home/views/DiscussionPageChannelInfoView","home/views/FollowChannelPromptView","home/templates/userGeneratedDiscussionCover","home/templates/guidelines","home/utils/confirmModal"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f){"use strict";var g=u,v=u.prototype,b=g.extend({template:m,templateHelpers:function(){var t=v.templateHelpers.apply(this,arguments),n=this.model.thread,i=n.get("content"),o=this.session.user.get("isGlobalAdmin"),a=n.get("canEdit"),r=n.get("canModerate"),s=n.get("isSpam");return e.defaults({description:n.getFullDescription(),hasEmbedlyData:i.title||i.description||i.image.url,embedlyLink:n.getLinks()[0],canEdit:a,isGlobalAdmin:o,showSharePrompt:n.get("isNew")&&n.author&&n.author.isSessionUser(),canModerate:r,isSpam:s,showSpamAlert:s&&r},t)},regions:e.defaults({followChannelPromptRegion:"[data-role=follow-channel-prompt]",channelInfoRegion:"[data-role=channel-info]",relatedStoriesRegion:"[data-role=related-stories]"},v.regions),events:e.defaults({"click [data-action=delete-thread]":"deleteThread","click [data-action=close-thread]":"closeThread","click [data-action=open-thread]":"openThread","click [data-action=mark-spam]":"toggleIsSpam","click [data-action=show-guidelines]":"showGuidelines","click [data-action=moderation-dropdown]":"toggleDropdown","click [data-action=blacklist-forum]":"blacklistAuthorOnForum","click [data-action=blacklist-global]":"toggleBlacklistAuthorGlobally"},v.events),initialize:function(t){v.initialize.call(this,t),this.model.thread.getModeratePermissions(this.session),this.model.thread.getEditPermissions(this.session),this.listenTo(this.model.thread,{"change:isClosed change:isDeleted change:canEdit change:canModerate":this.render,"change:isSpam":this.updateSpamIndicators}),this.model.thread.author?this.bindToAuthor():this.model.thread.fetchAuthor().then(e.bind(function(){this.bindToAuthor(),this.render()},this)),this.listenTo(new n,"posts.create",this.showFollowChannelPromptView),this.updateSpamIndicators()},updateSpamIndicators:function(){this.$("[data-role=spam-alert]").toggleClass("is-spam",this.model.thread.get("isSpam"))},bindToAuthor:function(){this.listenTo(this.model.thread.author,"change",this.render)},onRender:function(){v.onRender.call(this);var t=this.model.thread.getMedia();t&&t.length&&this.renderRichMedia(t),this.activateRegion(this.channelInfoRegion,e.partial(this.createChannelInfoView,this.model.channel)),this.activateRegion(this.relatedStoriesRegion,this.createRelatedLinksView)},createRelatedLinksView:function(){return new c({collection:this.model.coverRelatedCollection,className:"module--plain",model:this.model.thread})},showFollowChannelPromptView:function(t){this.model.channel&&this.model.channel.primaryForum&&!t.parent&&t.forum===this.model.channel.primaryForum.get("id")&&this.activateRegion(this.followChannelPromptRegion,e.partial(this.createFollowChannelPromptView,this.model.channel))},createChannelInfoView:function(e){return new d({model:e,app:this.app,session:this.session})},createFollowChannelPromptView:function(e){return new h({model:e})},blacklistAuthorOnForum:function(){this.getAuthorProfile().user.confirmBlacklist({forum:this.model.thread.forum.id,notes:"Added via discussion page",retroactive:!0})},toggleBlacklistAuthorGlobally:function(){var e=this.getAuthorProfile(),t=e.user;t.get("isOnGlobalBlacklist")?t.removeFromBlacklist():t.confirmBlacklist({notes:"Added via discussion page",retroactive:!0})},toggleIsSpam:function(){this.model.thread.toggleIsSpam()},getAuthorProfile:function(){return new i(l,this.model.thread.author.attributes)},deleteThread:function(){this.model.thread.confirmDelete()},closeThread:function(){this.model.thread.close()},openThread:function(){this.model.thread.open()},showGuidelines:function(){f.confirmationPromise(f.TYPES.CLOSE,p(this.model.thread.forum.channel.toJSON()))},toggleDropdown:function(){this.$(".nav-dropdown__item").toggleClass("dropdown-open")}});return o.call(b.prototype),t.call(b.prototype),r.call(b.prototype,function(){return this.model.channel}),a.call(b.prototype,function(){return this.model.channel}),s.call(b.prototype),b}),define("home/utils/embed",["home/models/Session"],function(e){"use strict";return{onEmbedComment:function(){var t=e.get().user;t.set({numPosts:t.get("numPosts")+1})},onEmbedLoaded:function(){}}}),define("home/templates/embedContainer",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="story-thread" id="disqus_thread" data-role="embed"></div>\n'},useData:!0})}),define("home/views/EmbedContainerView",["jquery","underscore","backbone-marionette","core/switches","core/utils/url/serialize","core/WindowBus","home/utils/embed","home/templates/embedContainer","home/mixins/withAllstarPopover"],function(e,t,n,i,o,a,r,s,l){"use strict";function c(e){var t=e.forum.get("pk");return{forum_id:t,forum:{id:t},bin:"embed:promoted_discovery:dynamic:network_default:fallthrough",experiment:"network_default",service:"dynamic",variant:"fallthrough"}}function u(t,n){this.disable_ads=!0,this.forum=t.forum.id,this.page.slug=t.get("slug"),this.page.title=t.get("title"),this.page.url=t.get("link"),this.experiment.force_auto_styles=!0,this.experiment.enable_scroll_container=!0,n&&(this.experiment.sort_order=n),this.callbacks.onNewComment.push(r.onEmbedComment),this.server_side=c(t),this.callbacks.onReady=[function(t,n){"#disqus_thread"===window.document.location.hash&&window.scrollTo(0,e(n.elem).offset().top-90)}]}var d=new a,h=n.ItemView.extend({template:s,initialize:function(e){this.sortOrder=e&&e.sortOrder,this.listenTo(d,"click:allstar",this.showAllstarModal)},onShow:function(){this.model.id&&window.DISQUS.reset({reload:!0,config:t.partial(u,this.model,this.sortOrder)})}});return l.call(h.prototype),h}),define("home/views/LoungeView",["backbone-marionette"],function(e){"use strict";return e.ItemView.extend({template:function(){return"hello world"}})}),define("home/templates/deletedThreadError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="empty-message">\n<img src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:2,column:10},end:{line:2,column:26}}}))+'/img/Pam_Error.png" class="img-responsive" />\n<h2>'+r(s(n,"gettext").call(a,"Darn it!",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:4},end:{line:3,column:26}}}))+'</h2>\n<div class="text-small">\n'+r(s(n,"gettext").call(a,"This discussion could not be found.",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:49}}
}))+'\n</div>\n<div class="text-small">\n'+r(s(n,"gettext").call(a,"Please visit %(discussDisqus)s to learn more.",{name:"gettext",hash:{discussDisqus:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"Discuss Disqus",href:"//disqus.com/home/channel/discussdisqus/"},data:o,loc:{start:{line:9,column:16},end:{line:10,column:22}}})},data:o,loc:{start:{line:8,column:0},end:{line:10,column:24}}}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/templates/discussionPage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="discussion-page">\n<section data-role="discussion-cover"></section>\n<div class="section-contained">\n<div class="layout -top-flush layout--tablet-no-aside">\n<div class="layout__main-with-aside">\n<div class="layout__content -centered">\n<section class="discussion__comments" id="discussion-comments"></section>\n<div class="spacing-bottom spacing-top">\n<button data-action="scroll-top" class="button button-outline -border-muted button-padding-taller button-wide text-medium">\n<span class="icon-arrow-up icon-tiny spacing-right-small"></span>'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Back to Top",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:65},end:{line:10,column:90}}}))+"\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/DiscussionPageView",["jquery","underscore","core/bus","core/utils/storage","home/utils/backboneUtils","home/views/common/TabbedView","home/views/NetworkDiscussionCoverView","home/views/UserGeneratedDiscussionCoverView","home/views/EmbedContainerView","home/views/LoungeView","home/views/FetchingView","home/templates/deletedThreadError","home/templates/discussionPage","home/mixins/withClickLinkTracking"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m){"use strict";var p=a,f=p.prototype,g=p.extend({defaultTab:function(){var e,n=i.get("disqus.sort");return n&&(e=t.findKey(g.TAB_SORTS,function(e){return e===n})),e||"best"},saveDefaultTab:function(e){i.set("disqus.sort",g.TAB_SORTS[e]||g.TAB_SORTS.best)},template:function(e){return e.thread.isDeleted?d(e):h(e)},regions:t.defaults({cover:"[data-role=discussion-cover]",contentRegion:"#discussion-comments",relatedRegion:"[data-role=related]"},f.regions),initialize:function(e){f.initialize.call(this,e),this.app=e.app,this.listenToOnce(this.cover,"show",function(){n.trigger("showDiscussionCover","discussion")}),this.listenTo(this,"change:activeTab",this.saveDefaultTab),this.listenTo(this.model.thread,"sync",this.render),this.noEmbed=e.noEmbed},events:t.defaults({"click a[data-link-name]":"trackClickLink","click button[data-action=scroll-top]":"scrollToTop"},f.events),onDomRefresh:function(){f.onDomRefresh.call(this),this.showCover()},showCover:function(){if(this.model.thread.shouldFetch())return void this.cover.show(new u);var e=this.model.thread.get("isUserGenerated")?s:r,n=new e({model:this.model,app:this.app});n.listenTo(n,"dom:refresh",t.bind(this.updateTabClasses,this)),this.cover.show(n)},getPageTitle:function(){var t=this.model.thread;return e.when(o.getPromiseFor(t,"title"),o.getPromiseFor(t.forum,"name")).then(function(e,t){return e+" · "+t})},getMetaAttrs:function(){var e=this.model.thread;return this.getPageTitle().then(function(t){var n=e.getUserGeneratedImage();return{title:t,description:e.get("message"),image:n&&n.src,type:"article"}})},getChannelSlug:function(){var n=this.model.channel;if(n)return n.get("slug");if(!this.model.thread.shouldFetch())return null;var i=e.Deferred();return this.model.thread.fetch().then(t.bind(function(){var e=this.model.channel;i.resolve(e?e.get("slug"):null)},this)),i.promise()},getPageTrackingParams:function(){var n={forum:this.model.thread.forum.id};return e.when(this.getChannelSlug(),this.getPageTitle()).then(t.bind(function(e,t){e&&(n.channel_slug=e),t&&(n.title=t);var i=this.model.thread.author,o=i&&i.get("username");return o&&(n.author=o),n},this))},getTrackingSection:function(e){return e},getTabView:function(e){return new(this.noEmbed?c:l)({model:this.model.thread,sortOrder:g.TAB_SORTS[e]||"popular"})},scrollToTop:function(){window.scrollTo(0,0)}},{TAB_SORTS:{best:"popular",newest:"desc",oldest:"asc"}});return m.call(g.prototype),g}),define("home/templates/welcome",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<div class="spacing-bottom animate-fade-up-out">\n<span class="button button-fill--green text-medium">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Email verified!",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:52},end:{line:4,column:81}}}))+"</span>\n</div>\n"},3:function(e,t,n,i,o){return'<div>\n<a class="text-small" href="/home/" data-action="complete-onboarding">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Skip",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:0},end:{line:26,column:18}}}))+"\n</a>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="welcome__wrapper text-center padding-default">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showVerifiedMessage"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:6,column:7}}}))?a:"")+'<div class="padding-gutter">\n<img class="img-responsive" src="'+s(l(n,"urlfor").call(r,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:8,column:33},end:{line:8,column:49}}}))+'/img/empty-states/discussions.png">\n</div>\n<h1 class="text-largest text-gray-darker padding-default">\n'+s(l(n,"gettext").call(r,"Welcome to %(disqus)s, %(name)s!",{name:"gettext",hash:{name:null!=(a=null!=t?l(t,"user"):t)?l(a,"name"):a,disqus:"Disqus"},data:o,loc:{start:{line:11,column:0},end:{line:13,column:19}}}))+'</h1>\n<p class="padding-default text-large text-gray-dark">\n'+s(l(n,"gettext").call(r,"Easily find %(greatdiscussions)s being started by people just like you in our channels.",{name:"gettext",hash:{greatdiscussions:l(n,"tag").call(r,"strong",{name:"tag",hash:{text:l(n,"gettext").call(r,"great discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:40},end:{line:16,column:69}}})},data:o,loc:{start:{line:16,column:19},end:{line:16,column:70}}})},data:o,loc:{start:{line:15,column:0},end:{line:16,column:72}}}))+'\n</p>\n<div class="padding-default">\n<a class="button button-fill--brand button-padding-wider text-large" href="/home/explore/">\n'+s(l(n,"gettext").call(r,"Let's go!",{name:"gettext",hash:{},data:o,loc:{start:{line:20,column:0},end:{line:20,column:23}}}))+"\n</a>\n</div>\n"+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"registeredThisWeek"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:0},end:{line:29,column:11}}}))?a:"")+"</div>\n"},useData:!0})}),define("home/views/WelcomeView",["backbone-marionette","core/utils/url/parseQueryString","home/templates/welcome"],function(e,t,n){"use strict";return e.ItemView.extend({template:n,templateHelpers:function(){return{user:this.session.user.toJSON(),registeredThisWeek:this.session.user.registeredThisWeek(),showVerifiedMessage:this.showVerifiedMessage()}},events:{"click [data-action=complete-onboarding]":"completeOnboarding"},initialize:function(e){this.session=e.session,this.listenTo(this.session,"change:id",this.render)},showVerifiedMessage:function(){return!!t().email_verified},getMetaAttrs:function(){return"Welcome"},completeOnboarding:function(){this.session.user.setHomeOnboardComplete(!0)}})}),define("home/templates/channelCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="banner__wrapper" data-role="banner">\n<div class="grad-overlay">\n<div class="section-contained">\n<div class="channel-cover align align--middle align--between">\n<div class="metadata-hidden">\n'+(null!=(a=e.invokePartial(l(i,"channelCoverLogo"),t,{name:"channelCoverLogo",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="metadata-hidden visible-md spacing-left-small">\n<button\nclass="button button-inverted -thick text-large feed-content"\ntitle='+s(l(n,"gettext").call(r,"Info",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:6},end:{line:13,column:24}}}))+'\ndata-action="show-metadata">\n'+s(l(n,"gettext").call(r,"About",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:0},end:{line:15,column:19}}}))+'\n</button>\n</div>\n<div class="metadata-visible">\n<button\nclass="spacing-top-small link-inverted pull-left"\ntitle='+s(l(n,"gettext").call(r,"Feed",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:6},end:{line:21,column:24}}}))+'\ndata-action="hide-metadata">\n<span class="icon icon-left-bracket text-large icon__position"></span>\n</button>\n<h1 class="text-largest text-center">'+s(l(n,"gettext").call(r,"About this Channel",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:37},end:{line:25,column:69}}}))+"</h1>\n</div>\n</div>\n</div>\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"shouldFetch"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:31,column:11}}}))?a:""},usePartial:!0,useData:!0})}),define("home/views/ChannelCoverView",["backbone-marionette","home/models/Session","home/mixins/withChannelBanner","home/templates/channelCover"],function(e,t,n,i){"use strict";var o=e.ItemView.extend({template:i,templateHelpers:function(){return{shouldFetch:this.model.shouldFetch()}},events:{"click [data-action=show-metadata]":"showMetadata","click [data-action=hide-metadata]":"hideMetadata"},initialize:function(){this.session=t.get(),this.listenTo(this.session,"change:id",this.render),this.listenTo(this.model,"changeRelated:primaryForum",this.render)},modelEvents:{sync:"render"},showMetadata:function(){this.trigger("showMetadata",!0)},hideMetadata:function(){this.trigger("showMetadata",!1)}});return n.call(o.prototype),o}),define("home/templates/channelLeadingUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-right">\n<span class="label--default">'+e.escapeExpression(e.lambda(null!=t?a(t,"displayIndex"):t,t))+"</span>\n</div>\n"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isModerator"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:0},end:{line:14,column:7}}}))?a:""},4:function(e,t,n,i,o){return'<span class="label--default -inline">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Mod",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:37},end:{line:13,column:54}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(n,"if").call(r,null!=t?s(t,"displayIndex"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?a:"")+'<div class="avatar-sm__wrapper spacing-right-small">\n'+(null!=(a=e.invokePartial(s(i,"userAvatar"),t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n<div>\n"+(null!=(a=e.invokePartial(s(i,"userName"),t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"hideModBadge"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:0},end:{line:15,column:11}}}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelLeadingUserView",["underscore","backbone-marionette","home/mixins/withChannelAvatar","home/mixins/withAllstarPopover","home/templates/channelLeadingUser"],function(e,t,n,i,o){"use strict";var a=t.ItemView.extend({template:o,tagName:"li",className:"leader-list__item align align--middle",templateHelpers:function(){var t=this.model.get("moderatedForums")||[],n=this.channel&&this.channel.primaryForum;return{isModerator:n&&e.contains(t,n.id),displayIndex:this.showIndex&&this.index+1,hideModBadge:this.hideModBadge}},modelEvents:{"change:moderatedForums":"render"},initialize:function(e){e=e||{},this.channel=e.channel,this.index=e.index,this.showIndex=e.showIndex,this.hideModBadge=e.hideModBadge}});return n.call(a.prototype),i.call(a.prototype),a}),define("home/templates/channelLeadersEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="text-center text-gray padding-double">'+e.escapeExpression(e.lambda(null!=t?a(t,"message"):t,t))+"</div>\n"},useData:!0})}),define("home/views/ChannelLeadersEmptyView",["backbone-marionette","core/strings","home/templates/channelLeadersEmpty"],function(e,t,n){"use strict";var i=t.get;return e.ItemView.extend({template:n,templateHelpers:function(){return{message:this.constructor.MESSAGES[this.type]}},initialize:function(e){this.type=e.type}},{MESSAGES:{leaders:i("No top contributors yet"),mods:i("No moderators yet")}})}),define("home/views/ChannelLeadersCollectionView",["underscore","backbone-marionette","home/views/ChannelLeadingUserView","home/views/ChannelLeadersEmptyView"],function(e,t,n,i){"use strict";return t.CollectionView.extend({itemView:n,emptyView:i,tagName:"ul",className:"leader-list",initialize:function(e){this.collapsedSize=e.collapsedSize,this.type=e.type},itemViewOptions:function(t,i){if(this._showingEmptyView)return{type:this.type};var o=this.collapsedSize;return{channel:this.model.channel,index:i,showIndex:"leaders"===this.type,hideModBadge:"mods"===this.type,className:function(){var t=n.prototype.className;e.isFunction(t)&&(t=t.call(this));var a=t||"";return i>=o&&(a+=" collapsible"),a}}}})}),define("home/templates/channelLeadersModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="nav-tabs -small">\n<li data-action="switch-tab" data-tab="leaders">\n<a href="#">\n'+r(s(n,"gettext").call(a,"Top Contributors",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:0},end:{line:4,column:30}}}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="mods">\n<a href="#">\n'+r(s(n,"gettext").call(a,"Mods %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:s(n,"tag").call(a,"span",{name:"tag",hash:{text:null!=t?s(t,"numMods"):t,class:"nav-tab-stat--simple"},data:o,loc:{start:{line:9,column:55},end:{line:9,column:109}}})},data:o,loc:{start:{line:9,column:0},end:{line:9,column:111}}}))+'\n</a>\n</li>\n</ul>\n<div data-role="leaders-content-area"></div>\n<div data-role="footer" data-action="expand-module" class="aside__expand text-small">'+r(s(n,"gettext").call(a,"See More",{name:"gettext",hash:{},data:o,loc:{start:{line:14,column:85},end:{line:14,column:107}}}))+"</div>\n"},useData:!0})}),define("home/views/ChannelLeadersModuleView",["underscore","home/views/common/TabbedView","home/views/ChannelLeadersCollectionView","home/templates/channelLeadersModule"],function(e,t,n,i){"use strict";return t.extend({className:function(){return this.expanded?"":"collapsed"},defaultTab:function(){return this.model.moderators.items.length&&!this.model.leaders.items.length?"mods":"leaders"},template:i,templateHelpers:function(){return{numMods:this.model.moderators.items.length}},events:e.defaults({"click [data-action=expand-module]":"expandModule"},t.prototype.events),regions:e.defaults({contentRegion:"[data-role=leaders-content-area]"},t.prototype.events),ui:{footer:"[data-role=footer]"},initialize:function(n){t.prototype.initialize.call(this,e.extend({isModule:!0},n));var i=e.bind(this.render,this);this.model.ensureFetchedLeaders().then(i),this.model.ensureFetchedModerators().then(i),this.listenTo(this,"change:activeTab render",this.updateFooter)},expandModule:function(){this.expanded=!0,this.$el.attr("class",this.className()),this.updateFooter()},updateFooter:function(){var t=this.getTabCollection(this.activeTab||e.result(this,"defaultTab"));this.ui.footer.toggleClass("hidden",this.expanded||t.length<=this.constructor.COLLAPSED_SIZE)},getTabCollection:function(e){var t=this.constructor.TAB_CONTENT[e];if(t)return this.model[t].items},getTabView:function(e){var t=this.getTabCollection(e);if(t)return new n({collection:t,model:this.model,collapsedSize:this.constructor.COLLAPSED_SIZE,type:e})}},{TAB_CONTENT:{leaders:"leaders",mods:"moderators"},COLLAPSED_SIZE:5})});define("home/templates/channelMetadata",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-right">\n'+(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"channel"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:8,column:0},end:{line:16,column:7}}}))?a:"")+"</div>\n"},2:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"channelAvatar"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:9,column:0},end:{line:13,column:7}}}))?a:""},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="img-round-sm" src="'+e.escapeExpression(e.lambda(null!=t?r(t,"channelAvatar"):t,t))+'" alt="'+(null!=(a=e.invokePartial(r(i,"forumName"),t,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'">\n'},5:function(e,t,n,i,o){var a;return null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"defaultChannelAvatar"),t,{name:"defaultChannelAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:""},7:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img src="'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"channel"):t)?r(a,"options"):a)?r(a,"favicon"):a,t))+'" class="img-round-sm" />\n'},9:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="spacing-narrow spacing-top">\n<a href="'+s(r(null!=(a=null!=(a=null!=t?l(t,"channel"):t)?l(a,"options"):a)?l(a,"aboutUrlPath"):a,t))+'"\ndata-link-name="about"\ndata-channel-slug="'+s(r(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'"\nclass="button button-outline button-wide">\n\n'+s(l(n,"gettext").call(null!=t?t:e.nullContext||{},"Community Guidelines",{name:"gettext",hash:{},data:o,loc:{start:{line:30,column:0},end:{line:30,column:34}}}))+"\n</a>\n</p>\n"},11:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__wrap hidden" data-role="leaders"></div>\n<div class="aside__wrap" data-role="guidelines-section">\n<div class="aside__header -padded -border-bottom">\n<h2>'+s(l(n,"gettext").call(r,"Basic Rules",{name:"gettext",hash:{},data:o,loc:{start:{line:54,column:4},end:{line:54,column:29}}}))+'</h2>\n</div>\n<div class="padding-gutter">\n<div class="guidelines" data-role="guidelines">\n'+(null!=(a=e.invokePartial(l(i,"homeRules"),t,{name:"homeRules",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<a data-link-name="guidelines"\nclass="curtain-truncate text-small"\ndata-action="expand" data-target="[data-role=guidelines]"\nhref="#"\ndata-channel-slug="'+s(e.lambda(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'">\n\n'+s(l(n,"gettext").call(r,"Show guidelines",{name:"gettext",hash:{},data:o,loc:{start:{line:66,column:0},end:{line:66,column:29}}}))+'\n<span class="icon__position -inline icon-arrow icon"></span>\n</a>\n<a data-action="collapse" data-target="[data-role=guidelines]" class="hidden text-small" href="#">\n<span class="icon__position -inline icon-arrow-2 icon"></span>\n'+s(l(n,"gettext").call(r,"Collapse guidelines",{name:"gettext",hash:{},data:o,loc:{start:{line:71,column:0},end:{line:71,column:33}}}))+"\n</a>\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="metadata-wrapper">\n<div data-role="sign-up-module"></div>\n<div class="aside__wrap">\n<div class="aside__header padding-gutter -border-bottom">\n<div class="align align--middle">\n'+(null!=(a=c(n,"if_any").call(r,null!=t?c(t,"channel"):t,null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"options"):a)?c(a,"favicon"):a,{name:"if_any",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:0},end:{line:18,column:11}}}))?a:"")+'<h2 class="spacing-bottom-small truncate-line">'+l(s(null!=(a=null!=t?c(t,"channel"):t)?c(a,"name"):a,t))+'</h2>\n</div>\n<p class="text-gray spacing-top-narrow ">\n'+l(s(null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"options"):a)?c(a,"description"):a,t))+"\n"+(null!=(a=c(n,"if").call(r,null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"options"):a)?c(a,"aboutUrlPath"):a,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:0},end:{line:33,column:7}}}))?a:"")+'</p>\n</div>\n<div class="padding-gutter align align--middle" data-role="stats">\n'+(null!=(a=e.invokePartial(c(i,"channelMetadataStats"),t,{name:"channelMetadataStats",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n</div>\n<div class="aside__wrap">\n<div class="aside__content padding-gutter text-center">\n<p class="spacing-top-narrow">'+l(c(n,"gettext").call(r,"Have questions about channels?",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:30},end:{line:42,column:74}}}))+'</p>\n<p class="spacing-top-narrow">\n<a href="https://help.disqus.com/customer/en/portal/articles/2458906-channel-help" class="button button-outline button-wide">\n'+l(c(n,"gettext").call(r,"Channel Help",{name:"gettext",hash:{},data:o,loc:{start:{line:45,column:0},end:{line:45,column:26}}}))+"\n</a>\n</p>\n</div>\n</div>\n"+(null!=(a=c(n,"unless").call(r,null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"options"):a)?c(a,"isCurationOnlyChannel"):a,{name:"unless",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:50,column:0},end:{line:75,column:11}}}))?a:"")+'<div data-role="create-channel-module"></div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelMetadataView",["underscore","backbone-marionette","handlebars","core/strings","home/views/ChannelLeadersModuleView","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/mixins/withCollapsing","home/mixins/withLoginOverlay","home/templates/channelMetadata"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=i.get,d=t.Layout.extend({regions:{leadersRegion:"[data-role=leaders]"},template:c,templateHelpers:function(){var e=this.model.channel.primaryForum,t=e.get("numThreads"),n=e.get("numFollowers");return{numThreads:t&&t.toLocaleString(),numFollowers:n&&n.toLocaleString()}},initialize:function(){this.listenTo(this.model.channel,"sync",this.render),this.bindToPrimaryForum()},bindToPrimaryForum:function(){if(!this.model.channel.primaryForum)return void this.listenToOnce(this.model.channel,"changeRelated:primaryForum",this.bindToPrimaryForum);this.listenTo(this.model.channel.primaryForum,"change:numFollowers change:numThreads",this.renderStats)},renderStats:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),this.$("[data-role=stats]").html(n.partials.channelMetadataStats(e))},onDomRefresh:function(){var t=e.bind(this.showLeadersModule,this);this.model.ensureFetchedLeaders().then(t),this.model.ensureFetchedModerators().then(t),this.leadersRegion.show(new o({model:this.model}))},showLeadersModule:function(){(this.model.leaders.items.length||this.model.moderators.items.length)&&this.$("[data-role=leaders]").removeClass("hidden")}});return r.call(d.prototype,function(){return this.model.channel}),a.call(d.prototype,function(){return this.model.channel}),s.call(d.prototype,{maxHeight:200,collapsibleSelector:"[data-role=guidelines-section]"}),l.call(d.prototype,i.interpolate(u("Join %(disqus)s to start your own channel like this one."),{disqus:"Disqus"})),d}),define("home/collections/CategoryCollection",["underscore","backbone","core/api","core/UniqueModel","home/activityExpander","home/models/Channel"],function(e,t,n,i,o,a){"use strict";var r,s=t.Collection.extend({url:n.getURL("channels/listCategories"),model:i.boundModel(a),parse:function(n){return n=t.Collection.prototype.parse.call(this,n.response),e.map(n.items,function(e){return o.buildChannel(n.objects,e.reference)})}},{get:function(){return r||(r=new s,r.fetch()),r}});return s}),define("home/templates/channelCreateForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input class="input--textbox" name="name" type="text" '+(null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:54},end:{line:11,column:105}}}))?a:"")+" />\n"},2:function(e,t,n,i,o){return" disabled"},4:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h2 class="text-larger spacing-bottom-narrow text-gray-darker">'+e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))+"</h2>\n"},6:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"The best names are short, descriptive, and memorable",{name:"gettext",hash:{},data:o,loc:{start:{line:19,column:0},end:{line:19,column:66}}}))+"\n"},8:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"This can't be changed",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:0},end:{line:21,column:35}}}))+"\n"},10:function(e,t,n,i,o){return"selected"},12:function(e,t,n,i,o,a,r){var s,l=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<option value="'+c(l(null!=t?d(t,"slug"):t,t))+'" '+(null!=(s=d(n,"if").call(u,d(n,"eq").call(u,null!=(s=null!=r[1]?d(r[1],"primaryCategory"):r[1])?d(s,"id"):s,null!=t?d(t,"id"):t,{name:"eq",hash:{},data:o,loc:{start:{line:59,column:31},end:{line:59,column:60}}}),{name:"if",hash:{},fn:e.program(10,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:59,column:25},end:{line:59,column:77}}}))?s:"")+">\n"+c(l(null!=t?d(t,"name"):t,t))+"\n</option>\n"},14:function(e,t,n,i,o,a,r){var s,l=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<option value="'+c(l(o&&d(o,"key"),t))+'" '+(null!=(s=d(n,"if").call(u,d(n,"eq").call(u,null!=r[1]?d(r[1],"bannerColor"):r[1],o&&d(o,"key"),{name:"eq",hash:{},data:o,loc:{start:{line:91,column:31},end:{line:91,column:55}}}),{name:"if",hash:{},fn:e.program(10,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:91,column:25},end:{line:91,column:72}}}))?s:"")+">\n"+c(l(t,t))+"\n</option>\n"},16:function(e,t,n,i,o){return"checked"},18:function(e,t,n,i,o){var a;return'<div class="spacing-right-small">\n'+(null!=(a=e.invokePartial((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"channelAvatarWithDefault"),t,{name:"channelAvatarWithDefault",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n"},20:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Create Channel",{name:"gettext",hash:{},data:o,loc:{start:{line:204,column:0},end:{line:204,column:28}}}))+"\n"},22:function(e,t,n,i,o){return e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Update Channel",{name:"gettext",hash:{},data:o,loc:{start:{line:206,column:0},end:{line:206,column:28}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o,a,r){var s,l=null!=t?t:e.nullContext||{},c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form data-role="channel-form">\n<div class="card-wrap">\n<div class="card__body">\n<div class="spacing-bottom form-attribute-input" data-attribute="name">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(u(n,"gettext").call(l,"Name",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:0},end:{line:7,column:18}}}))+'\n</h3>\n<p class="spacing-narrow">\n'+(null!=(s=u(n,"if").call(l,null!=t?u(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,o,0,a,r),inverse:e.program(4,o,0,a,r),data:o,loc:{start:{line:10,column:0},end:{line:14,column:7}}}))?s:"")+'</p>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom">\n'+(null!=(s=u(n,"if").call(l,null!=t?u(t,"isNew"):t,{name:"if",hash:{},fn:e.program(6,o,0,a,r),inverse:e.program(8,o,0,a,r),data:o,loc:{start:{line:18,column:0},end:{line:22,column:7}}}))?s:"")+'</p>\n</div>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="description">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(u(n,"gettext").call(l,"Description",{name:"gettext",hash:{},data:o,loc:{start:{line:29,column:0},end:{line:29,column:25}}}))+'\n</h3>\n<p class="spacing-narrow">\n<textarea class="input--textbox" name="description" type="text" '+(null!=(s=u(n,"unless").call(l,null!=t?u(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(2,o,0,a,r),inverse:e.noop,
data:o,loc:{start:{line:32,column:64},end:{line:32,column:115}}}))?s:"")+">"+c(e.lambda(null!=(s=null!=t?u(t,"options"):t)?u(s,"description"):s,t))+'</textarea>\n</p>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom">'+c(u(n,"gettext").call(l,"Describe what your channel will be discussing in a sentence or two",{name:"gettext",hash:{},data:o,loc:{start:{line:37,column:36},end:{line:37,column:116}}}))+'</p>\n</div>\n</div>\n<div class="spacing-bottom">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(u(n,"gettext").call(l,"Category",{name:"gettext",hash:{},data:o,loc:{start:{line:43,column:0},end:{line:43,column:22}}}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(u(n,"gettext").call(l,"To make it easy for others to find your channel",{name:"gettext",hash:{},data:o,loc:{start:{line:46,column:0},end:{line:46,column:61}}}))+'</p>\n</p>\n\n<span class="form-attribute-input" data-attribute="primaryCategory">\n<label class="align align--middle spacing-bottom-narrow">\n<div class="align align---middle">\n<div class="spacing-right-small spacing-top-small">\n'+c(u(n,"gettext").call(l,"Category (required)",{name:"gettext",hash:{},data:o,loc:{start:{line:53,column:0},end:{line:53,column:33}}}))+'\n</div>\n<div class="spacing-left-small">\n<select class="input--select" name="primary-category" '+(null!=(s=u(n,"unless").call(l,null!=t?u(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(2,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:56,column:54},end:{line:56,column:105}}}))?s:"")+'>\n<option value="" '+(null!=(s=u(n,"unless").call(l,null!=t?u(t,"primaryCategory"):t,{name:"unless",hash:{},fn:e.program(10,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:57,column:17},end:{line:57,column:63}}}))?s:"")+"></option>\n"+(null!=(s=u(n,"each").call(l,null!=t?u(t,"categories"):t,{name:"each",hash:{},fn:e.program(12,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:58,column:0},end:{line:62,column:9}}}))?s:"")+'</select>\n</div>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</span>\n</div>\n</div>\n\n<hr>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="bannerColor">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(u(n,"gettext").call(l,"Channel Color",{name:"gettext",hash:{},data:o,loc:{start:{line:78,column:0},end:{line:78,column:27}}}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(u(n,"gettext").call(l,"Shown in default banner and avatar",{name:"gettext",hash:{},data:o,loc:{start:{line:81,column:0},end:{line:81,column:48}}}))+'</p>\n</p>\n<label class="align align--middle spacing-bottom-narrow">\n<div class="align align---middle">\n<div class="spacing-right-small spacing-top-small">\n'+c(u(n,"gettext").call(l,"Color",{name:"gettext",hash:{},data:o,loc:{start:{line:86,column:0},end:{line:86,column:19}}}))+'\n</div>\n<div class="spacing-left-small">\n<select class="input--select" name="bannerColor" '+(null!=(s=u(n,"unless").call(l,null!=t?u(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(2,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:89,column:49},end:{line:89,column:100}}}))?s:"")+">\n"+(null!=(s=u(n,"each").call(l,null!=t?u(t,"bannerColors"):t,{name:"each",hash:{},fn:e.program(14,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:90,column:0},end:{line:94,column:9}}}))?s:"")+'</select>\n</div>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</div>\n</div>\n\n<hr>\n\n<div class="spacing-bottom">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(u(n,"gettext").call(l,"Banner Background",{name:"gettext",hash:{},data:o,loc:{start:{line:109,column:0},end:{line:109,column:31}}}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(u(n,"gettext").call(l,"What's shown above",{name:"gettext",hash:{},data:o,loc:{start:{line:112,column:0},end:{line:112,column:32}}}))+'</p>\n</p>\n<label class="align align--middle spacing-bottom-narrow">\n<div class="spacing-right">\n<input type="radio" name="banner-type" value="color" checked>\n</div>\n<div class="align align--middle">\n<div class="spacing-right-small">\n'+c(u(n,"gettext").call(l,"Use Channel Color",{name:"gettext",hash:{},data:o,loc:{start:{line:120,column:0},end:{line:120,column:31}}}))+'\n</div>\n</div>\n</label>\n<label class="align spacing-bottom-small">\n<div class="spacing-right">\n<input type="radio" name="banner-type" value="file" '+(null!=(s=u(n,"if").call(l,null!=t?u(t,"banner"):t,{name:"if",hash:{},fn:e.program(16,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:126,column:52},end:{line:126,column:80}}}))?s:"")+'>\n</div>\n<div>\n<div class="align align--middle spacing-bottom-small">\n<div class="spacing-right-small">\n'+c(u(n,"gettext").call(l,"Custom Image",{name:"gettext",hash:{},data:o,loc:{start:{line:131,column:0},end:{line:131,column:26}}}))+'\n</div>\n<div class="spacing-left-small">\n<input type="file" name="banner-image" data-role="banner-image-file-upload">\n</div>\n</div>\n<p class="text-small text-gray">'+c(u(n,"gettext").call(l,"For the best results: 1600 x 220 pixels. May be cropped otherwise.",{name:"gettext",hash:{},data:o,loc:{start:{line:137,column:32},end:{line:137,column:112}}}))+'</p>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</div>\n</div>\n<hr>\n<div class="spacing-bottom form-attribute-input" data-attribute="avatar">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(u(n,"gettext").call(l,"Avatar",{name:"gettext",hash:{},data:o,loc:{start:{line:148,column:0},end:{line:148,column:20}}}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(u(n,"gettext").call(l,"Used when listing your channel",{name:"gettext",hash:{},data:o,loc:{start:{line:151,column:0},end:{line:151,column:44}}}))+'</p>\n</p>\n<label class="align align--middle spacing-bottom-narrow">\n<div class="spacing-right">\n<input type="radio" name="avatarType" value="default" checked>\n</div>\n<div class="align align--middle">\n<div class="spacing-right-small">\n'+c(u(n,"gettext").call(l,"Default",{name:"gettext",hash:{},data:o,loc:{start:{line:159,column:0},end:{line:159,column:21}}}))+'\n</div>\n<div class="spacing-left-small" data-role="default-avatar">\n'+(null!=(s=e.invokePartial(u(i,"defaultChannelAvatar"),t,{name:"defaultChannelAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n</div>\n</label>\n<label class="align spacing-bottom-small">\n<div class="spacing-right">\n<input type="radio" name="avatarType" value="file" '+(null!=(s=u(n,"if").call(l,null!=t?u(t,"channelAvatar"):t,{name:"if",hash:{},fn:e.program(16,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:168,column:51},end:{line:168,column:86}}}))?s:"")+'>\n</div>\n<div>\n<div class="align align--middle spacing-bottom-small">\n<div class="spacing-right-small">\n'+c(u(n,"gettext").call(l,"Custom Image",{name:"gettext",hash:{},data:o,loc:{start:{line:173,column:0},end:{line:173,column:26}}}))+"\n</div>\n"+(null!=(s=u(n,"if").call(l,null!=t?u(t,"channelAvatar"):t,{name:"if",hash:{},fn:e.program(18,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:175,column:0},end:{line:179,column:7}}}))?s:"")+'<div class="spacing-left-small">\n<input type="file" name="avatar" data-role="avatar-file-upload">\n</div>\n</div>\n<p class="text-small text-gray">'+c(u(n,"gettext").call(l,"For the best results: 200 x 200 pixels",{name:"gettext",hash:{},data:o,loc:{start:{line:184,column:32},end:{line:184,column:84}}}))+'</p>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</div>\n</div>\n</div>\n</div>\n<div class="align align--between spacing-bottom">\n<div></div>\n<div class="align-max-mobile">\n<div class="discussion-form__loading">\n<div class="spinner-small"></div>\n</div>\n<button type="button" data-action="cancel-create" class="button text-medium">\n'+c(u(n,"gettext").call(l,"Cancel",{name:"gettext",hash:{},data:o,loc:{start:{line:200,column:0},end:{line:200,column:20}}}))+'\n</button>\n<button type="submit" data-role="channel-form-button" class="button button-fill--brand button--discussion-form text-medium"'+(null!=(s=u(n,"unless").call(l,null!=t?u(t,"sessionUserVerified"):t,{name:"unless",hash:{},fn:e.program(2,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:202,column:123},end:{line:202,column:174}}}))?s:"")+">\n"+(null!=(s=u(n,"if").call(l,null!=t?u(t,"isNew"):t,{name:"if",hash:{},fn:e.program(20,o,0,a,r),inverse:e.program(22,o,0,a,r),data:o,loc:{start:{line:203,column:0},end:{line:207,column:7}}}))?s:"")+"</button>\n</div>\n</div>\n</form>\n"},usePartial:!0,useData:!0,useDepths:!0})}),define("home/templates/channelCreateError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-header">\n<h4 class="modal-title">'+r(s(n,"gettext").call(null!=t?t:e.nullContext||{},"Uh oh, we weren't able to create your channel",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:24},end:{line:2,column:83}}}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+r(e.lambda(null!=(a=null!=t?s(t,"responseJSON"):t)?s(a,"response"):a,t))+"</p>\n</div>\n"},useData:!0})}),define("home/views/ChannelCreateFormView",["underscore","backbone-marionette","handlebars","core/UniqueModel","home/models/Channel","home/collections/CategoryCollection","home/mixins/withChannelAvatar","home/templates/channelCreateForm","home/templates/channelCreateError","home/utils/confirmModal"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=t.ItemView.extend({template:s,templateHelpers:function(){return{sessionUserVerified:this.session.user.get("isVerified"),bannerColors:o.BANNER_COLORS,categories:this.categories.toJSON(),isNew:this.isNew}},events:{submit:"submitChannel","keyup input[name=name]":"handleNameKeyup","change select[name=bannerColor]":"updateBanner","change input[name=banner-type]":"updateBanner","click input[name=banner-type][value=file]":"handleBannerTypeFileClick","change input[name=banner-image]":"handleBannerImageChange","click input[name=avatarType]":"handleAvatarTypeFileClick","change input[name=avatar]":"handleAvatarImageChanage","change select[name=primary-category]":"handlePrimaryCategoryChange","click [data-action=cancel-create]":"navigateBack"},ui:{name:"[name=name]",bannerColor:"[name=bannerColor]",description:"[name=description]",avatar:"[name=avatar]",bannerImage:"[name=banner-image]",defaultAvatar:"[data-role=default-avatar]",form:"[data-role=channel-form]",buttons:"[data-role=channel-form-button]",primaryCategory:"[name=primary-category]"},initialize:function(t){this.modelBackup=e.clone(this.model.attributes),this.session=t.session,this.categories=a.get(),this.isNew=this.model.isNew(),this.listenTo(this.model,"invalid",this.handleValidationError),this.listenTo(this.model,"change:bannerColor change:name",this.updateDefaultAvatar),this.listenTo(this.categories,"sync add remove",this.render)},onClose:function(){this.cancelChanges()},updateDefaultAvatar:function(){var e=this.model.get("name")||"",t=this.model.get("bannerColor");this.ui.defaultAvatar.html(n.partials.defaultChannelAvatar({bannerColorClass:t&&"-"+t,channelInitial:e.charAt(0)}))},getCategoryAttrs:function(e){if(e)return new i(o,{slug:e}).attributes},submitChannel:function(t){t.preventDefault(),this.$(".form-attribute-input").removeClass("is-error"),this.disableForm();var n=this.isNew?"created":"updated",i={name:this.isNew?this.ui.name.val():this.model.get("name"),bannerColor:this.ui.bannerColor.val(),description:this.ui.description.val(),primaryCategory:this.getCategoryAttrs(this.ui.primaryCategory.val())||null},o=this.$("[name=avatarType]:checked").val();if("file"===o){var a=this.getAvatarImageFile();a&&(i.avatar=a)}var r=this.getBannerType(),s="file"===r&&this.getBannerImageFile();s&&(i.banner=s),this.model.save(i,{avatarType:o,bannerType:r,success:e.bind(this.handleSaveSuccess,this,n),error:e.bind(this.handleSaveError,this)})},handleSaveSuccess:function(t,n){this.modelBackup=e.clone(this.model.attributes),this.enableForm(),this.trigger(t,n)},handleNameKeyup:function(){this.model.set("name",this.ui.name.val().trim())},getBannerType:function(){return this.$("[name=banner-type]:checked").val()},getBannerImageFile:function(){return this.ui.bannerImage[0].files[0]},getAvatarImageFile:function(){return this.ui.avatar[0].files[0]},bannerImageExists:function(){return!!(this.getBannerImageFile()||this.model.get("banner")||this.modelBackup.banner||this.model.get("options").alertBackground||this.modelBackup.options.alertBackground)},avatarImageExists:function(){return!!(this.getAvatarImageFile()||this.model.get("avatar")||this.modelBackup.avatar||this.model.get("options").favicon||this.modelBackup.options.favicon)},handleBannerTypeFileClick:function(){if(!this.bannerImageExists())return this.ui.bannerImage.click(),!1;this.updateBanner()},handleAvatarTypeFileClick:function(){if(!this.avatarImageExists())return this.ui.avatar.click(),!1},handleBannerImageChange:function(){var e=!!this.bannerImageExists();this.$("input[name=banner-type][value=file]").prop("checked",e),this.$("input[name=banner-type][value=color]").prop("checked",!e),this.updateBanner()},handleAvatarImageChanage:function(){var e=!!this.avatarImageExists();this.$("input[name=avatarType][value=file]").prop("checked",e),this.$("input[name=avatarType][value=default]").prop("checked",!e)},updateBanner:function(){var e;"file"===this.getBannerType()&&(e=this.getBannerImageFile()||this.modelBackup.banner||this.modelBackup.options.alertBackground),this.model.set({bannerColor:this.ui.bannerColor.val(),banner:e})},cancelChanges:function(){this.model.set(this.modelBackup)},navigateBack:function(){this.cancelChanges(),window.history.back()},handleValidationError:function(t,n){this.enableForm(),e.each(n,function(e){this.$(".form-attribute-input[data-attribute*="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)},this)},handleSaveError:function(e,t){this.enableForm(),c.confirmationPromise(c.TYPES.CLOSE,l(t))},enableForm:function(){this.ui.form.removeClass("is-submitting"),this.ui.buttons.removeAttr("disabled")},disableForm:function(){this.ui.form.addClass("is-submitting"),this.ui.buttons.attr("disabled","disabled")}});return r.call(u.prototype),u}),define("home/templates/channelDiscussionFeed",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.escapeExpression,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-wrap -padded">\n<a href="/home/discuss/'+r(e.lambda(null!=(a=null!=(a=null!=t?l(t,"channel"):t)?l(a,"primaryForum"):a)?l(a,"id"):a,t))+'/" class="button button-padding-taller button-wide">\n<div class="align align--between align--middle">\n<div class="align__item">\n<span class="icon-create-discussion text-small icon__position -inline"></span>\n'+r(l(n,"gettext").call(s,"What do you want to discuss?",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:0},end:{line:7,column:42}}}))+'\n</div>\n<div class="align__item">\n<button class="button button-outline text-medium">'+r(l(n,"gettext").call(s,"Discuss",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:50},end:{line:10,column:71}}}))+"</button>\n</div>\n</div>\n</a>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=r(n,"unless").call(null!=t?t:e.nullContext||{},null!=(a=null!=(a=null!=t?r(t,"channel"):t)?r(a,"options"):a)?r(a,"isCurationOnlyChannel"):a,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:15,column:11}}}))?a:"")+'<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ChannelDiscussionFeedView",["home/views/common/FetchableCollectionLayout","home/templates/channelDiscussionFeed"],function(e,t){"use strict";return e.extend({template:t,templateHelpers:function(){return{channel:this.channel.toJSON()}},initialize:function(t){e.prototype.initialize.call(this,t),this.channel=t.channel}})}),define("home/templates/channelTopicTab",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="button--tag -inverted button-large">'+e.escapeExpression(e.lambda(null!=t?a(t,"topicName"):t,t))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert--topics">\n<div class="align align--between">\n<div class="align align--wrap align--middle">\n<div class="spacing-right">\n<strong>'+s(l(n,"gettext").call(r,"Channel Topic",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:8},end:{line:5,column:35}}}))+":</strong>\n</div>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"topicName"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:0},end:{line:9,column:7}}}))?a:"")+'</div>\n\n<a href="/home/channel/'+s(e.lambda(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'/" class="link-green-dark" title="'+s(l(n,"gettext").call(r,"Remove Filter",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:73},end:{line:12,column:100}}}))+'">\n<span class="icon-cancel icon-tiny"></span>\n</a>\n</div>\n</div>\n<div data-role="header-area"></div>\n<div data-role=\'content-area\'></div>\n<div data-role=\'footer-area\'></div>\n'},useData:!0})}),define("home/views/ChannelTopicTabView",["home/views/common/FetchableCollectionLayout","home/templates/channelTopicTab"],function(e,t){"use strict";return e.extend({template:t,templateHelpers:function(){return{topicName:this.filteredTopic.get("displayName"),channel:this.channel.toJSON()}},initialize:function(t){e.prototype.initialize.call(this,t),this.channel=t.channel,this.filteredTopic=t.filteredTopic,this.listenTo(this.filteredTopic,"change:displayName",this.render)}})}),define("home/templates/channelModeratorUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<span class="label--default -inline">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Creator",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:37},end:{line:6,column:58}}}))+"</span>\n"},3:function(e,t,n,i,o){return'<div class="user-card__button">\n<button class="button button-outline button-small" data-action="remove-moderator">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Remove",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:0},end:{line:12,column:20}}}))+"\n</button>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(a=e.invokePartial(s(i,"userAvatar"),t,{name:"userAvatar",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(s(i,"userName"),t,{name:"userName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+(null!=(a=s(n,"if").call(r,null!=t?s(t,"isChannelOwner"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:0},end:{line:7,column:7}}}))?a:"")+"</div>\n"+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"isChannelOwner"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:15,column:11}}}))?a:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelModeratorUserView",["backbone-marionette","home/templates/channelModeratorUser"],function(e,t){"use strict";return e.ItemView.extend({className:"card",template:t,templateHelpers:function(){return{isChannelOwner:this.isChannelOwner}},initialize:function(e){this.channel=e.channel,this.isChannelOwner=this.channel.get("owner_id")===this.model.get("id")},events:{"click [data-action=remove-moderator]":"removeModerator"},removeModerator:function(){this.model.moderateChannel(this.channel,!1)}})}),define("home/templates/channelModeratorForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form data-role="channel-moderator-form">\n<div class="form-attribute-input" data-attribute="username">\n<div class="align spacing-bottom">\n<div class="align__item--grow spacing-right">\n<input class="input--textbox" name="username" type="text"\nplaceholder="'+r(s(n,"gettext").call(a,"Add a new moderator by username",{name:"gettext",hash:{},data:o,loc:{start:{line:6,column:13},end:{line:6,column:58}}}))+'" >\n</div>\n<button type="submit" class="button button-outline button-small">\n'+r(s(n,"gettext").call(a,"Add",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:17}}}))+'\n</button>\n</div>\n<p data-role="attribute-error" class="form-message-error spacing-bottom-narrow text-semibold text-small"></p>\n</div>\n<p data-role="subtext" class="spacing-narrow text-gray text-small">\n'+r(s(n,"gettext").call(a,"People you add will receive a notification that they're now a moderator of this channel.",{name:"gettext",hash:{},data:o,loc:{start:{line:15,column:0},end:{line:15,column:102}}}))+"\n</p>\n</form>\n"},useData:!0})}),define("home/views/ChannelModeratorFormView",["underscore","backbone-marionette","core/strings","core/UniqueModel","home/models/User","home/templates/channelModeratorForm"],function(e,t,n,i,o,a){"use strict";var r=n.get;return t.ItemView.extend({template:a,ui:{username:"input[name=username]",form:"form[data-role=channel-moderator-form]",submit:"button[type=submit]"},events:{submit:"addModerator","blur input[name=username]":"clearValidationErrors"},addModerator:function(t){t&&t.preventDefault();var n=this.ui.username.val(),a=new i(o,{username:n}),r=this.model.validateNewModerator(a);if(r)return void this.handleValidationError(this.model,r);this.disableForm(),a.moderateChannel(this.model.channel,!0).always(e.bind(this.enableForm,this)).done(e.bind(this.clearForm,this)).fail(e.bind(this.handleSaveError,this))},handleSaveError:function(e){var t=e.responseJSON.response;/User matching query does not exist/.test(t)?t=r("No user exists with that username"):/(?:You must be authenticated)|(?:You do not have admin privileges)/.test(t)&&(t=r("You do not have permission to add moderators to this channel")),this.handleValidationError(this.model,{attrName:"username",message:t})},handleValidationError:function(t,n){e.isArray(n)||(n=[n]),e.each(n,function(e){this.$(".form-attribute-input[data-attribute*="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)},this)},clearValidationErrors:function(){this.$(".form-attribute-input.is-error").removeClass("is-error")},clearForm:function(){this.ui.username.val("")},enableForm:function(){this.ui.form.removeClass("is-submitting"),this.ui.submit.removeAttr("disabled")},disableForm:function(){this.ui.form.addClass("is-submitting"),this.ui.submit.attr("disabled","disabled")}})}),define("home/templates/channelModerators",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="padding-default">\n<div class="spacing-default">\n<h1 class="text-larger text-gray-darker spacing-bottom-narrow">'+r(s(n,"gettext").call(a,"Moderators",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:63},end:{line:3,column:87}}}))+'</h1>\n<p class="text-gray">'+r(s(n,"gettext").call(a,"Add moderators to help manage your channel. Moderators can mark discussions and comments as spam, as well as ban unwanted users.",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:21},end:{line:4,column:163}}}))+'</p>\n</div>\n</div>\n<section data-role="moderators" class="channel-mod__list"></section>\n<div class="padding-default">\n<section data-role="moderator-form" class="spacing-default"></section>\n</div>\n'},useData:!0})}),define("home/views/ChannelModeratorsView",["backbone-marionette","home/views/ChannelModeratorUserView","home/views/ChannelModeratorFormView","home/mixins/withSubviews","home/templates/channelModerators"],function(e,t,n,i,o){"use strict";var a=e.ItemView.extend({template:o,className:"card-wrap",regions:{moderatorsRegion:"[data-role=moderators]",moderatorFormRegion:"[data-role=moderator-form]"},onRender:function(){this.activateRegion(this.moderatorsRegion,this.createModeratorsView),this.activateRegion(this.moderatorFormRegion,this.createModeratorFormView)},createModeratorsView:function(){return new e.CollectionView({itemView:t,itemViewOptions:{channel:this.model.channel},collection:this.model.moderators.items})},createModeratorFormView:function(){return new n({model:this.model})}});return i.call(a.prototype),a}),define("home/templates/channelProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li data-action="switch-tab" data-tab="recent" class="nav__item">\n<a href="/home/channel/'+r(e.lambda(null!=(a=null!=t?s(t,"channel"):t)?s(a,"slug"):a,t))+'/recent/" data-action="hide-metadata" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-discussions"></span>\n<span class="button__text">'+r(s(n,"gettext").call(null!=t?t:e.nullContext||{},"Latest",{name:"gettext",hash:{},data:o,loc:{start:{line:30,column:27},end:{line:30,column:47}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'},3:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section data-role="admin-nav" class="hidden-lg">\n<div class="aside__subheadings">\n<h2 class="text-subheading">'+s(c(n,"gettext").call(r,"Channel settings",{name:"gettext",hash:{},data:o,loc:{start:{line:44,column:28},end:{line:44,column:58}}}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li class="nav__item" data-action="switch-tab" data-tab="basics">\n<a href="/home/channel/'+s(l(null!=(a=null!=t?c(t,"channel"):t)?c(a,"slug"):a,t))+'/basics/" data-action="hide-metadata" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+s(c(n,"gettext").call(r,"Basics",{name:"gettext",hash:{},data:o,loc:{start:{line:50,column:27},end:{line:50,column:47}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li class="nav__item" data-action="switch-tab" data-tab="moderators">\n<a href="/home/channel/'+s(l(null!=(a=null!=t?c(t,"channel"):t)?c(a,"slug"):a,t))+'/moderators/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+s(c(n,"gettext").call(r,"Moderators",{name:"gettext",hash:{},data:o,loc:{start:{line:60,column:27},end:{line:60,column:51}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</section>\n'},5:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section data-role="admin-nav" class="hidden-lg">\n<div class="aside__subheadings">\n<h2 class="text-subheading">'+s(c(n,"gettext").call(r,"Admin links",{name:"gettext",hash:{},data:o,loc:{start:{line:73,column:28},end:{line:73,column:53}}}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li class="nav__item">\n<a href="//'+s(l(null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"primaryForum"):a)?c(a,"id"):a,t))+'.disqus.com/admin/moderate/" class="nav-lnk -color-muted" target="_blank">\n'+s(c(n,"gettext").call(r,"Moderate",{name:"gettext",hash:{},data:o,loc:{start:{line:78,column:0},end:{line:78,column:22}}}))+'\n</a>\n</li>\n<li class="nav__item">\n<a href="//'+s(l(null!=(a=null!=(a=null!=t?c(t,"channel"):t)?c(a,"primaryForum"):a)?c(a,"id"):a,t))+'.disqus.com/admin/access/banned/" class="nav-lnk -color-muted" target="_blank">\n'+s(c(n,"gettext").call(r,"Banned users",{name:"gettext",hash:{},data:o,loc:{start:{line:83,column:0},end:{line:83,column:26}}}))+"\n</a>\n</li>\n"+(null!=(a=c(n,"if").call(r,null!=t?c(t,"isDisqusAdmin"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:86,column:0},end:{line:92,column:7}}}))?a:"")+"</ul>\n</section>\n"},6:function(e,t,n,i,o){var a,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="nav__item">\n<a href="//'+r(e.lambda(null!=(a=null!=(a=null!=t?s(t,"channel"):t)?s(a,"primaryForum"):a)?s(a,"id"):a,t))+'.disqus.com/admin/analytics/" class="nav-lnk -color-muted" target="_blank">\n'+r(s(n,"gettext").call(null!=t?t:e.nullContext||{},"Analytics",{name:"gettext",hash:{},data:o,loc:{start:{line:89,column:0},end:{line:89,column:23}}}))+"\n</a>\n</li>\n"},8:function(e,t,n,i,o,a,r){var s,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="hidden-lg">\n<div class="aside__subheadings text-subheading">\n<h2>\n'+e.escapeExpression(c(n,"gettext").call(l,"Channel topics",{name:"gettext",hash:{},data:o,loc:{start:{line:101,column:0},end:{line:101,column:28}}}))+'\n</h2>\n</div>\n<div class="aside__wrap">\n<ul class="tag-list">\n'+(null!=(s=c(n,"each").call(l,null!=t?c(t,"trendingTopics"):t,{name:"each",hash:{},fn:e.program(9,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:106,column:0},end:{line:112,column:9}}}))?s:"")+"</ul>\n</div>\n</div>\n"},9:function(e,t,n,i,o,a,r){var s,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li data-action="switch-tab" data-tab="topic-'+c(l(null!=t?u(t,"identifier"):t,t))+'">\n<a href="/home/channel/'+c(l(null!=(s=null!=r[1]?u(r[1],"channel"):r[1])?u(s,"slug"):s,t))+"/topics/"+c(l(null!=t?u(t,"identifier"):t,t))+'" class="button--tag">\n'+c(l(null!=t?u(t,"displayName"):t,t))+"\n</a>\n</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o,a,r){var s,l=null!=t?t:e.nullContext||{},c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'<header data-role="cover"></header>\n<div class="nav-wrapper feed-content" id="content-area">\n</div>\n<div class="section-contained">\n<div class="layout">\n<div class="layout__main-with-aside">\n<nav class="layout__nav">\n<section data-role="default-nav">\n<div class="aside__subheadings hidden-lg">\n<h2 class="text-subheading">'+c(u(n,"gettext").call(l,"Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:28},end:{line:11,column:53}}}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li data-action="switch-tab" data-tab="top" class="nav__item">\n<a href="/home/channel/'+c(e.lambda(null!=(s=null!=t?u(t,"channel"):t)?u(s,"slug"):s,t))+'/top/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-popular"></span>\n<span class="button__text">'+c(u(n,"gettext").call(l,"Recommended",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:27},end:{line:18,column:52}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'+(null!=(s=u(n,"unless").call(l,null!=(s=null!=(s=null!=t?u(t,"channel"):t)?u(s,"options"):s)?u(s,"isCurationOnlyChannel"):s,{name:"unless",hash:{},fn:e.program(1,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:25,column:0},end:{line:37,column:11}}}))?s:"")+"</ul>\n</section>\n\n"+(null!=(s=u(n,"if").call(l,null!=t?u(t,"isSessionUserChannelOwner"):t,{name:"if",hash:{},fn:e.program(3,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:41,column:0},end:{line:69,column:7}}}))?s:"")+(null!=(s=u(n,"if").call(l,null!=t?u(t,"isChannelModerator"):t,{name:"if",hash:{},fn:e.program(5,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:70,column:0},end:{line:95,column:7}}}))?s:"")+"\n"+(null!=(s=u(n,"if").call(l,null!=t?u(t,"trendingTopics"):t,{name:"if",hash:{},fn:e.program(8,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:97,column:0},end:{line:116,column:7}}}))?s:"")+'</nav>\n<section class="layout__content feed-content">\n<div data-role="email-verification-alert"></div>\n<div data-role="content-area"></div>\n</section>\n</div>\n<aside class="layout__aside metadata-content" data-role="metadata">\n</aside>\n</div>\n</div>\n'},useData:!0,useDepths:!0})}),define("home/views/ChannelProfileView",["underscore","core/utils/auth","home/utils/backboneUtils","home/utils/confirmModal","home/utils/navigationUtils","home/views/common/TabbedView","home/views/ChannelCoverView","home/views/ChannelMetadataView","home/views/ChannelCardCollectionView","home/views/ChannelCreateFormView","home/views/common/FetchableCollectionLayout","home/views/ChannelFeedFooterView","home/views/UserCollectionView","home/views/ChannelDiscussionFeedView","home/views/ChannelTopicTabView","home/views/ChannelModeratorsView","home/templates/channelProfile","home/templates/guidelines","home/templates/spinnerTall","core/UniqueModel","home/models/Session","home/models/Topic","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert","core/strings"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v,b,y,w,x,k,C,_){"use strict";var P=_.get,T=a.extend({className:"channel-profile",defaultTab:function(){return"top"},template:function(e){return e.channel.name?g(e):b(e)},templateHelpers:function(){var e=t.getFromCookie().staff;return{isDisqusAdmin:e,isChannelModerator:e||this.model.moderators.items.contains(this.session.user),isSessionUserChannelOwner:this.isSessionUserChannelOwner()}},regions:e.defaults({coverRegion:"[data-role=cover]",metadataRegion:"[data-role=metadata]"},a.prototype.regions),initialize:function(t){t&&"guidelines"===t.activeTab&&(t.activeTab=e.result(this,"defaultTab"),this.listenToOnce(this,"show",this.showGuidelines)),this.session=w.get(),a.prototype.initialize.apply(this,arguments),this.listenTo(this.model.channel,"sync",this.render),this.listenTo(this.model.moderators,"items:sync",this.render),this.model.trendingTopics&&this.listenTo(this.model.trendingTopics,"items:sync",this.render),this.listenTo(this,"change:activeTab",this.updateTabSpecificModules)},events:e.defaults({"click a[data-link-name]":"trackClickLink","click [data-action=show-guidelines]":"showGuidelines","click [data-action=hide-metadata]":"hideMetadata"},a.prototype.events),hideMetadata:function(){this.trigger("showMetadata",!1)},showGuidelines:function(){var e=this;n.getPromiseFor(this.model.channel,"name").then(function(){var t=v(e.model.channel.toJSON());i.confirmationPromise(i.TYPES.CLOSE,t).always(function(){o.navigate("/home/channel/"+e.model.id+"/",{replace:!0,silent:!0})})})},onDomRefresh:function(){if(this.$(this.coverRegion.el).length){var e=new r({model:this.model.channel});this.listenTo(e,"showMetadata",this.showMetadata),this.coverRegion.show(e),this.metadataRegion.show(new s({model:this.model})),a.prototype.onDomRefresh.apply(this,arguments)}},updateTabSpecificModules:function(e){var t=/^topic-.+/.test(e);this.$("[data-role=default-nav]").toggleClass("hidden",t)},showMetadata:function(e){this.$el.toggleClass("metadata-view",e)},getTrackingSection:function(e){return e},getTabView:function(e){var t;switch(e){case"recent":return new m({model:this.model.recentActivities,collection:this.model.recentActivities.items,fetchableCollectionView:l,fetchableCollectionFooterView:d,channel:this.model.channel,isChannelFeed:!0,infiniteScroll:!0,filterVerbs:["trending"]});case"top":return new m({model:this.model.topActivities,collection:this.model.topActivities.items,fetchableCollectionView:l,fetchableCollectionFooterView:d,channel:this.model.channel,isChannelFeed:!0,infiniteScroll:!0});case"followers":return t=new u({model:this.model.followers,collection:this.model.followers.items,fetchableCollectionView:h,fetchableCollectionFooterView:d,infiniteScroll:!0}),t.$el.attr({class:"card-wrap"}),t;case"basics":return this.isSessionUserChannelOwner()?(t=new c({model:this.model.channel,session:this.session}),this.listenTo(t,"updated",function(e){o.navigate("/home/channel/"+e.id+"/",{trigger:!0})}),t):void this.trigger("badTab");case"moderators":return this.isSessionUserChannelOwner()?new f({model:this.model}):void this.trigger("badTab")}var n=e.match(/^topic-(.+)/);if(n){if(!this.model.trendingTopics)return;var i=n[1],a=this.model.getFetchedTopicFilteredFeed(i);return new p({model:a,collection:a.items,fetchableCollectionView:l,fetchableCollectionFooterView:d,filteredTopic:new y(x,{identifier:i}),channel:this.model.channel,isChannelFeed:!0,infiniteScroll:!0})}},isSessionUserChannelOwner:function(){return this.model.channel.get("owner_id")===this.session.user.get("id")},getPageTitle:function(){return n.getPromiseFor(this.model.channel,"name").then(function(e){return _.interpolate(P("%(name)s Channel"),{name:e})})},getMetaAttrs:function(){var e=this.model.channel;return this.getPageTitle().then(function(t){var n=e.get("options")||{};return{title:t,image:n.coverImage?n.coverImage.cache:n.tile,description:n.description,type:"article"}})},getPageTrackingParams:function(){var e=this.model.channel;return this.getPageTitle().then(function(t){return{channel_slug:e.get("slug"),title:t}})}});return k.call(T.prototype),C.call(T.prototype),T}),define("home/models/SettingsApp",["core/config","home/models/common/BaseSettings"],function(e,t){"use strict";return t.extend({url:function(){return e.urls.apiSettings+"apps/"+this.id+"/"},toJSON:function(){return{id:this.get("id"),name:this.get("name")}}})}),define("home/collections/SettingsAppCollection",["backbone","core/config","home/models/SettingsApp"],function(e,t,n){"use strict";return e.Collection.extend({url:t.urls.apiSettings+"apps/",model:n})}),define("home/collections/SettingsBlockListCollection",["core/api","core/collections/PaginatedCollection","core/UniqueModel","home/models/User"],function(e,t,n,i){"use strict";return t.extend({PER_PAGE:10,url:e.getURL("users/block/list.json"),model:n.boundModel(i)})}),define("home/models/SettingsModeration",["core/config","home/models/common/BaseSettings","core/UniqueModel"],function(e,t,n){"use strict";var i=t.extend({url:e.urls.apiSettings+"moderation/",toJSON:function(){return{disable_approved:this.get("disable_approved"),receive_unapproved:this.get("receive_unapproved"),receive_spam:this.get("receive_spam"),forum_subscriptions:this.get("forum_subscriptions")}}});return n.addType("SettingsModeration",i),i}),define("home/models/SettingsProfile",["underscore","core/config","home/models/common/BaseSettings","home/models/User","core/UniqueModel"],function(e,t,n,i,o){"use strict";var a=n.extend({url:t.urls.apiSettings+"profile/",useMultiPartForm:!0,initialize:function(){var e={};e[i.prototype.idAttribute]=this.id,this.user=new o(i,e),this.listenTo(this,"change",this.updateUser)},save:function(t,i){return t||(t=e.pick(this.attributes,["display_name","about","location","url","is_private","avatar_file","avatar_source","avatar_facebook","avatar_twitter"])),n.prototype.save.call(this,t,i)},updateUser:function(){var t=e.defaults({cache:this.get("avatar_cache"),permalink:this.get("avatar_permalink"),isCustom:!/noavatar/.test(this.get("avatar_cache"))},this.user.get("avatar"));this.user.set({about:this.get("about"),avatar:t,name:this.get("display_name"),isPrivate:this.get("is_private"),location:this.get("location"),url:this.get("url")})}});return o.addType("SettingsProfile",a),a}),define("home/models/SettingsEmailNotifications",["core/config","home/models/common/BaseSettings","core/UniqueModel"],function(e,t,n){"use strict";var i=t.extend({url:e.urls.apiSettings+"email/",toJSON:function(){return{receive_notifications:this.get("receive_notifications"),receive_welcome_emails:this.get("receive_welcome_emails"),subscribe_thread_on_post:this.get("subscribe_thread_on_post"),replies_to_comments:this.get("replies_to_comments"),digest_frequency:this.get("digest_frequency")}}},{FREQUENCY_NEVER:"never"});return n.addType("SettingsEmailNotifications",i),i}),define("home/templates/settingsBlockingButtons",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset" role="group">\n<button class="button button-outline text-medium spacing-right" data-action="prev-page"'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"hasPrev"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:87},end:{line:2,column:126}}}))?a:"")+">"+s(l(n,"gettext").call(r,"Previous",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:127},end:{line:2,column:149}}}))+'</button>\n<button class="button button-outline text-medium" data-action="next-page"'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"hasNext"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:73},end:{line:3,column:112}}}))?a:"")+">"+s(l(n,"gettext").call(r,"Next",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:113},end:{line:3,column:131}}}))+"</button>\n</div>\n"},useData:!0})}),define("home/views/SettingsUserBlockingNavView",["backbone-marionette","home/templates/settingsBlockingButtons"],function(e,t){"use strict";return e.ItemView.extend({events:{"click [data-action=prev-page]":"prevPage","click [data-action=next-page]":"nextPage"},template:t,initialize:function(){this.listenTo(this.collection,"remove sync",this.render)},templateHelpers:function(){return{hasNext:this.collection.hasNext(),hasPrev:this.collection.hasPrev()}},prevPage:function(e){e.preventDefault(),this.collection.prev()},nextPage:function(e){e.preventDefault(),this.collection.next()}})}),define("home/templates/settingsBlockingEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<p class="text-gray text-medium">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},'You aren\'t blocking any users. To block a user, go to their profile and select "Block User" from the dropdown.',{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:126}}}))+"\n</p>\n"},useData:!0})}),define("home/templates/settingsBlockingUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card--user">\n<div class="user-card__block">\n<a href="/by/'+r(a(null!=t?s(t,"username"):t,t))+'/">\n<strong>'+r(a(null!=t?s(t,"name"):t,t))+'</strong>\n</a>\n</div>\n<div class="user-card__button">\n<button class="button button-fill--brand text-medium" data-action="unblock" data-username="'+r(a(null!=t?s(t,"username"):t,t))+'">'+r(s(n,"gettext").call(null!=t?t:e.nullContext||{},"Unblock",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:105},end:{line:8,column:126}}}))+"</button>\n</div>\n</div>\n"},useData:!0})}),define("home/views/SettingsBlockingUserListView",["backbone-marionette","home/templates/settingsBlockingEmpty","home/templates/settingsBlockingUser"],function(e,t,n){"use strict";return e.CollectionView.extend({itemView:e.ItemView.extend({template:n,className:"block-list"}),emptyView:e.ItemView.extend({template:t,className:"block-list"})})}),define("home/templates/settingsBlocking",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(s(n,"gettext").call(a,"Blocking",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:26}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+r(s(n,"gettext").call(a,"Blocking",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:35},end:{line:7,column:57}}}))+'</h1>\n<p class="form-description text-gray text-medium">'+r(s(n,"gettext").call(a,"Manage the users you've previously blocked on your account. Blocking hides a user's activity across Disqus. Learn more about User Blocking in our %(helpDoc)s.",{name:"gettext",hash:{helpDoc:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"help documentation",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:309},end:{line:8,column:339}}}),href:"https://help.disqus.com/customer/portal/articles/2460515"},data:o,loc:{start:{line:8,column:231},end:{line:8,column:340}}})},data:o,loc:{start:{line:8,column:50},end:{line:8,column:342}}}))+'</p>\n</div>\n<div data-role="alert-message"></div>\n<div data-role="users"></div>\n<div class="form__footer" data-role="buttons"></div>\n</form>\n'},useData:!0})}),define("home/templates/settingsBlockingAlertError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="alert alert--error text-small text-center">\n<span class="icon-warning icon-tiny icon__position -inline"></span>\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Something went wrong while trying to unblock this user. Please check your internet connection and try again.",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:0},end:{line:3,column:122}}}))+'\n<button class="link-inverted spacing-left" data-action="close-alert">\n<span class="icon-cancel icon__position"></span>\n</button>\n</div>\n'},useData:!0})}),define("home/views/SettingsBlockingView",["backbone-marionette","core/api","home/views/SettingsUserBlockingNavView","home/views/SettingsBlockingUserListView","home/templates/settingsBlocking","home/templates/settingsBlockingAlertError"],function(e,t,n,i,o,a){"use strict";return e.Layout.extend({events:{"click [data-action=unblock]":"unblockUser","click [data-action=close-alert]":"closeAlert"},template:o,regions:{alertRegion:"[data-role=alert-message]",buttonsRegion:"[data-role=buttons]",usersRegion:"[data-role=users]"},closeAlert:function(e){e.preventDefault(),this.alertRegion.close()},unblockUser:function(n){n.preventDefault();var i=n.target.getAttribute("data-username"),o=this.collection,r=o.findWhere({username:i}),s=function(){o.remove(r),o.size()||o.fetch()};this.alertRegion.close(),r.unblock().then(s).fail(function(n){var i=n&&n.responseJSON&&n.responseJSON;if((i&&i.code)===t.ERROR_CODES.OBJ_NOT_FOUND&&"UserBlock matching query does not exist."===i.response)return void s();this.alertRegion.show(new e.ItemView({template:a}))}.bind(this))},onDomRefresh:function(){this.usersRegion.show(new i({collection:this.collection})),this.buttonsRegion.show(new n({collection:this.collection}))}})}),define("home/templates/settingsDelete",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(s(n,"gettext").call(a,"Confirm Account Deletion",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:42}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading">'+r(s(n,"gettext").call(a,"Confirm Account Deletion",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:25},end:{line:7,column:63}}}))+'</h1>\n<p class="form-description text-gray text-medium">'+r(s(n,"gettext").call(a,"Doing this will delete any registered sites under this account and the comments contained within them. Comments made by this account on other sites with replies will only be anonymized in order to maintain the context of their discussions. Are you sure?",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:50},end:{line:8,column:317}}}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">\n'+r(s(n,"gettext").call(a,"Let us know why you're leaving (required)",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:0},end:{line:13,column:55}}}))+'\n</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="0">\n'+r(s(n,"gettext").call(a,"I can't get %(Disqus)s to work on my site.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:19,column:0},end:{line:19,column:74}}}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+r(s(n,"gettext").call(a,"The best place to start is our %(knowledgeBase)s. If you are still having issues shoot us an email at %(helpEmail)s and we'll get you taken care of.",{name:"gettext",hash:{helpEmail:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"help@disqus.com",href:"mailto:help@disqus.com"},data:o,loc:{start:{line:25,column:12},end:{line:25,column:74}}}),knowledgeBase:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"Knowledge Base",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:77},end:{line:24,column:103}}}),target:"_blank",href:"https://help.disqus.com"},data:o,loc:{start:{line:24,column:16},end:{line:24,column:104}}})},data:o,loc:{start:{line:23,column:0},end:{line:26,column:2}}}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="1">\n'+r(s(n,"gettext").call(a,"I receive too many emails notifications.",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:0},end:{line:31,column:54}}}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+r(s(n,"gettext").call(a,"To help suppress the amount of email notifications you're receiving, you can change your options here: %(emailNotifications)s.",{name:"gettext",hash:{emailNotifications:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"Settings &gt; Email Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:36,column:82},end:{line:36,column:127}}}),href:"https://disqus.com/home/settings/email/"},data:o,loc:{start:{line:36,column:21},end:{line:36,column:128}}})},data:o,loc:{start:{line:35,column:0},end:{line:37,column:2}}}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="2">\n'+r(s(n,"gettext").call(a,"I spend too much time using %(Disqus)s.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:42,column:0},end:{line:42,column:71}}}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+r(s(n,"gettext").call(a,"One way to control your interaction with %(Disqus)s is to limit the number of emails you receive from us at %(emailNotifications)s.",{name:"gettext",hash:{emailNotifications:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"Settings &gt; Email Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:48,column:82},end:{line:48,column:127}}}),href:"https://disqus.com/home/settings/email/"},data:o,loc:{start:{line:48,column:21},end:{line:48,column:128}}}),Disqus:"Disqus"},data:o,loc:{start:{line:46,column:0},end:{line:49,column:2}}}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="3">\n'+r(s(n,"gettext").call(a,"I don't find %(Disqus)s useful.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:54,column:0},end:{line:56,column:2}}}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+r(s(n,"gettext").call(a,"You may find %(Disqus)s more useful by connecting with more of your friends.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:60,column:0},end:{line:62,column:2}}}))+"\n"+r(s(n,"gettext").call(a,"You can add more of your friends here %(followLink)s or by learning about all our features: %(aboutLink)s",{name:"gettext",hash:{aboutLink:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"https://disqus.com/about/",href:"https://disqus.com/about/"},data:o,loc:{start:{line:65,column:12},end:{line:65,column:87}}}),followLink:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"https://disqus.com/follow/",href:"https://disqus.com/follow/"},data:o,loc:{start:{line:64,column:13},end:{line:64,column:90}}})},data:o,loc:{start:{line:63,column:0},end:{line:66,column:2}}}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="4">\n'+r(s(n,"gettext").call(a,"I can't change my name.",{name:"gettext",hash:{},data:o,loc:{start:{line:71,column:0},end:{line:71,column:37}}}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+r(s(n,"gettext").call(a,"You can change your display name by going to your %(profileSettings)s",{name:"gettext",hash:{profileSettings:s(n,"tag").call(a,"a",{name:"tag",hash:{text:s(n,"gettext").call(a,"Profile settings",{name:"gettext",hash:{},data:o,loc:{start:{line:76,column:81},end:{line:76,column:109}}}),href:"https://disqus.com/home/settings/profile/"},data:o,loc:{start:{line:76,column:18},end:{line:76,column:110}}})},data:o,loc:{start:{line:75,column:0},end:{line:77,column:2}}}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="5">\n'+r(s(n,"gettext").call(a,"Other",{name:"gettext",hash:{},data:o,loc:{start:{line:82,column:0},end:{line:82,column:19}}}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+r(s(n,"gettext").call(a,"Could you explain it further?",{name:"gettext",hash:{},data:o,loc:{start:{line:86,column:0},end:{line:86,column:43}}}))+'\n<br>\n<textarea class="input--textbox" id="delete-other" name="details"></textarea>\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-delete-passwordusername" class="fieldset__label align__item text-gray">'+r(s(n,"gettext").call(a,"Password",{name:"gettext",hash:{},data:o,loc:{start:{line:93,column:92},end:{line:93,column:114}}}))+'</label>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--text">\n<input type="password" class="input--textbox" name="password" id="settings-delete-password" required>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__block align__item">\n<p class="fieldset__description text-gray text-small">\n'+r(s(n,"gettext").call(a,"Please note that it may take up to 24 hours for your account to be removed from the system.",{name:"gettext",hash:{},data:o,loc:{start:{line:103,column:0},end:{line:103,column:105}}}))+'\n</p>\n<p class="fieldset__description fieldset__description--error text-small" data-role="error-alert"></p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><input type="submit" class="button button-fill--brand text-medium" value="'+r(s(n,"gettext").call(a,"Delete my account",{name:"gettext",hash:{},data:o,loc:{start:{line:112,column:103},end:{line:112,column:134}}}))+'"></div>\n</div>\n</div>\n</form>\n'},useData:!0})}),define("home/views/SettingsDeleteView",["jquery","underscore","core/api","core/strings","home/templates/settingsDelete","home/views/common/BaseSettingsView"],function(e,t,n,i,o,a){"use strict";var r=i.get;return a.extend({template:o,events:{"submit form":"handleDeleteAccount","change input[type=radio]":"handleReasonChange"},initialize:function(t){this.session=t.session,e(window).scrollTop(0)},handleReasonChange:function(t){t.preventDefault();var n=e(t.currentTarget);this.$("[data-role=delete-resolution]").addClass("hidden"),n.parent().next("[data-role=delete-resolution]").removeClass("hidden")},handleDeleteAccount:function(n){n.preventDefault();var i=r("This will delete your account permanently. Are you sure?");if(window.confirm(i)){this.updateStatus("is-saving");this.deleteAccount(t.reduce(e(n.originalEvent.target).serializeArray(),function(e,t){return e[t.name]=t.value,e},{})).done(t.bind(this.session.logout,this.session)).fail(t.bind(this.showError,this))}},showError:function(e){var t=e.responseJSON,n=this.$("[data-role=error-alert]");n.text(2===t.code?"Invalid password."===t.response?r("Invalid password."):r("Please select a reason."):t.response),this.updateStatus("")},deleteAccount:function(e){return n.call("internal/users/delete",{method:"POST",data:e})}})}),define("home/templates/settingsProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<option value="gravatar">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Gravatar",{name:"gettext",hash:{},data:o,loc:{start:{line:26,column:25},end:{line:26,column:47}}}))+"</option>\n"},3:function(e,t,n,i,o){return'<option value="twitter">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Twitter",{name:"gettext",hash:{},data:o,loc:{start:{line:29,column:24},end:{line:29,column:45}}}))+"</option>\n"},5:function(e,t,n,i,o){return'<option value="facebook">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Facebook",{name:"gettext",hash:{},data:o,loc:{start:{line:32,column:25},end:{line:32,column:47}}}))+"</option>\n"},7:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="hidden" name="avatar_twitter" value="'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"remotes"):t)?r(a,"twitter"):a)?r(a,"avatar_url"):a,t))+'">\n'},9:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="hidden" name="avatar_facebook"value="'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"remotes"):t)?r(a,"facebook"):a)?r(a,"username"):a,t))+'">\n'},11:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"avatar_file"):a,{name:"each",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:43,column:0},end:{line:45,column:9}}}))?a:""},12:function(e,t,n,i,o){return'<p class="fieldset__description fieldset__description--error text-small">'+e.escapeExpression(e.lambda(t,t))+"</p>\n"},14:function(e,t,n,i,o){return"is-error"},16:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"display_name"):a,{name:"each",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:58,column:0},end:{line:60,column:9}}}))?a:""},18:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"about"):a,{name:"each",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:76,column:0},end:{line:78,column:9}}}))?a:""},20:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"url"):a,{name:"each",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:92,column:0},end:{line:94,column:9}}}))?a:""},22:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?r(t,"errors"):t)?r(a,"location"):a,{name:"each",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:108,column:0},end:{line:110,column:9}}}))?a:""},24:function(e,t,n,i,o){return" checked"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+s(c(n,"gettext").call(r,"Profile",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:25}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+s(c(n,"gettext").call(r,"Profile",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:35},
end:{line:7,column:56}}}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+s(c(n,"gettext").call(r,"Control your profile information, both what it says and what other people see. User profiles are shown across all Disqus sites. To understand what's acceptable to display on profiles, please see %(helpDoc)s.",{name:"gettext",hash:{helpDoc:c(n,"tag").call(r,"a",{name:"tag",hash:{text:c(n,"gettext").call(r,"these rules",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:159},end:{line:10,column:182}}}),target:"blank",href:"https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions"},data:o,loc:{start:{line:10,column:10},end:{line:10,column:183}}})},data:o,loc:{start:{line:9,column:0},end:{line:11,column:2}}}))+'\n</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Avatar",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:51},end:{line:16,column:71}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__avatar align">\n<div class="fieldset__avatar--img align__item"><img src="'+s(l(null!=t?c(t,"avatar_cache"):t,t))+'" alt="profile image" data-role="avatar-img"></div>\n<div class="fieldset__avatar--options align__item">\n<select name="avatar_source">\n<option value="">'+s(c(n,"gettext").call(r,"Choose a method",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:17},end:{line:22,column:47}}}))+'</option>\n<option value="computer">'+s(c(n,"gettext").call(r,"Upload from computer",{name:"gettext",hash:{},data:o,loc:{start:{line:23,column:25},end:{line:23,column:59}}}))+'</option>\n<option value="default">'+s(c(n,"gettext").call(r,"Default",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:24},end:{line:24,column:45}}}))+"</option>\n"+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"remotes"):t)?c(a,"gravatar"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:25,column:0},end:{line:27,column:7}}}))?a:"")+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"remotes"):t)?c(a,"twitter"):a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:28,column:0},end:{line:30,column:7}}}))?a:"")+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"remotes"):t)?c(a,"facebook"):a,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:0},end:{line:33,column:7}}}))?a:"")+"</select>\n"+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"remotes"):t)?c(a,"twitter"):a,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:35,column:0},end:{line:37,column:7}}}))?a:"")+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"remotes"):t)?c(a,"facebook"):a,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:38,column:0},end:{line:40,column:7}}}))?a:"")+'<input type="file" name="avatar_file" data-role="avatar-file-upload" class="hidden">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"avatar_file"):a,{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:42,column:0},end:{line:46,column:7}}}))?a:"")+'</div>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-name" class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Name",{name:"gettext",hash:{},data:o,loc:{start:{line:52,column:73},end:{line:52,column:91}}}))+'</label>\n<div class="fieldset__block align__item '+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"display_name"):a,{name:"if",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:53,column:40},end:{line:53,column:82}}}))?a:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-name" name="display_name" class="input--textbox" value="'+s(l(null!=t?c(t,"display_name"):t,t))+'">\n</div>\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"display_name"):a,{name:"if",hash:{},fn:e.program(16,o,0),inverse:e.noop,data:o,loc:{start:{line:57,column:0},end:{line:61,column:7}}}))?a:"")+'<p class="fieldset__description text-gray text-small">\n'+s(c(n,"gettext").call(r,"If blank, your username will be shown instead. To change your username, go to %(accountSettings)s.",{name:"gettext",hash:{accountSettings:c(n,"tag").call(r,"a",{name:"tag",hash:{text:c(n,"gettext").call(r,"Account",{name:"gettext",hash:{},data:o,loc:{start:{line:64,column:63},end:{line:64,column:82}}}),href:"/home/settings/account/"},data:o,loc:{start:{line:64,column:18},end:{line:64,column:83}}})},data:o,loc:{start:{line:63,column:0},end:{line:65,column:2}}}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-bio" class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Biography",{name:"gettext",hash:{},data:o,loc:{start:{line:70,column:72},end:{line:70,column:95}}}))+'</label>\n<div class="fieldset__block align__item '+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"about"):a,{name:"if",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:71,column:40},end:{line:71,column:75}}}))?a:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-bio" name="about" class="input--textbox" value="'+s(l(null!=t?c(t,"about"):t,t))+'">\n</div>\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"about"):a,{name:"if",hash:{},fn:e.program(18,o,0),inverse:e.noop,data:o,loc:{start:{line:75,column:0},end:{line:79,column:7}}}))?a:"")+'<p class="fieldset__description text-gray text-small">\n'+s(c(n,"gettext").call(r,"Describe yourself in a sentence or two. 200 characters max.",{name:"gettext",hash:{},data:o,loc:{start:{line:81,column:0},end:{line:81,column:73}}}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-website" class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Website",{name:"gettext",hash:{},data:o,loc:{start:{line:86,column:76},end:{line:86,column:97}}}))+'</label>\n<div class="fieldset__block align__item '+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"url"):a,{name:"if",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:87,column:40},end:{line:87,column:73}}}))?a:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-website" class="input--textbox" name="url" value="'+s(l(null!=t?c(t,"url"):t,t))+'">\n</div>\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"url"):a,{name:"if",hash:{},fn:e.program(20,o,0),inverse:e.noop,data:o,loc:{start:{line:91,column:0},end:{line:95,column:7}}}))?a:"")+'<p class="fieldset__description text-gray text-small">\n'+s(c(n,"gettext").call(r,"Link to your profile or website.",{name:"gettext",hash:{},data:o,loc:{start:{line:97,column:0},end:{line:97,column:46}}}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-location" class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Location",{name:"gettext",hash:{},data:o,loc:{start:{line:102,column:77},end:{line:102,column:99}}}))+'</label>\n<div class="fieldset__block align__item '+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"location"):a,{name:"if",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:103,column:40},end:{line:103,column:78}}}))?a:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-location" class="input--textbox" name="location" value="'+s(l(null!=t?c(t,"location"):t,t))+'">\n</div>\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"errors"):t)?c(a,"location"):a,{name:"if",hash:{},fn:e.program(22,o,0),inverse:e.noop,data:o,loc:{start:{line:107,column:0},end:{line:111,column:7}}}))?a:"")+'<p class="fieldset__description  text-gray text-small">'+s(c(n,"gettext").call(r,"Where you're commenting from. 100 characters max.",{name:"gettext",hash:{},data:o,loc:{start:{line:112,column:55},end:{line:112,column:118}}}))+'</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(c(n,"gettext").call(r,"Privacy",{name:"gettext",hash:{},data:o,loc:{start:{line:116,column:51},end:{line:116,column:72}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="is_private"'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"is_private"):t,{name:"if",hash:{},fn:e.program(24,o,0),inverse:e.noop,data:o,loc:{start:{line:120,column:40},end:{line:120,column:73}}}))?a:"")+">\n"+s(c(n,"gettext").call(r,"Keep your profile activity private",{name:"gettext",hash:{},data:o,loc:{start:{line:121,column:0},end:{line:121,column:48}}}))+'\n</label>\n</div>\n<p class="fieldset__description  text-gray text-small">'+s(c(n,"gettext").call(r,"This means no one can follow you or see comments on your profile.",{name:"gettext",hash:{},data:o,loc:{start:{line:124,column:55},end:{line:124,column:134}}}))+'</p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+s(c(n,"gettext").call(r,"Save",{name:"gettext",hash:{},data:o,loc:{start:{line:131,column:134},end:{line:131,column:152}}}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/views/SettingsProfileView",["jquery","underscore","core/config","home/templates/settingsProfile","home/views/common/BaseSettingsView"],function(e,t,n,i,o){"use strict";return o.extend({template:i,events:t.defaults({"change select[name=avatar_source]":"sourceChangeHandler"},o.prototype.events),serializeData:function(){var e=o.prototype.serializeData.call(this,arguments);return t.defaults(e,{remotes:this.model.get("remotes"),avatar_cache:this.model.get("avatar_cache")})},sourceChangeHandler:function(t){var n=e(t.originalEvent.target),i=e("[data-role=avatar-file-upload]"),o=this.$el.find("[data-role=avatar-img]"),a=n.val();"computer"===a?i.removeClass("hidden"):(i.addClass("hidden"),o.attr("src",this.getAvatar(a)))},getAvatar:function(e){switch(e){case"gravatar":return"https://www.gravatar.com/avatar/"+this.model.get("remotes").gravatar.username;case"twitter":return this.ensureHttpsUrl(this.model.get("remotes").twitter.avatar_url);case"facebook":return"https://graph.facebook.com/"+this.model.get("remotes").facebook.username.replace("facebook-","")+"/picture?&height=92&width=92";case"default":return n.urls.avatar.generic}},ensureHttpsUrl:function(e){return e.replace("http:","https:")},getFormData:function(){var e=o.prototype.getFormData.apply(this,arguments);return e.is_private=!!e.is_private,e.avatar_file=this.$form.find("input[name=avatar_file]")[0].files[0]||"",e}})}),define("home/templates/settingsMenu",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="empty-message">\n'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Pick a settings page on the left",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:46}}}))+"\n</div>\n"},useData:!0})}),define("home/views/SettingsMenuView",["backbone-marionette","home/templates/settingsMenu"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/templates/settingsAccount",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<div class="alert alert--success text-semibold">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"Email verified. Now choose a username before someone else grabs it!",{name:"gettext",hash:{},data:o,loc:{start:{line:2,column:48},end:{line:2,column:129}}}))+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=l(n,"if").call(r,null!=t?l(t,"showVerifiedMessage"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?a:"")+'<div data-role="account-form"></div>\n<div data-role="connected-accounts"></div>\n<div class="form">\n<div class="form__header">\n<h1 class="form-heading">'+s(l(n,"gettext").call(r,"Personalization",{name:"gettext",hash:{},data:o,loc:{start:{line:8,column:25},end:{line:8,column:54}}}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+s(l(n,"gettext").call(r,"%(Disqus)s collects anonymous data from you in order to deliver better targeted content and advertising.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:10,column:0},end:{line:12,column:2}}}))+'\n</p>\n</div>\n<div class="form__content">\n<a href="https://help.disqus.com/customer/portal/articles/1657951" class="button button-fill--brand text-medium inline__item">'+s(l(n,"gettext").call(r,"Configure",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:126},end:{line:16,column:149}}}))+'</a>\n</div>\n</div>\n\n<div data-role="delete-form"></div>\n'},useData:!0})}),define("core/engagement/vendor/visibly",[],function(){var e={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(e){"function"==typeof e&&this.visibleCallbacks.push(e)},onHidden:function(e){"function"==typeof e&&this.hiddenCallbacks.push(e)},getPrefix:function(){if(!this.cachedPrefix)for(var e=0;b=this.prefixes[e++];)if(b+this.props[2]in this.q)return this.cachedPrefix=b},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(e){"function"==typeof e&&this.genericCallbacks.push(e);var t=this.genericCallbacks.length;if(t)if(this.cachedPrefix)for(;t--;)this.genericCallbacks[t].call(this,this.visibilityState());else for(;t--;)this.genericCallbacks[t].call(this,arguments[0])},isSupported:function(e){return this._getPropName(2)in this.q},_getPropName:function(e){return""==this.cachedPrefix?this.props[e].substring(0,1).toLowerCase()+this.props[e].substring(1):this.cachedPrefix+this.props[e]},_getProp:function(e){return this.q[this._getPropName(e)]},_execute:function(e){if(e){this._callbacks=1==e?this.visibleCallbacks:this.hiddenCallbacks;for(var t=this._callbacks.length;t--;)this._callbacks[t]()}},_visible:function(){e._execute(1),e.visibilitychange.call(e,"visible")},_hidden:function(){e._execute(2),e.visibilitychange.call(e,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this._getPropName(1),function(){e._nativeSwitch.apply(e,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(e){}},init:function(){this.getPrefix(),this._listen()}};return e.init(),e}),define("core/engagement/page",["jquery","underscore","backbone","core/bus","core/utils","core/engagement/vendor/visibly"],function(e,t,n,i,o,a){"use strict";var r=t.extend(n.Events,{_initialized:!1,isEngaged:!1,resetTimeout:null,ACTIVE_TIMEOUT:6e4});return r._markNotEngaged=function(){r.isEngaged&&(r.isEngaged=!1,r.trigger("change:isEngaged",r.isEngaged,r))},r._markIsEngaged=function(){r.resetTimeout&&r.resetTimeout(),r.isEngaged||(r.isEngaged=!0,r.trigger("change:isEngaged",r.isEngaged,r))},r.start=function(){r._initialized||(r._initialized=!0,a.hidden()||r._markIsEngaged(),a.onVisible(r._markIsEngaged),a.onHidden(r._markNotEngaged),o.isMobileUserAgent()||(r.resetTimeout=t.debounce(r._markNotEngaged,r.ACTIVE_TIMEOUT),r.resetTimeout(),e(window.document).on("mousemove keyup",r._markIsEngaged),e(window).on("scroll",r._markIsEngaged),r.listenTo(i.frame,"window.mousemove window.scroll window.click",r._markIsEngaged)))},r.stop=function(){r._initialized&&(r._initialized=!1,r.resetTimeout=null,r.stopListening(),r.off(),a.visibleCallbacks=[],a.hiddenCallbacks=[],e(window.document).off("mousemove keyup",r._markIsEngaged),e(window).off("scroll",r._markIsEngaged),r._markNotEngaged())},r}),define("home/templates/settingsConnectedAccounts",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="disconnect" data-social="facebook">'+e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Disconnect",{name:"gettext",hash:{},data:o,loc:{start:{line:17,column:102},end:{line:17,column:126}}}))+'</button>\n<small class="text-gray text-small">\n'+(null!=(a=e.invokePartial(r(i,"settingsAccountSocialLink"),null!=(a=null!=t?r(t,"items"):t)?r(a,"facebook"):a,{name:"settingsAccountSocialLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</small>\n</div>\n"},3:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="connect" data-social="facebook">'+r(s(n,"gettext").call(a,"Connect",{name:"gettext",hash:{},data:o,loc:{start:{line:24,column:99},end:{line:24,column:120}}}))+'</button>\n<small class="text-gray text-small">'+r(s(n,"gettext").call(a,"Connect your Facebook account",{name:"gettext",hash:{},data:o,loc:{start:{line:25,column:36},end:{line:25,column:79}}}))+"</small>\n</div>\n"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="disconnect" data-social="twitter">'+e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Disconnect",{name:"gettext",hash:{},data:o,loc:{start:{line:35,column:101},end:{line:35,column:125}}}))+'</button>\n<small class="text-gray text-small">\n'+(null!=(a=e.invokePartial(r(i,"settingsAccountSocialLink"),null!=(a=null!=t?r(t,"items"):t)?r(a,"twitter"):a,{name:"settingsAccountSocialLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</small>\n</div>\n"},7:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="connect" data-social="twitter">'+r(s(n,"gettext").call(a,"Connect",{name:"gettext",hash:{},data:o,loc:{start:{line:42,column:98},end:{line:42,column:119}}}))+'</button>\n<small class="text-gray text-small">'+r(s(n,"gettext").call(a,"Connect your Twitter account",{name:"gettext",hash:{},data:o,loc:{start:{line:43,column:36},end:{line:43,column:78}}}))+"</small>\n</div>\n"},9:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="disconnect" data-social="google">'+e.escapeExpression(r(n,"gettext").call(null!=t?t:e.nullContext||{},"Disconnect",{name:"gettext",hash:{},data:o,loc:{start:{line:53,column:100},end:{line:53,column:124}}}))+'</button>\n<small class="text-gray text-small">\n'+(null!=(a=e.invokePartial(r(i,"settingsAccountSocialLink"),null!=(a=null!=t?r(t,"items"):t)?r(a,"google"):a,{name:"settingsAccountSocialLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</small>\n</div>\n"},11:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="connect" data-social="google">'+r(s(n,"gettext").call(a,"Connect",{name:"gettext",hash:{},data:o,loc:{start:{line:60,column:97},end:{line:60,column:118}}}))+'</button>\n<small class="text-gray text-small">'+r(s(n,"gettext").call(a,"Connect your Google account",{name:"gettext",hash:{},data:o,loc:{start:{line:61,column:36},end:{line:61,column:77}}}))+"</small>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form">\n<div class="form__header">\n<h1 class="form-heading">'+s(l(n,"gettext").call(r,"Connected Accounts",{name:"gettext",hash:{},data:o,loc:{start:{line:3,column:25},end:{line:3,column:57}}}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+s(l(n,"gettext").call(r,"Connect your social media accounts for one-click login and to show off your online presence on your %(Disqus)s profile.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:5,column:0},end:{line:7,column:2}}}))+'\n</p>\n<p class="form-error text-medium" data-role="connected-accounts-alert"></p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Facebook",{name:"gettext",hash:{},data:o,loc:{start:{line:13,column:51},end:{line:13,column:73}}}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(a=l(n,"if").call(r,null!=(a=null!=t?l(t,"items"):t)?l(a,"facebook"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:15,column:0},end:{line:27,column:7}}}))?a:"")+'</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Twitter",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:51},end:{line:31,column:72}}}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(a=l(n,"if").call(r,null!=(a=null!=t?l(t,"items"):t)?l(a,"twitter"):a,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:33,column:0},end:{line:45,column:7}}}))?a:"")+'</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Google",{name:"gettext",hash:{},data:o,loc:{start:{line:49,column:51},end:{line:49,column:71}}}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(a=l(n,"if").call(r,null!=(a=null!=t?l(t,"items"):t)?l(a,"google"):a,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.program(11,o,0),data:o,loc:{start:{line:51,column:0},end:{line:63,column:7}}}))?a:"")+"</div>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/SettingsConnectedAccountsView",["jquery","backbone-marionette","underscore","core/config","core/engagement/page","core/strings","core/utils","home/models/Session","home/models/SettingsSocialAccount","home/templates/settingsConnectedAccounts"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=a.get;return t.ItemView.extend({template:c,events:{"click [data-action=connect]":"connectHandler","click [data-action=disconnect]":"disconnectHandler"},initialize:function(){this.listenTo(this.collection,"reset remove add",this.render),this.session=s.get()},disconnectHandler:function(t){t.preventDefault();var i=e(t.originalEvent.target),o=i.attr("data-social"),a=this.collection.get(o),r=this;a.destroy({wait:!0}).fail(n.bind(r.showDisconnectError,r)).done(function(e){e.success||(this.collection.add(a),r.showDisconnectError())})},showDisconnectError:function(){this.updateSocialStatus(u("Can't disconnect your account."))},connectHandler:function(t){t.preventDefault(),this.authenticate(e(t.originalEvent.target).attr("data-social"))},authenticate:function(e){var t=this.openAuthWindow(e);r.isMobileUserAgent()?this.checkStatusOnPageVisible(e):this.pollAuthWindow(e,t)},openAuthWindow:function(e){var t=this.getConnectUrl(e);return window.open(t,e+"Window","location=0,status=0,width=800,height=400")},getConnectUrl:function(e){return i.urls.oauth[e]+"?ctkn="+this.session.getCsrfToken()},pollAuthWindow:function(e,t){var n=this,i=setInterval(function(){t.closed&&(clearInterval(i),n.getAuthenticationStatus(e))},1e3)},checkStatusOnPageVisible:function(e){var t=this,n=function(i){i&&(t.getAuthenticationStatus(e),o.off("change:isEngaged",n))};o.on("change:isEngaged",n)},getAuthenticationStatus:function(e){var t=this,i=new l({id:e});i.fetch().fail(n.bind(t.showConnectError,t)).done(function(e){e.success?t.collection.add(i):t.showConnectError()})},showConnectError:function(){this.updateSocialStatus(u("Can't connect to your account."))},updateSocialStatus:function(e){this.$("[data-role=connected-accounts-alert]").text(e)}})}),define("home/templates/settingsDeleteForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form">\n<div class="form__header">\n<h1 class="form-heading">'+r(s(n,"gettext").call(a,"Delete Your %(Disqus)s Account",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:3,column:25},end:{line:3,column:87}}}))+'</h1>\n<p class="form-description text-gray text-medium">'+r(s(n,"gettext").call(a,"This can't be reversed, so make sure you're sure this is what you want.",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:50},end:{line:4,column:135}}}))+'</p>\n</div>\n<div class="form__content">\n<a href="#" class="button button-fill--brand text-medium inline__item" data-action="switch-tab" data-tab="delete">'+r(s(n,"gettext").call(a,"Delete",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:114},end:{line:7,column:134}}}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/SettingsDeleteFormView",["backbone-marionette","home/templates/settingsDeleteForm"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/views/SettingsAccountView",["backbone-marionette","core/utils/url/parseQueryString","home/mixins/withSubviews","home/templates/settingsAccount","home/views/SettingsAccountFormView","home/views/SettingsConnectedAccountsView","home/views/SettingsDeleteFormView"],function(e,t,n,i,o,a,r){"use strict";var s=e.ItemView.extend({template:i,regions:{connectedAccountsRegion:"[data-role=connected-accounts]",formRegion:"[data-role=account-form]",deleteRegion:"[data-role=delete-form]"},templateHelpers:function(){return{showVerifiedMessage:this.showVerifiedMessage()}},initialize:function(e){this.session=e.session},showVerifiedMessage:function(){return!!t().email_verified},onRender:function(){this.activateRegion(this.connectedAccountsRegion,this.createConnectedAccountsView),this.activateRegion(this.formRegion,this.createFormView),this.activateRegion(this.deleteRegion,this.createDeleteFormView)},createFormView:function(){return new o({el:this.formRegion.el,model:this.model})},createDeleteFormView:function(){return new r({el:this.deleteRegion.el,session:this.session})},createConnectedAccountsView:function(){return new a({el:this.connectedAccountsRegion.el,collection:this.model.socialAccounts})}});return n.call(s.prototype),s}),define("home/templates/settingsEmail",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" checked"},3:function(e,t,n,i,o){return' checked="checked"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+s(l(n,"gettext").call(r,"Email Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:37}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+s(l(n,"gettext").call(r,"Email Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:35},end:{line:7,column:68}}}))+'</h1>\n<p class="form-description text-gray text-medium">'+s(l(n,"gettext").call(r,"Control the emails %(Disqus)s sends you.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:8,column:50},end:{line:8,column:122}}}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Enable Emails",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:51},end:{line:12,column:78}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_notifications"'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"receive_notifications"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:51},end:{line:16,column:95}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Receive emails from %(Disqus)s",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:17,column:0},end:{line:17,column:62}}}))+'\n</label>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Digests",{name:"gettext",hash:{},data:o,loc:{start:{line:23,column:51},end:{line:23,column:72}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_digests"'+(null!=(a=l(n,"if").call(r,l(n,"ne").call(r,null!=t?l(t,"digest_frequency"):t,null!=t?l(t,"FREQUENCY_NEVER"):t,{name:"ne",hash:{},data:o,loc:{start:{line:27,column:51},end:{line:27,column:88}}}),{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:45},end:{line:27,column:105}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Receive %(Disqus)s Digest emails",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:28,column:0},end:{line:28,column:64}}}))+'\n</label>\n</div>\n<div class="fieldset__block--radio" data-role="notification-digest">\n<label class="text-medium">\n<input type="radio" name="digest_frequency" value="daily"'+(null!=(a=l(n,"if").call(r,l(n,"eq").call(r,null!=t?l(t,"digest_frequency"):t,"daily",{name:"eq",hash:{},data:o,loc:{start:{line:33,column:63},end:{line:33,column:92}}}),{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:33,column:57},end:{line:33,column:119}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Daily",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:0},end:{line:34,column:19}}}))+'\n</label>\n</div>\n<div class="fieldset__block--radio" data-role="notification-digest">\n<label class="text-medium">\n<input type="radio" name="digest_frequency" value="weekly"'+(null!=(a=l(n,"if").call(r,l(n,"eq").call(r,null!=t?l(t,"digest_frequency"):t,"weekly",{name:"eq",hash:{},data:o,loc:{start:{line:39,column:64},end:{line:39,
column:94}}}),{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:58},end:{line:39,column:121}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Weekly",{name:"gettext",hash:{},data:o,loc:{start:{line:40,column:0},end:{line:40,column:20}}}))+'\n</label>\n</div>\n<p class="fieldset__description text-gray text-small">\n'+s(l(n,"gettext").call(r,"Digests give you a daily or weekly view of activity on %(Disqus)s, customized for you. Visit the %(digestFaq)s to learn more.",{name:"gettext",hash:{digestFaq:l(n,"tag").call(r,"a",{name:"tag",hash:{text:l(n,"gettext").call(r,"Digest FAQ",{name:"gettext",hash:{},data:o,loc:{start:{line:45,column:137},end:{line:45,column:159}}}),target:"blank",href:"https://help.disqus.com/customer/portal/articles/808919-disqus-digests"},data:o,loc:{start:{line:45,column:30},end:{line:45,column:160}}}),Disqus:"Disqus"},data:o,loc:{start:{line:44,column:0},end:{line:46,column:2}}}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Welcome",{name:"gettext",hash:{},data:o,loc:{start:{line:51,column:51},end:{line:51,column:72}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_welcome_emails"'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"receive_welcome_emails"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:55,column:52},end:{line:55,column:97}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Receive a welcome email when commenting on a %(Disqus)s site for the first time",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:56,column:0},end:{line:56,column:111}}}))+'\n</label>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Replies",{name:"gettext",hash:{},data:o,loc:{start:{line:62,column:51},end:{line:62,column:72}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="replies_to_comments"'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"replies_to_comments"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:66,column:49},end:{line:66,column:91}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Receive an email when someone replies to your comments",{name:"gettext",hash:{},data:o,loc:{start:{line:67,column:0},end:{line:67,column:68}}}))+'\n</label>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Subscribe",{name:"gettext",hash:{},data:o,loc:{start:{line:73,column:51},end:{line:73,column:74}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="subscribe_thread_on_post"'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"subscribe_thread_on_post"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:77,column:54},end:{line:77,column:101}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Subscribe automatically to discussions you comment on",{name:"gettext",hash:{},data:o,loc:{start:{line:78,column:0},end:{line:78,column:67}}}))+'\n</label>\n</div>\n<p class="fieldset__description text-gray text-small">'+s(l(n,"gettext").call(r,"You'll get an email for every new comment on discussions you're subscribed to.",{name:"gettext",hash:{},data:o,loc:{start:{line:81,column:54},end:{line:81,column:147}}}))+'</p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+s(l(n,"gettext").call(r,"Save",{name:"gettext",hash:{},data:o,loc:{start:{line:88,column:134},end:{line:88,column:152}}}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/views/SettingsEmailView",["jquery","underscore","home/models/SettingsEmailNotifications","home/templates/settingsEmail","home/views/common/BaseSettingsView"],function(e,t,n,i,o){"use strict";return o.extend({template:i,events:t.defaults({"change input[name=receive_notifications]":"receiveNotificationsChangeHandler","change input[name=receive_digests]":"receiveDigestsChangeHandler"},o.prototype.events),templateHelpers:function(){return{FREQUENCY_NEVER:n.FREQUENCY_NEVER}},receiveDigestsChangeHandler:function(t){this.updateDigestsDisplay(e(t.originalEvent.target).is(":checked"))},receiveNotificationsChangeHandler:function(t){this.updateNotificationsDisplay(e(t.originalEvent.target).is(":checked"))},onDomRefresh:function(){this.updateNotificationsDisplay(this.model.get("receive_notifications")),this.updateDigestsDisplay(this.shouldReceiveDigests())},shouldReceiveDigests:function(){var e=this.model.get("digest_frequency");return e&&e!==n.FREQUENCY_NEVER},updateDigestsDisplay:function(e){var t=this.$el.find("[data-role=notification-digest]");e?(t.show(),this.setDefaultDigestFrequency()):t.hide()},setDefaultDigestFrequency:function(){this.$el.find("input[name=digest_frequency]:checked").val()||this.$el.find("input[name=digest_frequency][value=daily]").attr("checked","checked")},updateNotificationsDisplay:function(e){var t=this.$el.find("[data-role=notification]");e?t.removeClass("fieldset--hidden"):t.addClass("fieldset--hidden")},getFormData:function(){var e=o.prototype.getFormData.apply(this,arguments);return e.receive_notifications=!!e.receive_notifications,e.receive_welcome_emails=!!e.receive_welcome_emails,e.replies_to_comments=!!e.replies_to_comments,e.subscribe_thread_on_post=!!e.subscribe_thread_on_post,e.digest_frequency=e.receive_digests?e.digest_frequency:n.FREQUENCY_NEVER,e}})}),define("home/templates/settingsWeb",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return"checked"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+s(l(n,"gettext").call(r,"Web Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:35}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+s(l(n,"gettext").call(r,"Web Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:35},end:{line:7,column:66}}}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+s(l(n,"gettext").call(r,"Control what %(Disqus)s notifies you about in your %(inbox)s. Looking for email instead? Go to %(emailNotifications)s.",{name:"gettext",hash:{Disqus:"Disqus",emailNotifications:l(n,"tag").call(r,"a",{name:"tag",hash:{text:l(n,"gettext").call(r,"Email Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:11,column:106},end:{line:11,column:137}}}),"data-tab":"email","data-action":"switch-tab",href:"/home/settings/email/"},data:o,loc:{start:{line:11,column:21},end:{line:11,column:138}}}),inbox:l(n,"tag").call(r,"a",{name:"tag",hash:{text:l(n,"gettext").call(r,"Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:42},end:{line:10,column:67}}}),href:"/home/inbox/"},data:o,loc:{start:{line:10,column:8},end:{line:10,column:68}}})},data:o,loc:{start:{line:9,column:0},end:{line:13,column:2}}}))+'\n</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Notify you when",{name:"gettext",hash:{},data:o,loc:{start:{line:18,column:51},end:{line:18,column:80}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="likepost" type="checkbox" name="show-upvote-notification" value="likepost" '+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showUpvoteNotification"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:123},end:{line:22,column:167}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Someone upvotes your comment",{name:"gettext",hash:{},data:o,loc:{start:{line:23,column:0},end:{line:23,column:42}}}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="invite" type="checkbox" name="show-invite-notification" value="invite" '+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showInviteNotification"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:28,column:119},end:{line:28,column:163}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Someone invites you to a discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:29,column:0},end:{line:29,column:49}}}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="favoritethread" type="checkbox" name="show-recommend-notification" value="favoritethread" '+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showRecommendNotification"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:34,column:138},end:{line:34,column:185}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Someone recommends a discussion you started",{name:"gettext",hash:{},data:o,loc:{start:{line:35,column:0},end:{line:35,column:57}}}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="threadreplies" type="checkbox" name="show-threadreplies-notification" value="threadreplies" '+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showThreadRepliesNotification"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:40,column:140},end:{line:40,column:191}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Someone comments on a discussion you started",{name:"gettext",hash:{},data:o,loc:{start:{line:41,column:0},end:{line:41,column:58}}}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="mentions" type="checkbox" name="show-mentions-notification" value="mentions" '+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showMentionsNotification"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:46,column:125},end:{line:46,column:171}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Someone mentions you in a discussion",{name:"gettext",hash:{},data:o,loc:{start:{line:47,column:0},end:{line:47,column:50}}}))+'\n</label>\n</div>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" disabled data-role="save-btn">'+s(l(n,"gettext").call(r,"Save",{name:"gettext",hash:{},data:o,loc:{start:{line:56,column:134},end:{line:56,column:152}}}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/views/SettingsWebView",["jquery","underscore","backbone-marionette","home/mixins/withFetchingView","home/models/TimelineFilter","home/templates/settingsWeb"],function(e,t,n,i,o,a){"use strict";var r=n.ItemView.extend({events:{"submit form":"submitHandler","change input[type=checkbox]":"changeHandler"},template:a,initialize:function(){this.listenToOnce(this.collection,"reset",this.doneFetching),this.listenTo(this.collection,"sync",this.render)},templateHelpers:function(){return{showUpvoteNotification:!this.collection.get(o.FILTER_LIKEPOST),showInviteNotification:!this.collection.get(o.FILTER_INVITE),showRecommendNotification:!this.collection.get(o.FILTER_RECOMMEND),showThreadRepliesNotification:!this.collection.get(o.FILTER_THREADREPLIES),showMentionsNotification:!this.collection.get(o.FILTER_MENTIONS)}},onRender:function(){this.$form=this.$("form"),this.$checkboxes=this.$form.find("[data-role=filter-checkbox]"),this.$saveStatus=this.$("[data-role=save-status]"),this.saveBtn=this.$("[data-role=save-btn]")[0]},changeHandler:function(){this.saveBtn.disabled=!t.chain(this.$checkboxes).filter(this.hasFilterChanged,this).value().length},doneFetching:function(){this.collection.fetched=!0},isDoneFetching:function(){return this.collection.fetched},submitHandler:function(n){n.preventDefault(),this.updateStatus("is-saving");var i=t.chain(this.$checkboxes).filter(this.hasFilterChanged,this).map(this.updateFilter,this).value();e.when.apply(e,i).done(t.bind(this.updateStatus,this,"is-saved"))},hasFilterChanged:function(t){var n=e(t),i=n.is(":checked"),o=this.collection.get(n.attr("data-filter"));return i&&o||!i&&!o},updateFilter:function(t){var n=e(t);return this.collection[n.is(":checked")?"removeFilter":"addFilter"](n.attr("data-filter"))},updateStatus:function(e){this.$el.find("[data-role=save-status]").removeClass("is-saving is-saved").addClass(e)}});return i.call(r.prototype),r}),define("home/templates/settingsApps",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset" role="group" data-role="app-field">\n<div class="fieldset__label align__item text-gray">'+r(a(null!=t?s(t,"name"):t,t))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action=\'revoke-app\' data-app-id=\''+r(a(null!=t?s(t,"id"):t,t))+"'>"+r(s(n,"gettext").call(null!=t?t:e.nullContext||{},"Revoke Access",{name:"gettext",hash:{},data:o,loc:{start:{line:16,column:105},end:{line:16,column:132}}}))+"</button>\n</div>\n</div>\n</div>\n"},3:function(e,t,n,i,o){return'<p class="form-description text-gray text-medium">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"You haven't given access to any applications yet.",{name:"gettext",hash:{},data:o,loc:{start:{line:21,column:50},end:{line:21,column:113}}}))+"</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+s(l(n,"gettext").call(r,"Apps",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:22}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+s(l(n,"gettext").call(r,"Apps",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:35},end:{line:7,column:53}}}))+'</h1>\n<p class="form-description text-gray text-medium">'+s(l(n,"gettext").call(r,"Control what apps can access your %(Disqus)s account.",{name:"gettext",hash:{Disqus:"Disqus"},data:o,loc:{start:{line:8,column:50},end:{line:8,column:135}}}))+'</p>\n</div>\n<div class="form__content">\n'+(null!=(a=l(n,"each").call(r,null!=t?l(t,"items"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:11,column:0},end:{line:22,column:9}}}))?a:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/SettingsAppsView",["jquery","backbone-marionette","core/strings","home/mixins/withFetchingView","home/templates/settingsApps"],function(e,t,n,i,o){"use strict";var a=n.get,r=t.ItemView.extend({events:{"click [data-action=revoke-app]":"revokeAppHandler"},template:o,initialize:function(){this.listenToOnce(this.collection,"reset",this.doneFetching),this.listenTo(this.collection,"reset remove",this.render)},doneFetching:function(){this.collection.fetched=!0},isDoneFetching:function(){return this.collection.fetched},revokeAppHandler:function(t){var i=e(t.originalEvent.target).attr("data-app-id"),o=this.collection.get(i);if(o){var r=n.interpolate(a("Revoke access for %(appName)s?"),{appName:o.get("name")});window.confirm(r)&&o.destroy({wait:!0})}}});return i.call(r.prototype),r}),define("home/templates/settingsModeration",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Receive email notifications for comments that are",{name:"gettext",hash:{},data:o,loc:{start:{line:17,column:51},end:{line:17,column:114}}}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_approved"'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"disable_approved"):t,{name:"unless",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:46},end:{line:21,column:93}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Newly posted",{name:"gettext",hash:{},data:o,loc:{start:{line:22,column:0},end:{line:22,column:26}}}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_unapproved"'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"receive_unapproved"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:48},end:{line:27,column:89}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Pending (waiting for moderation)",{name:"gettext",hash:{},data:o,loc:{start:{line:28,column:0},end:{line:28,column:46}}}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_spam"'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"receive_spam"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:33,column:42},end:{line:33,column:77}}}))?a:"")+">\n"+s(l(n,"gettext").call(r,"Marked as spam",{name:"gettext",hash:{},data:o,loc:{start:{line:34,column:0},end:{line:34,column:28}}}))+'\n</label>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+s(l(n,"gettext").call(r,"Sites to receive emails for",{name:"gettext",hash:{},data:o,loc:{start:{line:40,column:51},end:{line:40,column:92}}}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(a=l(n,"each").call(r,null!=t?l(t,"forum_subscriptions"):t,{name:"each",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:42,column:0},end:{line:49,column:9}}}))?a:"")+'</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+s(l(n,"gettext").call(r,"Save",{name:"gettext",hash:{},data:o,loc:{start:{line:56,column:134},end:{line:56,column:152}}}))+"</button></div>\n</div>\n</div>\n"},2:function(e,t,n,i,o){return" checked"},4:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="forum_'+s(r(o&&l(o,"key"),t))+'"'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"subscribed"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:45,column:44},end:{line:45,column:82}}}))?a:"")+">\n"+s(r(null!=t?l(t,"name"):t,t))+" ("+s(r(null!=t?l(t,"url"):t,t))+")\n</label>\n</div>\n"},6:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="form-description text-gray text-medium">\n'+e.escapeExpression(r(n,"gettext").call(a,"You aren't moderating any sites. To add a new site, %(addSite)s.",{name:"gettext",hash:{addSite:r(n,"tag").call(a,"a",{name:"tag",hash:{text:r(n,"gettext").call(a,"go here",{name:"gettext",hash:{},data:o,loc:{start:{line:62,column:109},end:{line:62,column:128}}}),target:"_blank",href:"https://publishers.disqus.com/engage?utm_source=Home-Settings"},data:o,loc:{start:{line:62,column:10},end:{line:62,column:129}}})},data:o,loc:{start:{line:61,column:0},end:{line:63,column:2}}}))+"\n</p>\n\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+s(l(n,"gettext").call(r,"Moderation",{name:"gettext",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:28}}}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+s(l(n,"gettext").call(r,"Moderation",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:35},end:{line:7,column:59}}}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+s(l(n,"gettext").call(r,"Control which moderation email notifications you receive for sites you moderate. To moderate comments posted on your site and adjust your site's settings, visit your %(moderatorLink)s.",{name:"gettext",hash:{moderatorLink:l(n,"tag").call(r,"a",{name:"tag",hash:{text:l(n,"gettext").call(r,"moderation panel",{name:"gettext",hash:{},data:o,loc:{start:{line:10,column:45},end:{line:10,column:73}}}),href:"/admin/"},data:o,loc:{start:{line:10,column:16},end:{line:10,column:74}}})},data:o,loc:{start:{line:9,column:0},end:{line:11,column:2}}}))+'\n</p>\n</div>\n<div class="form__content">\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"moderatesForums"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:15,column:0},end:{line:66,column:7}}}))?a:"")+"</form>\n"},useData:!0})}),define("home/views/SettingsModerationView",["jquery","underscore","home/templates/settingsModeration","home/views/common/BaseSettingsView"],function(e,t,n,i){"use strict";return i.extend({template:n,templateHelpers:function(){return{moderatesForums:!t.isEmpty(this.model.get("forum_subscriptions"))}},getFormData:function(){var n=i.prototype.getFormData.apply(this,arguments);n.receive_unapproved=!!n.receive_unapproved,n.receive_spam=!!n.receive_spam,n.disable_approved=!n.receive_approved;var o=e.extend(!0,{},this.model.attributes.forum_subscriptions);return t.each(o,function(e,t){e.subscribed=!!n["forum_"+t],delete n["forum_"+t]}),n.forum_subscriptions=o,n}})}),define("home/templates/settings",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="aside__wrap -brand">\n<div class="aside__content--settings text-center">\n<img src="'+r(s(n,"urlfor").call(a,"cdn",{name:"urlfor",hash:{},data:o,loc:{start:{line:87,column:10},end:{line:87,column:26}}}))+'/img/Pam_Settings.png" width="170" height="93" />\n<h2 class="text-large">'+r(s(n,"gettext").call(a,"Get more from Disqus",{name:"gettext",hash:{},data:o,loc:{start:{line:88,column:23},end:{line:88,column:57}}}))+"</h2>\n<p>"+r(s(n,"gettext").call(a,"Follow channels for a personalized experience. Jump into channels to start your own discussion.",{name:"gettext",hash:{},data:o,loc:{start:{line:89,column:3},end:{line:89,column:112}}}))+'</p>\n<p>\n<a href="/home/explore" class="button button-inverted button-small button-padding-wider">'+r(s(n,"gettext").call(a,"Find Channels To Join",{name:"gettext",hash:{},data:o,loc:{start:{line:91,column:89},end:{line:91,column:124}}}))+"</a>\n</p>\n</div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section-contained">\n<div class="layout layout--tablet-no-aside layout--mobile-flush settings--root" data-role="settings-layout">\n<div class="layout__main-with-aside">\n<div class="layout__nav">\n<ul class="nav-stacked">\n<li data-action="switch-tab" data-tab="profile" class="nav__item active">\n<a href="/home/settings/profile/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+s(l(n,"gettext").call(r,"Profile",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:21}}}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="account" class="nav__item">\n<a href="/home/settings/account/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+s(l(n,"gettext").call(r,"Account",{name:"gettext",hash:{},data:o,loc:{start:{line:19,column:0},end:{line:19,column:21}}}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="email" class="nav__item">\n<a href="/home/settings/email/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+s(l(n,"gettext").call(r,"Email Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:29,column:0},end:{line:29,column:33}}}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="web" class="nav__item">\n<a href="/home/settings/web/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+s(l(n,"gettext").call(r,"Web Notifications",{name:"gettext",hash:{},data:o,loc:{start:{line:39,column:0},end:{line:39,column:31}}}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="apps" class="nav__item">\n<a href="/home/settings/apps/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+s(l(n,"gettext").call(r,"Apps",{name:"gettext",hash:{},data:o,loc:{start:{line:49,column:0},end:{line:49,column:18}}}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="moderation" class="nav__item">\n<a href="/home/settings/moderation/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+s(l(n,"gettext").call(r,"Moderation",{name:"gettext",hash:{},data:o,loc:{start:{line:59,column:0},end:{line:59,column:24}}}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="blocking" class="nav__item">\n<a href="/home/settings/blocking/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+s(l(n,"gettext").call(r,"Blocking",{name:"gettext",hash:{},data:o,loc:{start:{line:69,column:0},end:{line:69,column:22}}}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n<div class="layout__content">\n<div data-role="email-verification-alert"></div>\n<div data-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-lg">\n'+(null!=(a=l(n,"unless").call(r,null!=t?l(t,"onboardingWithoutChannels"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:84,column:0},end:{line:95,column:11}}}))?a:"")+'<div class="text-smaller text-gray">\n'+(null!=(a=e.invokePartial(l(i,"homeFooter"),t,{name:"homeFooter",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/SettingsLayout",["underscore","core/bus","core/strings","home/collections/SettingsAppCollection","home/collections/SettingsBlockListCollection","core/UniqueModel","home/models/SettingsModeration","home/models/SettingsProfile","home/models/SettingsAccount","home/models/SettingsEmailNotifications","home/views/common/TabbedView","home/views/SettingsBlockingView","home/views/SettingsDeleteView","home/views/SettingsProfileView","home/views/SettingsMenuView","home/views/SettingsAccountView","home/views/SettingsEmailView","home/views/SettingsWebView","home/views/SettingsAppsView","home/views/SettingsModerationView","home/mixins/withEmailVerificationAlert","home/templates/settings"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v,b,y,w,x){"use strict";var k=n.get,C=u.extend({defaultTab:"menu",template:x,templateHelpers:function(){return{onboardingWithoutChannels:this.onboardingWithoutChannels}},initialize:function(t){this.session=t.session,this.user=this.session.user,this.onboardingWithoutChannels=t.onboardingWithoutChannels,this.getSettingsAppCollection=e.once(this.getSettingsAppCollection),this.getNotificationFilters=e.once(this.getNotificationFilters),this.listenTo(this,"change:activeTab",this.updateLayoutClass),this.listenTo(this,"change:activeTab",this.trackOpenSection),u.prototype.initialize.apply(this,arguments)},updateLayoutClass:function(){this.$el.find("[data-role=settings-layout]").removeClass("settings--root settings--page").addClass(this.activeTab===this.defaultTab?"settings--root":"settings--page")},getMetaAttrs:function(){return k("Settings")},getSettingsAppCollection:function(){var e=new i;return e.fetch({reset:!0}),e},getNotificationFilters:function(){var e=this.session.getOrCreateNotifications();return e.filters.fetch({reset:!0}),e.filters},getSettingsBlockListCollection:function(){var e=new o;return e.fetch(),e},getTabView:function(e){switch(e){case"menu":return new p({model:this.session.user});case"profile":return new m({model:new a(s,{id:this.session.user.id})});case"account":return new f({session:this.session,model:new a(l,{id:this.session.user.id})});case"email":return new g({model:new a(c,{id:this.session.user.id})});case"web":return new v({collection:this.getNotificationFilters()});case"apps":return new b({collection:this.getSettingsAppCollection()});case"moderation":return new y({model:new a(r,{id:this.session.user.id})});case"delete":return new h({session:this.session,model:new a(l,{id:this.session.user.id})});case"blocking":return new d({collection:this.getSettingsBlockListCollection()})}},getTrackingSection:function(e){return e},trackOpenSection:function(){t.trigger("openSection",this)}});return w.call(C.prototype),C}),define("home/templates/userChannels",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" hidden"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-role="email-verification-alert"></div>\n\n<div class="spacing-bottom'+(null!=(a=s(n,"if").call(r,null!=t?s(t,"hideManagedChannels"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:26},end:{line:3,column:67}}
}))?a:"")+'" data-role="managed-channels-wrapper">\n<div class="card-wrap" data-role="managed-channels"></div>\n</div>\n\n<h2 class="text-subheading spacing-narrow">'+e.escapeExpression(s(n,"gettext").call(r,"Following",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:43},end:{line:7,column:66}}}))+'</h2>\n<div class="card-wrap" data-role="followed-channels"></div>\n'},useData:!0})}),define("home/views/UserChannelsView",["underscore","backbone-marionette","home/mixins/withSubviews","home/mixins/withEmailVerificationAlert","home/views/ForumCardCollectionView","home/views/ProfileFollowingCommunitiesEmptyView","home/templates/userChannels"],function(e,t,n,i,o,a,r){"use strict";var s=t.ItemView.extend({template:r,templateHelpers:function(){return{hideManagedChannels:this.shouldHideManagedChannels()}},regions:{managedChannelsRegion:"[data-role=managed-channels]",followedChannelsRegion:"[data-role=followed-channels]"},initialize:function(){this.listenTo(this.model.managedChannels.items,"reset add",function(){this.$("[data-role=managed-channels-wrapper]").toggleClass("hidden",this.shouldHideManagedChannels())})},shouldHideManagedChannels:function(){return 0===this.model.managedChannels.items.length},onRender:function(){this.activateRegion(this.managedChannelsRegion,e.partial(this.createChannelsView,this.model.managedChannels)),this.activateRegion(this.followedChannelsRegion,e.partial(this.createFollowedChannelsView,this.model.followedChannels))},createFollowedChannelsView:function(e){return this.createChannelsView(e,{infiniteScroll:!0,emptyView:a})},createChannelsView:function(t,n){return new o(e.extend({user:this.model.user,model:t,collection:t.items},n))}});return n.call(s.prototype),i.call(s.prototype),s}),define("home/templates/channels",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="section-contained">\n<div class="layout layout--tablet-no-aside">\n<div class="layout__main-with-aside">\n<section data-role="content-area" class="spacing-bottom-large"></section>\n</div>\n<div class="layout__aside hidden-lg">\n<section data-role="recommend-module" data-recommend-type="forum" class="module--aside"></section>\n<section data-role="recommend-module" data-recommend-type="channel" class="module--aside"></section>\n<section data-role="recommend-module" data-recommend-type="user" class="module--aside"></section>\n</div>\n</div>\n</div>\n'},useData:!0})}),define("home/views/ChannelsView",["underscore","backbone","backbone-marionette","core/strings","home/models/Session","home/views/RecommendationsModuleView","home/views/UserChannelsView","home/views/HomepageChannelsModuleView","home/mixins/withEmailConfirmedModal","home/mixins/withSubviews","home/templates/channels"],function(e,t,n,i,o,a,r,s,l,c,u){"use strict";var d=i.get,h=n.ItemView.extend({template:u,regions:{recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedChannelsModuleRegion:"[data-role=recommend-module][data-recommend-type=channel]",contentRegion:"[data-role=content-area]"},initialize:function(){o.get().loadPromise().always(e.bind(this.render,this))},onRender:function(){this.activateRegion(this.contentRegion,this.createContentView),this.activateRegion(this.recommendedUsersModuleRegion,this.createUserRecommendedModuleView),this.model.promotedChannels.ensureFetched().then(e.bind(function(){var t=this.model.promotedChannels.chain().reject(function(e){return e.primaryForum.get("isFollowing")}).shuffle().value();t.length&&this.activateRegion(this.recommendedChannelsModuleRegion,e.bind(this.createChannelRecommendedModuleView,this,t))},this))},createContentView:function(){return new r({model:this.model.sessionUserProfile})},createUserRecommendedModuleView:function(){return a.createUserRecommendedModuleView({model:this.model.interestingUsers})},createChannelRecommendedModuleView:function(e){return new s({collection:new t.Collection(e)})},getMetaAttrs:function(){return d("Channels")}});return l.call(h.prototype),c.call(h.prototype),h}),define("core/constants/exploreModuleConstants",["core/strings"],function(e){"use strict";var t=e.get;return{TABS:{TOP:{id:"top",name:t("Trending"),fetchName:"trending"},POPULAR:{id:"popular",name:t("Popular"),fetchName:"popular"},RECENT:{id:"recent",name:t("Newest"),fetchName:"new"},DISCUSSIONS:{id:"discussions",name:t("Discussions")}}}}),define("home/views/HideOnEndFooterView",["home/views/common/FetchableCollectionFooterView"],function(e){"use strict";return e.extend({endOfItemsTemplate:function(){return""}})}),define("home/models/ChannelGroupProfile",["underscore","backbone","core/api","core/UniqueModel","home/models/Channel","home/models/Feed","home/collections/FeedItemCollection","home/collections/ChannelCollection"],function(e,t,n,i,o,a,r,s){"use strict";var l=t.Model.extend({initialize:function(t,i){i=i||{},this.id&&this.id!==this.constructor.ALL_CHANNEL_GROUPS_PROFILE_ID&&this.initializeRelated("channel",i,o),this.rankedChannels=e.chain(this.constructor.RANKINGS).map(function(e){return[e.id,new a({fetchOptions:{name:e.name,channel:this.channel&&this.channel.id,attach:"counters"}},{collectionClass:s,collectionUrl:n.getURL("channels/listRanked")})]},this).object().value(),this.topActivities=new a(i.topActivitiesOptions,{collectionClass:r,collectionUrl:n.getURL("timelines/ranked"),collectionOptions:{type:"default",target:this.channel&&"channel:"+this.channel.id}})},toJSON:function(){return{channel:this.channel.toJSON()}},ensureFetched:function(){this.ensureFetchedChannel(),this.ensureFetchedTopActivities(),e.each(this.constructor.RANKINGS,function(e){this.ensureFetchedRankedChannels(e.id)})},ensureFetchedChannel:function(){this.channel.ensureFetched()},ensureFetchedTopActivities:function(){this.topActivities.ensureFetched()},ensureFetchedRankedChannels:function(e){var t=this.rankedChannels[e];t&&t.ensureFetched()}},{RANKINGS:[{id:"top",name:"trending"},{id:"popular",name:"popular"},{id:"recent",name:"new"}],ALL_CHANNEL_GROUPS_PROFILE_ID:"all channel groups"});return i.addType("ChannelGroupProfile",l),l}),define("home/templates/forumCountCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="channel-follow__description truncate-line text-medium">\n'+e.escapeExpression(e.lambda(null!=t?a(t,"channelDescription"):t,t))+"\n</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channel-follow__wrapper">\n<div class="channel-follow__block">\n<div class="align align--middle spacing-bottom-small">\n<a href="/home/channel/'+s(r(null!=(a=null!=t?l(t,"channel"):t)?l(a,"slug"):a,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+s(r(null!=t?l(t,"pk"):t,t))+'">\n'+(null!=(a=e.invokePartial(l(i,"channelAvatarWithDefault"),null!=t?l(t,"channel"):t,{name:"channelAvatarWithDefault",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</a>\n<p class="text-semibold">\n'+(null!=(a=e.invokePartial(l(i,"channelAwareForumLink"),t,{name:"channelAwareForumLink",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</p>\n</div>\n"+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"channelDescription"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:0},end:{line:18,column:7}}}))?a:"")+'</div>\n<div class="channel-follow__stats align align--middle" data-role="stats">\n'+(null!=(a=e.invokePartial(l(i,"channelMetadataStats"),t,{name:"channelMetadataStats",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ForumCountCardView",["backbone-marionette","core/mixins/withChannelFollowing","home/templates/forumCountCard"],function(e,t,n){"use strict";var i=e.ItemView.extend({className:"card",template:n,templateHelpers:function(){var e=this.model.channel,t=e.primaryForum,n=t.get("numThreads"),i=t.get("numFollowers");return{numThreads:n&&n.toLocaleString(),numFollowers:i&&i.toLocaleString(),channelDescription:e&&e.get("options").description,channel:e&&e.toJSON()}},initialize:function(){this.bindToPrimaryForum()},bindToPrimaryForum:function(){var e=this.model.channel;if(!e.primaryForum)return void this.listenToOnce(e,"changeRelated:primaryForum",this.bindToPrimaryForum);this.listenTo(e.primaryForum,"change:numFollowers change:numThreads",this.renderStats)},renderStats:function(){this.$("[data-role=discussion-count]").text(this.model.get("numThreads").toLocaleString()),this.$("[data-role=followers-count]").text(this.model.get("numFollowers").toLocaleString())}});return t.call(i.prototype,function(){return this.model.channel}),i}),define("home/views/ForumCountCardCollectionView",["home/views/ForumCountCardView","home/views/ForumCardCollectionView"],function(e,t){"use strict";return t.extend({itemView:e})}),define("home/templates/channelCardExplore",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" has-image"},3:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-content__media">\n<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"image"):t)?r(a,"src"):a,t))+')" class="img-cards"></div>\n</div>\n'},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"threadOverrides"):t)?r(a,"title"):a,t))+"\n"},7:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?r(t,"thread"):t)?r(a,"clean_title"):a,t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+s(r(null!=(a=null!=t?c(t,"thread"):t)?c(a,"link"):a,t))+'">\n<div class="card__header -feed">\n<div class="card__reason -explore align align--middle">\n<strong class="text-gray-darker">'+(null!=(a=e.invokePartial(c(i,"forumName"),null!=(a=null!=t?c(t,"thread"):t)?c(a,"forum"):a,{name:"forumName",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</strong>\n<time class="bullet text-gray">'+s(r(null!=t?c(t,"relativeTime"):t,t))+'</time>\n</div>\n</div>\n<div class="card__content -default'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:34},end:{line:8,column:64}}}))?a:"")+'">\n'+(null!=(a=c(n,"if").call(l,null!=t?c(t,"image"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:13,column:7}}}))?a:"")+'<div class="card-content__body">\n<h2 class="discussion-title text-gray-darker" dir="auto">\n'+(null!=(a=c(n,"if").call(l,null!=(a=null!=t?c(t,"threadOverrides"):t)?c(a,"title"):a,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:16,column:0},end:{line:21,column:7}}}))?a:"")+'</h2>\n\n<div class="card-content__summary text-gray-dark">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+s(r(null!=t?c(t,"threadDescription"):t,t))+'\n</div>\n</div>\n</div>\n</div>\n<div class="card__footer text-gray-dark text-semibold">\n'+s(c(n,"gettext").call(l,"%(recommendCount)s recommends",{name:"gettext",hash:{recommendCount:null!=(a=null!=t?c(t,"thread"):t)?c(a,"likes"):a},data:o,loc:{start:{line:32,column:0},end:{line:32,column:73}}}))+'\n<span class="bullet"></span>\n'+s(c(n,"gettext").call(l,"%(commentCount)s comments",{name:"gettext",hash:{commentCount:null!=(a=null!=t?c(t,"thread"):t)?c(a,"posts"):a},data:o,loc:{start:{line:34,column:0},end:{line:34,column:67}}}))+"\n</div>\n</a>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelCardExploreView",["underscore","core/config","home/views/ChannelCardView","home/templates/channelCardExplore"],function(e,t,n,i){"use strict";return n.extend({template:i,className:"card-wrap card--channel -link",templateHelpers:function(){var i=n.prototype.templateHelpers;return e.defaults({guestAvatar:t.urls.avatar.generic},e.isFunction(i)?i.call(this):i)}})}),define("home/templates/channelGroupFeeds",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o,a,r){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="list--inline text-center text-medium border-bottom">\n'+(null!=(s=l(n,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"tabs"):t,{name:"each",hash:{},fn:e.program(2,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:9,column:9}}}))?s:"")+"</ul>\n"},2:function(e,t,n,i,o,a,r){var s,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li data-action="switch-tab" data-tab="'+c(l(null!=t?u(t,"id"):t,t))+'" class="nav-bar__item">\n<a href="/home/explore/'+(null!=(s=u(n,"if").call(null!=t?t:e.nullContext||{},null!=r[1]?u(r[1],"exploreTab"):r[1],{name:"if",hash:{},fn:e.program(3,o,0,a,r),inverse:e.program(5,o,0,a,r),data:o,loc:{start:{line:5,column:23},end:{line:5,column:84}}}))?s:"")+"/"+c(l(null!=(s=null!=r[1]?u(r[1],"channel"):r[1])?u(s,"slug"):s,t))+"/"+c(l(null!=t?u(t,"id"):t,t))+'/" class="nav-bar__link">\n<strong>'+c(l(null!=t?u(t,"name"):t,t))+"</strong>\n</a>\n</li>\n"},3:function(e,t,n,i,o,a,r){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=r[1]?s(r[1],"exploreTab"):r[1],t))},5:function(e,t,n,i,o){return"channels"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o,a,r){var s,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=c(n,"if").call(l,c(n,"gt").call(l,null!=t?c(t,"numTabs"):t,1,{name:"gt",hash:{},data:o,loc:{start:{line:1,column:6},end:{line:1,column:20}}}),{name:"if",hash:{},fn:e.program(1,o,0,a,r),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:11,column:7}}}))?s:"")+'<div data-role="content-area"></div>\n'},useData:!0,useDepths:!0})}),define("home/views/ChannelGroupFeedsView",["core/constants/exploreModuleConstants","home/views/common/FetchableCollectionLayout","home/views/common/TabbedView","home/views/HideOnEndFooterView","home/views/ForumCountCardCollectionView","home/views/ChannelCardExploreView","home/views/ChannelCardCollectionView","home/templates/channelGroupFeeds"],function(e,t,n,i,o,a,r,s){"use strict";return n.extend({defaultTab:function(){return this.tabs&&1===this.tabs.length?this.tabs[0].id:"top"},template:s,templateHelpers:function(){return{tabs:this.tabs,numTabs:this.tabs.length,exploreTab:this.exploreTab,channelGroupTab:this.channelGroupTab}},initialize:function(t){t=t||{},n.prototype.initialize.call(this,t),this.tabs=t.tabs||[e.TABS.TOP],this.exploreTab=t.exploreTab,this.channelGroupTab=t.channelGroupTab,this.allChannelGroupsProfile=t.allChannelGroupsProfile},getTabView:function(e){switch(e){case"top":case"popular":case"recent":var n="all"===this.channelGroupTab?this.allChannelGroupsProfile:this.model;n.ensureFetchedRankedChannels(e);var s=n.rankedChannels[e];return new t({fetchableCollectionView:o,fetchableCollectionFooterView:i,model:s,collection:s.items,infiniteScroll:!0});case"discussions":return this.model.ensureFetchedTopActivities(),new t({className:"explore-discussion__wrapper",model:this.model.topActivities,collection:this.model.topActivities.items,itemView:a,channel:this.model.channel,fetchableCollectionView:r,fetchableCollectionFooterView:i,infiniteScroll:!0})}}})}),define("home/templates/channelGroupCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=t?a(t,"exploreTab"):t,t))},3:function(e,t,n,i,o){return"channels"},5:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="channel-cover__logo spacing-bottom-narrow">\n<img src="'+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?r(t,"options"):t)?r(a,"titleLogo"):a)?r(a,"cache"):a,t))+'" class="img-responsive block__item" />\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="/home/explore/'+(null!=(a=c(n,"if").call(r,null!=t?c(t,"exploreTab"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:23},end:{line:1,column:78}}}))?a:"")+"/"+l(s(null!=t?c(t,"slug"):t,t))+'/" alt="'+l(s(null!=t?c(t,"name"):t,t))+'" class="explore__link link-gray-darker">\n<div class="channel-tab__tile '+l(s(null!=t?c(t,"bannerColor"):t,t))+' text-medium">\n'+(null!=(a=c(n,"if").call(r,null!=(a=null!=t?c(t,"options"):t)?c(a,"titleLogo"):a,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:7,column:7}}}))?a:"")+"<strong>"+l(s(null!=t?c(t,"name"):t,t))+"</strong>\n</div>\n</a>\n"},useData:!0})}),define("home/views/ChannelGroupCardView",["backbone-marionette","home/templates/channelGroupCard"],function(e,t){"use strict";return e.ItemView.extend({template:t,templateHelpers:function(){var e=this.model.get("bannerColor");return{bannerColor:e?"-"+e:"",exploreTab:this.exploreTab}},initialize:function(e){this.exploreTab=e&&e.exploreTab}})}),define("home/templates/channelGroupTabCollection",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="carousel" data-role="tabs-container">\n<div data-action="switch-tab" data-tab="all" class="channel-tab__item">\n<a href="/home/explore/'+a(e.lambda(null!=t?r(t,"exploreTab"):t,t))+'/all/" class="explore__link">\n<div class="channel-tab__tile text-medium">\n<strong>'+a(r(n,"gettext").call(null!=t?t:e.nullContext||{},"All Categories",{name:"gettext",hash:{},data:o,loc:{start:{line:5,column:8},end:{line:5,column:36}}}))+"</strong>\n</div>\n</a>\n</div>\n</div>\n"},useData:!0})}),function(e){"use strict";"function"==typeof define&&define.amd?define("jquery.slick",["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,i){var o,a,r=this;if(r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,onSetPosition:null,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},e.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.paused=!1,r.positionProp=null,r.respondTo=null,r.shouldClick=!0,r.$slider=e(t),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.windowWidth=0,r.windowTimer=null,r.options=e.extend({},r.defaults,i),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,(o=r.options.responsive||null)&&o.length>-1){r.respondTo=r.options.respondTo||"window";for(a in o)o.hasOwnProperty(a)&&(r.breakpoints.push(o[a].breakpoint),r.breakpointSettings[o[a].breakpoint]=o[a].settings);r.breakpoints.sort(function(e,t){return t-e})}r.autoPlay=e.proxy(r.autoPlay,r),r.autoPlayClear=e.proxy(r.autoPlayClear,r),r.changeSlide=e.proxy(r.changeSlide,r),r.clickHandler=e.proxy(r.clickHandler,r),r.selectHandler=e.proxy(r.selectHandler,r),r.setPosition=e.proxy(r.setPosition,r),r.swipeHandler=e.proxy(r.swipeHandler,r),r.dragHandler=e.proxy(r.dragHandler,r),r.keyHandler=e.proxy(r.keyHandler,r),r.autoPlayIterator=e.proxy(r.autoPlayIterator,r),r.instanceUid=n++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.init(),r.checkResponsive()}var n=0;return t}(),t.prototype.addSlide=function(t,n,i){var o=this;if("boolean"==typeof n)i=n,n=null;else if(n<0||n>=o.slideCount)return!1;o.unload(),"number"==typeof n?0===n&&0===o.$slides.length?e(t).appendTo(o.$slideTrack):i?e(t).insertBefore(o.$slides.eq(n)):e(t).insertAfter(o.$slides.eq(n)):!0===i?e(t).prependTo(o.$slideTrack):e(t).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each(function(t,n){e(n).attr("index",t)}),o.$slidesCache=o.$slides,o.reinit()},t.prototype.animateSlide=function(t,n){var i={},o=this;if(1===o.options.slidesToShow&&!0===o.options.adaptiveHeight&&!1===o.options.vertical){var a=o.$slides.eq(o.currentSlide).outerHeight(!0);o.$list.animate({height:a},o.options.speed)}!0===o.options.rtl&&!1===o.options.vertical&&(t=-t),!1===o.transformsEnabled?!1===o.options.vertical?o.$slideTrack.animate({left:t},o.options.speed,o.options.easing,n):o.$slideTrack.animate({top:t},o.options.speed,o.options.easing,n):!1===o.cssTransitions?e({animStart:o.currentLeft}).animate({animStart:t},{duration:o.options.speed,easing:o.options.easing,step:function(e){!1===o.options.vertical?(i[o.animType]="translate("+e+"px, 0px)",o.$slideTrack.css(i)):(i[o.animType]="translate(0px,"+e+"px)",o.$slideTrack.css(i))},complete:function(){n&&n.call()}}):(o.applyTransition(),i[o.animType]=!1===o.options.vertical?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",o.$slideTrack.css(i),n&&setTimeout(function(){o.disableTransition(),n.call()},o.options.speed))},t.prototype.asNavFor=function(t){var n=this,i=null!=n.options.asNavFor?e(n.options.asNavFor).getSlick():null;null!=i&&i.slideHandler(t,!0)},t.prototype.applyTransition=function(e){var t=this,n={};n[t.transitionType]=!1===t.options.fade?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&!0!==e.paused&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;!1===e.options.infinite?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1==0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,n,i=this;if(!0===i.options.dots&&i.slideCount>i.options.slidesToShow){for(n='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)n+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";n+="</ul>",i.$dots=e(n).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("index",t)}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0===t.options.centerMode&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),!0===t.options.accessibility&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},t.prototype.checkResponsive=function(){var t,n,i,o=this,a=o.$slider.width(),r=window.innerWidth||e(window).width();if("window"===o.respondTo?i=r:"slider"===o.respondTo?i=a:"min"===o.respondTo&&(i=Math.min(r,a)),o.originalSettings.responsive&&o.originalSettings.responsive.length>-1&&null!==o.originalSettings.responsive){n=null;for(t in o.breakpoints)o.breakpoints.hasOwnProperty(t)&&i<o.breakpoints[t]&&(n=o.breakpoints[t]);null!==n?null!==o.activeBreakpoint?n!==o.activeBreakpoint&&(o.activeBreakpoint=n,o.options=e.extend({},o.originalSettings,o.breakpointSettings[n]),o.refresh()):(o.activeBreakpoint=n,o.options=e.extend({},o.originalSettings,o.breakpointSettings[n]),o.refresh()):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,o.refresh())}},t.prototype.changeSlide=function(t,n){var i,o,a,r,s,l=this,c=e(t.target);switch(c.is("a")&&t.preventDefault(),a=l.slideCount%l.options.slidesToScroll!=0,i=a?0:(l.slideCount-l.currentSlide)%l.options.slidesToScroll,t.data.message){case"previous":o=0===i?l.options.slidesToScroll:l.options.slidesToShow-i,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide-o,!1,n);break;case"next":o=0===i?l.options.slidesToScroll:i,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide+o,!1,n);break;case"index":var u=0===t.data.index?0:t.data.index||e(t.target).parent().index()*l.options.slidesToScroll;if(r=l.getNavigableIndexes(),s=0,r[u]&&r[u]===u)if(u>r[r.length-1])u=r[r.length-1];else for(var d in r){if(u<r[d]){u=s;break}s=r[d]}l.slideHandler(u,!1,n);default:return}},t.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.parent().hasClass("slick-track")&&t.$slides.unwrap().unwrap(),t.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$list.off(".slick"),e(window).off(".slick-"+t.instanceUid),e(document).off(".slick-"+t.instanceUid)},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t,n){var i=this;!1===i.cssTransitions?(i.$slides.eq(t).css({zIndex:1e3}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,n),i.$slides.eq(e).animate({opacity:0},i.options.speed,i.options.easing)):(i.applyTransition(t),i.applyTransition(e),i.$slides.eq(t).css({opacity:1,zIndex:1e3}),i.$slides.eq(e).css({opacity:0}),n&&setTimeout(function(){i.disableTransition(t),i.disableTransition(e),n.call()},i.options.speed))},t.prototype.filterSlides=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=function(){return this.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(!0===e.options.infinite)i=Math.ceil(e.slideCount/e.options.slidesToScroll);else for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},t.prototype.getLeft=function(e){var t,n,i,o=this,a=0;return o.slideOffset=0,n=o.$slides.first().outerHeight(),!0===o.options.infinite?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,a=n*o.options.slidesToShow*-1),o.slideCount%o.options.slidesToScroll!=0&&e+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(e>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(e-o.slideCount))*o.slideWidth*-1,a=(o.options.slidesToShow-(e-o.slideCount))*n*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,a=o.slideCount%o.options.slidesToScroll*n*-1))):e+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(e+o.options.slidesToShow-o.slideCount)*o.slideWidth,a=(e+o.options.slidesToShow-o.slideCount)*n),o.slideCount<=o.options.slidesToShow&&(o.slideOffset=0,a=0),!0===o.options.centerMode&&!0===o.options.infinite?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:!0===o.options.centerMode&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),t=!1===o.options.vertical?e*o.slideWidth*-1+o.slideOffset:e*n*-1+a,!0===o.options.variableWidth&&(i=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow),t=i[0]?-1*i[0].offsetLeft:0,!0===o.options.centerMode&&(i=!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow+1),t=i[0]?-1*i[0].offsetLeft:0,t+=(o.$list.width()-i.outerWidth())/2)),t},t.prototype.getNavigableIndexes=function(){for(var e=this,t=0,n=0,i=[];t<e.slideCount;)i.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i},t.prototype.getSlideCount=function(){var t=this;if(!0===t.options.swipeToSlide){var n=null;return t.$slideTrack.find(".slick-slide").each(function(i,o){if(o.offsetLeft+e(o).outerWidth()/2>-1*t.swipeLeft)return n=o,!1}),Math.abs(e(n).attr("index")-t.currentSlide)}return t.options.slidesToScroll},t.prototype.init=function(){var t=this;e(t.$slider).hasClass("slick-initialized")||(e(t.$slider).addClass("slick-initialized"),t.buildOut(),t.setProps(),t.startLoad(),
t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),null!==t.options.onInit&&t.options.onInit.call(this,t)},t.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&!0===t.options.autoplay&&e("li",t.$dots).on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}).on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()})},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),!0===t.options.pauseOnHover&&!0===t.options.autoplay&&(t.$list.on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}),t.$list.on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()})),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,function(){t.checkResponsive(),t.setPosition()}),e(window).on("resize.slick.slick-"+t.instanceUid,function(){e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()},50))}),e("*[draggable!=true]",t.$slideTrack).on("dragstart",function(e){e.preventDefault()}),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),!0===e.options.autoplay&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),n=e(this).attr("data-lazy");t.load(function(){t.animate({opacity:1},200)}).css({opacity:0}).attr("src",n).removeAttr("data-lazy").removeClass("slick-loading")})}var n,i,o,a,r=this;!0===r.options.centerMode?!0===r.options.infinite?(o=r.currentSlide+(r.options.slidesToShow/2+1),a=o+r.options.slidesToShow+2):(o=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),a=r.options.slidesToShow/2+1+2+r.currentSlide):(o=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,a=o+r.options.slidesToShow,!0===r.options.fade&&(o>0&&o--,a<=r.slideCount&&a++)),n=r.$slider.find(".slick-slide").slice(o,a),t(n),r.slideCount<=r.options.slidesToShow?(i=r.$slider.find(".slick-slide"),t(i)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(i=r.$slider.find(".slick-cloned").slice(0,r.options.slidesToShow),t(i)):0===r.currentSlide&&(i=r.$slider.find(".slick-cloned").slice(-1*r.options.slidesToShow),t(i))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.postSlide=function(e){var t=this;null!==t.options.onAfterChange&&t.options.onAfterChange.call(this,t,e),t.animating=!1,t.setPosition(),t.swipeLeft=null,!0===t.options.autoplay&&!1===t.paused&&t.autoPlay()},t.prototype.progressiveLazyLoad=function(){var t,n,i=this;(t=e("img[data-lazy]",i.$slider).length)>0&&(n=e("img[data-lazy]",i.$slider).first(),n.attr("src",n.attr("data-lazy")).removeClass("slick-loading").load(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}).error(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},t.prototype.refresh=function(){var t=this,n=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.init(),t.changeSlide({data:{message:"index",index:n}},!0)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),!0===t.options.focusOnSelect&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),null!==t.options.onReInit&&t.options.onReInit.call(this,t)},t.prototype.removeSlide=function(e,t,n){var i=this;if("boolean"==typeof e?(t=e,e=!0===t?0:i.slideCount-1):e=!0===t?--e:e,i.slideCount<1||e<0||e>i.slideCount-1)return!1;i.unload(),!0===n?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,i.reinit()},t.prototype.setCSS=function(e){var t,n,i=this,o={};!0===i.options.rtl&&(e=-e),t="left"==i.positionProp?e+"px":"0px",n="top"==i.positionProp?e+"px":"0px",o[i.positionProp]=e,!1===i.transformsEnabled?i.$slideTrack.css(o):(o={},!1===i.cssTransitions?(o[i.animType]="translate("+t+", "+n+")",i.$slideTrack.css(o)):(o[i.animType]="translate3d("+t+", "+n+", 0px)",i.$slideTrack.css(o)))},t.prototype.setDimensions=function(){var t=this;if(!1===t.options.vertical?!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),!1===t.options.vertical&&!1===t.options.variableWidth)t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length));else if(!0===t.options.variableWidth){var n=0;t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.children(".slick-slide").each(function(){n+=Math.ceil(e(this).outerWidth(!0))}),t.$slideTrack.width(Math.ceil(n)+1)}else t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length));var i=t.$slides.first().outerWidth(!0)-t.$slides.first().width();!1===t.options.variableWidth&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-i)},t.prototype.setFade=function(){var t,n=this;n.$slides.each(function(i,o){t=n.slideWidth*i*-1,!0===n.options.rtl?e(o).css({position:"relative",right:t,top:0,zIndex:800,opacity:0}):e(o).css({position:"relative",left:t,top:0,zIndex:800,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){e.$list.css("height",e.$slides.eq(e.currentSlide).outerHeight(!0))}},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),null!==e.options.onSetPosition&&e.options.onSetPosition.call(this,e)},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&!1!==e.animType},t.prototype.setSlideClasses=function(e){var t,n,i,o,a=this;a.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),n=a.$slider.find(".slick-slide"),!0===a.options.centerMode?(t=Math.floor(a.options.slidesToShow/2),!0===a.options.infinite&&(e>=t&&e<=a.slideCount-1-t?a.$slides.slice(e-t,e+t+1).addClass("slick-active"):(i=a.options.slidesToShow+e,n.slice(i-t+1,i+t+2).addClass("slick-active")),0===e?n.eq(n.length-1-a.options.slidesToShow).addClass("slick-center"):e===a.slideCount-1&&n.eq(a.options.slidesToShow).addClass("slick-center")),a.$slides.eq(e).addClass("slick-center")):e>=0&&e<=a.slideCount-a.options.slidesToShow?a.$slides.slice(e,e+a.options.slidesToShow).addClass("slick-active"):n.length<=a.options.slidesToShow?n.addClass("slick-active"):(o=a.slideCount%a.options.slidesToShow,i=!0===a.options.infinite?a.options.slidesToShow+e:e,a.options.slidesToShow==a.options.slidesToScroll&&a.slideCount-e<a.options.slidesToShow?n.slice(i-(a.options.slidesToShow-o),i+o).addClass("slick-active"):n.slice(i,i+a.options.slidesToShow).addClass("slick-active")),"ondemand"===a.options.lazyLoad&&a.lazyLoad()},t.prototype.setupInfinite=function(){var t,n,i,o=this;if(!0===o.options.fade&&(o.options.centerMode=!1),!0===o.options.infinite&&!1===o.options.fade&&(n=null,o.slideCount>o.options.slidesToShow)){for(i=!0===o.options.centerMode?o.options.slidesToShow+1:o.options.slidesToShow,t=o.slideCount;t>o.slideCount-i;t-=1)n=t-1,e(o.$slides[n]).clone(!0).attr("id","").attr("index",n-o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");for(t=0;t<i;t+=1)n=t,e(o.$slides[n]).clone(!0).attr("id","").attr("index",n+o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");o.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.selectHandler=function(t){var n=this,i=parseInt(e(t.target).parents(".slick-slide").attr("index"));if(i||(i=0),n.slideCount<=n.options.slidesToShow)return n.$slider.find(".slick-slide").removeClass("slick-active"),n.$slides.eq(i).addClass("slick-active"),!0===n.options.centerMode&&(n.$slider.find(".slick-slide").removeClass("slick-center"),n.$slides.eq(i).addClass("slick-center")),void n.asNavFor(i);n.slideHandler(i)},t.prototype.slideHandler=function(e,t,n){var i,o,a,r,s=null,l=this;if(t=t||!1,(!0!==l.animating||!0!==l.options.waitForAnimate)&&!(!0===l.options.fade&&l.currentSlide===e||l.slideCount<=l.options.slidesToShow)){if(!1===t&&l.asNavFor(e),i=e,s=l.getLeft(i),r=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?r:l.swipeLeft,!1===l.options.infinite&&!1===l.options.centerMode&&(e<0||e>l.getDotCount()*l.options.slidesToScroll))return void(!1===l.options.fade&&(i=l.currentSlide,!0!==n?l.animateSlide(r,function(){l.postSlide(i)}):l.postSlide(i)));if(!1===l.options.infinite&&!0===l.options.centerMode&&(e<0||e>l.slideCount-l.options.slidesToScroll))return void(!1===l.options.fade&&(i=l.currentSlide,!0!==n?l.animateSlide(r,function(){l.postSlide(i)}):l.postSlide(i)));if(!0===l.options.autoplay&&clearInterval(l.autoPlayTimer),o=i<0?l.slideCount%l.options.slidesToScroll!=0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+i:i>=l.slideCount?l.slideCount%l.options.slidesToScroll!=0?0:i-l.slideCount:i,l.animating=!0,null!==l.options.onBeforeChange&&e!==l.currentSlide&&l.options.onBeforeChange.call(this,l,l.currentSlide,o),a=l.currentSlide,l.currentSlide=o,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),!0===l.options.fade)return void(!0!==n?l.fadeSlide(a,o,function(){l.postSlide(o)}):l.postSlide(o));!0!==n?l.animateSlide(s,function(){l.postSlide(o)}):l.postSlide(o)}},t.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,n,i,o=this;return e=o.touchObject.startX-o.touchObject.curX,t=o.touchObject.startY-o.touchObject.curY,n=Math.atan2(t,e),i=Math.round(180*n/Math.PI),i<0&&(i=360-Math.abs(i)),i<=45&&i>=0?!1===o.options.rtl?"left":"right":i<=360&&i>=315?!1===o.options.rtl?"left":"right":i>=135&&i<=225?!1===o.options.rtl?"right":"left":"vertical"},t.prototype.swipeEnd=function(e){var t=this;if(t.dragging=!1,t.shouldClick=!(t.touchObject.swipeLength>10),void 0===t.touchObject.curX)return!1;if(t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":t.slideHandler(t.currentSlide+t.getSlideCount()),t.currentDirection=0,t.touchObject={};break;case"right":t.slideHandler(t.currentSlide-t.getSlideCount()),t.currentDirection=1,t.touchObject={}}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,n,i,o=this;return i=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!o.dragging||i&&1!==i.length)&&(t=o.getLeft(o.currentSlide),o.touchObject.curX=void 0!==i?i[0].pageX:e.clientX,o.touchObject.curY=void 0!==i?i[0].pageY:e.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),"vertical"!==o.swipeDirection()?(void 0!==e.originalEvent&&o.touchObject.swipeLength>4&&e.preventDefault(),n=(!1===o.options.rtl?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),o.swipeLeft=!1===o.options.vertical?t+o.touchObject.swipeLength*n:t+o.touchObject.swipeLength*(o.$list.height()/o.listWidth)*n,!0!==o.options.fade&&!1!==o.options.touchMove&&(!0===o.animating?(o.swipeLeft=null,!1):void o.setCSS(o.swipeLeft))):void 0)},t.prototype.swipeStart=function(e){var t,n=this;if(1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow)return n.touchObject={},!1;void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,n.dragging=!0},t.prototype.unfilterSlides=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),!0===t.options.arrows&&!0!==t.options.infinite&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.removeClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&!1===t.options.centerMode?(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")):t.currentSlide>t.slideCount-t.options.slidesToShow+e&&!0===t.options.centerMode&&(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},e.fn.slick=function(e){return this.each(function(n,i){i.slick=new t(i,e)})},e.fn.slickAdd=function(e,t,n){return this.each(function(i,o){o.slick.addSlide(e,t,n)})},e.fn.slickCurrentSlide=function(){return this.get(0).slick.getCurrent()},e.fn.slickFilter=function(e){return this.each(function(t,n){n.slick.filterSlides(e)})},e.fn.slickGoTo=function(e,t){return this.each(function(n,i){i.slick.changeSlide({data:{message:"index",index:parseInt(e)}},t)})},e.fn.slickNext=function(){return this.each(function(e,t){t.slick.changeSlide({data:{message:"next"}})})},e.fn.slickPause=function(){return this.each(function(e,t){t.slick.autoPlayClear(),t.slick.paused=!0})},e.fn.slickPlay=function(){return this.each(function(e,t){t.slick.paused=!1,t.slick.autoPlay()})},e.fn.slickPrev=function(){return this.each(function(e,t){t.slick.changeSlide({data:{message:"previous"}})})},e.fn.slickRemove=function(e,t){return this.each(function(n,i){i.slick.removeSlide(e,t)})},e.fn.slickRemoveAll=function(){return this.each(function(e,t){t.slick.removeSlide(null,null,!0)})},e.fn.slickGetOption=function(e){return this.get(0).slick.options[e]},e.fn.slickSetOption=function(e,t,n){return this.each(function(i,o){o.slick.options[e]=t,!0===n&&(o.slick.unload(),o.slick.reinit())})},e.fn.slickUnfilter=function(){return this.each(function(e,t){t.slick.unfilterSlides()})},e.fn.unslick=function(){return this.each(function(e,t){t.slick&&t.slick.destroy()})},e.fn.getSlick=function(){var e=null;return this.each(function(t,n){e=n.slick}),e}}),define("home/views/ChannelGroupTabCollectionView",["underscore","backbone-marionette","handlebars","home/views/ChannelGroupCardView","home/templates/channelGroupTabCollection","jquery.slick"],function(e,t,n,i,o){"use strict";return t.CompositeView.extend({className:"carousel-wrapper",templateHelpers:function(){return{exploreTab:this.exploreTab}},template:o,initialize:function(e){e=e||{},this.exploreTab=e.exploreTab,this.activeTab=e.activeTab},itemViewContainer:"[data-role=tabs-container]",itemView:i,itemViewOptions:function(e){return{exploreTab:this.exploreTab,attributes:{"data-action":"switch-tab","data-tab":e.id,class:"channel-tab__item"}}},getActiveTabIndex:function(){return 1+e.findIndex(this.collection.models,e.bind(function(e){return e.id===this.activeTab},this))},onCompositeCollectionRendered:function(){this.children.length&&e.defer(e.bind(this.slickify,this))},slickify:function(){this.$(this.itemViewContainer).slick({slidesToScroll:1,slidesToShow:5,centerMode:!0,focusOnSelect:!0,variableWidth:!0,initialSlide:this.getActiveTabIndex(),prevArrow:n.partials.carouselArrowLeft(),nextArrow:n.partials.carouselArrowRight()})}})}),define("home/templates/exploreChannelGroups",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div data-role="channel-groups" class="padding-gutter border-bottom"></div>\n<div data-role="content-area" class="explore__content"></div>\n'},useData:!0})}),define("home/views/ExploreChannelGroupsView",["underscore","core/UniqueModel","home/models/ChannelGroupProfile","home/models/Channel","home/views/common/TabbedView","home/views/FetchingView","home/views/ChannelGroupFeedsView","home/views/ChannelGroupTabCollectionView","home/templates/exploreChannelGroups"],function(e,t,n,i,o,a,r,s,l){"use strict";return o.extend({defaultTab:"all",template:l,regions:e.defaults({channelGroupsRegion:"[data-role=channel-groups]"},o.prototype.regions),collectionEvents:{sync:"render"},initialize:function(e){e=e||{},o.prototype.initialize.call(this,e),this.channelFeed=e.channelFeed,this.channelTabs=e.channelTabs,this.exploreTab=e.exploreTab},onDomRefresh:function(){o.prototype.onDomRefresh.call(this),this.channelGroupsRegion.show(new s({collection:this.collection,exploreTab:this.exploreTab,activeTab:this.activeTab})),this.updateTabClasses()},onRender:function(){this.updateTabClasses()},getChannelGroupProfile:function(e){var i=new t(n,{id:e.id,channel:e});return i.ensureFetchedChannel(),i},getTabView:function(e){if(!this.collection.length)return new a;var o={activeTab:this.channelFeed,exploreTab:this.exploreTab,channelGroupTab:e,tabs:this.channelTabs};if("all"===e){var s=new t(i,{slug:"spotlight"}),l=this.getChannelGroupProfile(s),c=new t(n,{id:n.ALL_CHANNEL_GROUPS_PROFILE_ID});o.model=l,o.allChannelGroupsProfile=c}else{var u=this.collection.findWhere({slug:e});if(!u)return null;o.model=this.getChannelGroupProfile(u)}return new r(o)}})}),define("home/mixins/withReactSubviews",["underscore"],function(e){"use strict";var t,n,i={},o=function(t,n){i[n.path]=t,n.module=t,n.fetching=!1,e.each(n.onFetch,function(e){e&&e()})},a=function(t,n){n.ref=t,e.each(n.onRef,function(e){e.call(n.ref)})},r=function(e,a){if(e.onFetch.push(a),i[e.path])return void o(i[e.path],e);e.fetching||(e.fetching=!0,require([e.path],function(i){t&&n?o(i,e):require(["react","react-dom"],function(a,r){t=a,n=r,o(i,e)})}))},s=function(i){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this._components=e.chain(i).map(function(e){return[e,{path:e,onFetch:[],onRef:[]}]}).object().value()}),this.renderReactSubview=function(i,o,s,l){var c=this._components[i];if(c){if(!c.module)return void r(c,e.bind(this.renderReactSubview,this,i,o,s,l));var u=n.render(t.createElement(t.createClass({displayName:"wrapper",getInitialState:function(){return o},render:function(){return t.createElement("div",{"data-view-type":"react"},t.createElement(c.module,this.state))}})),s,l);a(u,c)}},this.updateComponentProps=function(e,t){var n=this._components[e];if(n)return n.ref?void n.ref.setState(t):void n.onRef.push(function(){n.ref.setState(t)})}};return s.forget=function(){i={},t=void 0,n=void 0},s}),define("home/views/ExploreChannelGroupsReactViewWrapper",["underscore","backbone-marionette","home/mixins/withReactSubviews","home/utils/navigationUtils"],function(e,t,n,i){"use strict";var o=t.ItemView.extend({template:function(){return""},initialize:function(e){this.channelGroupsCollection=e.channelGroupsCollection,this.rankings=e.rankings,this.explorePath=e.explorePath},getChannelGroups:function(){return this.channelGroupsCollection.invoke("toJSON")},onDomRefresh:function(){this.channelGroupsCollection.length||this.channelGroupsCollection.once("sync",e.bind(function(){this.updateComponentProps(this.constructor.COMPONENTS.CONTENT,{channelGroups:this.getChannelGroups()})},this)),this.renderReactSubview(this.constructor.COMPONENTS.CONTENT,{channelGroups:this.getChannelGroups(),rankings:this.rankings,navigationUtils:i,explorePath:this.explorePath},this.$el[0])}},{COMPONENTS:{CONTENT:"core/views/react/ExploreChannelGroupsView"}});return n.call(o.prototype,o.COMPONENTS),o}),define("home/views/AllstarCollectionView",["home/views/UserCollectionView"],function(e){"use strict";return e.extend({addItemView:function(t,n,i){if(!t.get("isPrivate"))return e.prototype.addItemView.call(this,t,n,i)}})}),define("home/templates/explore",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return'<li data-action="switch-tab" data-tab="people" class="nav__item">\n<a href="/home/explore/people/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+e.escapeExpression((e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"gettext").call(null!=t?t:e.nullContext||{},"People",{name:"gettext",hash:{},data:o,loc:{start:{line:20,column:27},end:{line:20,column:47}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'},3:function(e,t,n,i,o){var a=null!=t?t:e.nullContext||{},r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<header data-role="header" data-tab="people" class="hidden module-header text-center">\n<div class="align-inline spacing-top">\n<div class="module-header__icon spacing-right text-larger">\n<span class="icon-allstar allstar__icon icon__position"></span>\n</div>\n<div class="module-header__title">\n<h1 class="text-larger text-darker">'+r(s(n,"gettext").call(a,"All-Stars",{name:"gettext",hash:{},data:o,loc:{start:{line:52,column:36},end:{line:52,column:59}}}))+'</h1>\n</div>\n</div>\n<p class="text-medium text-gray spacing-bottom-narrow">'+r(s(n,"gettext").call(a,"The star contributors and heart of the community. %(learnMore)s",{name:"gettext",hash:{learnMore:s(n,"tag").call(a,"a",{name:"tag",hash:{text:"Learn more.",href:"https://disqus.com/home/channel/announcements/discussion/channel-announcements/all_stars/"},data:o,loc:{start:{line:55,column:143},end:{line:55,column:268}}})},data:o,loc:{start:{line:55,column:55},end:{line:55,column:270}}}))+"</p>\n</header>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section-contained">\n<div class="layout layout--tablet-no-aside">\n<div class="layout__main">\n<aside class="layout__nav">\n<ul class="nav--no-aside">\n<li data-action="switch-tab" data-tab="channels" class="nav__item active">\n<a href="/home/explore/channels/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+s(l(n,"gettext").call(r,"Channels",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:27},end:{line:9,column:49}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showPeople"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:0},end:{line:27,column:7}}}))?a:"")+'<li data-action="switch-tab" data-tab="discussions" class="nav__item">\n<a href="/home/explore/discussions/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+s(l(n,"gettext").call(r,"Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:31,column:27},end:{line:31,column:52}}}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</aside>\n<div class="layout__content">\n<div class="content__wrap">\n<header data-role="header" data-tab="channels" class="hidden module-header text-center">\n'+(null!=(a=e.invokePartial(l(i,"channelsHeader"),t,{name:"channelsHeader",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+"</header>\n"+(null!=(a=l(n,"if").call(r,null!=t?l(t,"showPeople"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:45,column:0},end:{line:57,column:7}}}))?a:"")+'<header data-role="header" data-tab="discussions" class="hidden module-header text-center">\n<div class="align-inline spacing-top">\n<div class="module-header__icon spacing-right text-larger">\n<span class="icon-notification-response text-brand icon__position"></span>\n</div>\n<div class="module-header__title">\n<h1 class="text-larger text-darker">'+s(l(n,"gettext").call(r,"Discussions",{name:"gettext",hash:{},data:o,loc:{start:{line:64,column:36},end:{line:64,column:61}}}))+'</h1>\n</div>\n</div>\n<p class="text-medium text-gray spacing-bottom-narrow">'+s(l(n,"gettext").call(r,"What people are talking about.",{name:"gettext",hash:{},data:o,loc:{start:{line:67,column:55},end:{line:67,column:99}}}))+'</p>\n</header>\n<section id="content-area" data-role="content-area"></section>\n</div>\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ExploreView",["core/switches","core/constants/exploreModuleConstants","home/models/Session","home/views/common/TabbedView","home/views/common/FetchableCollectionLayout","home/views/HideOnEndFooterView","home/views/ExploreChannelGroupsView","home/views/ExploreChannelGroupsReactViewWrapper","home/views/AllstarCollectionView","home/templates/explore"],function(e,t,n,i,o,a,r,s,l,c){"use strict";var u=e.isFeatureActive("homeReact");return i.extend({defaultTab:"channels",template:c,templateHelpers:function(){return{showPeople:!n.isKnownToBeLoggedOut()}},initialize:function(e){e=e||{},i.prototype.initialize.call(this,e),this.channelId=e.channelId,this.channelFeed=e.channelFeed,this.session=n.get(),this.listenTo(this,"change:activeTab",this.updateHeader)},updateHeader:function(e){this.$("[data-role=header]").addClass("hidden"),this.$("[data-role=header][data-tab="+e+"]").removeClass("hidden")},getTabView:function(e){var n=t.TABS;switch(e){case"channels":return this.model.exploreChannelCollection.ensureFetched(),u?new s({channelGroupsCollection:this.model.exploreChannelCollection,rankings:[n.TOP,n.POPULAR,n.RECENT],explorePath:e}):new r({collection:this.model.exploreChannelCollection,activeTab:this.channelId,channelFeed:this.channelFeed,channelTabs:[n.TOP,n.POPULAR,n.RECENT],exploreTab:e});case"people":return this.model.allStars.ensureFetched(),new o({model:this.model.allStars,collection:this.model.allStars.items,fetchableCollectionView:l,fetchableCollectionFooterView:a,infiniteScroll:!0});case"discussions":return this.model.exploreChannelCollection.ensureFetched(),new r({collection:this.model.exploreChannelCollection,activeTab:this.channelId,channelFeed:this.channelFeed,channelTabs:[n.DISCUSSIONS],exploreTab:e})}}})}),define("home/templates/completeOnboarding",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){var a,r=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="onboard-complete__channel spacing-top">\n<span data-steps="'+s(r(null!=t?l(t,"steps"):t,t))+'" data-duration="550" class="onboard-complete__avatar relative__wrapper inline_block spacing-right">\n<span class="onboard-complete__img">'+(null!=(a=e.invokePartial(l(i,"channelAvatarWithDefault"),null!=t?l(t,"channel"):t,{name:"channelAvatarWithDefault",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</span>\n<span class="onboard-complete__checkmark icon-checkmark"></span>\n</span>\n<strong>'+s(r(null!=(a=null!=t?l(t,"channel"):t)?l(a,"name"):a,t))+"</strong>\n</div>\n"},3:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="spacing-top">\n'+(null!=(a=s(n,"if").call(r,s(n,"eq").call(r,null!=t?s(t,"overflowCount"):t,1,{name:"eq",hash:{},data:o,loc:{start:{line:24,column:6},end:{line:24,column:26}}}),{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:24,column:0},end:{line:28,column:7}}}))?a:"")+"</div>\n"},4:function(e,t,n,i,o){return"<strong>… and 1 other</strong>\n"},6:function(e,t,n,i,o){var a=e.lookupProperty||function(e,t){
if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<strong>… and "+e.escapeExpression(e.lambda(null!=t?a(t,"overflowCount"):t,t))+" others</strong>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="onboard-complete">\n<span class="spinner"></span>\n\n<section data-steps="1" data-duration="700" class="onboard-complete__step text-gray-darker">\n<strong>'+s(l(n,"gettext").call(r,"Building your feed…",{name:"gettext",hash:{},data:o,loc:{start:{line:7,column:8},end:{line:7,column:41}}}))+'</strong>\n</section>\n\n<section data-steps="'+s(e.lambda(null!=t?l(t,"channelsShownSteps"):t,t))+'" data-role="channels" class="onboard-complete__step text-center text-gray-darker">\n<strong>'+s(l(n,"gettext").call(r,"Adding channels you followed…",{name:"gettext",hash:{},data:o,loc:{start:{line:12,column:8},end:{line:12,column:51}}}))+"</strong>\n"+(null!=(a=l(n,"each").call(r,null!=t?l(t,"channels"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:0},end:{line:21,column:9}}}))?a:"")+(null!=(a=l(n,"if_all").call(r,null!=t?l(t,"overflowCount"):t,null!=t?l(t,"isEnglish"):t,{name:"if_all",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:0},end:{line:30,column:11}}}))?a:"")+"</section>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/CompleteOnboardingView",["underscore","backbone-marionette","home/mixins/withOnboarding","home/templates/completeOnboarding"],function(e,t,n,i){"use strict";var o=t.ItemView.extend({template:i,templateHelpers:function(){var t=this.getChannelsFollowing(),n=this.getChannelsForRender(t);return{isEnglish:"en"===window.document.documentElement.lang,channels:n,overflowCount:Math.max(t.length-this.constructor.NUM_CHANNELS_SHOWN,0),channelsShownSteps:e.range(this.constructor.ACTIVATE_CHANNEL_LIST_STEP,this.constructor.ACTIVATE_CHANNEL_LIST_STEP+this.constructor.NUM_CHANNELS_SHOWN+1).join(" ")}},getChannelsForRender:function(t){var n=this;return e.chain(t).first(this.constructor.NUM_CHANNELS_SHOWN).map(function(t,i){return{channel:t.channel.toJSON(),steps:e.range(i+n.constructor.ACTIVATE_CHANNEL_LIST_STEP+1,n.constructor.ACTIVATE_CHANNEL_LIST_STEP+n.constructor.NUM_CHANNELS_SHOWN+1).join(" ")}}).value()},onShow:function(){this.activateSteps(1)},activateSteps:function(t){this.$("[data-steps]").removeClass("active");var n=this.$("[data-steps~="+t+"]");if(!n.length)return void this.trigger("complete");n.addClass("active");var i=this.$("[data-steps~="+t+"][data-duration]").attr("data-duration")||this.constructor.DEFAULT_STEP_DURATION;e.delay(e.bind(this.activateSteps,this,t+1),i)}},{DEFAULT_STEP_DURATION:1e3,ACTIVATE_CHANNEL_LIST_STEP:2,NUM_CHANNELS_SHOWN:3});return n.call(o.prototype),o}),define("home/templates/onboarding",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,o){return" is-complete"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="onboard-banner align align--stretch'+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"numRemainingSteps"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:47},end:{line:1,column:99}}}))?a:"")+'" data-role="banner-wrapper">\n'+(null!=(a=e.invokePartial(s(i,"onboardingBanner"),t,{name:"onboardingBanner",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<div class="onboard-banner-scrolled text-center text-semibold'+(null!=(a=s(n,"unless").call(r,null!=t?s(t,"numRemainingSteps"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:61},end:{line:4,column:113}}}))?a:"")+'" data-role="fixed-banner">\n<div class="onboard-banner-scrolled__message" data-role="instructions">\n'+(null!=(a=e.invokePartial(s(i,"onboardingBannerInstructions"),t,{name:"onboardingBannerInstructions",data:o,helpers:n,partials:i,decorators:e.decorators}))?a:"")+'</div>\n<button data-action="finish" class="onboard-banner-scrolled__continue button button-medium button-outline button-padding-wider -border-light">\n'+e.escapeExpression(s(n,"gettext").call(r,"Continue",{name:"gettext",hash:{},data:o,loc:{start:{line:9,column:0},end:{line:9,column:22}}}))+' &raquo;\n</button>\n</div>\n<div class="onboard__channels section-contained-narrow content__wrap" data-role="explore"></div>\n<div class="onboard-overlay is-hidden align align--middle align--center" data-role="overlay"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/OnboardingView",["jquery","handlebars","underscore","backbone-marionette","core/constants/exploreModuleConstants","core/utils/url/parseQueryString","core/UniqueModel","home/mixins/withOnboarding","home/models/Session","home/models/Forum","home/views/CompleteOnboardingView","home/views/ExploreChannelGroupsView","home/templates/onboarding"],function(e,t,n,i,o,a,r,s,l,c,u,d,h){"use strict";var m=i.Layout.extend({className:"is-onboard-welcome",template:h,templateHelpers:function(){var e=this.constructor.NUM_STEPS;return{numTotalSteps:e,numRemainingSteps:Math.max(e-this.getStepNumber()+1,0),emailVerified:!!a().email_verified,canSkip:this.userCanSkip(),sessionUser:this.user&&this.user.toJSON()}},regions:{exploreRegion:"[data-role=explore]",overlayRegion:"[data-role=overlay]"},ui:{bannerWrapper:"[data-role=banner-wrapper]",fixedBanner:"[data-role=fixed-banner]"},events:{"click [data-action=finish]":"showCompleteOverlay","click [data-action=hide-welcome]":"hideWelcomeOverlay"},initialize:function(t){t=t||{},this.channelId=t.channelId,this.initForum(),this.session=l.get(),this.session.loadPromise().then(n.bind(function(){this.user=this.session.user,this.render()},this)),this.listenTo(this,"change:stepNumber",this.updateBanners),this.onScroll=n.bind(this.onScroll,this),e(window).on("scroll",this.onScroll)},onClose:function(){e(window).off("scroll",this.onScroll)},initForum:function(){var e=a().forum_id;if(e&&(this.forum=new r(c,{id:e}),this.forum.shouldFetch()))return void this.forum.fetch().always(n.bind(this.handleWelcome,this));this.handleWelcome()},onScroll:n.debounce(function(){this.ui.fixedBanner.toggleClass("is-visible",e(window).scrollTop()>=this.bannerBottom)},100),updateBanners:function(){var e=this.serializeData();this.mixinTemplateHelpers(e),this.ui.bannerWrapper.html(t.partials.onboardingBanner(e)),this.ui.bannerWrapper.toggleClass("is-complete",!e.numRemainingSteps),this.ui.fixedBanner.toggleClass("is-complete",!e.numRemainingSteps)},onDomRefresh:function(){var e=o.TABS;this.collection.ensureFetched(),this.exploreRegion.show(new d({collection:this.collection,activeTab:this.channelId,channelTabs:[e.TOP],exploreTab:"channels"})),this.bannerBottom=this.ui.bannerWrapper.outerHeight()},handleWelcome:function(){if(!this.forum)return void this.beginWelcomeAnimation();this.overlayRegion.ensureEl(),this.overlayRegion.$el.removeClass("is-hidden").html(t.partials.welcomeOverlay({forum:this.forum.toJSON()}))},showCompleteOverlay:function(){var e=new u;this.listenTo(e,"complete",this.completeOnboarding),this.overlayRegion.show(e),this.overlayRegion.$el.removeClass("is-hidden")},hideWelcomeOverlay:function(){this.overlayRegion.ensureEl(),this.overlayRegion.$el.addClass("is-hidden"),this.beginWelcomeAnimation()},beginWelcomeAnimation:function(){n.delay(n.bind(this.$el.removeClass,this.$el,"is-onboard-welcome"),this.constructor.WELCOME_MESSAGE_DURATION)}},{WELCOME_MESSAGE_DURATION:2e3});return s.call(m.prototype),m}),define("home/viewmodels/DiscussionCreateViewModel",["underscore","backbone","home/utils/backboneUtils","home/models/Thread","home/models/Topic","core/UniqueModel","home/collections/TopicCollection"],function(e,t,n,i,o,a,r){"use strict";return t.Model.extend({editableThreadAttrs:["title","message"],initialize:function(t,o){this.thread=o.thread||new i({forum:o.forum}),this.thread.forum.shouldFetch()&&this.thread.forum.fetch(),this.topics=new r([],{thread:this.thread}),this.listenTo(this,"change:category",this.updateTopicCategory),n.getPromiseFor(this.thread,"id").then(e.bind(this.onThreadInit,this))},onThreadInit:function(){a.set(i,this.thread),this.set(this.thread.pick(this.editableThreadAttrs)),this.topics.add(this.thread.topics.models),this.initCategory()},initCategory:function(){var e=this.thread.forum.channel,t=e&&e.getCategories();if(t){var n=this.topics.getCategoryTopics();if(!n.length){var a=this.get("title").split(i.CATEGORY_TITLE_SEPARATOR)[0];a&&t[a]&&(n=[o.getOrCreateTopic(a)])}n.length&&(n[0].set({hidden:!0}),this.set({category:n[0].get("displayName")}))}},updateTopicCategory:function(t,n){if(n){var i=this.topics.getCategoryTopics();e.each(i,this.topics.remove,this.topics);var a=o.getOrCreateTopic(n);a.set({hidden:!0}),this.topics.add(a)}},validate:function(t){var n=e.compact([this.thread.validate(e.pick(t,this.editableThreadAttrs)),this.topics.validate()]);return n.length?n:null},toJSON:function(){return e.defaults({thread:this.thread.toJSON()},t.Model.prototype.toJSON.call(this))},saveVisibleTopics:function(){this.topics.save()}})}),define("home/viewmodels/ChannelsViewModel",["backbone","core/UniqueModel","home/collections/ChannelCollection","home/models/FollowRecommendationFeed","home/models/Session"],function(e,t,n,i,o){"use strict";var a=e.Model.extend({initialize:function(){this.interestingUsers=i.createUserFollowRecommendationFeed({fetchOptions:{limit:5}}),this.promotedChannels=new n([],{listName:"promoted"}),this.sessionUserProfile=o.get().userProfile},ensureFetched:function(){this.interestingUsers.ensureFetched(),this.promotedChannels.ensureFetched(),this.sessionUserProfile.ensureFetchedAllChannels()}});return t.addType("ChannelsViewModel",a),a}),define("home/collections/common/SelectiveCollection",["jquery","underscore","backbone"],function(e,t,n){"use strict";return n.Collection.extend({initialize:function(t,i){if(t)throw Error("SelectiveCollection should be initialized with undefined models to be allowed to populate itself from a given toSelect collection");if(!(i&&i.toSelect&&i.toSelect instanceof n.Collection))throw Error("SelectiveCollection must be initialized with a toSelect collection");this.toSelect=i.toSelect,this.shouldSelect=i.shouldSelect||this.shouldSelect,this.maxSize=i.maxSize,this.order=i.order||this.order,this.selectComplete=e.Deferred(),this.toSelect.length?this.selectFrom(this.toSelect):this.toSelect.once("sync",this.selectFrom,this)},selectFrom:function(e){if(!e.length)return void this.completeSelection();this.maxSize=t.isNumber(this.maxSize)?this.maxSize:e.length;var n=this.order(e);this.resolveSelectability(n.shift(),n)},resolveSelectability:function(t,n){if(!t)return void this.completeSelection();var i=this;e.when(this.shouldSelect(t)).then(function(e){e&&i.select(t),i.length<i.maxSize?i.resolveSelectability(n.shift(),n):i.completeSelection()})},isComplete:function(){return this.selectComplete.promise()},completeSelection:function(){this.selectComplete.resolve()},select:function(e){if(this.length>=this.maxSize)return void this.completeSelection();this.add(e)},shouldSelect:function(){return!0},order:function(e){return e.toArray()}})}),define("home/viewmodels/DiscussionViewModel",["underscore","backbone","core/UniqueModel","home/collections/common/SelectiveCollection","home/models/ChannelProfile","home/models/ChannelProfileFeed"],function(e,t,n,i,o,a){"use strict";var r={},s=t.Model,l=s.prototype,c=s.extend({initialize:function(e,t){this.thread=t.thread,this.channel=t.channel||this.thread.forum.channel,!this.channel&&this.thread.shouldFetch()&&this.listenToOnce(this.thread,"sync",function(){this.channel=this.thread.forum.channel,this.trigger("changeRelated:channel")}),this.channels=new n(a,{listName:a.LIST_NAMES.promoted}),this.buildRelatedCollections()},buildRelatedCollections:function(){if(this.channel){var e=new n(o,{id:this.channel.id,channel:this.channel});e.ensureFetchedTopActivities();var t=e.topActivities.get("items"),a=this;this.coverRelatedCollection=new i(void 0,{toSelect:t,maxSize:5,shouldSelect:function(e){return e.thread!==a.thread},order:function(e){return e.shuffle()}})}},isKnownToBeNetworkThread:function(){return this.thread.has("isUserGenerated")&&!this.thread.get("isUserGenerated")},ensureFetched:function(){this.channels.ensureFetched(),this.ensureFetchedChannel()},ensureFetchedChannel:function(){this.channel?this.channel.ensureFetchedWithCounters():this.listenTo(this,"changeRelated:channel",this.ensureFetchedChannel)},toJSON:function(t){return e.defaults({thread:this.thread.toJSON()},l.toJSON.call(this,t))}},{getOrCreate:function(e,t){var n=t&&t.thread,i=n&&r[n.cid];if(i)return i;var o=new c(e,t);return n&&(r[n.cid]=o),o.ensureFetched(),o}});return c}),define("home/collections/MostLikedUserCollection",["underscore","core/api","core/collections/PaginatedCollection","core/UniqueModel","home/models/User"],function(e,t,n,i,o){"use strict";return n.extend({initialize:function(e,t){this.forum=t.forum},model:i.boundModel(o),url:t.getURL("forums/listMostLikedUsers"),fetch:function(t){return t=t||{},t.data=e.defaults({forum:this.forum,limit:20},t.data),n.prototype.fetch.call(this,t)},parse:function(){var t=n.prototype.parse.apply(this,arguments);return e.each(t,function(e){e.verb="topcommenter"}),e.filter(t,function(e){if(parseFloat(e.rep)>.7)return e})}})}),define("home/models/ForumFeed",["home/collections/FeedItemCollection","core/UniqueModel","home/models/Feed"],function(e,t,n){"use strict";var i=n.extend({initialize:function(){n.prototype.initialize.call(this,{},{collectionClass:e,collectionOptions:{type:"profile",target:"forum:"+this.id}})},shouldFetch:function(){return!this.get("items").length&&!this.get("fetching")},fetch:function(e){this.get("items").length||this.get("fetching")||this.fetchItems(e)},parse:function(e){return e.response}});return t.addType("ForumFeed",i),i}),define("home/models/ForumProfile",["underscore","backbone","core/UniqueModel","home/collections/MostLikedUserCollection","home/models/Feed","home/models/FollowRecommendationFeed","home/models/Forum","home/models/ForumFeed"],function(e,t,n,i,o,a,r,s){"use strict";var l=t.Model.extend({initialize:function(t,l){this.initializeRelated("forum",e.defaults({forum:{id:this.id}},l),r),this.recent=new n(s,{id:this.id}),this.mostLikedUsers=new o({fetchOptions:{forum:this.id}},{collectionClass:i}),this.interestingForums=a.createForumFollowRecommendationFeed(),this.interestingUsers=a.createUserFollowRecommendationFeed()},ensureFetched:function(){this.interestingForums.ensureFetched(),this.interestingUsers.ensureFetched()},toJSON:function(){return e.defaults({forum:this.forum.toJSON(),recent:this.recent.toJSON(),mostLikedUsers:this.mostLikedUsers.toJSON()},t.Model.prototype.toJSON.call(this))}});return n.addType("ForumProfile",l),l}),define("home/models/ActivityFeed",["underscore","home/models/Feed","home/collections/FeedItemCollection"],function(e,t,n){"use strict";return t.extend({initialize:function(i,o){t.prototype.initialize.call(this,i,e.extend({collectionClass:n},o))}})}),define("home/models/HomepageProfile",["jquery","underscore","backbone","core/UniqueModel","core/strings","core/config","home/models/Session","home/models/Feed","home/models/ChannelProfile","home/models/ChannelProfileFeed","home/models/FollowRecommendationFeed","home/models/ActivityFeed","home/collections/FeedItemCollection"],function(e,t,n,i,o,a,r,s,l,c,u,d,h){"use strict";var m=o.get,p=n.Model.extend({initialize:function(){var e={routingVersion:a.feedApiVersion};this.popular=new d({fetchOptions:e},{collectionOptions:{type:"home"}}),this.comments=new s({fetchOptions:e},{collectionClass:h,collectionOptions:{type:"comments"}}),this.discussions=new d({fetchOptions:e},{collectionOptions:{type:"discussions"}}),this.interestingChannels=new i(c,{listName:c.LIST_NAMES.promoted}),this.interestingUsers=u.createUserFollowRecommendationFeed(),this.spotlightProfile=new i(l,{id:this.constructor.SPOTLIGHT_ID,channel:this.constructor.SPOTLIGHT_ID},{topActivitiesOptions:{fetchOptions:{limit:3}}})},ensureFetchedSpotlightProfile:function(){this.spotlightProfile.ensureFetchedTopActivities()},ensureFetched:function(){r.isKnownToBeLoggedOut()?(this.comments.set({fetched:!0}),this.comments.fetchPromise=e.Deferred().resolve().promise(),this.popular.set({fetched:!0}),this.discussions.set({fetched:!0}),this.ensureFetchedSpotlightProfile()):(this.popular.ensureFetched().always(t.bind(function(){this.popular.items.length||this.ensureFetchedSpotlightProfile()},this)),this.comments.ensureFetched(),this.discussions.ensureFetched()),this.commentsPromise=this.comments.fetchPromise,this.interestingUsers.ensureFetched(),this.interestingChannels.ensureFetched()},initializeAndFetchInterestingForums:function(){this.interestingForums||(this.interestingForums=u.createForumFollowRecommendationFeed()),this.interestingForums.ensureFetched()}},{SPOTLIGHT_ID:"spotlight",MAX_SPOTLIGHT_ITEMS:{NUM:3,TEXT:m("3")}});return i.addType("HomepageProfile",p),p}),define("home/models/ExploreViewModel",["backbone","core/api","core/collections/ChannelCollection","home/models/Feed","home/collections/PaginatedUserCollection"],function(e,t,n,i,o){"use strict";return e.Model.extend({initialize:function(){this.exploreChannelCollection=new n([],{listName:"explore"}),this.allStars=new i({},{collectionClass:o,collectionUrl:t.getURL("internal/users/listPowerContributors")})}})}),define("home/backbone.overrides",["underscore","backbone","core/api","core/UniqueModel"],function(e,t,n,i){"use strict";t.ajax=e.wrap(t.ajax,function(e,t){return t.traditional=!0,/(?:disqus\.com|dev.disqus.org[^\/]*)\/api/.test(t.url)?n.call(t.url,t):e(t)}),t.Model.prototype.initializeRelated=function(t,n,o){var a=n&&n[t]||this.get(t);if(!a)throw Error("missing the id, attributes, or model for related model "+t);if(e.isString(a)||e.isNumber(a)){var r=a;a={},a[o.prototype.idAttribute||"id"]=r}a instanceof o||(a=new i(o,a,n)),this.unset(t),this[t]=a}}),define("home/overrides/marionette.overrides",["backbone-marionette"],function(e){"use strict";e.CompositeView.prototype.rerenderModel=function(){var e=this.$(this.itemViewContainer).detach();this.$el.html(this.renderModel()),this.$(this.itemViewContainer).replaceWith(e),this.triggerMethod("render",this)}}),define("Router",["underscore","jquery","modernizr","backbone","backbone-marionette","home/templates/preload","home/views/MainLayout","home/views/HomepageView","home/views/ActivityFeedView","home/views/NotificationsView","home/views/NotificationsLoggedOutView","home/views/ForumProfileView","home/views/ProfileView","home/views/DiscussionCreateView","home/views/DiscussionPageView","home/views/WelcomeView","home/views/ChannelProfileView","home/views/SettingsLayout","home/views/ChannelsView","home/views/ExploreView","home/views/OnboardingView","home/viewmodels/DiscussionCreateViewModel","home/viewmodels/ChannelsViewModel","home/viewmodels/DiscussionViewModel","home/collections/common/ExtensibleCollection","home/collections/ChannelCollection","home/models/Session","core/UniqueModel","home/models/UserProfile","home/models/Thread","home/models/Forum","home/models/Channel","home/models/ChannelProfile","home/models/ForumProfile","home/models/HomepageProfile","home/models/ExploreViewModel","home/utils/navigationUtils","home/utils/trackingUtils","core/utils/auth","core/utils/url/parseQueryString","core/api","core/engagement/page","core/strings","core/switches","remote/config","core/config/urls","home/backbone.overrides","home/overrides/marionette.overrides","disqus.sdk"],function(e,t,n,i,o,a,r,s,l,c,u,d,h,m,p,f,g,v,b,y,w,x,k,C,_,P,T,O,S,E,F,M,A,D,N,R,V,j,I,L,U,H,q,z,$,B){"use strict";var W=n.localstorage,G=function(e){(new window.Image).src=B.jester+"/stat.gif?event="+e},Y=q.get;return i.Router.extend({name:"home",routes:{"home/discuss/:forum(/)":"startDiscussion","home/edit/:forum/:thread(/)":"editDiscussion","home/search(/)":"search","home/user(s)(/:username)(/:feed)(/)":"profile","home/user(s)/(:username)(/:feed)(/:subfeed)(/)":"profile","by/:username(/:feed)(/)":"profile","by/:username(/:feed)(/:subfeed)(/)":"profile","home/inbox(/:feed)(/)":"inbox","home/preload(/)":"preload","home/account(/)":"account","home/notifications(/)":"notifications","home/topic(s)/:topicId(/)":"topics","home/forum(s)/:forumId(/:feed)(/)":"forums","home/discussion(s)/:forum/:thread(/:activeTab)(/:permalink)(/)":"discussion","home/ndiscussion(s)/:forum/:thread(/:activeTab)(/:permalink)(/)":"nativeDiscussion","home/follow/channel(s)/:channelId(/)":"followChannel","home/channel(s)(/)":"channelsPage","home/channel(s)/:channelId(/:feed)(/)":"channels","home/channel(s)/:channelId/topics/:topic(/)":"channelTopics","home/channel(s)/:channelId/discussion(s)/:forumId/:thread(/:activeTab)(/:permalink)(/)":"channelDiscussion","home/channel(s)/:channelId/ndiscussion(s)/:forumId/:thread(/:activeTab)(/:permalink)(/)":"nativeChannelDiscussion","home/settings(/:section)/":"settings","home/discover(/)":"channelsPage","home/explore(/)":"explore","home/explore/:activeTab(/)":"explore","home/explore/channels/:channelId(/:activeTab)(/)":"exploreChannel","home/explore/discussions/:channelId(/)":"exploreDiscussions","home(/:feed)(/)":"home"},initialize:function(e){this.CDN_ROOT=e.CDN_ROOT,this.feeds={},this.listenTo(this,"route",this.handleRouteChange),this.listenTo(this,"route",this.logRouteChange),this.messages=[],this.onboardingWithoutChannels=z.isFeatureActive("onboarding_without_channels")},bootstrap:function(){this.initSession(),this.initTracking(),this.initPageEngagementTracking(),this.initLinkHandling(),this.initMainLayout()},initTracking:function(){j.init(),j.trackVisit()},initLinkHandling:function(){t("body").on("click","a[href]",e.bind(V.handleLinkClicks,V))},initSession:function(){var t=this.session=T.get();return t.load(),t.loadPromise().then(e.bind(function(){window.Raven&&window.Raven.setUser({id:t.user.get("id"),username:t.user.get("username")}),this.loadModeratedForums()},this)),t.loadPromise().fail(function(){var e=t.provider();e&&G("home.session.rejected."+("disqus"===e?"disqus":"remote"))}),this.initUserProfile(),t},initMainLayout:function(){this.layout=new r({container:"body",session:this.session,app:this})},getCurrentView:function(){return this.layout.content.currentView},initPageEngagementTracking:function(){H.start()},loadModeratedForums:function(){this.session.loadModeratedForums()},logRouteChange:function(e){G(this.name+".route."+e)},initUserProfile:function(){var e=T.fromCookie().username;e?this.session.initUserProfile(e):this.session.once("change:id",function(e){this.session.initUserProfile(e.get("username"))},this)},execute:function(){U.off("error",V.navigateToLoginOnAuthFail),j.pageChanged(),i.Router.prototype.execute.apply(this,arguments)},ensureAuthenticated:function(t){if(U.off("error",V.navigateToLoginOnAuthFail),T.isKnownToBeLoggedOut())return V.navigateToLogin();U.on("error",V.navigateToLoginOnAuthFail),this.session.loadPromise().then(e.bind(t,this,e.tail(arguments)),V.navigateToLogin)},navigateToLandingPage:function(e){return V.navigate("/home/",e)},ensureOnboardingComplete:function(t){if(this.onboardingWithoutChannels||T.isKnownToBeLoggedOut())return t.apply(this);this.session.loadPromise().always(e.bind(function(){this.session.isLoggedIn()&&this.session.user.shouldHomeOnboard()?e.defer(this.navigateToOnboarding):t.apply(this)},this))},navigateToOnboarding:function(){var n="home/explore/",i=L(),o={};i.email_verified&&(o.email_verified=i.email_verified),i.forum_id&&(o.forum_id=i.forum_id),e.size(o)&&(n+="?"+t.param(o)),V.navigate(n,{trigger:!0,replace:!0})},ensureCanCreateOnChannel:function(t,n){var i=new O(F,{id:n});return i.shouldFetch()?(i.fetch(),void this.listenToOnce(i,"sync",e.bind.apply(e,[this.ensureCanCreateOnChannel,this].concat(e.toArray(arguments))))):!i.channel&&"gabalafou-test"!==n||!i.channel.userCanCreate(this.session.user)?this.notFound():void t.apply(this,e.tail(arguments))},ensureTab:function(e,t){e.listenTo(e,"badTab",function(){V.navigate(t,{silent:!0,replace:!0})})},preventBlacklisted:function(t){e.contains($.timelines.BLACKLISTED_FORUMS,t.forum)&&(window.top.location="https://help.disqus.com/customer/portal/articles/1689402-redirected-from-home")},preload:function(){this.preloadView=new(o.ItemView.extend({template:a})),this.layout.showView(this.preloadView)},handleRouteChange:function(e){this.setCurrentRouteName(e),V.coerceTrailingSlash(window.location)},setCurrentRouteName:function(e){this._previousRouteName=this.getCurrentRouteName(),this._currentRouteName=e},getCurrentRouteName:function(){return this._currentRouteName},getPreviousRouteName:function(){return this._previousRouteName},onboarding:function(){return this.ensureAuthenticated(function(){this.layout.showView(new f({session:this.session}),{lightBackground:!0})})},_explore:function(e){this.session.loadPromise().always(Function.bind.call(function(){this.session.isLoggedIn()&&this.session.user.shouldHomeOnboard()?(e.collection=new P([],{listName:"explore"}),this.layout.showView(new w(e))):(e.model=new R,this.layout.showView(new y(e)))},this))},explore:function(){return this.navigateToLandingPage({replace:!0})},exploreChannel:function(){return this.navigateToLandingPage({replace:!0})},exploreDiscussions:function(){return this.navigateToLandingPage({replace:!0})},renavigateToProfile:function(e){var t=e.get("username");if(!t)return this.navigateToLandingPage({replace:!0}),void this.home();V.navigate("/by/"+t+"/",{replace:!0}),this.profile(t)},settings:function(e){return this.ensureAuthenticated(function(){this.layout.showView(new v({session:this.session,activeTab:e,onboardingWithoutChannels:this.onboardingWithoutChannels}))})},channelsPage:function(){if(T.isKnownToBeLoggedOut())return V.navigate("/",{replace:!0}),this.home();this.ensureOnboardingComplete(function(){var e=new O(k,{id:"discover-view-model"});e.ensureFetched(),this.layout.showView(new b({model:e,onboardingWithoutChannels:this.onboardingWithoutChannels}))})},search:function(){return this.navigateToLandingPage({replace:!0})},profile:function(t,n,i){if(-1!==window.location.pathname.indexOf("home/user")&&V.navigate(window.location,{replace:!0,silent:!0}),!t)return this.ensureAuthenticated(function(){var e=this.session,t=e.user;return t.get("username")?void this.renavigateToProfile(t):void this.listenToOnce(e,"change:id",this.renavigateToProfile)});var o=e.find(O.pool(S),function(e){return e.user.get("username")===t});o||(o=new O(S,{username:t})),o.ensureFetched();var a=new h({model:o,activeTab:n,subTab:i});this.ensureTab(a,"/by/"+t+"/"),this.layout.showView(a)},home:function(t,n){var i=T.isKnownToBeLoggedOut();if(i)return void(L().email_verified?V.navigateToLogin():V.navigateToHomepage());this.ensureOnboardingComplete(function(){"/home/"===window.location.pathname&&V.navigate(window.location,{replace:!0,silent:!0});var o,a;if(i){var r=new P([],{listName:"explore"});r.ensureFetched(),a=new l({collection:r}),this.layout.showView(a,{lightBackground:!0})}else o=new O(N,{id:"home-view-model"}),o.ensureFetched(),a=new s({model:o,activeTab:t,onboardingWithoutChannels:this.onboardingWithoutChannels}),this.ensureTab(a,"/"),this.layout.showView(a);e.isFunction(n)&&n(),this.cleanLocalStorage()})},cleanLocalStorage:function(){if(W)try{window.localStorage.removeItem("dhome_v2oo"),window.localStorage.removeItem("whatsNewViewsRemaining"),window.localStorage.removeItem("v2SwitchoverViewsRemaining")}catch(e){}},account:function(){return V.navigate("/home/settings/account/",{trigger:!0,replace:!0})},notifications:function(){return V.navigate("/home/settings/email/",{trigger:!0,replace:!0})},ensureAdmin:function(t,n){var i=this.session;return i.fetched?I.getFromCookie().staff?t.apply(this,n):this.notFound():void i.fetch().then(e.bind(this.ensureAdmin,this,t,n),e.bind(this.notFound,this))},followChannel:function(e){return"disqusfun"===e?this.ensureAdmin(this._followChannel,arguments):this._followChannel.apply(this,arguments)},_followChannel:function(e){this.ensureAuthenticated(function(){var t=new O(M,{slug:e});t.primaryForum&&!t.primaryForum.get("isFollowing")?t.primaryForum.follow():this.listenToOnce(t,"changeRelated:primaryForum",function(){t.primaryForum.get("isFollowing")||t.primaryForum.follow()}),V.navigate("/home/channel/"+e+"/",{trigger:!0,replace:!0})})},channels:function(e){return"discussdisqus"!==e?this.navigateToLandingPage({replace:!0}):"disqusfun"===e||"gabalafou-test"===e?this.ensureAdmin(this._channels,arguments):this._channels.apply(this,arguments)},channelTopics:function(e,t){return"discussdisqus"!==e?this.navigateToLandingPage({replace:!0}):this.channels(e,"topic-"+t)},_channels:function(e,t){var n=new O(A,{id:e,channel:e});n.ensureFetched();var i=new g({model:n,activeTab:t});this.ensureTab(i,"home/channel/"+e+"/"),this.layout.showView(i)},_forums:function(e,t){var n=new O(D,{id:e}),i=n.forum,o=this;if(i.channel)return void V.navigate("/home/channel/"+i.channel.id+"/",{trigger:!0,replace:!0});i.fetch().then(function(){i.channel&&o._forums(e)},this.notFound),n.ensureFetched();var a=new d({model:n,activeTab:t,onboardingWithoutChannels:this.onboardingWithoutChannels});this.ensureTab(a,"/home/forum/"+e+"/"),this.layout.showView(a)},forums:function(e){return this.preventBlacklisted({forum:e}),"disqus-disqusfun"===e?this.ensureAdmin(this._forums,arguments):this._forums.apply(this,arguments)},topics:function(){return this.navigateToLandingPage({replace:!0})},inbox:function(e){var t,n=this.session.getOrCreateNotifications();if(n.ensureFetchedRecommendations(),!this.isSSOAuthenticated&&T.isKnownToBeLoggedOut())t=new u({model:n,onboardingWithoutChannels:this.onboardingWithoutChannels});else{if(window.location.search.indexOf("email_verified")>-1){this.messages.push({message:q.interpolate(Y("Your email's verified! Have a look around -- %(Disqus)s is a lot more than comments"),{Disqus:"Disqus"})})}t=new c({model:n,activeTab:e,disableMOTD:this.disableMOTD,onboardingWithoutChannels:this.onboardingWithoutChannels})}this.ensureTab(t,"/home/inbox/"),this.layout.showView(t)},_showDiscussionForm:function(t,n){var i=new m({session:this.session,model:new x({},e.extend({forum:t},n))});this.listenTo(i,"createThread",function(){var e=i.getThread();(new _).add(e),V.navigate(e.getDiscussionRoute(),{trigger:!0})}),this.listenTo(i,"cancelThread",function(){V.navigate("home/"+i.getForum().getForumRoute(),{trigger:!0})}),this.layout.showView(i)},startDiscussion:function(e){return-1!==e.indexOf("channel-")&&"channel-discussdisqus"!==e?this.navigateToLandingPage({replace:!0}):this.ensureAuthenticated(function(){this.ensureCanCreateOnChannel(function(){this._showDiscussionForm.apply(this,arguments)},e)},arguments)},editDiscussion:function(n,i){if(-1!==n.indexOf("channel-")&&"channel-discussdisqus"!==n)return this.navigateToLandingPage({replace:!0});var o=this.session,a=E.getOrCreateThread(n,i),r=[a.getEditPermissions(o)];return a.shouldFetch()&&r.push(a.fetch()),t.when.apply(t,r).then(e.bind(function(e){return e?this._showDiscussionForm(n,{thread:a}):void V.navigate(a.getDiscussionRoute(),{trigger:!0,replace:!0})},this),e.bind(this.notFound,this))},discussionPage:function(t,n,i,o){o=o||{};var a=E.getOrCreateThread(t,n,o.threadFetchOptions),r=C.getOrCreate({},{channel:o.channel,thread:a});this.layout.showView(new p(e.extend({model:r,session:this.session,activeTab:i,app:this},o)),{lightBackground:!0})},_discussion:function(e,t,n,i){return this.preventBlacklisted({forum:e}),"disqus-disqusfun"===e?this.ensureAdmin(this.discussionPage,[e,t,n,i]):this.discussionPage(e,t,n,i)},discussion:function(e,t,n){return-1!==e.indexOf("channel-")&&"channel-discussdisqus"!==e?this.navigateToLandingPage({replace:!0}):this._discussion(e,t,n)},
channelDiscussion:function(e,t,n,i,o){if(-1!==t.indexOf("channel-")&&"channel-discussdisqus"!==t)return this.navigateToLandingPage({replace:!0});o=o||{};var a=new O(M,{slug:e});return a.shouldFetch()&&a.fetch(),this._discussion(t,n,i,{channel:a,threadFetchOptions:{data:{related:["author"]}},noEmbed:o.noEmbed})},nativeDiscussion:function(e,t,n){return-1!==e.indexOf("channel-")&&"channel-discussdisqus"!==e?this.navigateToLandingPage({replace:!0}):this._discussion(e,t,n,{noEmbed:!0})},nativeChannelDiscussion:function(e,t,n,i){return"discussdisqus"!==e?this.navigateToLandingPage({replace:!0}):this.channelDiscussion(e,t,n,i,{noEmbed:!0})},notFound:V.notFoundRouteHandler})}),define("home/mixins/asEmbedApp",["jquery","underscore","core/api","core/frameBus","core/bus","core/utils","home/utils/navigationUtils"],function(e,t,n,i,o,a,r){"use strict";var s,l={initialize:function(n){s=e.Deferred(),this.name="embed_sidebar",this.mainLayoutIsRendered=e.Deferred(),this.listenTo(i,"mainlayoutRendered",this.mainLayoutIsRendered.resolve),this.listenTo(o,"after:render",function(){i.sendHostMessage("after:render")}),n.apply(this,t.rest(arguments)),this.listenTo(i,"showPath",this.loadPath),this.listenTo(i,"open",this.openDrawer),i.sendHostMessage("ready")},initUserProfile:function(e){s.done(e)},loadModeratedForums:e.noop,setSsoHeaders:function(e){n.headers({"X-Disqus-Publisher-API-Key":e.apiKey,"X-Disqus-Remote-Auth":e.remoteAuthS3})},loadPath:function(e){e.sso&&e.sso.apiKey&&e.sso.remoteAuthS3&&(this.setSsoHeaders(e.sso),this.isSSOAuthenticated=!0),s.resolveWith(this),this.disableMOTD=e.disableMOTD,this.mainLayoutIsRendered.done(function(){r.navigate(e.path,{trigger:!0}),i.sendHostMessage("openReady")})},openDrawer:function(){var t=e("body");t.addClass("active"),t.one(a.transitionEndEvent,function(){i.sendHostMessage("after:render"),window.document.querySelector("a").focus()})}},c={initialize:function(e){this.listenToOnce(i,"setForum",function(e){this.forum={shortname:e}}),e.apply(this,t.rest(arguments))},fetch:function(e,n){return s.then(t.bind(e,this,n))},fetchFollowedForums:e.noop,fetchFollowedChannels:e.noop};return function(e,n){e.initialize=t.wrap(e.initialize,l.initialize),e.initUserProfile=t.wrap(e.initUserProfile,l.initUserProfile),e.loadModeratedForums=l.loadModeratedForums,e.setSsoHeaders=l.setSsoHeaders,e.loadPath=l.loadPath,e.openDrawer=l.openDrawer,e.navigateToPath=l.navigateToPath,e.isSSOAuthenticated=l.isSSOAuthenticated,n.initialize=t.wrap(n.initialize,c.initialize),n.fetch=t.wrap(n.fetch,c.fetch),n.fetchFollowedForums=c.fetchFollowedForums,n.fetchFollowedChannels=c.fetchFollowedChannels}}),function(e){"use strict";function t(t){e(i).remove(),e(o).each(function(){var i=n(e(this)),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",o)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",o))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",o="[data-toggle=dropdown]",a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.prototype.toggle=function(i){var o=e(this);if(!o.is(".disabled, :disabled")){var a=n(o),r=a.hasClass("open");if(t(),!r){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(a.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;a.toggleClass("open").trigger("shown.bs.dropdown",s),o.focus()}return!1}},a.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),r=a.hasClass("open");if(!r||r&&27==t.keyCode)return 27==t.which&&a.find(o).focus(),i.click();var s=" li:not(.divider):visible a",l=a.find("[role=menu]"+s+", [role=listbox]"+s);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).focus()}}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu], [role=listbox]",a.prototype.keydown)}(jQuery),define("bootstrap/dropdown",["jquery"],function(){}),function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var o=this.options.trigger.split(" "),a=o.length;a--;){var r=o[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,r=a.test(o);r&&(o=o.replace(a,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var s=this.getPosition(),l=i[0].offsetWidth,c=i[0].offsetHeight;if(r){var u=this.$element.parent(),d=o,h=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:u.outerWidth(),p="body"==this.options.container?window.innerHeight:u.outerHeight(),f="body"==this.options.container?0:u.offset().left;o="bottom"==o&&s.top+s.height+c-h>p?"top":"top"==o&&s.top-h-c<0?"bottom":"right"==o&&s.right+l>m?"left":"left"==o&&s.left-l<f?"right":o,i.removeClass(d).addClass(o)}this.applyPlacement(this.getCalculatedOffset(o,s,l,c),o),this.hoverState=null;var g=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,g).emulateTransitionEnd(150):g()}},t.prototype.applyPlacement=function(t,n){var i,o=this.tip(),a=o[0].offsetWidth,r=o[0].offsetHeight,s=parseInt(o.css("margin-top"),10),l=parseInt(o.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(l)&&(l=0),t.top=t.top+s,t.left=t.left+l,e.offset.setOffset(o[0],e.extend({using:function(e){o.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),o.addClass("in");var c=o[0].offsetWidth,u=o[0].offsetHeight;if("top"==n&&u!=r&&(i=!0,t.top=t.top+r-u),/bottom|top/.test(n)){var d=0;t.left<0&&(d=-2*t.left,t.left=0,o.offset(t),c=o[0].offsetWidth,u=o[0].offsetHeight),this.replaceArrow(d-a+c,c,"left")}else this.replaceArrow(u-r,u,"top");i&&o.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),o=e.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),o=i.data("bs.tooltip"),a="object"==typeof n&&n;(o||"destroy"!=n)&&(o||i.data("bs.tooltip",o=new t(this,a)),"string"==typeof n&&o[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),define("bootstrap/tooltip",["jquery"],function(){}),function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(o)}).emulateTransitionEnd(300):n.$element.focus().trigger(o)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var o=e(this),a=o.data("bs.modal"),r=e.extend({},t.DEFAULTS,o.data(),"object"==typeof n&&n);a||o.data("bs.modal",a=new t(this,r)),"string"==typeof n?a[n](i):r.show&&a.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),o=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),n.data());n.is("a")&&t.preventDefault(),o.modal(a,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),define("bootstrap/modal",["jquery"],function(){}),function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var r=e.camelCase(["scroll",o].join("-"));this.$element.one(e.support.transition.end,e.proxy(a,this)).emulateTransitionEnd(350)[o](this.$element[0][r])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]()),this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!e.support.transition)return i.call(this);this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),o=i.data("bs.collapse"),a=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!o&&a.toggle&&"show"==n&&(n=!n),o||i.data("bs.collapse",o=new t(this,a)),"string"==typeof n&&o[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),o=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),a=e(o),r=a.data("bs.collapse"),s=r?"toggle":i.data(),l=i.attr("data-parent"),c=l&&e(l);r&&r.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),a.collapse(s)})}(jQuery),define("bootstrap/collapse",["jquery"],function(){}),function(e){function t(t){this.$element=e(t),this.original_text=this.$element.html(),this.settings=e.extend({},e.fn.trunk8.defaults)}function n(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText}function i(e){if(n(e)===e)return e.split(/\s/g);for(var t,o,a=[],r=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,s=r.exec(e);s&&t!==r.lastIndex;)t=r.lastIndex,s[5]?a.push(s[5]):s[1]&&a.push({tag:s[1],attribs:s[2],content:s[3],after:s[4]}),s=r.exec(e);for(o=0;o<a.length;o++)"string"!=typeof a[o]&&a[o].content&&(a[o].content=i(a[o].content));return a}function o(t,n,i){t=t.replace(i,"");var o=function(n,a){var r,s,l,c,u="";for(c=0;c<n.length;c++)r=n[c],l=e.trim(t).split(" ").length,e.trim(t).length&&("string"==typeof r?(/<br\s*\/?>/.test(r)||(1===l&&e.trim(t).length<=r.length?(r=t,"p"!==a&&"div"!==a||(r+=i),t=""):t=t.replace(r,"")),u+=e.trim(r)+(c===n.length-1||l<=1?"":" ")):(s=o(r.content,r.tag),r.after&&(t=t.replace(r.after,"")),s&&(r.after||(r.after=" "),u+="<"+r.tag+r.attribs+">"+s+"</"+r.tag+">"+r.after)));return u},a=o(n);return a.slice(a.length-i.length)===i&&(a+=i),a}function a(){var t,a,r,c,u,d,h=this.data("trunk8"),m=h.settings,p=m.width,f=m.side,g=m.fill,v=m.parseHTML,b=s.getLineHeight(this)*m.lines,y=h.original_text,w=y.length,x="";if(this.html(y),u=this.text(),v&&n(y)!==y&&(d=i(y),y=n(y),w=y.length),p===l.auto){if(this.height()<=b)return;for(t=0,a=w-1;t<=a;)r=t+(a-t>>1),c=s.eatStr(y,f,w-r,g),v&&d&&(c=o(c,d,g)),this.html(c),this.height()>b?a=r-1:(t=r+1,x=x.length>c.length?x:c);this.html(""),this.html(x),m.tooltip&&this.attr("title",u)}else isNaN(p)?e.error('Invalid width "'+p+'".'):(r=w-p,c=s.eatStr(y,f,r,g),this.html(c),m.tooltip&&this.attr("title",y))}var r,s,l={auto:"auto"};t.prototype.updateSettings=function(t){this.settings=e.extend(this.settings,t)},r={init:function(n){return this.each(function(){var i=e(this),o=i.data("trunk8");o||i.data("trunk8",o=new t(this)),o.updateSettings(n),a.call(i)})},update:function(t){return this.each(function(){var n=e(this);t&&(n.data("trunk8").original_text=t),a.call(n)})},revert:function(){return this.each(function(){var t=e(this).data("trunk8").original_text;e(this).html(t)})},getSettings:function(){return e(this.get(0)).data("trunk8").settings}},s={eatStr:function(t,n,i,o){var a,r,l=t.length,c=s.eatStr.generateKey.apply(null,arguments);if(s.eatStr.cache[c])return s.eatStr.cache[c];if("string"==typeof t&&0!==l||e.error('Invalid source string "'+t+'".'),i<0||i>l)e.error('Invalid bite size "'+i+'".');else if(0===i)return t;switch("string"!=typeof(o+"")&&e.error("Fill unable to be converted to a string."),n){case"right":return s.eatStr.cache[c]=e.trim(t.substr(0,l-i))+o;case"left":return s.eatStr.cache[c]=o+e.trim(t.substr(i));case"center":return a=l>>1,r=i>>1,s.eatStr.cache[c]=e.trim(s.eatStr(t.substr(0,l-a),"right",i-r,""))+o+e.trim(s.eatStr(t.substr(l-a),"left",r,""));default:e.error('Invalid side "'+n+'".')}},getLineHeight:function(t){var n=e(t).css("float");"none"!==n&&e(t).css("float","none");var i=e(t).css("position");"absolute"===i&&e(t).css("position","static");var o,a=e(t).html();return e(t).html("i"),o=e(t).parent().innerHeight(),e(t).html(a).css({float:n,position:i}),o}},s.eatStr.cache={},s.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},e.fn.trunk8=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.trunk8"):r.init.apply(this,arguments)},e.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:"right",tooltip:!0,width:l.auto,parseHTML:!1}}(jQuery),define("jquery.trunk8",["jquery"],function(){}),define("home/main",["home/config","home/utils/layoutUtils","Router","home/models/Session","core/config/urls","jquery","backbone","home/mixins/asEmbedApp","home/utils/sidebarUtils","home/utils/navigationUtils","bootstrap/dropdown","bootstrap/tooltip","bootstrap/modal","bootstrap/collapse","jquery.trunk8"],function(e,t,n,i,o,a,r,s,l,c){"use strict";function u(){var e=window.location;if(e.hash.length>1&&("/home"===e.pathname||"/home/"===e.pathname)){var t={pathname:"/home/"+e.hash.slice(1).replace(/^\//,""),search:e.search,hash:"",host:e.host};if(c.matchesRoute(t))return c.navigate(t,!0)}return r.history.loadUrl()}var d=function(e){window.IS_DEV?require(["fixtures/fixtures"],e):e()};return{_init:function(i){var o=new n(i);o.bootstrap(),t.isNarrowLayout()&&(a.fn.tooltip=a.noop),window.DISQUS=window.DISQUS||{},window.DISQUS.home={app:o},d(function(){r.history.start({pushState:!0,hashChange:!1,root:e.appRoot,silent:!0}),u()||o.notFound()})},init:function(e){o.cdn=e.CDN_ROOT;var t=this;l.isSidebar()&&s(n.prototype,i.prototype),a(function(){t._init(e)})}}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("raven",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Raven=e()}}(function(){return function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n||e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){function i(e){this.name="RavenConfigError",this.message=e}i.prototype=Error(),i.prototype.constructor=i,t.exports=i},{}],2:[function(e,t,n){var i=e(5);t.exports={wrapMethod:function(e,t,n){var o=e[t],a=e;if(t in e){var r="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),s=i.safeJoin(e," "),l={level:r,logger:"console",extra:{arguments:e}};"assert"===t?!1===e[0]&&(s="Assertion failed: "+(i.safeJoin(e.slice(1)," ")||"console.assert"),l.extra.arguments=e.slice(1),n&&n(s,l)):n&&n(s,l),o&&Function.prototype.apply.call(o,a,e)}}}}},{5:5}],3:[function(e,t,n){(function(n){function i(){return+new Date}function o(e,t){return b(t)?function(n){return t(n,e)}:t}function a(){this.a=!("object"!=typeof JSON||!JSON.stringify),this.b=!v($),this.c=!v(B),this.d=null,this.e=null,this.f=null,this.g=null,this.h=null,this.i=null,this.j={},this.k={release:z.SENTRY_RELEASE&&z.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this.l={method:"POST",referrerPolicy:V()?"origin":""},this.m=0,this.n=!1,this.o=Error.stackTraceLimit,this.p=z.console||{},this.q={},this.r=[],this.s=i(),this.t=[],this.u=[],this.v=null,this.w=z.location,this.x=this.w&&this.w.href,this.y();for(var e in this.p)this.q[e]=this.p[e]}var r=e(6),s=e(7),l=e(8),c=e(1),u=e(5),d=u.isErrorEvent,h=u.isDOMError,m=u.isDOMException,p=u.isError,f=u.isObject,g=u.isPlainObject,v=u.isUndefined,b=u.isFunction,y=u.isString,w=u.isArray,x=u.isEmptyObject,k=u.each,C=u.objectMerge,_=u.truncate,P=u.objectFrozen,T=u.hasKey,O=u.joinRegExp,S=u.urlencode,E=u.uuid4,F=u.htmlTreeAsString,M=u.isSameException,A=u.isSameStacktrace,D=u.parseUrl,N=u.fill,R=u.supportsFetch,V=u.supportsReferrerPolicy,j=u.serializeKeysForMessage,I=u.serializeException,L=u.sanitize,U=e(2).wrapMethod,H="source protocol user pass host port path".split(" "),q=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,z="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},$=z.document,B=z.navigator;a.prototype={VERSION:"3.27.0",debug:!1,TraceKit:r,config:function(e,t){var n=this;if(n.g)return this.z("error","Error: Raven has already been configured"),n;if(!e)return n;var i=n.k;t&&k(t,function(e,t){"tags"===e||"extra"===e||"user"===e?n.j[e]=t:i[e]=t}),n.setDSN(e),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=O(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&O(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&O(i.whitelistUrls),i.includePaths=O(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var o={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},a=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(a)?a=C(o,a):!1!==a&&(a=o),i.autoBreadcrumbs=a;var s={tryCatch:!0},l=i.instrument;return"[object Object]"==={}.toString.call(l)?l=C(s,l):!1!==l&&(l=s),i.instrument=l,r.collectWindowErrors=!!i.collectWindowErrors,n},install:function(){var e=this;return e.isSetup()&&!e.n&&(r.report.subscribe(function(){e.A.apply(e,arguments)}),e.k.captureUnhandledRejections&&e.B(),e.C(),e.k.instrument&&e.k.instrument.tryCatch&&e.D(),e.k.autoBreadcrumbs&&e.E(),e.F(),e.n=!0),Error.stackTraceLimit=e.k.stackTraceLimit,this},setDSN:function(e){var t=this,n=t.G(e),i=n.path.lastIndexOf("/"),o=n.path.substr(1,i);t.H=e,t.h=n.user,t.I=n.pass&&n.pass.substr(1),t.i=n.path.substr(i+1),t.g=t.J(n),t.K=t.g+"/"+o+"api/"+t.i+"/store/",this.y()},context:function(e,t,n){return b(e)&&(n=t||[],t=e,e={}),this.wrap(e,t).apply(this,n)},wrap:function(e,t,n){function i(){var i=[],a=arguments.length,r=!e||e&&!1!==e.deep;for(n&&b(n)&&n.apply(this,arguments);a--;)i[a]=r?o.wrap(e,arguments[a]):arguments[a];try{return t.apply(this,i)}catch(t){throw o.L(),o.captureException(t,e),t}}var o=this;if(v(t)&&!b(e))return e;if(b(e)&&(t=e,e=void 0),!b(t))return t;try{if(t.M)return t;if(t.N)return t.N}catch(e){return t}for(var a in t)T(t,a)&&(i[a]=t[a]);return i.prototype=t.prototype,t.N=i,i.M=!0,i.O=t,i},uninstall:function(){return r.report.uninstall(),this.P(),this.Q(),this.R(),this.S(),Error.stackTraceLimit=this.o,this.n=!1,this},T:function(e){this.z("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},B:function(){return this.T=this.T.bind(this),z.addEventListener&&z.addEventListener("unhandledrejection",this.T),this},P:function(){return z.removeEventListener&&z.removeEventListener("unhandledrejection",this.T),this},captureException:function(e,t){if(t=C({trimHeadFrames:0},t||{}),d(e)&&e.error)e=e.error;else{if(h(e)||m(e)){var n=e.name||(h(e)?"DOMError":"DOMException");return this.captureMessage(e.message?n+": "+e.message:n,C(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}))}if(p(e))e=e;else{if(!g(e))return this.captureMessage(e,C(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}));t=this.U(t,e),e=Error(t.message)}}this.d=e;try{this.V(r.computeStackTrace(e),t)}catch(t){if(e!==t)throw t}return this},U:function(e,t){var n=Object.keys(t).sort(),i=C(e,{message:"Non-Error exception captured with keys: "+j(n),fingerprint:[l(n)],extra:e.extra||{}});return i.extra.W=I(t),i},captureMessage:function(e,t){if(!this.k.ignoreErrors.test||!this.k.ignoreErrors.test(e)){t=t||{},e+="";var n,i=C({message:e},t);try{throw Error(e)}catch(e){n=e}n.name=null;var o=r.computeStackTrace(n),a=w(o.stack)&&o.stack[1];a&&"Raven.captureException"===a.func&&(a=o.stack[2]);var s=a&&a.url||"";if((!this.k.ignoreUrls.test||!this.k.ignoreUrls.test(s))&&(!this.k.whitelistUrls.test||this.k.whitelistUrls.test(s))){if(this.k.stacktrace||t.stacktrace||""===i.message){i.fingerprint=null==i.fingerprint?e:i.fingerprint,t=C({trimHeadFrames:0},t),t.trimHeadFrames+=1;i.stacktrace={frames:this.X(o,t).reverse()}}return i.fingerprint&&(i.fingerprint=w(i.fingerprint)?i.fingerprint:[i.fingerprint]),this.Y(i),this}}},captureBreadcrumb:function(e){var t=C({timestamp:i()/1e3},e);if(b(this.k.breadcrumbCallback)){var n=this.k.breadcrumbCallback(t);if(f(n)&&!x(n))t=n;else if(!1===n)return this}return this.u.push(t),this.u.length>this.k.maxBreadcrumbs&&this.u.shift(),this},addPlugin:function(e){return this.r.push([e,[].slice.call(arguments,1)]),this.n&&this.F(),this},setUserContext:function(e){return this.j.user=e,this},setExtraContext:function(e){return this.Z("extra",e),this},setTagsContext:function(e){return this.Z("tags",e),this},clearContext:function(){return this.j={},this},getContext:function(){return JSON.parse(s(this.j))},setEnvironment:function(e){return this.k.environment=e,this},setRelease:function(e){return this.k.release=e,this},setDataCallback:function(e){return this.k.dataCallback=o(this.k.dataCallback,e),this},setBreadcrumbCallback:function(e){return this.k.breadcrumbCallback=o(this.k.breadcrumbCallback,e),this},setShouldSendCallback:function(e){return this.k.shouldSendCallback=o(this.k.shouldSendCallback,e),this},setTransport:function(e){return this.k.transport=e,this},lastException:function(){return this.d},lastEventId:function(){return this.f},isSetup:function(){return!(!this.a||!this.g&&(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this.z("error","Error: Raven has not been configured.")),1))},afterLoad:function(){var e=z.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if($){if(e=C({eventId:this.lastEventId(),dsn:this.H,user:this.j.user||{}},e),!e.eventId)throw new c("Missing eventId");if(!e.dsn)throw new c("Missing DSN");var t=encodeURIComponent,n=[];for(var i in e)if("user"===i){var o=e.user;o.name&&n.push("name="+t(o.name)),o.email&&n.push("email="+t(o.email))}else n.push(t(i)+"="+t(e[i]));var a=this.J(this.G(e.dsn)),r=$.createElement("script");r.async=!0,r.src=a+"/api/embed/error-page/?"+n.join("&"),($.head||$.body).appendChild(r)}},L:function(){var e=this;this.m+=1,setTimeout(function(){e.m-=1})},$:function(e,t){var n,i;if(this.b){t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),$.createEvent?(n=$.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=$.createEventObject(),n.eventType=e);for(i in t)T(t,i)&&(n[i]=t[i]);if($.createEvent)$.dispatchEvent(n);else try{
$.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(e){}}},_:function(e){var t=this;return function(n){if(t.aa=null,t.v!==n){t.v=n;var i;try{i=F(n.target)}catch(e){i="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:i})}}},ba:function(){var e=this;return function(t){var n;try{n=t.target}catch(e){return}var i=n&&n.tagName;if(i&&("INPUT"===i||"TEXTAREA"===i||n.isContentEditable)){var o=e.aa;o||e._("input")(t),clearTimeout(o),e.aa=setTimeout(function(){e.aa=null},1e3)}}},ca:function(e,t){var n=D(this.w.href),i=D(t),o=D(e);this.x=t,n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),n.protocol===o.protocol&&n.host===o.host&&(e=o.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},C:function(){var e=this;e.da=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.M?e.da.apply(this.O,arguments):e.da.apply(this,arguments)}},Q:function(){this.da&&(Function.prototype.toString=this.da)},D:function(){function e(e){return function(n,i){for(var o=Array(arguments.length),a=0;a<o.length;++a)o[a]=arguments[a];var r=o[0];return b(r)&&(o[0]=t.wrap({mechanism:{type:"instrument",data:{function:e.name||"<anonymous>"}}},r)),e.apply?e.apply(this,o):e(o[0],o[1])}}var t=this,n=t.t,i=this.k.autoBreadcrumbs;N(z,"setTimeout",e,n),N(z,"setInterval",e,n),z.requestAnimationFrame&&N(z,"requestAnimationFrame",function(e){return function(n){return e(t.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:e&&e.name||"<anonymous>"}}},n))}},n);for(var o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=0;a<29;a++)!function(e){var o=z[e]&&z[e].prototype;o&&o.hasOwnProperty&&o.hasOwnProperty("addEventListener")&&(N(o,"addEventListener",function(n){return function(o,a,r,s){try{a&&a.handleEvent&&(a.handleEvent=t.wrap({mechanism:{type:"instrument",data:{target:e,function:"handleEvent",handler:a&&a.name||"<anonymous>"}}},a.handleEvent))}catch(e){}var l,c,u;return i&&i.dom&&("EventTarget"===e||"Node"===e)&&(c=t._("click"),u=t.ba(),l=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?c(e):"keypress"===t?u(e):void 0}}),n.call(this,o,t.wrap({mechanism:{type:"instrument",data:{target:e,function:"addEventListener",handler:a&&a.name||"<anonymous>"}}},a,l),r,s)}},n),N(o,"removeEventListener",function(e){return function(t,n,i,o){try{n=n&&(n.N?n.N:n)}catch(e){}return e.call(this,t,n,i,o)}},n))}(o[a])},E:function(){function e(e,n){e in n&&b(n[e])&&N(n,e,function(n){return t.wrap({mechanism:{type:"instrument",data:{function:e,handler:n&&n.name||"<anonymous>"}}},n)})}var t=this,n=this.k.autoBreadcrumbs,i=t.t;if(n.xhr&&"XMLHttpRequest"in z){var o=z.XMLHttpRequest&&z.XMLHttpRequest.prototype;N(o,"open",function(e){return function(n,i){return y(i)&&-1===i.indexOf(t.h)&&(this.ea={method:n,url:i,status_code:null}),e.apply(this,arguments)}},i),N(o,"send",function(n){return function(){function i(){if(o.ea&&4===o.readyState){try{o.ea.status_code=o.status}catch(e){}t.captureBreadcrumb({type:"http",category:"xhr",data:o.ea})}}for(var o=this,a=["onload","onerror","onprogress"],r=0;r<3;r++)e(a[r],o);return"onreadystatechange"in o&&b(o.onreadystatechange)?N(o,"onreadystatechange",function(e){return t.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:e&&e.name||"<anonymous>"}}},e,i)}):o.onreadystatechange=i,n.apply(this,arguments)}},i)}n.xhr&&R()&&N(z,"fetch",function(e){return function(){for(var n=Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];var o,a=n[0],r="GET";if("string"==typeof a?o=a:"Request"in z&&a instanceof z.Request?(o=a.url,a.method&&(r=a.method)):o=""+a,-1!==o.indexOf(t.h))return e.apply(this,n);n[1]&&n[1].method&&(r=n[1].method);var s={method:r,url:o,status_code:null};return e.apply(this,n).then(function(e){return s.status_code=e.status,t.captureBreadcrumb({type:"http",category:"fetch",data:s}),e}).catch(function(e){throw t.captureBreadcrumb({type:"http",category:"fetch",data:s,level:"error"}),e})}},i),n.dom&&this.b&&($.addEventListener?($.addEventListener("click",t._("click"),!1),$.addEventListener("keypress",t.ba(),!1)):$.attachEvent&&($.attachEvent("onclick",t._("click")),$.attachEvent("onkeypress",t.ba())));var a=z.chrome,r=a&&a.app&&a.app.runtime,s=!r&&z.history&&z.history.pushState&&z.history.replaceState;if(n.location&&s){var l=z.onpopstate;z.onpopstate=function(){if(t.ca(t.x,t.w.href),l)return l.apply(this,arguments)};var c=function(e){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&t.ca(t.x,n+""),e.apply(this,arguments)}};N(z.history,"pushState",c,i),N(z.history,"replaceState",c,i)}if(n.console&&"console"in z&&console.log){var u=function(e,n){t.captureBreadcrumb({message:e,level:n.level,category:"console"})};k(["debug","info","warn","error","log"],function(e,t){U(console,t,u)})}},R:function(){for(var e;this.t.length;){e=this.t.shift();e[0][e[1]]=e[2]}},S:function(){for(var e in this.q)this.p[e]=this.q[e]},F:function(){var e=this;k(this.r,function(t,n){n[0].apply(e,[e].concat(n[1]))})},G:function(e){var t=q.exec(e),n={},i=7;try{for(;i--;)n[H[i]]=t[i]||""}catch(t){throw new c("Invalid DSN: "+e)}if(n.pass&&!this.k.allowSecretKey)throw new c("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},J:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},A:function(e,t){t=t||{},t.mechanism=t.mechanism||{type:"onerror",handled:!1},this.m||this.V(e,t)},V:function(e,t){var n=this.X(e,t);this.$("handle",{stackInfo:e,options:t}),this.fa(e.name,e.message,e.url,e.lineno,n,t)},X:function(e,t){var n=this,i=[];if(e.stack&&e.stack.length&&(k(e.stack,function(t,o){var a=n.ga(o,e.url);a&&i.push(a)}),t&&t.trimHeadFrames))for(var o=0;o<t.trimHeadFrames&&o<i.length;o++)i[o].in_app=!1;return i=i.slice(0,this.k.stackTraceLimit)},ga:function(e,t){var n={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(n.filename=t),n.in_app=!(this.k.includePaths.test&&!this.k.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},fa:function(e,t,n,i,o,a){var r=(e?e+": ":"")+(t||"");if(!this.k.ignoreErrors.test||!this.k.ignoreErrors.test(t)&&!this.k.ignoreErrors.test(r)){var s;if(o&&o.length?(n=o[0].filename||n,o.reverse(),s={frames:o}):n&&(s={frames:[{filename:n,lineno:i,in_app:!0}]}),(!this.k.ignoreUrls.test||!this.k.ignoreUrls.test(n))&&(!this.k.whitelistUrls.test||this.k.whitelistUrls.test(n))){var l=C({exception:{values:[{type:e,value:t,stacktrace:s}]},transaction:n},a),c=l.exception.values[0];null==c.type&&""===c.value&&(c.value="Unrecoverable error caught"),!l.exception.mechanism&&l.mechanism&&(l.exception.mechanism=l.mechanism,delete l.mechanism),l.exception.mechanism=C({type:"generic",handled:!0},l.exception.mechanism||{}),this.Y(l)}}},ha:function(e){var t=this.k.maxMessageLength;if(e.message&&(e.message=_(e.message,t)),e.exception){var n=e.exception.values[0];n.value=_(n.value,t)}var i=e.request;return i&&(i.url&&(i.url=_(i.url,this.k.maxUrlLength)),i.Referer&&(i.Referer=_(i.Referer,this.k.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this.ia(e.breadcrumbs),e},ia:function(e){for(var t,n,i,o=["to","from","url"],a=0;a<e.values.length;++a)if(n=e.values[a],n.hasOwnProperty("data")&&f(n.data)&&!P(n.data)){i=C({},n.data);for(var r=0;r<3;++r)t=o[r],i.hasOwnProperty(t)&&i[t]&&(i[t]=_(i[t],this.k.maxUrlLength));e.values[a].data=i}},ja:function(){if(this.c||this.b){var e={};return this.c&&B.userAgent&&(e.headers={"User-Agent":B.userAgent}),z.location&&z.location.href&&(e.url=z.location.href),this.b&&$.referrer&&(e.headers||(e.headers={}),e.headers.Referer=$.referrer),e}},y:function(){this.ka=0,this.la=null},ma:function(){return this.ka&&i()-this.la<this.ka},na:function(e){var t=this.e;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?A(e.stacktrace,t.stacktrace):!e.exception&&!t.exception||M(e.exception,t.exception))},oa:function(e){if(!this.ma()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=R()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(e){}this.ka=n||(2*this.ka||1e3),this.la=i()}}},Y:function(e){var t=this.k,n={project:this.i,logger:t.logger,platform:"javascript"},o=this.ja();if(o&&(n.request=o),e.trimHeadFrames&&delete e.trimHeadFrames,e=C(n,e),e.tags=C(C({},this.j.tags),e.tags),e.extra=C(C({},this.j.extra),e.extra),e.extra["session:duration"]=i()-this.s,this.u&&this.u.length>0&&(e.breadcrumbs={values:[].slice.call(this.u,0)}),this.j.user&&(e.user=this.j.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),e=this.pa(e),Object.keys(e).forEach(function(t){(null==e[t]||""===e[t]||x(e[t]))&&delete e[t]}),b(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!x(e)&&(!b(t.shouldSendCallback)||t.shouldSendCallback(e)))return this.ma()?void this.z("warn","Raven dropped error due to backoff: ",e):void("number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this.qa(e):this.qa(e))},pa:function(e){return L(e,this.k.sanitizeKeys)},ra:function(){return E()},qa:function(e,t){var n=this,i=this.k;if(this.isSetup()){if(e=this.ha(e),!this.k.allowDuplicates&&this.na(e))return void this.z("warn","Raven dropped repeat event: ",e);this.f=e.event_id||(e.event_id=this.ra()),this.e=e,this.z("debug","Raven about to send:",e);var o={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this.h};this.I&&(o.sentry_secret=this.I);var a=e.exception&&e.exception.values[0];this.k.autoBreadcrumbs&&this.k.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:a?(a.type?a.type+": ":"")+a.value:e.message,event_id:e.event_id,level:e.level||"error"});var r=this.K;(i.transport||this._makeRequest).call(this,{url:r,auth:o,data:e,options:i,onSuccess:function(){n.y(),n.$("success",{data:e,src:r}),t&&t()},onError:function(i){n.z("error","Raven transport failed to send: ",i),i.request&&n.oa(i.request),n.$("failure",{data:e,src:r}),i=i||Error("Raven send failed (no additional details provided)"),t&&t(i)}})}},_makeRequest:function(e){var t=e.url+"?"+S(e.auth),n=null,i={};if(e.options.headers&&(n=this.sa(e.options.headers)),e.options.fetchParameters&&(i=this.sa(e.options.fetchParameters)),R()){i.body=s(e.data);var o=C({},this.l),a=C(o,i);return n&&(a.headers=n),z.fetch(t,a).then(function(t){if(t.ok)e.onSuccess&&e.onSuccess();else{var n=Error("Sentry error code: "+t.status);n.request=t,e.onError&&e.onError(n)}}).catch(function(){e.onError&&e.onError(Error("Sentry error code: network unavailable"))})}var r=z.XMLHttpRequest&&new z.XMLHttpRequest;if(r){("withCredentials"in r||"undefined"!=typeof XDomainRequest)&&("withCredentials"in r?r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)e.onSuccess&&e.onSuccess();else if(e.onError){var t=Error("Sentry error code: "+r.status);t.request=r,e.onError(t)}}:(r=new XDomainRequest,t=t.replace(/^https?:/,""),e.onSuccess&&(r.onload=e.onSuccess),e.onError&&(r.onerror=function(){var t=Error("Sentry error code: XDomainRequest");t.request=r,e.onError(t)})),r.open("POST",t),n&&k(n,function(e,t){r.setRequestHeader(e,t)}),r.send(s(e.data)))}},sa:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t[n]="function"==typeof i?i():i}return t},z:function(e){this.q[e]&&(this.debug||this.k.debug)&&Function.prototype.apply.call(this.q[e],this.p,[].slice.call(arguments,1))},Z:function(e,t){v(t)?delete this.j[e]:this.j[e]=C(this.j[e]||{},t)}},a.prototype.setUser=a.prototype.setUserContext,a.prototype.setReleaseContext=a.prototype.setRelease,t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,2:2,5:5,6:6,7:7,8:8}],4:[function(e,t,n){(function(n){var i=e(3),o="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},a=o.Raven,r=new i;r.noConflict=function(){return o.Raven=a,r},r.afterLoad(),t.exports=r,t.exports.Client=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{3:3}],5:[function(e,t,n){(function(n){function i(e){return"object"==typeof e&&null!==e}function o(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function a(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function r(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function s(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function l(e){return void 0===e}function c(e){return"function"==typeof e}function u(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return"[object String]"===Object.prototype.toString.call(e)}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){if(!u(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function p(){try{return new ErrorEvent(""),!0}catch(e){return!1}}function f(){try{return new DOMError(""),!0}catch(e){return!1}}function g(){try{return new DOMException(""),!0}catch(e){return!1}}function v(){if(!("fetch"in W))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function b(){if(!v())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function y(){return"function"==typeof PromiseRejectionEvent}function w(e){function t(t,n){var i=e(t)||t;return n?n(i)||i:i}return t}function x(e,t){var n,i;if(l(e.length))for(n in e)P(e,n)&&t.call(null,n,e[n]);else if(i=e.length)for(n=0;n<i;n++)t.call(null,n,e[n])}function k(e,t){return t?(x(t,function(t,n){e[t]=n}),e):e}function C(e){return!!Object.isFrozen&&Object.isFrozen(e)}function _(e,t){if("number"!=typeof t)throw Error("2nd argument to `truncate` function should be a number");return"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+"…"}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e){for(var t,n=[],i=0,o=e.length;i<o;i++)t=e[i],d(t)?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return RegExp(n.join("|"),"i")}function O(e){var t=[];return x(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.join("&")}function S(e){if("string"!=typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+(t[6]||"")+(t[8]||"")}}function E(){var e=W.crypto||W.msCrypto;if(!l(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function F(e){for(var t,n=[],i=0,o=0;e&&i++<5&&!("html"===(t=M(e))||i>1&&o+3*n.length+t.length>=80);)n.push(t),o+=t.length,e=e.parentNode;return n.reverse().join(" > ")}function M(e){var t,n,i,o,a,r=[];if(!e||!e.tagName)return"";if(r.push(e.tagName.toLowerCase()),e.id&&r.push("#"+e.id),(t=e.className)&&d(t))for(n=t.split(/\s+/),a=0;a<n.length;a++)r.push("."+n[a]);var s=["type","name","title","alt"];for(a=0;a<4;a++)i=s[a],(o=e.getAttribute(i))&&r.push("["+i+'="'+o+'"]');return r.join("")}function A(e,t){return!!(!!e^!!t)}function D(e,t){return l(e)&&l(t)}function N(e,t){return!A(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&!D(e.stacktrace,t.stacktrace)&&R(e.stacktrace,t.stacktrace))}function R(e,t){if(A(e,t))return!1;var n=e.frames,i=t.frames;if(void 0===n||void 0===i)return!1;if(n.length!==i.length)return!1;for(var o,a,r=0;r<n.length;r++)if(o=n[r],a=i[r],o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1;return!0}function V(e,t,n,i){if(null!=e){var o=e[t];e[t]=n(o),e[t].M=!0,e[t].O=o,i&&i.push([e,t,o])}}function j(e,t){if(!h(e))return"";for(var n=[],i=0;i<e.length;i++)try{n.push(e[i]+"")}catch(e){n.push("[value cannot be serialized]")}return n.join(t)}function I(e){return~-encodeURI(e).split(/%..|./).length}function L(e){return I(JSON.stringify(e))}function U(e){if("string"==typeof e){return _(e,40)}if("number"==typeof e||"boolean"==typeof e||void 0===e)return e;var t=Object.prototype.toString.call(e);return"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":"[object Function]"===t?e.name?"[Function: "+e.name+"]":"[Function]":e}function H(e,t){return 0===t?U(e):u(e)?Object.keys(e).reduce(function(n,i){return n[i]=H(e[i],t-1),n},{}):Array.isArray(e)?e.map(function(e){return H(e,t-1)}):U(e)}function q(e,t,n){if(!u(e))return e;t="number"!=typeof t?G:t,n="number"!=typeof t?Y:n;var i=H(e,t);return L(B(i))>n?q(e,t-1):i}function z(e,t){if("number"==typeof e||"string"==typeof e)return""+e;if(!Array.isArray(e))return"";if(e=e.filter(function(e){return"string"==typeof e}),0===e.length)return"[object has no keys]";if(t="number"!=typeof t?J:t,e[0].length>=t)return e[0];for(var n=e.length;n>0;n--){var i=e.slice(0,n).join(", ");if(!(i.length>t))return n===e.length?i:i+"…"}return""}function $(e,t){function n(e){return h(e)?e.map(function(e){return n(e)}):u(e)?Object.keys(e).reduce(function(t,i){return t[i]=o.test(i)?a:n(e[i]),t},{}):e}if(!h(t)||h(t)&&0===t.length)return e;var i,o=T(t),a="********";try{i=JSON.parse(B(e))}catch(t){return e}return n(i)}var B=e(7),W="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},G=3,Y=51200,J=40;t.exports={isObject:i,isError:o,isErrorEvent:a,isDOMError:r,isDOMException:s,isUndefined:l,isFunction:c,isPlainObject:u,isString:d,isArray:h,isEmptyObject:m,supportsErrorEvent:p,supportsDOMError:f,supportsDOMException:g,supportsFetch:v,supportsReferrerPolicy:b,supportsPromiseRejectionEvent:y,wrappedCallback:w,each:x,objectMerge:k,truncate:_,objectFrozen:C,hasKey:P,joinRegExp:T,urlencode:O,uuid4:E,htmlTreeAsString:F,htmlElementAsString:M,isSameException:N,isSameStacktrace:R,parseUrl:S,fill:V,safeJoin:j,serializeException:q,serializeKeysForMessage:z,sanitize:$}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{7:7}],6:[function(e,t,n){(function(n){function i(){return"undefined"==typeof document||null==document.location?"":document.location.href}function o(){return"undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:"")}var a=e(5),r={collectWindowErrors:!0,debug:!1},s="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},l=[].slice,c="?",u=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;r.report=function(){function e(e){h(),b.push(e)}function t(e){for(var t=b.length-1;t>=0;--t)b[t]===e&&b.splice(t,1)}function n(){m(),b=[]}function o(e,t){var n=null;if(!t||r.collectWindowErrors){for(var i in b)if(b.hasOwnProperty(i))try{b[i].apply(null,[e].concat(l.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function d(e,t,n,s,l){var d=null,h=a.isErrorEvent(l)?l.error:l,m=a.isErrorEvent(e)?e.message:e;if(x)r.computeStackTrace.augmentStackTraceWithInitialElement(x,t,n,m),p();else if(h&&a.isError(h))d=r.computeStackTrace(h),o(d,!0);else{var f,v={url:t,line:n,column:s},b=void 0;if("[object String]"==={}.toString.call(m)){var f=m.match(u);f&&(b=f[1],m=f[2])}v.func=c,d={name:b,message:m,url:i(),stack:[v]},o(d,!0)}return!!g&&g.apply(this,arguments)}function h(){v||(g=s.onerror,s.onerror=d,v=!0)}function m(){v&&(s.onerror=g,v=!1,g=void 0)}function p(){var e=x,t=y;y=null,x=null,w=null,o.apply(null,[e,!1].concat(t))}function f(e,t){var n=l.call(arguments,1);if(x){if(w===e)return;p()}var i=r.computeStackTrace(e);if(x=i,w=e,y=n,setTimeout(function(){w===e&&p()},i.incomplete?2e3:0),!1!==t)throw e}var g,v,b=[],y=null,w=null,x=null;return f.subscribe=e,f.unsubscribe=t,f.uninstall=n,f}(),r.computeStackTrace=function(){function e(e){if(void 0!==e.stack&&e.stack){for(var t,n,a,r=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,l=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/,h=e.stack.split("\n"),m=[],p=(/^(.*) is undefined$/.exec(e.message),0),f=h.length;p<f;++p){if(n=r.exec(h[p])){var g=n[2]&&0===n[2].indexOf("native"),v=n[2]&&0===n[2].indexOf("eval");v&&(t=d.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),a={url:g?null:n[2],func:n[1]||c,args:g?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=s.exec(h[p]))a={url:n[2],func:n[1]||c,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=l.exec(h[p])))continue;var v=n[3]&&n[3].indexOf(" > eval")>-1;v&&(t=u.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==p||n[5]||void 0===e.columnNumber||(m[0].column=e.columnNumber+1),a={url:n[3],func:n[1]||c,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!a.func&&a.line&&(a.func=c),a.url&&"blob:"===a.url.substr(0,5)){var b=new XMLHttpRequest;if(b.open("GET",a.url,!1),b.send(null),200===b.status){var y=b.responseText||"";y=y.slice(-300);var w=y.match(/\/\/# sourceMappingURL=(.*)$/);if(w){var x=w[1];"~"===x.charAt(0)&&(x=o()+x.slice(1)),a.url=x.slice(0,-4)}}}m.push(a)}return m.length?{name:e.name,message:e.message,url:i(),stack:m}:null}}function t(e,t,n,i){var o={url:t,line:n};if(o.url&&o.line){if(e.incomplete=!1,o.func||(o.func=c),e.stack.length>0&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,!1}return e.stack.unshift(o),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,o){for(var s,l,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,d=[],h={},m=!1,p=n.caller;p&&!m;p=p.caller)if(p!==a&&p!==r.report){if(l={url:null,func:c,line:null,column:null},p.name?l.func=p.name:(s=u.exec(""+p))&&(l.func=s[1]),void 0===l.func)try{l.func=s.input.substring(0,s.input.indexOf("{"))}catch(e){}h[""+p]?m=!0:h[""+p]=!0,d.push(l)}o&&d.splice(0,o);var f={name:e.name,message:e.message,url:i(),stack:d};return t(f,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),f}function a(t,o){var a=null;o=null==o?0:+o;try{if(a=e(t))return a}catch(e){if(r.debug)throw e}try{if(a=n(t,o+1))return a}catch(e){if(r.debug)throw e}return{name:t.name,message:t.message,url:i()}}return a.augmentStackTraceWithInitialElement=t,a.computeStackTraceFromStackProp=e,a}(),t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{5:5}],7:[function(e,t,n){function i(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function o(e,t,n,i){return JSON.stringify(e,r(t,i),n)}function a(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function r(e,t){var n=[],o=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,i(n,t)).join(".")+"]"}),function(r,s){if(n.length>0){var l=i(n,this);~l?n.splice(l+1):n.push(this),~l?o.splice(l,1/0,r):o.push(r),~i(n,s)&&(s=t.call(this,r,s))}else n.push(s);return null==e?s instanceof Error?a(s):s:e.call(this,r,s)}}n=t.exports=o,n.getSerialize=r},{}],8:[function(e,t,n){function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}function a(e,t,n,a,r,s){return i(o(i(i(t,e),i(a,s)),r),n)}function r(e,t,n,i,o,r,s){return a(t&n|~t&i,e,t,o,r,s)}function s(e,t,n,i,o,r,s){return a(t&i|n&~i,e,t,o,r,s)}function l(e,t,n,i,o,r,s){return a(t^n^i,e,t,o,r,s)}function c(e,t,n,i,o,r,s){return a(n^(t|~i),e,t,o,r,s)}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,o,a,u,d,h=1732584193,m=-271733879,p=-1732584194,f=271733878;for(n=0;n<e.length;n+=16)o=h,a=m,u=p,d=f,h=r(h,m,p,f,e[n],7,-680876936),f=r(f,h,m,p,e[n+1],12,-389564586),p=r(p,f,h,m,e[n+2],17,606105819),m=r(m,p,f,h,e[n+3],22,-1044525330),h=r(h,m,p,f,e[n+4],7,-176418897),f=r(f,h,m,p,e[n+5],12,1200080426),p=r(p,f,h,m,e[n+6],17,-1473231341),m=r(m,p,f,h,e[n+7],22,-45705983),h=r(h,m,p,f,e[n+8],7,1770035416),f=r(f,h,m,p,e[n+9],12,-1958414417),p=r(p,f,h,m,e[n+10],17,-42063),m=r(m,p,f,h,e[n+11],22,-1990404162),h=r(h,m,p,f,e[n+12],7,1804603682),f=r(f,h,m,p,e[n+13],12,-40341101),p=r(p,f,h,m,e[n+14],17,-1502002290),m=r(m,p,f,h,e[n+15],22,1236535329),h=s(h,m,p,f,e[n+1],5,-165796510),f=s(f,h,m,p,e[n+6],9,-1069501632),p=s(p,f,h,m,e[n+11],14,643717713),m=s(m,p,f,h,e[n],20,-373897302),h=s(h,m,p,f,e[n+5],5,-701558691),f=s(f,h,m,p,e[n+10],9,38016083),p=s(p,f,h,m,e[n+15],14,-660478335),m=s(m,p,f,h,e[n+4],20,-405537848),h=s(h,m,p,f,e[n+9],5,568446438),f=s(f,h,m,p,e[n+14],9,-1019803690),p=s(p,f,h,m,e[n+3],14,-187363961),m=s(m,p,f,h,e[n+8],20,1163531501),h=s(h,m,p,f,e[n+13],5,-1444681467),f=s(f,h,m,p,e[n+2],9,-51403784),p=s(p,f,h,m,e[n+7],14,1735328473),m=s(m,p,f,h,e[n+12],20,-1926607734),h=l(h,m,p,f,e[n+5],4,-378558),f=l(f,h,m,p,e[n+8],11,-2022574463),p=l(p,f,h,m,e[n+11],16,1839030562),m=l(m,p,f,h,e[n+14],23,-35309556),h=l(h,m,p,f,e[n+1],4,-1530992060),f=l(f,h,m,p,e[n+4],11,1272893353),p=l(p,f,h,m,e[n+7],16,-155497632),m=l(m,p,f,h,e[n+10],23,-1094730640),h=l(h,m,p,f,e[n+13],4,681279174),f=l(f,h,m,p,e[n],11,-358537222),p=l(p,f,h,m,e[n+3],16,-722521979),m=l(m,p,f,h,e[n+6],23,76029189),h=l(h,m,p,f,e[n+9],4,-640364487),f=l(f,h,m,p,e[n+12],11,-421815835),p=l(p,f,h,m,e[n+15],16,530742520),m=l(m,p,f,h,e[n+2],23,-995338651),h=c(h,m,p,f,e[n],6,-198630844),f=c(f,h,m,p,e[n+7],10,1126891415),p=c(p,f,h,m,e[n+14],15,-1416354905),m=c(m,p,f,h,e[n+5],21,-57434055),h=c(h,m,p,f,e[n+12],6,1700485571),f=c(f,h,m,p,e[n+3],10,-1894986606),p=c(p,f,h,m,e[n+10],15,-1051523),m=c(m,p,f,h,e[n+1],21,-2054922799),h=c(h,m,p,f,e[n+8],6,1873313359),f=c(f,h,m,p,e[n+15],10,-30611744),p=c(p,f,h,m,e[n+6],15,-1560198380),m=c(m,p,f,h,e[n+13],21,1309151649),h=c(h,m,p,f,e[n+4],6,-145523070),f=c(f,h,m,p,e[n+11],10,-1120210379),p=c(p,f,h,m,e[n+2],15,718787259),m=c(m,p,f,h,e[n+9],21,-343485551),h=i(h,o),m=i(m,a),p=i(p,u),f=i(f,d);return[h,m,p,f]}function d(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function h(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function m(e){return d(u(h(e),8*e.length))}function p(e,t){var n,i,o=h(e),a=[],r=[];for(a[15]=r[15]=void 0,o.length>16&&(o=u(o,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^o[n],r[n]=1549556828^o[n];return i=u(a.concat(h(t)),512+8*t.length),d(u(r.concat(i),640))}function f(e){var t,n,i="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=i.charAt(t>>>4&15)+i.charAt(15&t);return o}function g(e){return unescape(encodeURIComponent(e))}function v(e){return m(g(e))}function b(e){return f(v(e))}function y(e,t){return p(g(e),g(t))}function w(e,t){return f(y(e,t))}function x(e,t,n){return t?n?y(t,e):w(t,e):n?v(e):b(e)}t.exports=x},{}]},{},[4])(4)});
//# sourceMappingURL=main.js.map